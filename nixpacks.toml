# Configuração do Railway Nixpacks
# Garante Python + Node.js e instala dependências de sistema para OCR/Barcode

[phases.setup]
nixPkgs = ["python311", "python311Packages.pip", "nodejs_20", "zbar", "tesseract"]

[phases.install]
cmds = [
    "python3 -m venv .venv",
    ". .venv/bin/activate && pip install -r requirements.txt",
    "cd webapp && npm install"
]

[phases.build]
cmds = [
    "cd webapp && npm run build"
]

[start]
cmd = ". .venv/bin/activate && python main_multidelivery.py"

# Force deploy trigger at 2026-02-01 02:11:11
