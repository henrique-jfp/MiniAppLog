(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))u(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const w of g.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&u(w)}).observe(document,{childList:!0,subtree:!0});function s(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function u(h){if(h.ep)return;h.ep=!0;const g=s(h);fetch(h.href,g)}})();var js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ff={exports:{}},Gl={},zf={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aa=Symbol.for("react.element"),Ig=Symbol.for("react.portal"),Tg=Symbol.for("react.fragment"),Mg=Symbol.for("react.strict_mode"),kg=Symbol.for("react.profiler"),Og=Symbol.for("react.provider"),Lg=Symbol.for("react.context"),Rg=Symbol.for("react.forward_ref"),Dg=Symbol.for("react.suspense"),Pg=Symbol.for("react.memo"),Bg=Symbol.for("react.lazy"),ch=Symbol.iterator;function jg(e){return e===null||typeof e!="object"?null:(e=ch&&e[ch]||e["@@iterator"],typeof e=="function"?e:null)}var Uf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hf=Object.assign,Vf={};function po(e,n,s){this.props=e,this.context=n,this.refs=Vf,this.updater=s||Uf}po.prototype.isReactComponent={};po.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};po.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Zf(){}Zf.prototype=po.prototype;function Ku(e,n,s){this.props=e,this.context=n,this.refs=Vf,this.updater=s||Uf}var qu=Ku.prototype=new Zf;qu.constructor=Ku;Hf(qu,po.prototype);qu.isPureReactComponent=!0;var uh=Array.isArray,Wf=Object.prototype.hasOwnProperty,Ju={current:null},Gf={key:!0,ref:!0,__self:!0,__source:!0};function Yf(e,n,s){var u,h={},g=null,w=null;if(n!=null)for(u in n.ref!==void 0&&(w=n.ref),n.key!==void 0&&(g=""+n.key),n)Wf.call(n,u)&&!Gf.hasOwnProperty(u)&&(h[u]=n[u]);var A=arguments.length-2;if(A===1)h.children=s;else if(1<A){for(var S=Array(A),v=0;v<A;v++)S[v]=arguments[v+2];h.children=S}if(e&&e.defaultProps)for(u in A=e.defaultProps,A)h[u]===void 0&&(h[u]=A[u]);return{$$typeof:Aa,type:e,key:g,ref:w,props:h,_owner:Ju.current}}function Fg(e,n){return{$$typeof:Aa,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function $u(e){return typeof e=="object"&&e!==null&&e.$$typeof===Aa}function zg(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return n[s]})}var dh=/\/+/g;function Ac(e,n){return typeof e=="object"&&e!==null&&e.key!=null?zg(""+e.key):n.toString(36)}function sl(e,n,s,u,h){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var w=!1;if(e===null)w=!0;else switch(g){case"string":case"number":w=!0;break;case"object":switch(e.$$typeof){case Aa:case Ig:w=!0}}if(w)return w=e,h=h(w),e=u===""?"."+Ac(w,0):u,uh(h)?(s="",e!=null&&(s=e.replace(dh,"$&/")+"/"),sl(h,n,s,"",function(v){return v})):h!=null&&($u(h)&&(h=Fg(h,s+(!h.key||w&&w.key===h.key?"":(""+h.key).replace(dh,"$&/")+"/")+e)),n.push(h)),1;if(w=0,u=u===""?".":u+":",uh(e))for(var A=0;A<e.length;A++){g=e[A];var S=u+Ac(g,A);w+=sl(g,n,s,S,h)}else if(S=jg(e),typeof S=="function")for(e=S.call(e),A=0;!(g=e.next()).done;)g=g.value,S=u+Ac(g,A++),w+=sl(g,n,s,S,h);else if(g==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return w}function Ua(e,n,s){if(e==null)return e;var u=[],h=0;return sl(e,u,"","",function(g){return n.call(s,g,h++)}),u}function Ug(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var Dn={current:null},ol={transition:null},Hg={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:ol,ReactCurrentOwner:Ju};function Xf(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Ua,forEach:function(e,n,s){Ua(e,function(){n.apply(this,arguments)},s)},count:function(e){var n=0;return Ua(e,function(){n++}),n},toArray:function(e){return Ua(e,function(n){return n})||[]},only:function(e){if(!$u(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$e.Component=po;$e.Fragment=Tg;$e.Profiler=kg;$e.PureComponent=Ku;$e.StrictMode=Mg;$e.Suspense=Dg;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hg;$e.act=Xf;$e.cloneElement=function(e,n,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var u=Hf({},e.props),h=e.key,g=e.ref,w=e._owner;if(n!=null){if(n.ref!==void 0&&(g=n.ref,w=Ju.current),n.key!==void 0&&(h=""+n.key),e.type&&e.type.defaultProps)var A=e.type.defaultProps;for(S in n)Wf.call(n,S)&&!Gf.hasOwnProperty(S)&&(u[S]=n[S]===void 0&&A!==void 0?A[S]:n[S])}var S=arguments.length-2;if(S===1)u.children=s;else if(1<S){A=Array(S);for(var v=0;v<S;v++)A[v]=arguments[v+2];u.children=A}return{$$typeof:Aa,type:e.type,key:h,ref:g,props:u,_owner:w}};$e.createContext=function(e){return e={$$typeof:Lg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Og,_context:e},e.Consumer=e};$e.createElement=Yf;$e.createFactory=function(e){var n=Yf.bind(null,e);return n.type=e,n};$e.createRef=function(){return{current:null}};$e.forwardRef=function(e){return{$$typeof:Rg,render:e}};$e.isValidElement=$u;$e.lazy=function(e){return{$$typeof:Bg,_payload:{_status:-1,_result:e},_init:Ug}};$e.memo=function(e,n){return{$$typeof:Pg,type:e,compare:n===void 0?null:n}};$e.startTransition=function(e){var n=ol.transition;ol.transition={};try{e()}finally{ol.transition=n}};$e.unstable_act=Xf;$e.useCallback=function(e,n){return Dn.current.useCallback(e,n)};$e.useContext=function(e){return Dn.current.useContext(e)};$e.useDebugValue=function(){};$e.useDeferredValue=function(e){return Dn.current.useDeferredValue(e)};$e.useEffect=function(e,n){return Dn.current.useEffect(e,n)};$e.useId=function(){return Dn.current.useId()};$e.useImperativeHandle=function(e,n,s){return Dn.current.useImperativeHandle(e,n,s)};$e.useInsertionEffect=function(e,n){return Dn.current.useInsertionEffect(e,n)};$e.useLayoutEffect=function(e,n){return Dn.current.useLayoutEffect(e,n)};$e.useMemo=function(e,n){return Dn.current.useMemo(e,n)};$e.useReducer=function(e,n,s){return Dn.current.useReducer(e,n,s)};$e.useRef=function(e){return Dn.current.useRef(e)};$e.useState=function(e){return Dn.current.useState(e)};$e.useSyncExternalStore=function(e,n,s){return Dn.current.useSyncExternalStore(e,n,s)};$e.useTransition=function(){return Dn.current.useTransition()};$e.version="18.3.1";zf.exports=$e;var se=zf.exports;const wl=jf(se);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg=se,Zg=Symbol.for("react.element"),Wg=Symbol.for("react.fragment"),Gg=Object.prototype.hasOwnProperty,Yg=Vg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xg={key:!0,ref:!0,__self:!0,__source:!0};function Qf(e,n,s){var u,h={},g=null,w=null;s!==void 0&&(g=""+s),n.key!==void 0&&(g=""+n.key),n.ref!==void 0&&(w=n.ref);for(u in n)Gg.call(n,u)&&!Xg.hasOwnProperty(u)&&(h[u]=n[u]);if(e&&e.defaultProps)for(u in n=e.defaultProps,n)h[u]===void 0&&(h[u]=n[u]);return{$$typeof:Zg,type:e,key:g,ref:w,props:h,_owner:Yg.current}}Gl.Fragment=Wg;Gl.jsx=Qf;Gl.jsxs=Qf;Ff.exports=Gl;var y=Ff.exports,Jc={},Kf={exports:{}},rr={},qf={exports:{}},Jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(ne,ke){var ce=ne.length;ne.push(ke);e:for(;0<ce;){var Pe=ce-1>>>1,De=ne[Pe];if(0<h(De,ke))ne[Pe]=ke,ne[ce]=De,ce=Pe;else break e}}function s(ne){return ne.length===0?null:ne[0]}function u(ne){if(ne.length===0)return null;var ke=ne[0],ce=ne.pop();if(ce!==ke){ne[0]=ce;e:for(var Pe=0,De=ne.length,dt=De>>>1;Pe<dt;){var Fe=2*(Pe+1)-1,Xe=ne[Fe],ue=Fe+1,Zt=ne[ue];if(0>h(Xe,ce))ue<De&&0>h(Zt,Xe)?(ne[Pe]=Zt,ne[ue]=ce,Pe=ue):(ne[Pe]=Xe,ne[Fe]=ce,Pe=Fe);else if(ue<De&&0>h(Zt,ce))ne[Pe]=Zt,ne[ue]=ce,Pe=ue;else break e}}return ke}function h(ne,ke){var ce=ne.sortIndex-ke.sortIndex;return ce!==0?ce:ne.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var w=Date,A=w.now();e.unstable_now=function(){return w.now()-A}}var S=[],v=[],k=1,O=null,H=3,V=!1,J=!1,U=!1,xe=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ne){for(var ke=s(v);ke!==null;){if(ke.callback===null)u(v);else if(ke.startTime<=ne)u(v),ke.sortIndex=ke.expirationTime,n(S,ke);else break;ke=s(v)}}function X(ne){if(U=!1,B(ne),!J)if(s(S)!==null)J=!0,We(ge);else{var ke=s(v);ke!==null&&_e(X,ke.startTime-ne)}}function ge(ne,ke){J=!1,U&&(U=!1,P(te),te=-1),V=!0;var ce=H;try{for(B(ke),O=s(S);O!==null&&(!(O.expirationTime>ke)||ne&&!Re());){var Pe=O.callback;if(typeof Pe=="function"){O.callback=null,H=O.priorityLevel;var De=Pe(O.expirationTime<=ke);ke=e.unstable_now(),typeof De=="function"?O.callback=De:O===s(S)&&u(S),B(ke)}else u(S);O=s(S)}if(O!==null)var dt=!0;else{var Fe=s(v);Fe!==null&&_e(X,Fe.startTime-ke),dt=!1}return dt}finally{O=null,H=ce,V=!1}}var re=!1,Z=null,te=-1,ee=5,Se=-1;function Re(){return!(e.unstable_now()-Se<ee)}function me(){if(Z!==null){var ne=e.unstable_now();Se=ne;var ke=!0;try{ke=Z(!0,ne)}finally{ke?Ve():(re=!1,Z=null)}}else re=!1}var Ve;if(typeof D=="function")Ve=function(){D(me)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,$=Le.port2;Le.port1.onmessage=me,Ve=function(){$.postMessage(null)}}else Ve=function(){xe(me,0)};function We(ne){Z=ne,re||(re=!0,Ve())}function _e(ne,ke){te=xe(function(){ne(e.unstable_now())},ke)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){J||V||(J=!0,We(ge))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return H},e.unstable_getFirstCallbackNode=function(){return s(S)},e.unstable_next=function(ne){switch(H){case 1:case 2:case 3:var ke=3;break;default:ke=H}var ce=H;H=ke;try{return ne()}finally{H=ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,ke){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ce=H;H=ne;try{return ke()}finally{H=ce}},e.unstable_scheduleCallback=function(ne,ke,ce){var Pe=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Pe+ce:Pe):ce=Pe,ne){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ce+De,ne={id:k++,callback:ke,priorityLevel:ne,startTime:ce,expirationTime:De,sortIndex:-1},ce>Pe?(ne.sortIndex=ce,n(v,ne),s(S)===null&&ne===s(v)&&(U?(P(te),te=-1):U=!0,_e(X,ce-Pe))):(ne.sortIndex=De,n(S,ne),J||V||(J=!0,We(ge))),ne},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(ne){var ke=H;return function(){var ce=H;H=ke;try{return ne.apply(this,arguments)}finally{H=ce}}}})(Jf);qf.exports=Jf;var Qg=qf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg=se,nr=Qg;function fe(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $f=new Set,aa={};function bs(e,n){ao(e,n),ao(e+"Capture",n)}function ao(e,n){for(aa[e]=n,e=0;e<n.length;e++)$f.add(n[e])}var mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$c=Object.prototype.hasOwnProperty,qg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hh={},fh={};function Jg(e){return $c.call(fh,e)?!0:$c.call(hh,e)?!1:qg.test(e)?fh[e]=!0:(hh[e]=!0,!1)}function $g(e,n,s,u){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return u?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ep(e,n,s,u){if(n===null||typeof n>"u"||$g(e,n,s,u))return!0;if(u)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Pn(e,n,s,u,h,g,w){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=g,this.removeEmptyString=w}var xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xn[e]=new Pn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];xn[n]=new Pn(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xn[e]=new Pn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xn[e]=new Pn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xn[e]=new Pn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xn[e]=new Pn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xn[e]=new Pn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xn[e]=new Pn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xn[e]=new Pn(e,5,!1,e.toLowerCase(),null,!1,!1)});var ed=/[\-:]([a-z])/g;function td(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(ed,td);xn[n]=new Pn(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(ed,td);xn[n]=new Pn(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(ed,td);xn[n]=new Pn(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xn[e]=new Pn(e,1,!1,e.toLowerCase(),null,!1,!1)});xn.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xn[e]=new Pn(e,1,!1,e.toLowerCase(),null,!0,!0)});function nd(e,n,s,u){var h=xn.hasOwnProperty(n)?xn[n]:null;(h!==null?h.type!==0:u||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(ep(n,s,h,u)&&(s=null),u||h===null?Jg(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):h.mustUseProperty?e[h.propertyName]=s===null?h.type===3?!1:"":s:(n=h.attributeName,u=h.attributeNamespace,s===null?e.removeAttribute(n):(h=h.type,s=h===3||h===4&&s===!0?"":""+s,u?e.setAttributeNS(u,n,s):e.setAttribute(n,s))))}var _i=Kg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ha=Symbol.for("react.element"),Fs=Symbol.for("react.portal"),zs=Symbol.for("react.fragment"),rd=Symbol.for("react.strict_mode"),eu=Symbol.for("react.profiler"),e0=Symbol.for("react.provider"),t0=Symbol.for("react.context"),id=Symbol.for("react.forward_ref"),tu=Symbol.for("react.suspense"),nu=Symbol.for("react.suspense_list"),sd=Symbol.for("react.memo"),ji=Symbol.for("react.lazy"),n0=Symbol.for("react.offscreen"),gh=Symbol.iterator;function Po(e){return e===null||typeof e!="object"?null:(e=gh&&e[gh]||e["@@iterator"],typeof e=="function"?e:null)}var Ft=Object.assign,Sc;function Wo(e){if(Sc===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Sc=n&&n[1]||""}return`
`+Sc+e}var bc=!1;function Nc(e,n){if(!e||bc)return"";bc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(v){var u=v}Reflect.construct(e,[],n)}else{try{n.call()}catch(v){u=v}e.call(n.prototype)}else{try{throw Error()}catch(v){u=v}e()}}catch(v){if(v&&u&&typeof v.stack=="string"){for(var h=v.stack.split(`
`),g=u.stack.split(`
`),w=h.length-1,A=g.length-1;1<=w&&0<=A&&h[w]!==g[A];)A--;for(;1<=w&&0<=A;w--,A--)if(h[w]!==g[A]){if(w!==1||A!==1)do if(w--,A--,0>A||h[w]!==g[A]){var S=`
`+h[w].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=w&&0<=A);break}}}finally{bc=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Wo(e):""}function tp(e){switch(e.tag){case 5:return Wo(e.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return e=Nc(e.type,!1),e;case 11:return e=Nc(e.type.render,!1),e;case 1:return e=Nc(e.type,!0),e;default:return""}}function ru(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zs:return"Fragment";case Fs:return"Portal";case eu:return"Profiler";case rd:return"StrictMode";case tu:return"Suspense";case nu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case t0:return(e.displayName||"Context")+".Consumer";case e0:return(e._context.displayName||"Context")+".Provider";case id:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sd:return n=e.displayName||null,n!==null?n:ru(e.type)||"Memo";case ji:n=e._payload,e=e._init;try{return ru(e(n))}catch{}}return null}function np(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ru(n);case 8:return n===rd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Ji(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function r0(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function rp(e){var n=r0(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),u=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,g=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(w){u=""+w,g.call(this,w)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Va(e){e._valueTracker||(e._valueTracker=rp(e))}function i0(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),u="";return e&&(u=r0(e)?e.checked?"true":"false":e.value),e=u,e!==s?(n.setValue(e),!0):!1}function _l(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function iu(e,n){var s=n.checked;return Ft({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function ph(e,n){var s=n.defaultValue==null?"":n.defaultValue,u=n.checked!=null?n.checked:n.defaultChecked;s=Ji(n.value!=null?n.value:s),e._wrapperState={initialChecked:u,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function s0(e,n){n=n.checked,n!=null&&nd(e,"checked",n,!1)}function su(e,n){s0(e,n);var s=Ji(n.value),u=n.type;if(s!=null)u==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?ou(e,n.type,s):n.hasOwnProperty("defaultValue")&&ou(e,n.type,Ji(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function mh(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var u=n.type;if(!(u!=="submit"&&u!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function ou(e,n,s){(n!=="number"||_l(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Go=Array.isArray;function Js(e,n,s,u){if(e=e.options,n){n={};for(var h=0;h<s.length;h++)n["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=n.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&u&&(e[s].defaultSelected=!0)}else{for(s=""+Ji(s),n=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,u&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function au(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(fe(91));return Ft({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xh(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(fe(92));if(Go(s)){if(1<s.length)throw Error(fe(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:Ji(s)}}function o0(e,n){var s=Ji(n.value),u=Ji(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),u!=null&&(e.defaultValue=""+u)}function yh(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function a0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lu(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?a0(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Za,l0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,u,h){MSApp.execUnsafeLocalFunction(function(){return e(n,s,u,h)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Za=Za||document.createElement("div"),Za.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Za.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function la(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ip=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(e){ip.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Ko[n]=Ko[e]})});function c0(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Ko.hasOwnProperty(e)&&Ko[e]?(""+n).trim():n+"px"}function u0(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var u=s.indexOf("--")===0,h=c0(s,n[s],u);s==="float"&&(s="cssFloat"),u?e.setProperty(s,h):e[s]=h}}var sp=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cu(e,n){if(n){if(sp[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(fe(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(fe(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(fe(61))}if(n.style!=null&&typeof n.style!="object")throw Error(fe(62))}}function uu(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var du=null;function od(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hu=null,$s=null,eo=null;function wh(e){if(e=Na(e)){if(typeof hu!="function")throw Error(fe(280));var n=e.stateNode;n&&(n=ql(n),hu(e.stateNode,e.type,n))}}function d0(e){$s?eo?eo.push(e):eo=[e]:$s=e}function h0(){if($s){var e=$s,n=eo;if(eo=$s=null,wh(e),n)for(e=0;e<n.length;e++)wh(n[e])}}function f0(e,n){return e(n)}function g0(){}var Ic=!1;function p0(e,n,s){if(Ic)return e(n,s);Ic=!0;try{return f0(e,n,s)}finally{Ic=!1,($s!==null||eo!==null)&&(g0(),h0())}}function ca(e,n){var s=e.stateNode;if(s===null)return null;var u=ql(s);if(u===null)return null;s=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(fe(231,n,typeof s));return s}var fu=!1;if(mi)try{var Bo={};Object.defineProperty(Bo,"passive",{get:function(){fu=!0}}),window.addEventListener("test",Bo,Bo),window.removeEventListener("test",Bo,Bo)}catch{fu=!1}function op(e,n,s,u,h,g,w,A,S){var v=Array.prototype.slice.call(arguments,3);try{n.apply(s,v)}catch(k){this.onError(k)}}var qo=!1,vl=null,Cl=!1,gu=null,ap={onError:function(e){qo=!0,vl=e}};function lp(e,n,s,u,h,g,w,A,S){qo=!1,vl=null,op.apply(ap,arguments)}function cp(e,n,s,u,h,g,w,A,S){if(lp.apply(this,arguments),qo){if(qo){var v=vl;qo=!1,vl=null}else throw Error(fe(198));Cl||(Cl=!0,gu=v)}}function Ns(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function m0(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _h(e){if(Ns(e)!==e)throw Error(fe(188))}function up(e){var n=e.alternate;if(!n){if(n=Ns(e),n===null)throw Error(fe(188));return n!==e?null:e}for(var s=e,u=n;;){var h=s.return;if(h===null)break;var g=h.alternate;if(g===null){if(u=h.return,u!==null){s=u;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===s)return _h(h),e;if(g===u)return _h(h),n;g=g.sibling}throw Error(fe(188))}if(s.return!==u.return)s=h,u=g;else{for(var w=!1,A=h.child;A;){if(A===s){w=!0,s=h,u=g;break}if(A===u){w=!0,u=h,s=g;break}A=A.sibling}if(!w){for(A=g.child;A;){if(A===s){w=!0,s=g,u=h;break}if(A===u){w=!0,u=g,s=h;break}A=A.sibling}if(!w)throw Error(fe(189))}}if(s.alternate!==u)throw Error(fe(190))}if(s.tag!==3)throw Error(fe(188));return s.stateNode.current===s?e:n}function x0(e){return e=up(e),e!==null?y0(e):null}function y0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=y0(e);if(n!==null)return n;e=e.sibling}return null}var w0=nr.unstable_scheduleCallback,vh=nr.unstable_cancelCallback,dp=nr.unstable_shouldYield,hp=nr.unstable_requestPaint,Vt=nr.unstable_now,fp=nr.unstable_getCurrentPriorityLevel,ad=nr.unstable_ImmediatePriority,_0=nr.unstable_UserBlockingPriority,El=nr.unstable_NormalPriority,gp=nr.unstable_LowPriority,v0=nr.unstable_IdlePriority,Yl=null,$r=null;function pp(e){if($r&&typeof $r.onCommitFiberRoot=="function")try{$r.onCommitFiberRoot(Yl,e,void 0,(e.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:yp,mp=Math.log,xp=Math.LN2;function yp(e){return e>>>=0,e===0?32:31-(mp(e)/xp|0)|0}var Wa=64,Ga=4194304;function Yo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Al(e,n){var s=e.pendingLanes;if(s===0)return 0;var u=0,h=e.suspendedLanes,g=e.pingedLanes,w=s&268435455;if(w!==0){var A=w&~h;A!==0?u=Yo(A):(g&=w,g!==0&&(u=Yo(g)))}else w=s&~h,w!==0?u=Yo(w):g!==0&&(u=Yo(g));if(u===0)return 0;if(n!==0&&n!==u&&!(n&h)&&(h=u&-u,g=n&-n,h>=g||h===16&&(g&4194240)!==0))return n;if(u&4&&(u|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=u;0<n;)s=31-Dr(n),h=1<<s,u|=e[s],n&=~h;return u}function wp(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _p(e,n){for(var s=e.suspendedLanes,u=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes;0<g;){var w=31-Dr(g),A=1<<w,S=h[w];S===-1?(!(A&s)||A&u)&&(h[w]=wp(A,n)):S<=n&&(e.expiredLanes|=A),g&=~A}}function pu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function C0(){var e=Wa;return Wa<<=1,!(Wa&4194240)&&(Wa=64),e}function Tc(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Sa(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Dr(n),e[n]=s}function vp(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var u=e.eventTimes;for(e=e.expirationTimes;0<s;){var h=31-Dr(s),g=1<<h;n[h]=0,u[h]=-1,e[h]=-1,s&=~g}}function ld(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var u=31-Dr(s),h=1<<u;h&n|e[u]&n&&(e[u]|=n),s&=~h}}var xt=0;function E0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var A0,cd,S0,b0,N0,mu=!1,Ya=[],Zi=null,Wi=null,Gi=null,ua=new Map,da=new Map,zi=[],Cp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ch(e,n){switch(e){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":ua.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(n.pointerId)}}function jo(e,n,s,u,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:s,eventSystemFlags:u,nativeEvent:g,targetContainers:[h]},n!==null&&(n=Na(n),n!==null&&cd(n)),e):(e.eventSystemFlags|=u,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function Ep(e,n,s,u,h){switch(n){case"focusin":return Zi=jo(Zi,e,n,s,u,h),!0;case"dragenter":return Wi=jo(Wi,e,n,s,u,h),!0;case"mouseover":return Gi=jo(Gi,e,n,s,u,h),!0;case"pointerover":var g=h.pointerId;return ua.set(g,jo(ua.get(g)||null,e,n,s,u,h)),!0;case"gotpointercapture":return g=h.pointerId,da.set(g,jo(da.get(g)||null,e,n,s,u,h)),!0}return!1}function I0(e){var n=ms(e.target);if(n!==null){var s=Ns(n);if(s!==null){if(n=s.tag,n===13){if(n=m0(s),n!==null){e.blockedOn=n,N0(e.priority,function(){S0(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function al(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=xu(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var u=new s.constructor(s.type,s);du=u,s.target.dispatchEvent(u),du=null}else return n=Na(s),n!==null&&cd(n),e.blockedOn=s,!1;n.shift()}return!0}function Eh(e,n,s){al(e)&&s.delete(n)}function Ap(){mu=!1,Zi!==null&&al(Zi)&&(Zi=null),Wi!==null&&al(Wi)&&(Wi=null),Gi!==null&&al(Gi)&&(Gi=null),ua.forEach(Eh),da.forEach(Eh)}function Fo(e,n){e.blockedOn===n&&(e.blockedOn=null,mu||(mu=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,Ap)))}function ha(e){function n(h){return Fo(h,e)}if(0<Ya.length){Fo(Ya[0],e);for(var s=1;s<Ya.length;s++){var u=Ya[s];u.blockedOn===e&&(u.blockedOn=null)}}for(Zi!==null&&Fo(Zi,e),Wi!==null&&Fo(Wi,e),Gi!==null&&Fo(Gi,e),ua.forEach(n),da.forEach(n),s=0;s<zi.length;s++)u=zi[s],u.blockedOn===e&&(u.blockedOn=null);for(;0<zi.length&&(s=zi[0],s.blockedOn===null);)I0(s),s.blockedOn===null&&zi.shift()}var to=_i.ReactCurrentBatchConfig,Sl=!0;function Sp(e,n,s,u){var h=xt,g=to.transition;to.transition=null;try{xt=1,ud(e,n,s,u)}finally{xt=h,to.transition=g}}function bp(e,n,s,u){var h=xt,g=to.transition;to.transition=null;try{xt=4,ud(e,n,s,u)}finally{xt=h,to.transition=g}}function ud(e,n,s,u){if(Sl){var h=xu(e,n,s,u);if(h===null)Fc(e,n,u,bl,s),Ch(e,u);else if(Ep(h,e,n,s,u))u.stopPropagation();else if(Ch(e,u),n&4&&-1<Cp.indexOf(e)){for(;h!==null;){var g=Na(h);if(g!==null&&A0(g),g=xu(e,n,s,u),g===null&&Fc(e,n,u,bl,s),g===h)break;h=g}h!==null&&u.stopPropagation()}else Fc(e,n,u,null,s)}}var bl=null;function xu(e,n,s,u){if(bl=null,e=od(u),e=ms(e),e!==null)if(n=Ns(e),n===null)e=null;else if(s=n.tag,s===13){if(e=m0(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return bl=e,null}function T0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fp()){case ad:return 1;case _0:return 4;case El:case gp:return 16;case v0:return 536870912;default:return 16}default:return 16}}var Hi=null,dd=null,ll=null;function M0(){if(ll)return ll;var e,n=dd,s=n.length,u,h="value"in Hi?Hi.value:Hi.textContent,g=h.length;for(e=0;e<s&&n[e]===h[e];e++);var w=s-e;for(u=1;u<=w&&n[s-u]===h[g-u];u++);return ll=h.slice(e,1<u?1-u:void 0)}function cl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Xa(){return!0}function Ah(){return!1}function ir(e){function n(s,u,h,g,w){this._reactName=s,this._targetInst=h,this.type=u,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(s=e[A],this[A]=s?s(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Xa:Ah,this.isPropagationStopped=Ah,this}return Ft(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Xa)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Xa)},persist:function(){},isPersistent:Xa}),n}var mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hd=ir(mo),ba=Ft({},mo,{view:0,detail:0}),Np=ir(ba),Mc,kc,zo,Xl=Ft({},ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zo&&(zo&&e.type==="mousemove"?(Mc=e.screenX-zo.screenX,kc=e.screenY-zo.screenY):kc=Mc=0,zo=e),Mc)},movementY:function(e){return"movementY"in e?e.movementY:kc}}),Sh=ir(Xl),Ip=Ft({},Xl,{dataTransfer:0}),Tp=ir(Ip),Mp=Ft({},ba,{relatedTarget:0}),Oc=ir(Mp),kp=Ft({},mo,{animationName:0,elapsedTime:0,pseudoElement:0}),Op=ir(kp),Lp=Ft({},mo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rp=ir(Lp),Dp=Ft({},mo,{data:0}),bh=ir(Dp),Pp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fp(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=jp[e])?!!n[e]:!1}function fd(){return Fp}var zp=Ft({},ba,{key:function(e){if(e.key){var n=Pp[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=cl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fd,charCode:function(e){return e.type==="keypress"?cl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Up=ir(zp),Hp=Ft({},Xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nh=ir(Hp),Vp=Ft({},ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fd}),Zp=ir(Vp),Wp=Ft({},mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gp=ir(Wp),Yp=Ft({},Xl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xp=ir(Yp),Qp=[9,13,27,32],gd=mi&&"CompositionEvent"in window,Jo=null;mi&&"documentMode"in document&&(Jo=document.documentMode);var Kp=mi&&"TextEvent"in window&&!Jo,k0=mi&&(!gd||Jo&&8<Jo&&11>=Jo),Ih=" ",Th=!1;function O0(e,n){switch(e){case"keyup":return Qp.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Us=!1;function qp(e,n){switch(e){case"compositionend":return L0(n);case"keypress":return n.which!==32?null:(Th=!0,Ih);case"textInput":return e=n.data,e===Ih&&Th?null:e;default:return null}}function Jp(e,n){if(Us)return e==="compositionend"||!gd&&O0(e,n)?(e=M0(),ll=dd=Hi=null,Us=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return k0&&n.locale!=="ko"?null:n.data;default:return null}}var $p={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!$p[e.type]:n==="textarea"}function R0(e,n,s,u){d0(u),n=Nl(n,"onChange"),0<n.length&&(s=new hd("onChange","change",null,s,u),e.push({event:s,listeners:n}))}var $o=null,fa=null;function em(e){W0(e,0)}function Ql(e){var n=Zs(e);if(i0(n))return e}function tm(e,n){if(e==="change")return n}var D0=!1;if(mi){var Lc;if(mi){var Rc="oninput"in document;if(!Rc){var kh=document.createElement("div");kh.setAttribute("oninput","return;"),Rc=typeof kh.oninput=="function"}Lc=Rc}else Lc=!1;D0=Lc&&(!document.documentMode||9<document.documentMode)}function Oh(){$o&&($o.detachEvent("onpropertychange",P0),fa=$o=null)}function P0(e){if(e.propertyName==="value"&&Ql(fa)){var n=[];R0(n,fa,e,od(e)),p0(em,n)}}function nm(e,n,s){e==="focusin"?(Oh(),$o=n,fa=s,$o.attachEvent("onpropertychange",P0)):e==="focusout"&&Oh()}function rm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ql(fa)}function im(e,n){if(e==="click")return Ql(n)}function sm(e,n){if(e==="input"||e==="change")return Ql(n)}function om(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Br=typeof Object.is=="function"?Object.is:om;function ga(e,n){if(Br(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),u=Object.keys(n);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var h=s[u];if(!$c.call(n,h)||!Br(e[h],n[h]))return!1}return!0}function Lh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rh(e,n){var s=Lh(e);e=0;for(var u;s;){if(s.nodeType===3){if(u=e+s.textContent.length,e<=n&&u>=n)return{node:s,offset:n-e};e=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Lh(s)}}function B0(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?B0(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function j0(){for(var e=window,n=_l();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=_l(e.document)}return n}function pd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function am(e){var n=j0(),s=e.focusedElem,u=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&B0(s.ownerDocument.documentElement,s)){if(u!==null&&pd(s)){if(n=u.start,e=u.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var h=s.textContent.length,g=Math.min(u.start,h);u=u.end===void 0?g:Math.min(u.end,h),!e.extend&&g>u&&(h=u,u=g,g=h),h=Rh(s,g);var w=Rh(s,u);h&&w&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==w.node||e.focusOffset!==w.offset)&&(n=n.createRange(),n.setStart(h.node,h.offset),e.removeAllRanges(),g>u?(e.addRange(n),e.extend(w.node,w.offset)):(n.setEnd(w.node,w.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lm=mi&&"documentMode"in document&&11>=document.documentMode,Hs=null,yu=null,ea=null,wu=!1;function Dh(e,n,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;wu||Hs==null||Hs!==_l(u)||(u=Hs,"selectionStart"in u&&pd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ea&&ga(ea,u)||(ea=u,u=Nl(yu,"onSelect"),0<u.length&&(n=new hd("onSelect","select",null,n,s),e.push({event:n,listeners:u}),n.target=Hs)))}function Qa(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Vs={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionend:Qa("Transition","TransitionEnd")},Dc={},F0={};mi&&(F0=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function Kl(e){if(Dc[e])return Dc[e];if(!Vs[e])return e;var n=Vs[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in F0)return Dc[e]=n[s];return e}var z0=Kl("animationend"),U0=Kl("animationiteration"),H0=Kl("animationstart"),V0=Kl("transitionend"),Z0=new Map,Ph="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(e,n){Z0.set(e,n),bs(n,[e])}for(var Pc=0;Pc<Ph.length;Pc++){var Bc=Ph[Pc],cm=Bc.toLowerCase(),um=Bc[0].toUpperCase()+Bc.slice(1);ts(cm,"on"+um)}ts(z0,"onAnimationEnd");ts(U0,"onAnimationIteration");ts(H0,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts(V0,"onTransitionEnd");ao("onMouseEnter",["mouseout","mouseover"]);ao("onMouseLeave",["mouseout","mouseover"]);ao("onPointerEnter",["pointerout","pointerover"]);ao("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xo));function Bh(e,n,s){var u=e.type||"unknown-event";e.currentTarget=s,cp(u,n,void 0,e),e.currentTarget=null}function W0(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var u=e[s],h=u.event;u=u.listeners;e:{var g=void 0;if(n)for(var w=u.length-1;0<=w;w--){var A=u[w],S=A.instance,v=A.currentTarget;if(A=A.listener,S!==g&&h.isPropagationStopped())break e;Bh(h,A,v),g=S}else for(w=0;w<u.length;w++){if(A=u[w],S=A.instance,v=A.currentTarget,A=A.listener,S!==g&&h.isPropagationStopped())break e;Bh(h,A,v),g=S}}}if(Cl)throw e=gu,Cl=!1,gu=null,e}function Mt(e,n){var s=n[Au];s===void 0&&(s=n[Au]=new Set);var u=e+"__bubble";s.has(u)||(G0(n,e,2,!1),s.add(u))}function jc(e,n,s){var u=0;n&&(u|=4),G0(s,e,u,n)}var Ka="_reactListening"+Math.random().toString(36).slice(2);function pa(e){if(!e[Ka]){e[Ka]=!0,$f.forEach(function(s){s!=="selectionchange"&&(dm.has(s)||jc(s,!1,e),jc(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ka]||(n[Ka]=!0,jc("selectionchange",!1,n))}}function G0(e,n,s,u){switch(T0(n)){case 1:var h=Sp;break;case 4:h=bp;break;default:h=ud}s=h.bind(null,n,s,e),h=void 0,!fu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),u?h!==void 0?e.addEventListener(n,s,{capture:!0,passive:h}):e.addEventListener(n,s,!0):h!==void 0?e.addEventListener(n,s,{passive:h}):e.addEventListener(n,s,!1)}function Fc(e,n,s,u,h){var g=u;if(!(n&1)&&!(n&2)&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var A=u.stateNode.containerInfo;if(A===h||A.nodeType===8&&A.parentNode===h)break;if(w===4)for(w=u.return;w!==null;){var S=w.tag;if((S===3||S===4)&&(S=w.stateNode.containerInfo,S===h||S.nodeType===8&&S.parentNode===h))return;w=w.return}for(;A!==null;){if(w=ms(A),w===null)return;if(S=w.tag,S===5||S===6){u=g=w;continue e}A=A.parentNode}}u=u.return}p0(function(){var v=g,k=od(s),O=[];e:{var H=Z0.get(e);if(H!==void 0){var V=hd,J=e;switch(e){case"keypress":if(cl(s)===0)break e;case"keydown":case"keyup":V=Up;break;case"focusin":J="focus",V=Oc;break;case"focusout":J="blur",V=Oc;break;case"beforeblur":case"afterblur":V=Oc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Tp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Zp;break;case z0:case U0:case H0:V=Op;break;case V0:V=Gp;break;case"scroll":V=Np;break;case"wheel":V=Xp;break;case"copy":case"cut":case"paste":V=Rp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Nh}var U=(n&4)!==0,xe=!U&&e==="scroll",P=U?H!==null?H+"Capture":null:H;U=[];for(var D=v,B;D!==null;){B=D;var X=B.stateNode;if(B.tag===5&&X!==null&&(B=X,P!==null&&(X=ca(D,P),X!=null&&U.push(ma(D,X,B)))),xe)break;D=D.return}0<U.length&&(H=new V(H,J,null,s,k),O.push({event:H,listeners:U}))}}if(!(n&7)){e:{if(H=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",H&&s!==du&&(J=s.relatedTarget||s.fromElement)&&(ms(J)||J[xi]))break e;if((V||H)&&(H=k.window===k?k:(H=k.ownerDocument)?H.defaultView||H.parentWindow:window,V?(J=s.relatedTarget||s.toElement,V=v,J=J?ms(J):null,J!==null&&(xe=Ns(J),J!==xe||J.tag!==5&&J.tag!==6)&&(J=null)):(V=null,J=v),V!==J)){if(U=Sh,X="onMouseLeave",P="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(U=Nh,X="onPointerLeave",P="onPointerEnter",D="pointer"),xe=V==null?H:Zs(V),B=J==null?H:Zs(J),H=new U(X,D+"leave",V,s,k),H.target=xe,H.relatedTarget=B,X=null,ms(k)===v&&(U=new U(P,D+"enter",J,s,k),U.target=B,U.relatedTarget=xe,X=U),xe=X,V&&J)t:{for(U=V,P=J,D=0,B=U;B;B=Bs(B))D++;for(B=0,X=P;X;X=Bs(X))B++;for(;0<D-B;)U=Bs(U),D--;for(;0<B-D;)P=Bs(P),B--;for(;D--;){if(U===P||P!==null&&U===P.alternate)break t;U=Bs(U),P=Bs(P)}U=null}else U=null;V!==null&&jh(O,H,V,U,!1),J!==null&&xe!==null&&jh(O,xe,J,U,!0)}}e:{if(H=v?Zs(v):window,V=H.nodeName&&H.nodeName.toLowerCase(),V==="select"||V==="input"&&H.type==="file")var ge=tm;else if(Mh(H))if(D0)ge=sm;else{ge=rm;var re=nm}else(V=H.nodeName)&&V.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(ge=im);if(ge&&(ge=ge(e,v))){R0(O,ge,s,k);break e}re&&re(e,H,v),e==="focusout"&&(re=H._wrapperState)&&re.controlled&&H.type==="number"&&ou(H,"number",H.value)}switch(re=v?Zs(v):window,e){case"focusin":(Mh(re)||re.contentEditable==="true")&&(Hs=re,yu=v,ea=null);break;case"focusout":ea=yu=Hs=null;break;case"mousedown":wu=!0;break;case"contextmenu":case"mouseup":case"dragend":wu=!1,Dh(O,s,k);break;case"selectionchange":if(lm)break;case"keydown":case"keyup":Dh(O,s,k)}var Z;if(gd)e:{switch(e){case"compositionstart":var te="onCompositionStart";break e;case"compositionend":te="onCompositionEnd";break e;case"compositionupdate":te="onCompositionUpdate";break e}te=void 0}else Us?O0(e,s)&&(te="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(te="onCompositionStart");te&&(k0&&s.locale!=="ko"&&(Us||te!=="onCompositionStart"?te==="onCompositionEnd"&&Us&&(Z=M0()):(Hi=k,dd="value"in Hi?Hi.value:Hi.textContent,Us=!0)),re=Nl(v,te),0<re.length&&(te=new bh(te,e,null,s,k),O.push({event:te,listeners:re}),Z?te.data=Z:(Z=L0(s),Z!==null&&(te.data=Z)))),(Z=Kp?qp(e,s):Jp(e,s))&&(v=Nl(v,"onBeforeInput"),0<v.length&&(k=new bh("onBeforeInput","beforeinput",null,s,k),O.push({event:k,listeners:v}),k.data=Z))}W0(O,n)})}function ma(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Nl(e,n){for(var s=n+"Capture",u=[];e!==null;){var h=e,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=ca(e,s),g!=null&&u.unshift(ma(e,g,h)),g=ca(e,n),g!=null&&u.push(ma(e,g,h))),e=e.return}return u}function Bs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jh(e,n,s,u,h){for(var g=n._reactName,w=[];s!==null&&s!==u;){var A=s,S=A.alternate,v=A.stateNode;if(S!==null&&S===u)break;A.tag===5&&v!==null&&(A=v,h?(S=ca(s,g),S!=null&&w.unshift(ma(s,S,A))):h||(S=ca(s,g),S!=null&&w.push(ma(s,S,A)))),s=s.return}w.length!==0&&e.push({event:n,listeners:w})}var hm=/\r\n?/g,fm=/\u0000|\uFFFD/g;function Fh(e){return(typeof e=="string"?e:""+e).replace(hm,`
`).replace(fm,"")}function qa(e,n,s){if(n=Fh(n),Fh(e)!==n&&s)throw Error(fe(425))}function Il(){}var _u=null,vu=null;function Cu(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Eu=typeof setTimeout=="function"?setTimeout:void 0,gm=typeof clearTimeout=="function"?clearTimeout:void 0,zh=typeof Promise=="function"?Promise:void 0,pm=typeof queueMicrotask=="function"?queueMicrotask:typeof zh<"u"?function(e){return zh.resolve(null).then(e).catch(mm)}:Eu;function mm(e){setTimeout(function(){throw e})}function zc(e,n){var s=n,u=0;do{var h=s.nextSibling;if(e.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(u===0){e.removeChild(h),ha(n);return}u--}else s!=="$"&&s!=="$?"&&s!=="$!"||u++;s=h}while(s);ha(n)}function Yi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Uh(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var xo=Math.random().toString(36).slice(2),Jr="__reactFiber$"+xo,xa="__reactProps$"+xo,xi="__reactContainer$"+xo,Au="__reactEvents$"+xo,xm="__reactListeners$"+xo,ym="__reactHandles$"+xo;function ms(e){var n=e[Jr];if(n)return n;for(var s=e.parentNode;s;){if(n=s[xi]||s[Jr]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Uh(e);e!==null;){if(s=e[Jr])return s;e=Uh(e)}return n}e=s,s=e.parentNode}return null}function Na(e){return e=e[Jr]||e[xi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fe(33))}function ql(e){return e[xa]||null}var Su=[],Ws=-1;function ns(e){return{current:e}}function kt(e){0>Ws||(e.current=Su[Ws],Su[Ws]=null,Ws--)}function St(e,n){Ws++,Su[Ws]=e.current,e.current=n}var $i={},bn=ns($i),Vn=ns(!1),vs=$i;function lo(e,n){var s=e.type.contextTypes;if(!s)return $i;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in s)h[g]=n[g];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=h),h}function Zn(e){return e=e.childContextTypes,e!=null}function Tl(){kt(Vn),kt(bn)}function Hh(e,n,s){if(bn.current!==$i)throw Error(fe(168));St(bn,n),St(Vn,s)}function Y0(e,n,s){var u=e.stateNode;if(n=n.childContextTypes,typeof u.getChildContext!="function")return s;u=u.getChildContext();for(var h in u)if(!(h in n))throw Error(fe(108,np(e)||"Unknown",h));return Ft({},s,u)}function Ml(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$i,vs=bn.current,St(bn,e),St(Vn,Vn.current),!0}function Vh(e,n,s){var u=e.stateNode;if(!u)throw Error(fe(169));s?(e=Y0(e,n,vs),u.__reactInternalMemoizedMergedChildContext=e,kt(Vn),kt(bn),St(bn,e)):kt(Vn),St(Vn,s)}var di=null,Jl=!1,Uc=!1;function X0(e){di===null?di=[e]:di.push(e)}function wm(e){Jl=!0,X0(e)}function rs(){if(!Uc&&di!==null){Uc=!0;var e=0,n=xt;try{var s=di;for(xt=1;e<s.length;e++){var u=s[e];do u=u(!0);while(u!==null)}di=null,Jl=!1}catch(h){throw di!==null&&(di=di.slice(e+1)),w0(ad,rs),h}finally{xt=n,Uc=!1}}return null}var Gs=[],Ys=0,kl=null,Ol=0,pr=[],mr=0,Cs=null,hi=1,fi="";function gs(e,n){Gs[Ys++]=Ol,Gs[Ys++]=kl,kl=e,Ol=n}function Q0(e,n,s){pr[mr++]=hi,pr[mr++]=fi,pr[mr++]=Cs,Cs=e;var u=hi;e=fi;var h=32-Dr(u)-1;u&=~(1<<h),s+=1;var g=32-Dr(n)+h;if(30<g){var w=h-h%5;g=(u&(1<<w)-1).toString(32),u>>=w,h-=w,hi=1<<32-Dr(n)+h|s<<h|u,fi=g+e}else hi=1<<g|s<<h|u,fi=e}function md(e){e.return!==null&&(gs(e,1),Q0(e,1,0))}function xd(e){for(;e===kl;)kl=Gs[--Ys],Gs[Ys]=null,Ol=Gs[--Ys],Gs[Ys]=null;for(;e===Cs;)Cs=pr[--mr],pr[mr]=null,fi=pr[--mr],pr[mr]=null,hi=pr[--mr],pr[mr]=null}var tr=null,er=null,Rt=!1,Rr=null;function K0(e,n){var s=xr(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Zh(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,tr=e,er=Yi(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,tr=e,er=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=Cs!==null?{id:hi,overflow:fi}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=xr(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,tr=e,er=null,!0):!1;default:return!1}}function bu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Nu(e){if(Rt){var n=er;if(n){var s=n;if(!Zh(e,n)){if(bu(e))throw Error(fe(418));n=Yi(s.nextSibling);var u=tr;n&&Zh(e,n)?K0(u,s):(e.flags=e.flags&-4097|2,Rt=!1,tr=e)}}else{if(bu(e))throw Error(fe(418));e.flags=e.flags&-4097|2,Rt=!1,tr=e}}}function Wh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tr=e}function Ja(e){if(e!==tr)return!1;if(!Rt)return Wh(e),Rt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Cu(e.type,e.memoizedProps)),n&&(n=er)){if(bu(e))throw q0(),Error(fe(418));for(;n;)K0(e,n),n=Yi(n.nextSibling)}if(Wh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fe(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){er=Yi(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}er=null}}else er=tr?Yi(e.stateNode.nextSibling):null;return!0}function q0(){for(var e=er;e;)e=Yi(e.nextSibling)}function co(){er=tr=null,Rt=!1}function yd(e){Rr===null?Rr=[e]:Rr.push(e)}var _m=_i.ReactCurrentBatchConfig;function Uo(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(fe(309));var u=s.stateNode}if(!u)throw Error(fe(147,e));var h=u,g=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===g?n.ref:(n=function(w){var A=h.refs;w===null?delete A[g]:A[g]=w},n._stringRef=g,n)}if(typeof e!="string")throw Error(fe(284));if(!s._owner)throw Error(fe(290,e))}return e}function $a(e,n){throw e=Object.prototype.toString.call(n),Error(fe(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Gh(e){var n=e._init;return n(e._payload)}function J0(e){function n(P,D){if(e){var B=P.deletions;B===null?(P.deletions=[D],P.flags|=16):B.push(D)}}function s(P,D){if(!e)return null;for(;D!==null;)n(P,D),D=D.sibling;return null}function u(P,D){for(P=new Map;D!==null;)D.key!==null?P.set(D.key,D):P.set(D.index,D),D=D.sibling;return P}function h(P,D){return P=qi(P,D),P.index=0,P.sibling=null,P}function g(P,D,B){return P.index=B,e?(B=P.alternate,B!==null?(B=B.index,B<D?(P.flags|=2,D):B):(P.flags|=2,D)):(P.flags|=1048576,D)}function w(P){return e&&P.alternate===null&&(P.flags|=2),P}function A(P,D,B,X){return D===null||D.tag!==6?(D=Xc(B,P.mode,X),D.return=P,D):(D=h(D,B),D.return=P,D)}function S(P,D,B,X){var ge=B.type;return ge===zs?k(P,D,B.props.children,X,B.key):D!==null&&(D.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===ji&&Gh(ge)===D.type)?(X=h(D,B.props),X.ref=Uo(P,D,B),X.return=P,X):(X=ml(B.type,B.key,B.props,null,P.mode,X),X.ref=Uo(P,D,B),X.return=P,X)}function v(P,D,B,X){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=Qc(B,P.mode,X),D.return=P,D):(D=h(D,B.children||[]),D.return=P,D)}function k(P,D,B,X,ge){return D===null||D.tag!==7?(D=_s(B,P.mode,X,ge),D.return=P,D):(D=h(D,B),D.return=P,D)}function O(P,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Xc(""+D,P.mode,B),D.return=P,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ha:return B=ml(D.type,D.key,D.props,null,P.mode,B),B.ref=Uo(P,null,D),B.return=P,B;case Fs:return D=Qc(D,P.mode,B),D.return=P,D;case ji:var X=D._init;return O(P,X(D._payload),B)}if(Go(D)||Po(D))return D=_s(D,P.mode,B,null),D.return=P,D;$a(P,D)}return null}function H(P,D,B,X){var ge=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ge!==null?null:A(P,D,""+B,X);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ha:return B.key===ge?S(P,D,B,X):null;case Fs:return B.key===ge?v(P,D,B,X):null;case ji:return ge=B._init,H(P,D,ge(B._payload),X)}if(Go(B)||Po(B))return ge!==null?null:k(P,D,B,X,null);$a(P,B)}return null}function V(P,D,B,X,ge){if(typeof X=="string"&&X!==""||typeof X=="number")return P=P.get(B)||null,A(D,P,""+X,ge);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Ha:return P=P.get(X.key===null?B:X.key)||null,S(D,P,X,ge);case Fs:return P=P.get(X.key===null?B:X.key)||null,v(D,P,X,ge);case ji:var re=X._init;return V(P,D,B,re(X._payload),ge)}if(Go(X)||Po(X))return P=P.get(B)||null,k(D,P,X,ge,null);$a(D,X)}return null}function J(P,D,B,X){for(var ge=null,re=null,Z=D,te=D=0,ee=null;Z!==null&&te<B.length;te++){Z.index>te?(ee=Z,Z=null):ee=Z.sibling;var Se=H(P,Z,B[te],X);if(Se===null){Z===null&&(Z=ee);break}e&&Z&&Se.alternate===null&&n(P,Z),D=g(Se,D,te),re===null?ge=Se:re.sibling=Se,re=Se,Z=ee}if(te===B.length)return s(P,Z),Rt&&gs(P,te),ge;if(Z===null){for(;te<B.length;te++)Z=O(P,B[te],X),Z!==null&&(D=g(Z,D,te),re===null?ge=Z:re.sibling=Z,re=Z);return Rt&&gs(P,te),ge}for(Z=u(P,Z);te<B.length;te++)ee=V(Z,P,te,B[te],X),ee!==null&&(e&&ee.alternate!==null&&Z.delete(ee.key===null?te:ee.key),D=g(ee,D,te),re===null?ge=ee:re.sibling=ee,re=ee);return e&&Z.forEach(function(Re){return n(P,Re)}),Rt&&gs(P,te),ge}function U(P,D,B,X){var ge=Po(B);if(typeof ge!="function")throw Error(fe(150));if(B=ge.call(B),B==null)throw Error(fe(151));for(var re=ge=null,Z=D,te=D=0,ee=null,Se=B.next();Z!==null&&!Se.done;te++,Se=B.next()){Z.index>te?(ee=Z,Z=null):ee=Z.sibling;var Re=H(P,Z,Se.value,X);if(Re===null){Z===null&&(Z=ee);break}e&&Z&&Re.alternate===null&&n(P,Z),D=g(Re,D,te),re===null?ge=Re:re.sibling=Re,re=Re,Z=ee}if(Se.done)return s(P,Z),Rt&&gs(P,te),ge;if(Z===null){for(;!Se.done;te++,Se=B.next())Se=O(P,Se.value,X),Se!==null&&(D=g(Se,D,te),re===null?ge=Se:re.sibling=Se,re=Se);return Rt&&gs(P,te),ge}for(Z=u(P,Z);!Se.done;te++,Se=B.next())Se=V(Z,P,te,Se.value,X),Se!==null&&(e&&Se.alternate!==null&&Z.delete(Se.key===null?te:Se.key),D=g(Se,D,te),re===null?ge=Se:re.sibling=Se,re=Se);return e&&Z.forEach(function(me){return n(P,me)}),Rt&&gs(P,te),ge}function xe(P,D,B,X){if(typeof B=="object"&&B!==null&&B.type===zs&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Ha:e:{for(var ge=B.key,re=D;re!==null;){if(re.key===ge){if(ge=B.type,ge===zs){if(re.tag===7){s(P,re.sibling),D=h(re,B.props.children),D.return=P,P=D;break e}}else if(re.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===ji&&Gh(ge)===re.type){s(P,re.sibling),D=h(re,B.props),D.ref=Uo(P,re,B),D.return=P,P=D;break e}s(P,re);break}else n(P,re);re=re.sibling}B.type===zs?(D=_s(B.props.children,P.mode,X,B.key),D.return=P,P=D):(X=ml(B.type,B.key,B.props,null,P.mode,X),X.ref=Uo(P,D,B),X.return=P,P=X)}return w(P);case Fs:e:{for(re=B.key;D!==null;){if(D.key===re)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){s(P,D.sibling),D=h(D,B.children||[]),D.return=P,P=D;break e}else{s(P,D);break}else n(P,D);D=D.sibling}D=Qc(B,P.mode,X),D.return=P,P=D}return w(P);case ji:return re=B._init,xe(P,D,re(B._payload),X)}if(Go(B))return J(P,D,B,X);if(Po(B))return U(P,D,B,X);$a(P,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,D!==null&&D.tag===6?(s(P,D.sibling),D=h(D,B),D.return=P,P=D):(s(P,D),D=Xc(B,P.mode,X),D.return=P,P=D),w(P)):s(P,D)}return xe}var uo=J0(!0),$0=J0(!1),Ll=ns(null),Rl=null,Xs=null,wd=null;function _d(){wd=Xs=Rl=null}function vd(e){var n=Ll.current;kt(Ll),e._currentValue=n}function Iu(e,n,s){for(;e!==null;){var u=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),e===s)break;e=e.return}}function no(e,n){Rl=e,wd=Xs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(Hn=!0),e.firstContext=null)}function wr(e){var n=e._currentValue;if(wd!==e)if(e={context:e,memoizedValue:n,next:null},Xs===null){if(Rl===null)throw Error(fe(308));Xs=e,Rl.dependencies={lanes:0,firstContext:e}}else Xs=Xs.next=e;return n}var xs=null;function Cd(e){xs===null?xs=[e]:xs.push(e)}function e1(e,n,s,u){var h=n.interleaved;return h===null?(s.next=s,Cd(n)):(s.next=h.next,h.next=s),n.interleaved=s,yi(e,u)}function yi(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Fi=!1;function Ed(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t1(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pi(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Xi(e,n,s){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,lt&2){var h=u.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),u.pending=n,yi(e,s)}return h=u.interleaved,h===null?(n.next=n,Cd(u)):(n.next=h.next,h.next=n),u.interleaved=n,yi(e,s)}function ul(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var u=n.lanes;u&=e.pendingLanes,s|=u,n.lanes=s,ld(e,s)}}function Yh(e,n){var s=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var h=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var w={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?h=g=w:g=g.next=w,s=s.next}while(s!==null);g===null?h=g=n:g=g.next=n}else h=g=n;s={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:u.shared,effects:u.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Dl(e,n,s,u){var h=e.updateQueue;Fi=!1;var g=h.firstBaseUpdate,w=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var S=A,v=S.next;S.next=null,w===null?g=v:w.next=v,w=S;var k=e.alternate;k!==null&&(k=k.updateQueue,A=k.lastBaseUpdate,A!==w&&(A===null?k.firstBaseUpdate=v:A.next=v,k.lastBaseUpdate=S))}if(g!==null){var O=h.baseState;w=0,k=v=S=null,A=g;do{var H=A.lane,V=A.eventTime;if((u&H)===H){k!==null&&(k=k.next={eventTime:V,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var J=e,U=A;switch(H=n,V=s,U.tag){case 1:if(J=U.payload,typeof J=="function"){O=J.call(V,O,H);break e}O=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=U.payload,H=typeof J=="function"?J.call(V,O,H):J,H==null)break e;O=Ft({},O,H);break e;case 2:Fi=!0}}A.callback!==null&&A.lane!==0&&(e.flags|=64,H=h.effects,H===null?h.effects=[A]:H.push(A))}else V={eventTime:V,lane:H,tag:A.tag,payload:A.payload,callback:A.callback,next:null},k===null?(v=k=V,S=O):k=k.next=V,w|=H;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;H=A,A=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);if(k===null&&(S=O),h.baseState=S,h.firstBaseUpdate=v,h.lastBaseUpdate=k,n=h.shared.interleaved,n!==null){h=n;do w|=h.lane,h=h.next;while(h!==n)}else g===null&&(h.shared.lanes=0);As|=w,e.lanes=w,e.memoizedState=O}}function Xh(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var u=e[n],h=u.callback;if(h!==null){if(u.callback=null,u=s,typeof h!="function")throw Error(fe(191,h));h.call(u)}}}var Ia={},ei=ns(Ia),ya=ns(Ia),wa=ns(Ia);function ys(e){if(e===Ia)throw Error(fe(174));return e}function Ad(e,n){switch(St(wa,n),St(ya,e),St(ei,Ia),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:lu(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=lu(n,e)}kt(ei),St(ei,n)}function ho(){kt(ei),kt(ya),kt(wa)}function n1(e){ys(wa.current);var n=ys(ei.current),s=lu(n,e.type);n!==s&&(St(ya,e),St(ei,s))}function Sd(e){ya.current===e&&(kt(ei),kt(ya))}var Bt=ns(0);function Pl(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Hc=[];function bd(){for(var e=0;e<Hc.length;e++)Hc[e]._workInProgressVersionPrimary=null;Hc.length=0}var dl=_i.ReactCurrentDispatcher,Vc=_i.ReactCurrentBatchConfig,Es=0,jt=null,tn=null,hn=null,Bl=!1,ta=!1,_a=0,vm=0;function En(){throw Error(fe(321))}function Nd(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Br(e[s],n[s]))return!1;return!0}function Id(e,n,s,u,h,g){if(Es=g,jt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,dl.current=e===null||e.memoizedState===null?Sm:bm,e=s(u,h),ta){g=0;do{if(ta=!1,_a=0,25<=g)throw Error(fe(301));g+=1,hn=tn=null,n.updateQueue=null,dl.current=Nm,e=s(u,h)}while(ta)}if(dl.current=jl,n=tn!==null&&tn.next!==null,Es=0,hn=tn=jt=null,Bl=!1,n)throw Error(fe(300));return e}function Td(){var e=_a!==0;return _a=0,e}function Kr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?jt.memoizedState=hn=e:hn=hn.next=e,hn}function _r(){if(tn===null){var e=jt.alternate;e=e!==null?e.memoizedState:null}else e=tn.next;var n=hn===null?jt.memoizedState:hn.next;if(n!==null)hn=n,tn=e;else{if(e===null)throw Error(fe(310));tn=e,e={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},hn===null?jt.memoizedState=hn=e:hn=hn.next=e}return hn}function va(e,n){return typeof n=="function"?n(e):n}function Zc(e){var n=_r(),s=n.queue;if(s===null)throw Error(fe(311));s.lastRenderedReducer=e;var u=tn,h=u.baseQueue,g=s.pending;if(g!==null){if(h!==null){var w=h.next;h.next=g.next,g.next=w}u.baseQueue=h=g,s.pending=null}if(h!==null){g=h.next,u=u.baseState;var A=w=null,S=null,v=g;do{var k=v.lane;if((Es&k)===k)S!==null&&(S=S.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),u=v.hasEagerState?v.eagerState:e(u,v.action);else{var O={lane:k,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};S===null?(A=S=O,w=u):S=S.next=O,jt.lanes|=k,As|=k}v=v.next}while(v!==null&&v!==g);S===null?w=u:S.next=A,Br(u,n.memoizedState)||(Hn=!0),n.memoizedState=u,n.baseState=w,n.baseQueue=S,s.lastRenderedState=u}if(e=s.interleaved,e!==null){h=e;do g=h.lane,jt.lanes|=g,As|=g,h=h.next;while(h!==e)}else h===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function Wc(e){var n=_r(),s=n.queue;if(s===null)throw Error(fe(311));s.lastRenderedReducer=e;var u=s.dispatch,h=s.pending,g=n.memoizedState;if(h!==null){s.pending=null;var w=h=h.next;do g=e(g,w.action),w=w.next;while(w!==h);Br(g,n.memoizedState)||(Hn=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),s.lastRenderedState=g}return[g,u]}function r1(){}function i1(e,n){var s=jt,u=_r(),h=n(),g=!Br(u.memoizedState,h);if(g&&(u.memoizedState=h,Hn=!0),u=u.queue,Md(a1.bind(null,s,u,e),[e]),u.getSnapshot!==n||g||hn!==null&&hn.memoizedState.tag&1){if(s.flags|=2048,Ca(9,o1.bind(null,s,u,h,n),void 0,null),fn===null)throw Error(fe(349));Es&30||s1(s,n,h)}return h}function s1(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=jt.updateQueue,n===null?(n={lastEffect:null,stores:null},jt.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function o1(e,n,s,u){n.value=s,n.getSnapshot=u,l1(n)&&c1(e)}function a1(e,n,s){return s(function(){l1(n)&&c1(e)})}function l1(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Br(e,s)}catch{return!0}}function c1(e){var n=yi(e,1);n!==null&&Pr(n,e,1,-1)}function Qh(e){var n=Kr();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},n.queue=e,e=e.dispatch=Am.bind(null,jt,e),[n.memoizedState,e]}function Ca(e,n,s,u){return e={tag:e,create:n,destroy:s,deps:u,next:null},n=jt.updateQueue,n===null?(n={lastEffect:null,stores:null},jt.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(u=s.next,s.next=e,e.next=u,n.lastEffect=e)),e}function u1(){return _r().memoizedState}function hl(e,n,s,u){var h=Kr();jt.flags|=e,h.memoizedState=Ca(1|n,s,void 0,u===void 0?null:u)}function $l(e,n,s,u){var h=_r();u=u===void 0?null:u;var g=void 0;if(tn!==null){var w=tn.memoizedState;if(g=w.destroy,u!==null&&Nd(u,w.deps)){h.memoizedState=Ca(n,s,g,u);return}}jt.flags|=e,h.memoizedState=Ca(1|n,s,g,u)}function Kh(e,n){return hl(8390656,8,e,n)}function Md(e,n){return $l(2048,8,e,n)}function d1(e,n){return $l(4,2,e,n)}function h1(e,n){return $l(4,4,e,n)}function f1(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function g1(e,n,s){return s=s!=null?s.concat([e]):null,$l(4,4,f1.bind(null,n,e),s)}function kd(){}function p1(e,n){var s=_r();n=n===void 0?null:n;var u=s.memoizedState;return u!==null&&n!==null&&Nd(n,u[1])?u[0]:(s.memoizedState=[e,n],e)}function m1(e,n){var s=_r();n=n===void 0?null:n;var u=s.memoizedState;return u!==null&&n!==null&&Nd(n,u[1])?u[0]:(e=e(),s.memoizedState=[e,n],e)}function x1(e,n,s){return Es&21?(Br(s,n)||(s=C0(),jt.lanes|=s,As|=s,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,Hn=!0),e.memoizedState=s)}function Cm(e,n){var s=xt;xt=s!==0&&4>s?s:4,e(!0);var u=Vc.transition;Vc.transition={};try{e(!1),n()}finally{xt=s,Vc.transition=u}}function y1(){return _r().memoizedState}function Em(e,n,s){var u=Ki(e);if(s={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null},w1(e))_1(n,s);else if(s=e1(e,n,s,u),s!==null){var h=Rn();Pr(s,e,u,h),v1(s,n,u)}}function Am(e,n,s){var u=Ki(e),h={lane:u,action:s,hasEagerState:!1,eagerState:null,next:null};if(w1(e))_1(n,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var w=n.lastRenderedState,A=g(w,s);if(h.hasEagerState=!0,h.eagerState=A,Br(A,w)){var S=n.interleaved;S===null?(h.next=h,Cd(n)):(h.next=S.next,S.next=h),n.interleaved=h;return}}catch{}finally{}s=e1(e,n,h,u),s!==null&&(h=Rn(),Pr(s,e,u,h),v1(s,n,u))}}function w1(e){var n=e.alternate;return e===jt||n!==null&&n===jt}function _1(e,n){ta=Bl=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function v1(e,n,s){if(s&4194240){var u=n.lanes;u&=e.pendingLanes,s|=u,n.lanes=s,ld(e,s)}}var jl={readContext:wr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},Sm={readContext:wr,useCallback:function(e,n){return Kr().memoizedState=[e,n===void 0?null:n],e},useContext:wr,useEffect:Kh,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,hl(4194308,4,f1.bind(null,n,e),s)},useLayoutEffect:function(e,n){return hl(4194308,4,e,n)},useInsertionEffect:function(e,n){return hl(4,2,e,n)},useMemo:function(e,n){var s=Kr();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var u=Kr();return n=s!==void 0?s(n):n,u.memoizedState=u.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},u.queue=e,e=e.dispatch=Em.bind(null,jt,e),[u.memoizedState,e]},useRef:function(e){var n=Kr();return e={current:e},n.memoizedState=e},useState:Qh,useDebugValue:kd,useDeferredValue:function(e){return Kr().memoizedState=e},useTransition:function(){var e=Qh(!1),n=e[0];return e=Cm.bind(null,e[1]),Kr().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var u=jt,h=Kr();if(Rt){if(s===void 0)throw Error(fe(407));s=s()}else{if(s=n(),fn===null)throw Error(fe(349));Es&30||s1(u,n,s)}h.memoizedState=s;var g={value:s,getSnapshot:n};return h.queue=g,Kh(a1.bind(null,u,g,e),[e]),u.flags|=2048,Ca(9,o1.bind(null,u,g,s,n),void 0,null),s},useId:function(){var e=Kr(),n=fn.identifierPrefix;if(Rt){var s=fi,u=hi;s=(u&~(1<<32-Dr(u)-1)).toString(32)+s,n=":"+n+"R"+s,s=_a++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=vm++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},bm={readContext:wr,useCallback:p1,useContext:wr,useEffect:Md,useImperativeHandle:g1,useInsertionEffect:d1,useLayoutEffect:h1,useMemo:m1,useReducer:Zc,useRef:u1,useState:function(){return Zc(va)},useDebugValue:kd,useDeferredValue:function(e){var n=_r();return x1(n,tn.memoizedState,e)},useTransition:function(){var e=Zc(va)[0],n=_r().memoizedState;return[e,n]},useMutableSource:r1,useSyncExternalStore:i1,useId:y1,unstable_isNewReconciler:!1},Nm={readContext:wr,useCallback:p1,useContext:wr,useEffect:Md,useImperativeHandle:g1,useInsertionEffect:d1,useLayoutEffect:h1,useMemo:m1,useReducer:Wc,useRef:u1,useState:function(){return Wc(va)},useDebugValue:kd,useDeferredValue:function(e){var n=_r();return tn===null?n.memoizedState=e:x1(n,tn.memoizedState,e)},useTransition:function(){var e=Wc(va)[0],n=_r().memoizedState;return[e,n]},useMutableSource:r1,useSyncExternalStore:i1,useId:y1,unstable_isNewReconciler:!1};function kr(e,n){if(e&&e.defaultProps){n=Ft({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function Tu(e,n,s,u){n=e.memoizedState,s=s(u,n),s=s==null?n:Ft({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var ec={isMounted:function(e){return(e=e._reactInternals)?Ns(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var u=Rn(),h=Ki(e),g=pi(u,h);g.payload=n,s!=null&&(g.callback=s),n=Xi(e,g,h),n!==null&&(Pr(n,e,h,u),ul(n,e,h))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var u=Rn(),h=Ki(e),g=pi(u,h);g.tag=1,g.payload=n,s!=null&&(g.callback=s),n=Xi(e,g,h),n!==null&&(Pr(n,e,h,u),ul(n,e,h))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Rn(),u=Ki(e),h=pi(s,u);h.tag=2,n!=null&&(h.callback=n),n=Xi(e,h,u),n!==null&&(Pr(n,e,u,s),ul(n,e,u))}};function qh(e,n,s,u,h,g,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,g,w):n.prototype&&n.prototype.isPureReactComponent?!ga(s,u)||!ga(h,g):!0}function C1(e,n,s){var u=!1,h=$i,g=n.contextType;return typeof g=="object"&&g!==null?g=wr(g):(h=Zn(n)?vs:bn.current,u=n.contextTypes,g=(u=u!=null)?lo(e,h):$i),n=new n(s,g),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=ec,e.stateNode=n,n._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=g),n}function Jh(e,n,s,u){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,u),n.state!==e&&ec.enqueueReplaceState(n,n.state,null)}function Mu(e,n,s,u){var h=e.stateNode;h.props=s,h.state=e.memoizedState,h.refs={},Ed(e);var g=n.contextType;typeof g=="object"&&g!==null?h.context=wr(g):(g=Zn(n)?vs:bn.current,h.context=lo(e,g)),h.state=e.memoizedState,g=n.getDerivedStateFromProps,typeof g=="function"&&(Tu(e,n,g,s),h.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(n=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),n!==h.state&&ec.enqueueReplaceState(h,h.state,null),Dl(e,s,h,u),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function fo(e,n){try{var s="",u=n;do s+=tp(u),u=u.return;while(u);var h=s}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:n,stack:h,digest:null}}function Gc(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function ku(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var Im=typeof WeakMap=="function"?WeakMap:Map;function E1(e,n,s){s=pi(-1,s),s.tag=3,s.payload={element:null};var u=n.value;return s.callback=function(){zl||(zl=!0,Uu=u),ku(e,n)},s}function A1(e,n,s){s=pi(-1,s),s.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var h=n.value;s.payload=function(){return u(h)},s.callback=function(){ku(e,n)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){ku(e,n),typeof u!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var w=n.stack;this.componentDidCatch(n.value,{componentStack:w!==null?w:""})}),s}function $h(e,n,s){var u=e.pingCache;if(u===null){u=e.pingCache=new Im;var h=new Set;u.set(n,h)}else h=u.get(n),h===void 0&&(h=new Set,u.set(n,h));h.has(s)||(h.add(s),e=Hm.bind(null,e,n,s),n.then(e,e))}function ef(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function tf(e,n,s,u,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=pi(-1,1),n.tag=2,Xi(s,n,1))),s.lanes|=1),e)}var Tm=_i.ReactCurrentOwner,Hn=!1;function Ln(e,n,s,u){n.child=e===null?$0(n,null,s,u):uo(n,e.child,s,u)}function nf(e,n,s,u,h){s=s.render;var g=n.ref;return no(n,h),u=Id(e,n,s,u,g,h),s=Td(),e!==null&&!Hn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~h,wi(e,n,h)):(Rt&&s&&md(n),n.flags|=1,Ln(e,n,u,h),n.child)}function rf(e,n,s,u,h){if(e===null){var g=s.type;return typeof g=="function"&&!Fd(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=g,S1(e,n,g,u,h)):(e=ml(s.type,null,u,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!(e.lanes&h)){var w=g.memoizedProps;if(s=s.compare,s=s!==null?s:ga,s(w,u)&&e.ref===n.ref)return wi(e,n,h)}return n.flags|=1,e=qi(g,u),e.ref=n.ref,e.return=n,n.child=e}function S1(e,n,s,u,h){if(e!==null){var g=e.memoizedProps;if(ga(g,u)&&e.ref===n.ref)if(Hn=!1,n.pendingProps=u=g,(e.lanes&h)!==0)e.flags&131072&&(Hn=!0);else return n.lanes=e.lanes,wi(e,n,h)}return Ou(e,n,s,u,h)}function b1(e,n,s){var u=n.pendingProps,h=u.children,g=e!==null?e.memoizedState:null;if(u.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Ks,Jn),Jn|=s;else{if(!(s&1073741824))return e=g!==null?g.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,St(Ks,Jn),Jn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=g!==null?g.baseLanes:s,St(Ks,Jn),Jn|=u}else g!==null?(u=g.baseLanes|s,n.memoizedState=null):u=s,St(Ks,Jn),Jn|=u;return Ln(e,n,h,s),n.child}function N1(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function Ou(e,n,s,u,h){var g=Zn(s)?vs:bn.current;return g=lo(n,g),no(n,h),s=Id(e,n,s,u,g,h),u=Td(),e!==null&&!Hn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~h,wi(e,n,h)):(Rt&&u&&md(n),n.flags|=1,Ln(e,n,s,h),n.child)}function sf(e,n,s,u,h){if(Zn(s)){var g=!0;Ml(n)}else g=!1;if(no(n,h),n.stateNode===null)fl(e,n),C1(n,s,u),Mu(n,s,u,h),u=!0;else if(e===null){var w=n.stateNode,A=n.memoizedProps;w.props=A;var S=w.context,v=s.contextType;typeof v=="object"&&v!==null?v=wr(v):(v=Zn(s)?vs:bn.current,v=lo(n,v));var k=s.getDerivedStateFromProps,O=typeof k=="function"||typeof w.getSnapshotBeforeUpdate=="function";O||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==u||S!==v)&&Jh(n,w,u,v),Fi=!1;var H=n.memoizedState;w.state=H,Dl(n,u,w,h),S=n.memoizedState,A!==u||H!==S||Vn.current||Fi?(typeof k=="function"&&(Tu(n,s,k,u),S=n.memoizedState),(A=Fi||qh(n,s,A,u,H,S,v))?(O||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(n.flags|=4194308)):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=S),w.props=u,w.state=S,w.context=v,u=A):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{w=n.stateNode,t1(e,n),A=n.memoizedProps,v=n.type===n.elementType?A:kr(n.type,A),w.props=v,O=n.pendingProps,H=w.context,S=s.contextType,typeof S=="object"&&S!==null?S=wr(S):(S=Zn(s)?vs:bn.current,S=lo(n,S));var V=s.getDerivedStateFromProps;(k=typeof V=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==O||H!==S)&&Jh(n,w,u,S),Fi=!1,H=n.memoizedState,w.state=H,Dl(n,u,w,h);var J=n.memoizedState;A!==O||H!==J||Vn.current||Fi?(typeof V=="function"&&(Tu(n,s,V,u),J=n.memoizedState),(v=Fi||qh(n,s,v,u,H,J,S)||!1)?(k||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(u,J,S),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(u,J,S)),typeof w.componentDidUpdate=="function"&&(n.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=J),w.props=u,w.state=J,w.context=S,u=v):(typeof w.componentDidUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),u=!1)}return Lu(e,n,s,u,g,h)}function Lu(e,n,s,u,h,g){N1(e,n);var w=(n.flags&128)!==0;if(!u&&!w)return h&&Vh(n,s,!1),wi(e,n,g);u=n.stateNode,Tm.current=n;var A=w&&typeof s.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,e!==null&&w?(n.child=uo(n,e.child,null,g),n.child=uo(n,null,A,g)):Ln(e,n,A,g),n.memoizedState=u.state,h&&Vh(n,s,!0),n.child}function I1(e){var n=e.stateNode;n.pendingContext?Hh(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Hh(e,n.context,!1),Ad(e,n.containerInfo)}function of(e,n,s,u,h){return co(),yd(h),n.flags|=256,Ln(e,n,s,u),n.child}var Ru={dehydrated:null,treeContext:null,retryLane:0};function Du(e){return{baseLanes:e,cachePool:null,transitions:null}}function T1(e,n,s){var u=n.pendingProps,h=Bt.current,g=!1,w=(n.flags&128)!==0,A;if((A=w)||(A=e!==null&&e.memoizedState===null?!1:(h&2)!==0),A?(g=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),St(Bt,h&1),e===null)return Nu(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(w=u.children,e=u.fallback,g?(u=n.mode,g=n.child,w={mode:"hidden",children:w},!(u&1)&&g!==null?(g.childLanes=0,g.pendingProps=w):g=rc(w,u,0,null),e=_s(e,u,s,null),g.return=n,e.return=n,g.sibling=e,n.child=g,n.child.memoizedState=Du(s),n.memoizedState=Ru,e):Od(n,w));if(h=e.memoizedState,h!==null&&(A=h.dehydrated,A!==null))return Mm(e,n,w,u,A,h,s);if(g){g=u.fallback,w=n.mode,h=e.child,A=h.sibling;var S={mode:"hidden",children:u.children};return!(w&1)&&n.child!==h?(u=n.child,u.childLanes=0,u.pendingProps=S,n.deletions=null):(u=qi(h,S),u.subtreeFlags=h.subtreeFlags&14680064),A!==null?g=qi(A,g):(g=_s(g,w,s,null),g.flags|=2),g.return=n,u.return=n,u.sibling=g,n.child=u,u=g,g=n.child,w=e.child.memoizedState,w=w===null?Du(s):{baseLanes:w.baseLanes|s,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=e.childLanes&~s,n.memoizedState=Ru,u}return g=e.child,e=g.sibling,u=qi(g,{mode:"visible",children:u.children}),!(n.mode&1)&&(u.lanes=s),u.return=n,u.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=u,n.memoizedState=null,u}function Od(e,n){return n=rc({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function el(e,n,s,u){return u!==null&&yd(u),uo(n,e.child,null,s),e=Od(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Mm(e,n,s,u,h,g,w){if(s)return n.flags&256?(n.flags&=-257,u=Gc(Error(fe(422))),el(e,n,w,u)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(g=u.fallback,h=n.mode,u=rc({mode:"visible",children:u.children},h,0,null),g=_s(g,h,w,null),g.flags|=2,u.return=n,g.return=n,u.sibling=g,n.child=u,n.mode&1&&uo(n,e.child,null,w),n.child.memoizedState=Du(w),n.memoizedState=Ru,g);if(!(n.mode&1))return el(e,n,w,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var A=u.dgst;return u=A,g=Error(fe(419)),u=Gc(g,u,void 0),el(e,n,w,u)}if(A=(w&e.childLanes)!==0,Hn||A){if(u=fn,u!==null){switch(w&-w){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(u.suspendedLanes|w)?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,yi(e,h),Pr(u,e,h,-1))}return jd(),u=Gc(Error(fe(421))),el(e,n,w,u)}return h.data==="$?"?(n.flags|=128,n.child=e.child,n=Vm.bind(null,e),h._reactRetry=n,null):(e=g.treeContext,er=Yi(h.nextSibling),tr=n,Rt=!0,Rr=null,e!==null&&(pr[mr++]=hi,pr[mr++]=fi,pr[mr++]=Cs,hi=e.id,fi=e.overflow,Cs=n),n=Od(n,u.children),n.flags|=4096,n)}function af(e,n,s){e.lanes|=n;var u=e.alternate;u!==null&&(u.lanes|=n),Iu(e.return,n,s)}function Yc(e,n,s,u,h){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:h}:(g.isBackwards=n,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=s,g.tailMode=h)}function M1(e,n,s){var u=n.pendingProps,h=u.revealOrder,g=u.tail;if(Ln(e,n,u.children,s),u=Bt.current,u&2)u=u&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&af(e,s,n);else if(e.tag===19)af(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(St(Bt,u),!(n.mode&1))n.memoizedState=null;else switch(h){case"forwards":for(s=n.child,h=null;s!==null;)e=s.alternate,e!==null&&Pl(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=n.child,n.child=null):(h=s.sibling,s.sibling=null),Yc(n,!1,h,s,g);break;case"backwards":for(s=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&Pl(e)===null){n.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}Yc(n,!0,s,null,g);break;case"together":Yc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function fl(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function wi(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),As|=n.lanes,!(s&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(fe(153));if(n.child!==null){for(e=n.child,s=qi(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=qi(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function km(e,n,s){switch(n.tag){case 3:I1(n),co();break;case 5:n1(n);break;case 1:Zn(n.type)&&Ml(n);break;case 4:Ad(n,n.stateNode.containerInfo);break;case 10:var u=n.type._context,h=n.memoizedProps.value;St(Ll,u._currentValue),u._currentValue=h;break;case 13:if(u=n.memoizedState,u!==null)return u.dehydrated!==null?(St(Bt,Bt.current&1),n.flags|=128,null):s&n.child.childLanes?T1(e,n,s):(St(Bt,Bt.current&1),e=wi(e,n,s),e!==null?e.sibling:null);St(Bt,Bt.current&1);break;case 19:if(u=(s&n.childLanes)!==0,e.flags&128){if(u)return M1(e,n,s);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),St(Bt,Bt.current),u)break;return null;case 22:case 23:return n.lanes=0,b1(e,n,s)}return wi(e,n,s)}var k1,Pu,O1,L1;k1=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Pu=function(){};O1=function(e,n,s,u){var h=e.memoizedProps;if(h!==u){e=n.stateNode,ys(ei.current);var g=null;switch(s){case"input":h=iu(e,h),u=iu(e,u),g=[];break;case"select":h=Ft({},h,{value:void 0}),u=Ft({},u,{value:void 0}),g=[];break;case"textarea":h=au(e,h),u=au(e,u),g=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=Il)}cu(s,u);var w;s=null;for(v in h)if(!u.hasOwnProperty(v)&&h.hasOwnProperty(v)&&h[v]!=null)if(v==="style"){var A=h[v];for(w in A)A.hasOwnProperty(w)&&(s||(s={}),s[w]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(aa.hasOwnProperty(v)?g||(g=[]):(g=g||[]).push(v,null));for(v in u){var S=u[v];if(A=h!=null?h[v]:void 0,u.hasOwnProperty(v)&&S!==A&&(S!=null||A!=null))if(v==="style")if(A){for(w in A)!A.hasOwnProperty(w)||S&&S.hasOwnProperty(w)||(s||(s={}),s[w]="");for(w in S)S.hasOwnProperty(w)&&A[w]!==S[w]&&(s||(s={}),s[w]=S[w])}else s||(g||(g=[]),g.push(v,s)),s=S;else v==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,A=A?A.__html:void 0,S!=null&&A!==S&&(g=g||[]).push(v,S)):v==="children"?typeof S!="string"&&typeof S!="number"||(g=g||[]).push(v,""+S):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(aa.hasOwnProperty(v)?(S!=null&&v==="onScroll"&&Mt("scroll",e),g||A===S||(g=[])):(g=g||[]).push(v,S))}s&&(g=g||[]).push("style",s);var v=g;(n.updateQueue=v)&&(n.flags|=4)}};L1=function(e,n,s,u){s!==u&&(n.flags|=4)};function Ho(e,n){if(!Rt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function An(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,u=0;if(n)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=u,e.childLanes=s,n}function Om(e,n,s){var u=n.pendingProps;switch(xd(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(n),null;case 1:return Zn(n.type)&&Tl(),An(n),null;case 3:return u=n.stateNode,ho(),kt(Vn),kt(bn),bd(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(Ja(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Rr!==null&&(Zu(Rr),Rr=null))),Pu(e,n),An(n),null;case 5:Sd(n);var h=ys(wa.current);if(s=n.type,e!==null&&n.stateNode!=null)O1(e,n,s,u,h),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(n.stateNode===null)throw Error(fe(166));return An(n),null}if(e=ys(ei.current),Ja(n)){u=n.stateNode,s=n.type;var g=n.memoizedProps;switch(u[Jr]=n,u[xa]=g,e=(n.mode&1)!==0,s){case"dialog":Mt("cancel",u),Mt("close",u);break;case"iframe":case"object":case"embed":Mt("load",u);break;case"video":case"audio":for(h=0;h<Xo.length;h++)Mt(Xo[h],u);break;case"source":Mt("error",u);break;case"img":case"image":case"link":Mt("error",u),Mt("load",u);break;case"details":Mt("toggle",u);break;case"input":ph(u,g),Mt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!g.multiple},Mt("invalid",u);break;case"textarea":xh(u,g),Mt("invalid",u)}cu(s,g),h=null;for(var w in g)if(g.hasOwnProperty(w)){var A=g[w];w==="children"?typeof A=="string"?u.textContent!==A&&(g.suppressHydrationWarning!==!0&&qa(u.textContent,A,e),h=["children",A]):typeof A=="number"&&u.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&qa(u.textContent,A,e),h=["children",""+A]):aa.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&Mt("scroll",u)}switch(s){case"input":Va(u),mh(u,g,!0);break;case"textarea":Va(u),yh(u);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(u.onclick=Il)}u=h,n.updateQueue=u,u!==null&&(n.flags|=4)}else{w=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=a0(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=w.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=w.createElement(s,{is:u.is}):(e=w.createElement(s),s==="select"&&(w=e,u.multiple?w.multiple=!0:u.size&&(w.size=u.size))):e=w.createElementNS(e,s),e[Jr]=n,e[xa]=u,k1(e,n,!1,!1),n.stateNode=e;e:{switch(w=uu(s,u),s){case"dialog":Mt("cancel",e),Mt("close",e),h=u;break;case"iframe":case"object":case"embed":Mt("load",e),h=u;break;case"video":case"audio":for(h=0;h<Xo.length;h++)Mt(Xo[h],e);h=u;break;case"source":Mt("error",e),h=u;break;case"img":case"image":case"link":Mt("error",e),Mt("load",e),h=u;break;case"details":Mt("toggle",e),h=u;break;case"input":ph(e,u),h=iu(e,u),Mt("invalid",e);break;case"option":h=u;break;case"select":e._wrapperState={wasMultiple:!!u.multiple},h=Ft({},u,{value:void 0}),Mt("invalid",e);break;case"textarea":xh(e,u),h=au(e,u),Mt("invalid",e);break;default:h=u}cu(s,h),A=h;for(g in A)if(A.hasOwnProperty(g)){var S=A[g];g==="style"?u0(e,S):g==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&l0(e,S)):g==="children"?typeof S=="string"?(s!=="textarea"||S!=="")&&la(e,S):typeof S=="number"&&la(e,""+S):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(aa.hasOwnProperty(g)?S!=null&&g==="onScroll"&&Mt("scroll",e):S!=null&&nd(e,g,S,w))}switch(s){case"input":Va(e),mh(e,u,!1);break;case"textarea":Va(e),yh(e);break;case"option":u.value!=null&&e.setAttribute("value",""+Ji(u.value));break;case"select":e.multiple=!!u.multiple,g=u.value,g!=null?Js(e,!!u.multiple,g,!1):u.defaultValue!=null&&Js(e,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Il)}switch(s){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return An(n),null;case 6:if(e&&n.stateNode!=null)L1(e,n,e.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(fe(166));if(s=ys(wa.current),ys(ei.current),Ja(n)){if(u=n.stateNode,s=n.memoizedProps,u[Jr]=n,(g=u.nodeValue!==s)&&(e=tr,e!==null))switch(e.tag){case 3:qa(u.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qa(u.nodeValue,s,(e.mode&1)!==0)}g&&(n.flags|=4)}else u=(s.nodeType===9?s:s.ownerDocument).createTextNode(u),u[Jr]=n,n.stateNode=u}return An(n),null;case 13:if(kt(Bt),u=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Rt&&er!==null&&n.mode&1&&!(n.flags&128))q0(),co(),n.flags|=98560,g=!1;else if(g=Ja(n),u!==null&&u.dehydrated!==null){if(e===null){if(!g)throw Error(fe(318));if(g=n.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(fe(317));g[Jr]=n}else co(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;An(n),g=!1}else Rr!==null&&(Zu(Rr),Rr=null),g=!0;if(!g)return n.flags&65536?n:null}return n.flags&128?(n.lanes=s,n):(u=u!==null,u!==(e!==null&&e.memoizedState!==null)&&u&&(n.child.flags|=8192,n.mode&1&&(e===null||Bt.current&1?nn===0&&(nn=3):jd())),n.updateQueue!==null&&(n.flags|=4),An(n),null);case 4:return ho(),Pu(e,n),e===null&&pa(n.stateNode.containerInfo),An(n),null;case 10:return vd(n.type._context),An(n),null;case 17:return Zn(n.type)&&Tl(),An(n),null;case 19:if(kt(Bt),g=n.memoizedState,g===null)return An(n),null;if(u=(n.flags&128)!==0,w=g.rendering,w===null)if(u)Ho(g,!1);else{if(nn!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(w=Pl(e),w!==null){for(n.flags|=128,Ho(g,!1),u=w.updateQueue,u!==null&&(n.updateQueue=u,n.flags|=4),n.subtreeFlags=0,u=s,s=n.child;s!==null;)g=s,e=u,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,e=w.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return St(Bt,Bt.current&1|2),n.child}e=e.sibling}g.tail!==null&&Vt()>go&&(n.flags|=128,u=!0,Ho(g,!1),n.lanes=4194304)}else{if(!u)if(e=Pl(w),e!==null){if(n.flags|=128,u=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Ho(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Rt)return An(n),null}else 2*Vt()-g.renderingStartTime>go&&s!==1073741824&&(n.flags|=128,u=!0,Ho(g,!1),n.lanes=4194304);g.isBackwards?(w.sibling=n.child,n.child=w):(s=g.last,s!==null?s.sibling=w:n.child=w,g.last=w)}return g.tail!==null?(n=g.tail,g.rendering=n,g.tail=n.sibling,g.renderingStartTime=Vt(),n.sibling=null,s=Bt.current,St(Bt,u?s&1|2:s&1),n):(An(n),null);case 22:case 23:return Bd(),u=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==u&&(n.flags|=8192),u&&n.mode&1?Jn&1073741824&&(An(n),n.subtreeFlags&6&&(n.flags|=8192)):An(n),null;case 24:return null;case 25:return null}throw Error(fe(156,n.tag))}function Lm(e,n){switch(xd(n),n.tag){case 1:return Zn(n.type)&&Tl(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ho(),kt(Vn),kt(bn),bd(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Sd(n),null;case 13:if(kt(Bt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(fe(340));co()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return kt(Bt),null;case 4:return ho(),null;case 10:return vd(n.type._context),null;case 22:case 23:return Bd(),null;case 24:return null;default:return null}}var tl=!1,Sn=!1,Rm=typeof WeakSet=="function"?WeakSet:Set,be=null;function Qs(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(u){Ut(e,n,u)}else s.current=null}function Bu(e,n,s){try{s()}catch(u){Ut(e,n,u)}}var lf=!1;function Dm(e,n){if(_u=Sl,e=j0(),pd(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var h=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var w=0,A=-1,S=-1,v=0,k=0,O=e,H=null;t:for(;;){for(var V;O!==s||h!==0&&O.nodeType!==3||(A=w+h),O!==g||u!==0&&O.nodeType!==3||(S=w+u),O.nodeType===3&&(w+=O.nodeValue.length),(V=O.firstChild)!==null;)H=O,O=V;for(;;){if(O===e)break t;if(H===s&&++v===h&&(A=w),H===g&&++k===u&&(S=w),(V=O.nextSibling)!==null)break;O=H,H=O.parentNode}O=V}s=A===-1||S===-1?null:{start:A,end:S}}else s=null}s=s||{start:0,end:0}}else s=null;for(vu={focusedElem:e,selectionRange:s},Sl=!1,be=n;be!==null;)if(n=be,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,be=e;else for(;be!==null;){n=be;try{var J=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(J!==null){var U=J.memoizedProps,xe=J.memoizedState,P=n.stateNode,D=P.getSnapshotBeforeUpdate(n.elementType===n.type?U:kr(n.type,U),xe);P.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var B=n.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(X){Ut(n,n.return,X)}if(e=n.sibling,e!==null){e.return=n.return,be=e;break}be=n.return}return J=lf,lf=!1,J}function na(e,n,s){var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&e)===e){var g=h.destroy;h.destroy=void 0,g!==void 0&&Bu(n,s,g)}h=h.next}while(h!==u)}}function tc(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var u=s.create;s.destroy=u()}s=s.next}while(s!==n)}}function ju(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function R1(e){var n=e.alternate;n!==null&&(e.alternate=null,R1(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Jr],delete n[xa],delete n[Au],delete n[xm],delete n[ym])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function D1(e){return e.tag===5||e.tag===3||e.tag===4}function cf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||D1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fu(e,n,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Il));else if(u!==4&&(e=e.child,e!==null))for(Fu(e,n,s),e=e.sibling;e!==null;)Fu(e,n,s),e=e.sibling}function zu(e,n,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(zu(e,n,s),e=e.sibling;e!==null;)zu(e,n,s),e=e.sibling}var pn=null,Or=!1;function Pi(e,n,s){for(s=s.child;s!==null;)P1(e,n,s),s=s.sibling}function P1(e,n,s){if($r&&typeof $r.onCommitFiberUnmount=="function")try{$r.onCommitFiberUnmount(Yl,s)}catch{}switch(s.tag){case 5:Sn||Qs(s,n);case 6:var u=pn,h=Or;pn=null,Pi(e,n,s),pn=u,Or=h,pn!==null&&(Or?(e=pn,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):pn.removeChild(s.stateNode));break;case 18:pn!==null&&(Or?(e=pn,s=s.stateNode,e.nodeType===8?zc(e.parentNode,s):e.nodeType===1&&zc(e,s),ha(e)):zc(pn,s.stateNode));break;case 4:u=pn,h=Or,pn=s.stateNode.containerInfo,Or=!0,Pi(e,n,s),pn=u,Or=h;break;case 0:case 11:case 14:case 15:if(!Sn&&(u=s.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var g=h,w=g.destroy;g=g.tag,w!==void 0&&(g&2||g&4)&&Bu(s,n,w),h=h.next}while(h!==u)}Pi(e,n,s);break;case 1:if(!Sn&&(Qs(s,n),u=s.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=s.memoizedProps,u.state=s.memoizedState,u.componentWillUnmount()}catch(A){Ut(s,n,A)}Pi(e,n,s);break;case 21:Pi(e,n,s);break;case 22:s.mode&1?(Sn=(u=Sn)||s.memoizedState!==null,Pi(e,n,s),Sn=u):Pi(e,n,s);break;default:Pi(e,n,s)}}function uf(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Rm),n.forEach(function(u){var h=Zm.bind(null,e,u);s.has(u)||(s.add(u),u.then(h,h))})}}function Mr(e,n){var s=n.deletions;if(s!==null)for(var u=0;u<s.length;u++){var h=s[u];try{var g=e,w=n,A=w;e:for(;A!==null;){switch(A.tag){case 5:pn=A.stateNode,Or=!1;break e;case 3:pn=A.stateNode.containerInfo,Or=!0;break e;case 4:pn=A.stateNode.containerInfo,Or=!0;break e}A=A.return}if(pn===null)throw Error(fe(160));P1(g,w,h),pn=null,Or=!1;var S=h.alternate;S!==null&&(S.return=null),h.return=null}catch(v){Ut(h,n,v)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)B1(n,e),n=n.sibling}function B1(e,n){var s=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mr(n,e),Qr(e),u&4){try{na(3,e,e.return),tc(3,e)}catch(U){Ut(e,e.return,U)}try{na(5,e,e.return)}catch(U){Ut(e,e.return,U)}}break;case 1:Mr(n,e),Qr(e),u&512&&s!==null&&Qs(s,s.return);break;case 5:if(Mr(n,e),Qr(e),u&512&&s!==null&&Qs(s,s.return),e.flags&32){var h=e.stateNode;try{la(h,"")}catch(U){Ut(e,e.return,U)}}if(u&4&&(h=e.stateNode,h!=null)){var g=e.memoizedProps,w=s!==null?s.memoizedProps:g,A=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&s0(h,g),uu(A,w);var v=uu(A,g);for(w=0;w<S.length;w+=2){var k=S[w],O=S[w+1];k==="style"?u0(h,O):k==="dangerouslySetInnerHTML"?l0(h,O):k==="children"?la(h,O):nd(h,k,O,v)}switch(A){case"input":su(h,g);break;case"textarea":o0(h,g);break;case"select":var H=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var V=g.value;V!=null?Js(h,!!g.multiple,V,!1):H!==!!g.multiple&&(g.defaultValue!=null?Js(h,!!g.multiple,g.defaultValue,!0):Js(h,!!g.multiple,g.multiple?[]:"",!1))}h[xa]=g}catch(U){Ut(e,e.return,U)}}break;case 6:if(Mr(n,e),Qr(e),u&4){if(e.stateNode===null)throw Error(fe(162));h=e.stateNode,g=e.memoizedProps;try{h.nodeValue=g}catch(U){Ut(e,e.return,U)}}break;case 3:if(Mr(n,e),Qr(e),u&4&&s!==null&&s.memoizedState.isDehydrated)try{ha(n.containerInfo)}catch(U){Ut(e,e.return,U)}break;case 4:Mr(n,e),Qr(e);break;case 13:Mr(n,e),Qr(e),h=e.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(Dd=Vt())),u&4&&uf(e);break;case 22:if(k=s!==null&&s.memoizedState!==null,e.mode&1?(Sn=(v=Sn)||k,Mr(n,e),Sn=v):Mr(n,e),Qr(e),u&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!k&&e.mode&1)for(be=e,k=e.child;k!==null;){for(O=be=k;be!==null;){switch(H=be,V=H.child,H.tag){case 0:case 11:case 14:case 15:na(4,H,H.return);break;case 1:Qs(H,H.return);var J=H.stateNode;if(typeof J.componentWillUnmount=="function"){u=H,s=H.return;try{n=u,J.props=n.memoizedProps,J.state=n.memoizedState,J.componentWillUnmount()}catch(U){Ut(u,s,U)}}break;case 5:Qs(H,H.return);break;case 22:if(H.memoizedState!==null){hf(O);continue}}V!==null?(V.return=H,be=V):hf(O)}k=k.sibling}e:for(k=null,O=e;;){if(O.tag===5){if(k===null){k=O;try{h=O.stateNode,v?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=O.stateNode,S=O.memoizedProps.style,w=S!=null&&S.hasOwnProperty("display")?S.display:null,A.style.display=c0("display",w))}catch(U){Ut(e,e.return,U)}}}else if(O.tag===6){if(k===null)try{O.stateNode.nodeValue=v?"":O.memoizedProps}catch(U){Ut(e,e.return,U)}}else if((O.tag!==22&&O.tag!==23||O.memoizedState===null||O===e)&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===e)break e;for(;O.sibling===null;){if(O.return===null||O.return===e)break e;k===O&&(k=null),O=O.return}k===O&&(k=null),O.sibling.return=O.return,O=O.sibling}}break;case 19:Mr(n,e),Qr(e),u&4&&uf(e);break;case 21:break;default:Mr(n,e),Qr(e)}}function Qr(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(D1(s)){var u=s;break e}s=s.return}throw Error(fe(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(la(h,""),u.flags&=-33);var g=cf(e);zu(e,g,h);break;case 3:case 4:var w=u.stateNode.containerInfo,A=cf(e);Fu(e,A,w);break;default:throw Error(fe(161))}}catch(S){Ut(e,e.return,S)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Pm(e,n,s){be=e,j1(e)}function j1(e,n,s){for(var u=(e.mode&1)!==0;be!==null;){var h=be,g=h.child;if(h.tag===22&&u){var w=h.memoizedState!==null||tl;if(!w){var A=h.alternate,S=A!==null&&A.memoizedState!==null||Sn;A=tl;var v=Sn;if(tl=w,(Sn=S)&&!v)for(be=h;be!==null;)w=be,S=w.child,w.tag===22&&w.memoizedState!==null?ff(h):S!==null?(S.return=w,be=S):ff(h);for(;g!==null;)be=g,j1(g),g=g.sibling;be=h,tl=A,Sn=v}df(e)}else h.subtreeFlags&8772&&g!==null?(g.return=h,be=g):df(e)}}function df(e){for(;be!==null;){var n=be;if(n.flags&8772){var s=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Sn||tc(5,n);break;case 1:var u=n.stateNode;if(n.flags&4&&!Sn)if(s===null)u.componentDidMount();else{var h=n.elementType===n.type?s.memoizedProps:kr(n.type,s.memoizedProps);u.componentDidUpdate(h,s.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var g=n.updateQueue;g!==null&&Xh(n,g,u);break;case 3:var w=n.updateQueue;if(w!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Xh(n,w,s)}break;case 5:var A=n.stateNode;if(s===null&&n.flags&4){s=A;var S=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&s.focus();break;case"img":S.src&&(s.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var v=n.alternate;if(v!==null){var k=v.memoizedState;if(k!==null){var O=k.dehydrated;O!==null&&ha(O)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Sn||n.flags&512&&ju(n)}catch(H){Ut(n,n.return,H)}}if(n===e){be=null;break}if(s=n.sibling,s!==null){s.return=n.return,be=s;break}be=n.return}}function hf(e){for(;be!==null;){var n=be;if(n===e){be=null;break}var s=n.sibling;if(s!==null){s.return=n.return,be=s;break}be=n.return}}function ff(e){for(;be!==null;){var n=be;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{tc(4,n)}catch(S){Ut(n,s,S)}break;case 1:var u=n.stateNode;if(typeof u.componentDidMount=="function"){var h=n.return;try{u.componentDidMount()}catch(S){Ut(n,h,S)}}var g=n.return;try{ju(n)}catch(S){Ut(n,g,S)}break;case 5:var w=n.return;try{ju(n)}catch(S){Ut(n,w,S)}}}catch(S){Ut(n,n.return,S)}if(n===e){be=null;break}var A=n.sibling;if(A!==null){A.return=n.return,be=A;break}be=n.return}}var Bm=Math.ceil,Fl=_i.ReactCurrentDispatcher,Ld=_i.ReactCurrentOwner,yr=_i.ReactCurrentBatchConfig,lt=0,fn=null,Kt=null,mn=0,Jn=0,Ks=ns(0),nn=0,Ea=null,As=0,nc=0,Rd=0,ra=null,Un=null,Dd=0,go=1/0,ui=null,zl=!1,Uu=null,Qi=null,nl=!1,Vi=null,Ul=0,ia=0,Hu=null,gl=-1,pl=0;function Rn(){return lt&6?Vt():gl!==-1?gl:gl=Vt()}function Ki(e){return e.mode&1?lt&2&&mn!==0?mn&-mn:_m.transition!==null?(pl===0&&(pl=C0()),pl):(e=xt,e!==0||(e=window.event,e=e===void 0?16:T0(e.type)),e):1}function Pr(e,n,s,u){if(50<ia)throw ia=0,Hu=null,Error(fe(185));Sa(e,s,u),(!(lt&2)||e!==fn)&&(e===fn&&(!(lt&2)&&(nc|=s),nn===4&&Ui(e,mn)),Wn(e,u),s===1&&lt===0&&!(n.mode&1)&&(go=Vt()+500,Jl&&rs()))}function Wn(e,n){var s=e.callbackNode;_p(e,n);var u=Al(e,e===fn?mn:0);if(u===0)s!==null&&vh(s),e.callbackNode=null,e.callbackPriority=0;else if(n=u&-u,e.callbackPriority!==n){if(s!=null&&vh(s),n===1)e.tag===0?wm(gf.bind(null,e)):X0(gf.bind(null,e)),pm(function(){!(lt&6)&&rs()}),s=null;else{switch(E0(u)){case 1:s=ad;break;case 4:s=_0;break;case 16:s=El;break;case 536870912:s=v0;break;default:s=El}s=G1(s,F1.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function F1(e,n){if(gl=-1,pl=0,lt&6)throw Error(fe(327));var s=e.callbackNode;if(ro()&&e.callbackNode!==s)return null;var u=Al(e,e===fn?mn:0);if(u===0)return null;if(u&30||u&e.expiredLanes||n)n=Hl(e,u);else{n=u;var h=lt;lt|=2;var g=U1();(fn!==e||mn!==n)&&(ui=null,go=Vt()+500,ws(e,n));do try{zm();break}catch(A){z1(e,A)}while(!0);_d(),Fl.current=g,lt=h,Kt!==null?n=0:(fn=null,mn=0,n=nn)}if(n!==0){if(n===2&&(h=pu(e),h!==0&&(u=h,n=Vu(e,h))),n===1)throw s=Ea,ws(e,0),Ui(e,u),Wn(e,Vt()),s;if(n===6)Ui(e,u);else{if(h=e.current.alternate,!(u&30)&&!jm(h)&&(n=Hl(e,u),n===2&&(g=pu(e),g!==0&&(u=g,n=Vu(e,g))),n===1))throw s=Ea,ws(e,0),Ui(e,u),Wn(e,Vt()),s;switch(e.finishedWork=h,e.finishedLanes=u,n){case 0:case 1:throw Error(fe(345));case 2:ps(e,Un,ui);break;case 3:if(Ui(e,u),(u&130023424)===u&&(n=Dd+500-Vt(),10<n)){if(Al(e,0)!==0)break;if(h=e.suspendedLanes,(h&u)!==u){Rn(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=Eu(ps.bind(null,e,Un,ui),n);break}ps(e,Un,ui);break;case 4:if(Ui(e,u),(u&4194240)===u)break;for(n=e.eventTimes,h=-1;0<u;){var w=31-Dr(u);g=1<<w,w=n[w],w>h&&(h=w),u&=~g}if(u=h,u=Vt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Bm(u/1960))-u,10<u){e.timeoutHandle=Eu(ps.bind(null,e,Un,ui),u);break}ps(e,Un,ui);break;case 5:ps(e,Un,ui);break;default:throw Error(fe(329))}}}return Wn(e,Vt()),e.callbackNode===s?F1.bind(null,e):null}function Vu(e,n){var s=ra;return e.current.memoizedState.isDehydrated&&(ws(e,n).flags|=256),e=Hl(e,n),e!==2&&(n=Un,Un=s,n!==null&&Zu(n)),e}function Zu(e){Un===null?Un=e:Un.push.apply(Un,e)}function jm(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var u=0;u<s.length;u++){var h=s[u],g=h.getSnapshot;h=h.value;try{if(!Br(g(),h))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ui(e,n){for(n&=~Rd,n&=~nc,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-Dr(n),u=1<<s;e[s]=-1,n&=~u}}function gf(e){if(lt&6)throw Error(fe(327));ro();var n=Al(e,0);if(!(n&1))return Wn(e,Vt()),null;var s=Hl(e,n);if(e.tag!==0&&s===2){var u=pu(e);u!==0&&(n=u,s=Vu(e,u))}if(s===1)throw s=Ea,ws(e,0),Ui(e,n),Wn(e,Vt()),s;if(s===6)throw Error(fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,ps(e,Un,ui),Wn(e,Vt()),null}function Pd(e,n){var s=lt;lt|=1;try{return e(n)}finally{lt=s,lt===0&&(go=Vt()+500,Jl&&rs())}}function Ss(e){Vi!==null&&Vi.tag===0&&!(lt&6)&&ro();var n=lt;lt|=1;var s=yr.transition,u=xt;try{if(yr.transition=null,xt=1,e)return e()}finally{xt=u,yr.transition=s,lt=n,!(lt&6)&&rs()}}function Bd(){Jn=Ks.current,kt(Ks)}function ws(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,gm(s)),Kt!==null)for(s=Kt.return;s!==null;){var u=s;switch(xd(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Tl();break;case 3:ho(),kt(Vn),kt(bn),bd();break;case 5:Sd(u);break;case 4:ho();break;case 13:kt(Bt);break;case 19:kt(Bt);break;case 10:vd(u.type._context);break;case 22:case 23:Bd()}s=s.return}if(fn=e,Kt=e=qi(e.current,null),mn=Jn=n,nn=0,Ea=null,Rd=nc=As=0,Un=ra=null,xs!==null){for(n=0;n<xs.length;n++)if(s=xs[n],u=s.interleaved,u!==null){s.interleaved=null;var h=u.next,g=s.pending;if(g!==null){var w=g.next;g.next=h,u.next=w}s.pending=u}xs=null}return e}function z1(e,n){do{var s=Kt;try{if(_d(),dl.current=jl,Bl){for(var u=jt.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Bl=!1}if(Es=0,hn=tn=jt=null,ta=!1,_a=0,Ld.current=null,s===null||s.return===null){nn=1,Ea=n,Kt=null;break}e:{var g=e,w=s.return,A=s,S=n;if(n=mn,A.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var v=S,k=A,O=k.tag;if(!(k.mode&1)&&(O===0||O===11||O===15)){var H=k.alternate;H?(k.updateQueue=H.updateQueue,k.memoizedState=H.memoizedState,k.lanes=H.lanes):(k.updateQueue=null,k.memoizedState=null)}var V=ef(w);if(V!==null){V.flags&=-257,tf(V,w,A,g,n),V.mode&1&&$h(g,v,n),n=V,S=v;var J=n.updateQueue;if(J===null){var U=new Set;U.add(S),n.updateQueue=U}else J.add(S);break e}else{if(!(n&1)){$h(g,v,n),jd();break e}S=Error(fe(426))}}else if(Rt&&A.mode&1){var xe=ef(w);if(xe!==null){!(xe.flags&65536)&&(xe.flags|=256),tf(xe,w,A,g,n),yd(fo(S,A));break e}}g=S=fo(S,A),nn!==4&&(nn=2),ra===null?ra=[g]:ra.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,n&=-n,g.lanes|=n;var P=E1(g,S,n);Yh(g,P);break e;case 1:A=S;var D=g.type,B=g.stateNode;if(!(g.flags&128)&&(typeof D.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Qi===null||!Qi.has(B)))){g.flags|=65536,n&=-n,g.lanes|=n;var X=A1(g,A,n);Yh(g,X);break e}}g=g.return}while(g!==null)}V1(s)}catch(ge){n=ge,Kt===s&&s!==null&&(Kt=s=s.return);continue}break}while(!0)}function U1(){var e=Fl.current;return Fl.current=jl,e===null?jl:e}function jd(){(nn===0||nn===3||nn===2)&&(nn=4),fn===null||!(As&268435455)&&!(nc&268435455)||Ui(fn,mn)}function Hl(e,n){var s=lt;lt|=2;var u=U1();(fn!==e||mn!==n)&&(ui=null,ws(e,n));do try{Fm();break}catch(h){z1(e,h)}while(!0);if(_d(),lt=s,Fl.current=u,Kt!==null)throw Error(fe(261));return fn=null,mn=0,nn}function Fm(){for(;Kt!==null;)H1(Kt)}function zm(){for(;Kt!==null&&!dp();)H1(Kt)}function H1(e){var n=W1(e.alternate,e,Jn);e.memoizedProps=e.pendingProps,n===null?V1(e):Kt=n,Ld.current=null}function V1(e){var n=e;do{var s=n.alternate;if(e=n.return,n.flags&32768){if(s=Lm(s,n),s!==null){s.flags&=32767,Kt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nn=6,Kt=null;return}}else if(s=Om(s,n,Jn),s!==null){Kt=s;return}if(n=n.sibling,n!==null){Kt=n;return}Kt=n=e}while(n!==null);nn===0&&(nn=5)}function ps(e,n,s){var u=xt,h=yr.transition;try{yr.transition=null,xt=1,Um(e,n,s,u)}finally{yr.transition=h,xt=u}return null}function Um(e,n,s,u){do ro();while(Vi!==null);if(lt&6)throw Error(fe(327));s=e.finishedWork;var h=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(fe(177));e.callbackNode=null,e.callbackPriority=0;var g=s.lanes|s.childLanes;if(vp(e,g),e===fn&&(Kt=fn=null,mn=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||nl||(nl=!0,G1(El,function(){return ro(),null})),g=(s.flags&15990)!==0,s.subtreeFlags&15990||g){g=yr.transition,yr.transition=null;var w=xt;xt=1;var A=lt;lt|=4,Ld.current=null,Dm(e,s),B1(s,e),am(vu),Sl=!!_u,vu=_u=null,e.current=s,Pm(s),hp(),lt=A,xt=w,yr.transition=g}else e.current=s;if(nl&&(nl=!1,Vi=e,Ul=h),g=e.pendingLanes,g===0&&(Qi=null),pp(s.stateNode),Wn(e,Vt()),n!==null)for(u=e.onRecoverableError,s=0;s<n.length;s++)h=n[s],u(h.value,{componentStack:h.stack,digest:h.digest});if(zl)throw zl=!1,e=Uu,Uu=null,e;return Ul&1&&e.tag!==0&&ro(),g=e.pendingLanes,g&1?e===Hu?ia++:(ia=0,Hu=e):ia=0,rs(),null}function ro(){if(Vi!==null){var e=E0(Ul),n=yr.transition,s=xt;try{if(yr.transition=null,xt=16>e?16:e,Vi===null)var u=!1;else{if(e=Vi,Vi=null,Ul=0,lt&6)throw Error(fe(331));var h=lt;for(lt|=4,be=e.current;be!==null;){var g=be,w=g.child;if(be.flags&16){var A=g.deletions;if(A!==null){for(var S=0;S<A.length;S++){var v=A[S];for(be=v;be!==null;){var k=be;switch(k.tag){case 0:case 11:case 15:na(8,k,g)}var O=k.child;if(O!==null)O.return=k,be=O;else for(;be!==null;){k=be;var H=k.sibling,V=k.return;if(R1(k),k===v){be=null;break}if(H!==null){H.return=V,be=H;break}be=V}}}var J=g.alternate;if(J!==null){var U=J.child;if(U!==null){J.child=null;do{var xe=U.sibling;U.sibling=null,U=xe}while(U!==null)}}be=g}}if(g.subtreeFlags&2064&&w!==null)w.return=g,be=w;else e:for(;be!==null;){if(g=be,g.flags&2048)switch(g.tag){case 0:case 11:case 15:na(9,g,g.return)}var P=g.sibling;if(P!==null){P.return=g.return,be=P;break e}be=g.return}}var D=e.current;for(be=D;be!==null;){w=be;var B=w.child;if(w.subtreeFlags&2064&&B!==null)B.return=w,be=B;else e:for(w=D;be!==null;){if(A=be,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:tc(9,A)}}catch(ge){Ut(A,A.return,ge)}if(A===w){be=null;break e}var X=A.sibling;if(X!==null){X.return=A.return,be=X;break e}be=A.return}}if(lt=h,rs(),$r&&typeof $r.onPostCommitFiberRoot=="function")try{$r.onPostCommitFiberRoot(Yl,e)}catch{}u=!0}return u}finally{xt=s,yr.transition=n}}return!1}function pf(e,n,s){n=fo(s,n),n=E1(e,n,1),e=Xi(e,n,1),n=Rn(),e!==null&&(Sa(e,1,n),Wn(e,n))}function Ut(e,n,s){if(e.tag===3)pf(e,e,s);else for(;n!==null;){if(n.tag===3){pf(n,e,s);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qi===null||!Qi.has(u))){e=fo(s,e),e=A1(n,e,1),n=Xi(n,e,1),e=Rn(),n!==null&&(Sa(n,1,e),Wn(n,e));break}}n=n.return}}function Hm(e,n,s){var u=e.pingCache;u!==null&&u.delete(n),n=Rn(),e.pingedLanes|=e.suspendedLanes&s,fn===e&&(mn&s)===s&&(nn===4||nn===3&&(mn&130023424)===mn&&500>Vt()-Dd?ws(e,0):Rd|=s),Wn(e,n)}function Z1(e,n){n===0&&(e.mode&1?(n=Ga,Ga<<=1,!(Ga&130023424)&&(Ga=4194304)):n=1);var s=Rn();e=yi(e,n),e!==null&&(Sa(e,n,s),Wn(e,s))}function Vm(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Z1(e,s)}function Zm(e,n){var s=0;switch(e.tag){case 13:var u=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:u=e.stateNode;break;default:throw Error(fe(314))}u!==null&&u.delete(n),Z1(e,s)}var W1;W1=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||Vn.current)Hn=!0;else{if(!(e.lanes&s)&&!(n.flags&128))return Hn=!1,km(e,n,s);Hn=!!(e.flags&131072)}else Hn=!1,Rt&&n.flags&1048576&&Q0(n,Ol,n.index);switch(n.lanes=0,n.tag){case 2:var u=n.type;fl(e,n),e=n.pendingProps;var h=lo(n,bn.current);no(n,s),h=Id(null,n,u,e,h,s);var g=Td();return n.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Zn(u)?(g=!0,Ml(n)):g=!1,n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Ed(n),h.updater=ec,n.stateNode=h,h._reactInternals=n,Mu(n,u,e,s),n=Lu(null,n,u,!0,g,s)):(n.tag=0,Rt&&g&&md(n),Ln(null,n,h,s),n=n.child),n;case 16:u=n.elementType;e:{switch(fl(e,n),e=n.pendingProps,h=u._init,u=h(u._payload),n.type=u,h=n.tag=Gm(u),e=kr(u,e),h){case 0:n=Ou(null,n,u,e,s);break e;case 1:n=sf(null,n,u,e,s);break e;case 11:n=nf(null,n,u,e,s);break e;case 14:n=rf(null,n,u,kr(u.type,e),s);break e}throw Error(fe(306,u,""))}return n;case 0:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:kr(u,h),Ou(e,n,u,h,s);case 1:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:kr(u,h),sf(e,n,u,h,s);case 3:e:{if(I1(n),e===null)throw Error(fe(387));u=n.pendingProps,g=n.memoizedState,h=g.element,t1(e,n),Dl(n,u,null,s);var w=n.memoizedState;if(u=w.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){h=fo(Error(fe(423)),n),n=of(e,n,u,s,h);break e}else if(u!==h){h=fo(Error(fe(424)),n),n=of(e,n,u,s,h);break e}else for(er=Yi(n.stateNode.containerInfo.firstChild),tr=n,Rt=!0,Rr=null,s=$0(n,null,u,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(co(),u===h){n=wi(e,n,s);break e}Ln(e,n,u,s)}n=n.child}return n;case 5:return n1(n),e===null&&Nu(n),u=n.type,h=n.pendingProps,g=e!==null?e.memoizedProps:null,w=h.children,Cu(u,h)?w=null:g!==null&&Cu(u,g)&&(n.flags|=32),N1(e,n),Ln(e,n,w,s),n.child;case 6:return e===null&&Nu(n),null;case 13:return T1(e,n,s);case 4:return Ad(n,n.stateNode.containerInfo),u=n.pendingProps,e===null?n.child=uo(n,null,u,s):Ln(e,n,u,s),n.child;case 11:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:kr(u,h),nf(e,n,u,h,s);case 7:return Ln(e,n,n.pendingProps,s),n.child;case 8:return Ln(e,n,n.pendingProps.children,s),n.child;case 12:return Ln(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(u=n.type._context,h=n.pendingProps,g=n.memoizedProps,w=h.value,St(Ll,u._currentValue),u._currentValue=w,g!==null)if(Br(g.value,w)){if(g.children===h.children&&!Vn.current){n=wi(e,n,s);break e}}else for(g=n.child,g!==null&&(g.return=n);g!==null;){var A=g.dependencies;if(A!==null){w=g.child;for(var S=A.firstContext;S!==null;){if(S.context===u){if(g.tag===1){S=pi(-1,s&-s),S.tag=2;var v=g.updateQueue;if(v!==null){v=v.shared;var k=v.pending;k===null?S.next=S:(S.next=k.next,k.next=S),v.pending=S}}g.lanes|=s,S=g.alternate,S!==null&&(S.lanes|=s),Iu(g.return,s,n),A.lanes|=s;break}S=S.next}}else if(g.tag===10)w=g.type===n.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(fe(341));w.lanes|=s,A=w.alternate,A!==null&&(A.lanes|=s),Iu(w,s,n),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===n){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Ln(e,n,h.children,s),n=n.child}return n;case 9:return h=n.type,u=n.pendingProps.children,no(n,s),h=wr(h),u=u(h),n.flags|=1,Ln(e,n,u,s),n.child;case 14:return u=n.type,h=kr(u,n.pendingProps),h=kr(u.type,h),rf(e,n,u,h,s);case 15:return S1(e,n,n.type,n.pendingProps,s);case 17:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:kr(u,h),fl(e,n),n.tag=1,Zn(u)?(e=!0,Ml(n)):e=!1,no(n,s),C1(n,u,h),Mu(n,u,h,s),Lu(null,n,u,!0,e,s);case 19:return M1(e,n,s);case 22:return b1(e,n,s)}throw Error(fe(156,n.tag))};function G1(e,n){return w0(e,n)}function Wm(e,n,s,u){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(e,n,s,u){return new Wm(e,n,s,u)}function Fd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gm(e){if(typeof e=="function")return Fd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===id)return 11;if(e===sd)return 14}return 2}function qi(e,n){var s=e.alternate;return s===null?(s=xr(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function ml(e,n,s,u,h,g){var w=2;if(u=e,typeof e=="function")Fd(e)&&(w=1);else if(typeof e=="string")w=5;else e:switch(e){case zs:return _s(s.children,h,g,n);case rd:w=8,h|=8;break;case eu:return e=xr(12,s,n,h|2),e.elementType=eu,e.lanes=g,e;case tu:return e=xr(13,s,n,h),e.elementType=tu,e.lanes=g,e;case nu:return e=xr(19,s,n,h),e.elementType=nu,e.lanes=g,e;case n0:return rc(s,h,g,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case e0:w=10;break e;case t0:w=9;break e;case id:w=11;break e;case sd:w=14;break e;case ji:w=16,u=null;break e}throw Error(fe(130,e==null?e:typeof e,""))}return n=xr(w,s,n,h),n.elementType=e,n.type=u,n.lanes=g,n}function _s(e,n,s,u){return e=xr(7,e,u,n),e.lanes=s,e}function rc(e,n,s,u){return e=xr(22,e,u,n),e.elementType=n0,e.lanes=s,e.stateNode={isHidden:!1},e}function Xc(e,n,s){return e=xr(6,e,null,n),e.lanes=s,e}function Qc(e,n,s){return n=xr(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Ym(e,n,s,u,h){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tc(0),this.expirationTimes=Tc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tc(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function zd(e,n,s,u,h,g,w,A,S){return e=new Ym(e,n,s,A,S),n===1?(n=1,g===!0&&(n|=8)):n=0,g=xr(3,null,null,n),e.current=g,g.stateNode=e,g.memoizedState={element:u,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ed(g),e}function Xm(e,n,s){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fs,key:u==null?null:""+u,children:e,containerInfo:n,implementation:s}}function Y1(e){if(!e)return $i;e=e._reactInternals;e:{if(Ns(e)!==e||e.tag!==1)throw Error(fe(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Zn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(fe(171))}if(e.tag===1){var s=e.type;if(Zn(s))return Y0(e,s,n)}return n}function X1(e,n,s,u,h,g,w,A,S){return e=zd(s,u,!0,e,h,g,w,A,S),e.context=Y1(null),s=e.current,u=Rn(),h=Ki(s),g=pi(u,h),g.callback=n??null,Xi(s,g,h),e.current.lanes=h,Sa(e,h,u),Wn(e,u),e}function ic(e,n,s,u){var h=n.current,g=Rn(),w=Ki(h);return s=Y1(s),n.context===null?n.context=s:n.pendingContext=s,n=pi(g,w),n.payload={element:e},u=u===void 0?null:u,u!==null&&(n.callback=u),e=Xi(h,n,w),e!==null&&(Pr(e,h,w,g),ul(e,h,w)),w}function Vl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mf(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Ud(e,n){mf(e,n),(e=e.alternate)&&mf(e,n)}function Qm(){return null}var Q1=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hd(e){this._internalRoot=e}sc.prototype.render=Hd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(fe(409));ic(e,n,null,null)};sc.prototype.unmount=Hd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ss(function(){ic(null,e,null,null)}),n[xi]=null}};function sc(e){this._internalRoot=e}sc.prototype.unstable_scheduleHydration=function(e){if(e){var n=b0();e={blockedOn:null,target:e,priority:n};for(var s=0;s<zi.length&&n!==0&&n<zi[s].priority;s++);zi.splice(s,0,e),s===0&&I0(e)}};function Vd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function xf(){}function Km(e,n,s,u,h){if(h){if(typeof u=="function"){var g=u;u=function(){var v=Vl(w);g.call(v)}}var w=X1(n,u,e,0,null,!1,!1,"",xf);return e._reactRootContainer=w,e[xi]=w.current,pa(e.nodeType===8?e.parentNode:e),Ss(),w}for(;h=e.lastChild;)e.removeChild(h);if(typeof u=="function"){var A=u;u=function(){var v=Vl(S);A.call(v)}}var S=zd(e,0,!1,null,null,!1,!1,"",xf);return e._reactRootContainer=S,e[xi]=S.current,pa(e.nodeType===8?e.parentNode:e),Ss(function(){ic(n,S,s,u)}),S}function ac(e,n,s,u,h){var g=s._reactRootContainer;if(g){var w=g;if(typeof h=="function"){var A=h;h=function(){var S=Vl(w);A.call(S)}}ic(n,w,e,h)}else w=Km(s,n,e,h,u);return Vl(w)}A0=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=Yo(n.pendingLanes);s!==0&&(ld(n,s|1),Wn(n,Vt()),!(lt&6)&&(go=Vt()+500,rs()))}break;case 13:Ss(function(){var u=yi(e,1);if(u!==null){var h=Rn();Pr(u,e,1,h)}}),Ud(e,1)}};cd=function(e){if(e.tag===13){var n=yi(e,134217728);if(n!==null){var s=Rn();Pr(n,e,134217728,s)}Ud(e,134217728)}};S0=function(e){if(e.tag===13){var n=Ki(e),s=yi(e,n);if(s!==null){var u=Rn();Pr(s,e,n,u)}Ud(e,n)}};b0=function(){return xt};N0=function(e,n){var s=xt;try{return xt=e,n()}finally{xt=s}};hu=function(e,n,s){switch(n){case"input":if(su(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var u=s[n];if(u!==e&&u.form===e.form){var h=ql(u);if(!h)throw Error(fe(90));i0(u),su(u,h)}}}break;case"textarea":o0(e,s);break;case"select":n=s.value,n!=null&&Js(e,!!s.multiple,n,!1)}};f0=Pd;g0=Ss;var qm={usingClientEntryPoint:!1,Events:[Na,Zs,ql,d0,h0,Pd]},Vo={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jm={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_i.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=x0(e),e===null?null:e.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||Qm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{Yl=rl.inject(Jm),$r=rl}catch{}}rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qm;rr.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vd(n))throw Error(fe(200));return Xm(e,n,null,s)};rr.createRoot=function(e,n){if(!Vd(e))throw Error(fe(299));var s=!1,u="",h=Q1;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),n=zd(e,1,!1,null,null,s,!1,u,h),e[xi]=n.current,pa(e.nodeType===8?e.parentNode:e),new Hd(n)};rr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(fe(188)):(e=Object.keys(e).join(","),Error(fe(268,e)));return e=x0(n),e=e===null?null:e.stateNode,e};rr.flushSync=function(e){return Ss(e)};rr.hydrate=function(e,n,s){if(!oc(n))throw Error(fe(200));return ac(null,e,n,!0,s)};rr.hydrateRoot=function(e,n,s){if(!Vd(e))throw Error(fe(405));var u=s!=null&&s.hydratedSources||null,h=!1,g="",w=Q1;if(s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),n=X1(n,null,e,1,s??null,h,!1,g,w),e[xi]=n.current,pa(e),u)for(e=0;e<u.length;e++)s=u[e],h=s._getVersion,h=h(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,h]:n.mutableSourceEagerHydrationData.push(s,h);return new sc(n)};rr.render=function(e,n,s){if(!oc(n))throw Error(fe(200));return ac(null,e,n,!1,s)};rr.unmountComponentAtNode=function(e){if(!oc(e))throw Error(fe(40));return e._reactRootContainer?(Ss(function(){ac(null,null,e,!1,function(){e._reactRootContainer=null,e[xi]=null})}),!0):!1};rr.unstable_batchedUpdates=Pd;rr.unstable_renderSubtreeIntoContainer=function(e,n,s,u){if(!oc(s))throw Error(fe(200));if(e==null||e._reactInternals===void 0)throw Error(fe(38));return ac(e,n,s,!1,u)};rr.version="18.3.1-next-f1338f8080-20240426";function K1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K1)}catch(e){console.error(e)}}K1(),Kf.exports=rr;var q1=Kf.exports,yf=q1;Jc.createRoot=yf.createRoot,Jc.hydrateRoot=yf.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $m={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ot=(e,n)=>{const s=se.forwardRef(({color:u="currentColor",size:h=24,strokeWidth:g=2,absoluteStrokeWidth:w,className:A="",children:S,...v},k)=>se.createElement("svg",{ref:k,...$m,width:h,height:h,stroke:u,strokeWidth:w?Number(g)*24/Number(h):g,className:["lucide",`lucide-${ex(e)}`,A].join(" "),...v},[...n.map(([O,H])=>se.createElement(O,H)),...Array.isArray(S)?S:[S]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=ot("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=ot("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ot("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ot("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=ot("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=ot("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=ot("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=ot("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=ot("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=ot("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=ot("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=ot("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=ot("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=ot("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=ot("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=ot("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=ot("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=ot("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=ot("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ot("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=ot("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=ot("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=ot("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=ot("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=ot("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=ot("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=ot("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=ot("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=ot("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=ot("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=ot("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=ot("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=ot("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function tg(e,n){const s=se.useRef(n);se.useEffect(function(){n!==s.current&&e.attributionControl!=null&&(s.current!=null&&e.attributionControl.removeAttribution(s.current),n!=null&&e.attributionControl.addAttribution(n)),s.current=n},[e,n])}const vx=1;function Cx(e){return Object.freeze({__version:vx,map:e})}function ng(e,n){return Object.freeze({...e,...n})}const rg=se.createContext(null),ig=rg.Provider;function cc(){const e=se.useContext(rg);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function sg(e){function n(s,u){const{instance:h,context:g}=e(s).current;return se.useImperativeHandle(u,()=>h),s.children==null?null:wl.createElement(ig,{value:g},s.children)}return se.forwardRef(n)}function Ex(e){function n(s,u){const[h,g]=se.useState(!1),{instance:w}=e(s,g).current;se.useImperativeHandle(u,()=>w),se.useEffect(function(){h&&w.update()},[w,h,s.children]);const A=w._contentNode;return A?q1.createPortal(s.children,A):null}return se.forwardRef(n)}function Ax(e){function n(s,u){const{instance:h}=e(s).current;return se.useImperativeHandle(u,()=>h),null}return se.forwardRef(n)}function Zd(e,n){const s=se.useRef();se.useEffect(function(){return n!=null&&e.instance.on(n),s.current=n,function(){s.current!=null&&e.instance.off(s.current),s.current=null}},[e,n])}function uc(e,n){const s=e.pane??n.pane;return s?{...e,pane:s}:e}function Sx(e,n){return function(u,h){const g=cc(),w=e(uc(u,g),g);return tg(g.map,u.attribution),Zd(w.current,u.eventHandlers),n(w.current,g,u,h),w}}var Gu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(s,u){u(n)})(js,function(s){var u="1.9.4";function h(i){var c,p,_,E;for(p=1,_=arguments.length;p<_;p++){E=arguments[p];for(c in E)i[c]=E[c]}return i}var g=Object.create||function(){function i(){}return function(c){return i.prototype=c,new i}}();function w(i,c){var p=Array.prototype.slice;if(i.bind)return i.bind.apply(i,p.call(arguments,1));var _=p.call(arguments,2);return function(){return i.apply(c,_.length?_.concat(p.call(arguments)):arguments)}}var A=0;function S(i){return"_leaflet_id"in i||(i._leaflet_id=++A),i._leaflet_id}function v(i,c,p){var _,E,T,j;return j=function(){_=!1,E&&(T.apply(p,E),E=!1)},T=function(){_?E=arguments:(i.apply(p,arguments),setTimeout(j,c),_=!0)},T}function k(i,c,p){var _=c[1],E=c[0],T=_-E;return i===_&&p?i:((i-E)%T+T)%T+E}function O(){return!1}function H(i,c){if(c===!1)return i;var p=Math.pow(10,c===void 0?6:c);return Math.round(i*p)/p}function V(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function J(i){return V(i).split(/\s+/)}function U(i,c){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?g(i.options):{});for(var p in c)i.options[p]=c[p];return i.options}function xe(i,c,p){var _=[];for(var E in i)_.push(encodeURIComponent(p?E.toUpperCase():E)+"="+encodeURIComponent(i[E]));return(!c||c.indexOf("?")===-1?"?":"&")+_.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function D(i,c){return i.replace(P,function(p,_){var E=c[_];if(E===void 0)throw new Error("No value provided for variable "+p);return typeof E=="function"&&(E=E(c)),E})}var B=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function X(i,c){for(var p=0;p<i.length;p++)if(i[p]===c)return p;return-1}var ge="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function re(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var Z=0;function te(i){var c=+new Date,p=Math.max(0,16-(c-Z));return Z=c+p,window.setTimeout(i,p)}var ee=window.requestAnimationFrame||re("RequestAnimationFrame")||te,Se=window.cancelAnimationFrame||re("CancelAnimationFrame")||re("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function Re(i,c,p){if(p&&ee===te)i.call(c);else return ee.call(window,w(i,c))}function me(i){i&&Se.call(window,i)}var Ve={__proto__:null,extend:h,create:g,bind:w,get lastId(){return A},stamp:S,throttle:v,wrapNum:k,falseFn:O,formatNum:H,trim:V,splitWords:J,setOptions:U,getParamString:xe,template:D,isArray:B,indexOf:X,emptyImageUrl:ge,requestFn:ee,cancelFn:Se,requestAnimFrame:Re,cancelAnimFrame:me};function Le(){}Le.extend=function(i){var c=function(){U(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,_=g(p);_.constructor=c,c.prototype=_;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(c[E]=this[E]);return i.statics&&h(c,i.statics),i.includes&&($(i.includes),h.apply(null,[_].concat(i.includes))),h(_,i),delete _.statics,delete _.includes,_.options&&(_.options=p.options?g(p.options):{},h(_.options,i.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,j=_._initHooks.length;T<j;T++)_._initHooks[T].call(this)}},c},Le.include=function(i){var c=this.prototype.options;return h(this.prototype,i),i.options&&(this.prototype.options=c,this.mergeOptions(i.options)),this},Le.mergeOptions=function(i){return h(this.prototype.options,i),this},Le.addInitHook=function(i){var c=Array.prototype.slice.call(arguments,1),p=typeof i=="function"?i:function(){this[i].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function $(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=B(i)?i:[i];for(var c=0;c<i.length;c++)i[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var We={on:function(i,c,p){if(typeof i=="object")for(var _ in i)this._on(_,i[_],c);else{i=J(i);for(var E=0,T=i.length;E<T;E++)this._on(i[E],c,p)}return this},off:function(i,c,p){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var _ in i)this._off(_,i[_],c);else{i=J(i);for(var E=arguments.length===1,T=0,j=i.length;T<j;T++)E?this._off(i[T]):this._off(i[T],c,p)}return this},_on:function(i,c,p,_){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(i,c,p)===!1){p===this&&(p=void 0);var E={fn:c,ctx:p};_&&(E.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(E)}},_off:function(i,c,p){var _,E,T;if(this._events&&(_=this._events[i],!!_)){if(arguments.length===1){if(this._firingCount)for(E=0,T=_.length;E<T;E++)_[E].fn=O;delete this._events[i];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var j=this._listens(i,c,p);if(j!==!1){var Y=_[j];this._firingCount&&(Y.fn=O,this._events[i]=_=_.slice()),_.splice(j,1)}}},fire:function(i,c,p){if(!this.listens(i,p))return this;var _=h({},c,{type:i,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var E=this._events[i];if(E){this._firingCount=this._firingCount+1||1;for(var T=0,j=E.length;T<j;T++){var Y=E[T],q=Y.fn;Y.once&&this.off(i,q,Y.ctx),q.call(Y.ctx||this,_)}this._firingCount--}}return p&&this._propagateEvent(_),this},listens:function(i,c,p,_){typeof i!="string"&&console.warn('"string" type argument expected');var E=c;typeof c!="function"&&(_=!!c,E=void 0,p=void 0);var T=this._events&&this._events[i];if(T&&T.length&&this._listens(i,E,p)!==!1)return!0;if(_){for(var j in this._eventParents)if(this._eventParents[j].listens(i,c,p,_))return!0}return!1},_listens:function(i,c,p){if(!this._events)return!1;var _=this._events[i]||[];if(!c)return!!_.length;p===this&&(p=void 0);for(var E=0,T=_.length;E<T;E++)if(_[E].fn===c&&_[E].ctx===p)return E;return!1},once:function(i,c,p){if(typeof i=="object")for(var _ in i)this._on(_,i[_],c,!0);else{i=J(i);for(var E=0,T=i.length;E<T;E++)this._on(i[E],c,p,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[S(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[S(i)],this},_propagateEvent:function(i){for(var c in this._eventParents)this._eventParents[c].fire(i.type,h({layer:i.target,propagatedFrom:i.target},i),!0)}};We.addEventListener=We.on,We.removeEventListener=We.clearAllEventListeners=We.off,We.addOneTimeEventListener=We.once,We.fireEvent=We.fire,We.hasEventListeners=We.listens;var _e=Le.extend(We);function ne(i,c,p){this.x=p?Math.round(i):i,this.y=p?Math.round(c):c}var ke=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(i){return this.clone()._add(ce(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(ce(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new ne(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new ne(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ke(this.x),this.y=ke(this.y),this},distanceTo:function(i){i=ce(i);var c=i.x-this.x,p=i.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(i){return i=ce(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=ce(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+H(this.x)+", "+H(this.y)+")"}};function ce(i,c,p){return i instanceof ne?i:B(i)?new ne(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new ne(i.x,i.y):new ne(i,c,p)}function Pe(i,c){if(i)for(var p=c?[i,c]:i,_=0,E=p.length;_<E;_++)this.extend(p[_])}Pe.prototype={extend:function(i){var c,p;if(!i)return this;if(i instanceof ne||typeof i[0]=="number"||"x"in i)c=p=ce(i);else if(i=De(i),c=i.min,p=i.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(i){return ce((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return ce(this.min.x,this.max.y)},getTopRight:function(){return ce(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var c,p;return typeof i[0]=="number"||i instanceof ne?i=ce(i):i=De(i),i instanceof Pe?(c=i.min,p=i.max):c=p=i,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(i){i=De(i);var c=this.min,p=this.max,_=i.min,E=i.max,T=E.x>=c.x&&_.x<=p.x,j=E.y>=c.y&&_.y<=p.y;return T&&j},overlaps:function(i){i=De(i);var c=this.min,p=this.max,_=i.min,E=i.max,T=E.x>c.x&&_.x<p.x,j=E.y>c.y&&_.y<p.y;return T&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var c=this.min,p=this.max,_=Math.abs(c.x-p.x)*i,E=Math.abs(c.y-p.y)*i;return De(ce(c.x-_,c.y-E),ce(p.x+_,p.y+E))},equals:function(i){return i?(i=De(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function De(i,c){return!i||i instanceof Pe?i:new Pe(i,c)}function dt(i,c){if(i)for(var p=c?[i,c]:i,_=0,E=p.length;_<E;_++)this.extend(p[_])}dt.prototype={extend:function(i){var c=this._southWest,p=this._northEast,_,E;if(i instanceof Xe)_=i,E=i;else if(i instanceof dt){if(_=i._southWest,E=i._northEast,!_||!E)return this}else return i?this.extend(ue(i)||Fe(i)):this;return!c&&!p?(this._southWest=new Xe(_.lat,_.lng),this._northEast=new Xe(E.lat,E.lng)):(c.lat=Math.min(_.lat,c.lat),c.lng=Math.min(_.lng,c.lng),p.lat=Math.max(E.lat,p.lat),p.lng=Math.max(E.lng,p.lng)),this},pad:function(i){var c=this._southWest,p=this._northEast,_=Math.abs(c.lat-p.lat)*i,E=Math.abs(c.lng-p.lng)*i;return new dt(new Xe(c.lat-_,c.lng-E),new Xe(p.lat+_,p.lng+E))},getCenter:function(){return new Xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new Xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Xe||"lat"in i?i=ue(i):i=Fe(i);var c=this._southWest,p=this._northEast,_,E;return i instanceof dt?(_=i.getSouthWest(),E=i.getNorthEast()):_=E=i,_.lat>=c.lat&&E.lat<=p.lat&&_.lng>=c.lng&&E.lng<=p.lng},intersects:function(i){i=Fe(i);var c=this._southWest,p=this._northEast,_=i.getSouthWest(),E=i.getNorthEast(),T=E.lat>=c.lat&&_.lat<=p.lat,j=E.lng>=c.lng&&_.lng<=p.lng;return T&&j},overlaps:function(i){i=Fe(i);var c=this._southWest,p=this._northEast,_=i.getSouthWest(),E=i.getNorthEast(),T=E.lat>c.lat&&_.lat<p.lat,j=E.lng>c.lng&&_.lng<p.lng;return T&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,c){return i?(i=Fe(i),this._southWest.equals(i.getSouthWest(),c)&&this._northEast.equals(i.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Fe(i,c){return i instanceof dt?i:new dt(i,c)}function Xe(i,c,p){if(isNaN(i)||isNaN(c))throw new Error("Invalid LatLng object: ("+i+", "+c+")");this.lat=+i,this.lng=+c,p!==void 0&&(this.alt=+p)}Xe.prototype={equals:function(i,c){if(!i)return!1;i=ue(i);var p=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return p<=(c===void 0?1e-9:c)},toString:function(i){return"LatLng("+H(this.lat,i)+", "+H(this.lng,i)+")"},distanceTo:function(i){return gt.distance(this,ue(i))},wrap:function(){return gt.wrapLatLng(this)},toBounds:function(i){var c=180*i/40075017,p=c/Math.cos(Math.PI/180*this.lat);return Fe([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new Xe(this.lat,this.lng,this.alt)}};function ue(i,c,p){return i instanceof Xe?i:B(i)&&typeof i[0]!="object"?i.length===3?new Xe(i[0],i[1],i[2]):i.length===2?new Xe(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Xe(i.lat,"lng"in i?i.lng:i.lon,i.alt):c===void 0?null:new Xe(i,c,p)}var Zt={latLngToPoint:function(i,c){var p=this.projection.project(i),_=this.scale(c);return this.transformation._transform(p,_)},pointToLatLng:function(i,c){var p=this.scale(c),_=this.transformation.untransform(i,p);return this.projection.unproject(_)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(i),_=this.transformation.transform(c.min,p),E=this.transformation.transform(c.max,p);return new Pe(_,E)},infinite:!1,wrapLatLng:function(i){var c=this.wrapLng?k(i.lng,this.wrapLng,!0):i.lng,p=this.wrapLat?k(i.lat,this.wrapLat,!0):i.lat,_=i.alt;return new Xe(p,c,_)},wrapLatLngBounds:function(i){var c=i.getCenter(),p=this.wrapLatLng(c),_=c.lat-p.lat,E=c.lng-p.lng;if(_===0&&E===0)return i;var T=i.getSouthWest(),j=i.getNorthEast(),Y=new Xe(T.lat-_,T.lng-E),q=new Xe(j.lat-_,j.lng-E);return new dt(Y,q)}},gt=h({},Zt,{wrapLng:[-180,180],R:6371e3,distance:function(i,c){var p=Math.PI/180,_=i.lat*p,E=c.lat*p,T=Math.sin((c.lat-i.lat)*p/2),j=Math.sin((c.lng-i.lng)*p/2),Y=T*T+Math.cos(_)*Math.cos(E)*j*j,q=2*Math.atan2(Math.sqrt(Y),Math.sqrt(1-Y));return this.R*q}}),jr=6378137,vr={R:jr,MAX_LATITUDE:85.0511287798,project:function(i){var c=Math.PI/180,p=this.MAX_LATITUDE,_=Math.max(Math.min(p,i.lat),-p),E=Math.sin(_*c);return new ne(this.R*i.lng*c,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(i){var c=180/Math.PI;return new Xe((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*c,i.x*c/this.R)},bounds:function(){var i=jr*Math.PI;return new Pe([-i,-i],[i,i])}()};function Wt(i,c,p,_){if(B(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=c,this._c=p,this._d=_}Wt.prototype={transform:function(i,c){return this._transform(i.clone(),c)},_transform:function(i,c){return c=c||1,i.x=c*(this._a*i.x+this._b),i.y=c*(this._c*i.y+this._d),i},untransform:function(i,c){return c=c||1,new ne((i.x/c-this._b)/this._a,(i.y/c-this._d)/this._c)}};function sr(i,c,p,_){return new Wt(i,c,p,_)}var Qe=h({},gt,{code:"EPSG:3857",projection:vr,transformation:function(){var i=.5/(Math.PI*vr.R);return sr(i,.5,-i,.5)}()}),Cr=h({},Qe,{code:"EPSG:900913"});function yn(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Er(i,c){var p="",_,E,T,j,Y,q;for(_=0,T=i.length;_<T;_++){for(Y=i[_],E=0,j=Y.length;E<j;E++)q=Y[E],p+=(E?"L":"M")+q.x+" "+q.y;p+=c?Ne.svg?"z":"x":""}return p||"M0 0"}var Ot=document.documentElement.style,rt="ActiveXObject"in window,Ke=rt&&!document.addEventListener,Fr="msLaunchUri"in navigator&&!("documentMode"in document),Ee=Nt("webkit"),zr=Nt("android"),vi=Nt("android 2")||Nt("android 3"),Bn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ci=zr&&Nt("Google")&&Bn<537&&!("AudioNode"in window),rn=!!window.opera,Ei=!Fr&&Nt("chrome"),jn=Nt("gecko")&&!Ee&&!rn&&!rt,Gt=!Ei&&Nt("safari"),Ai=Nt("phantom"),Ur="OTransition"in Ot,Is=navigator.platform.indexOf("Win")===0,vt=rt&&"transition"in Ot,pe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!vi,bt="MozPerspective"in Ot,ct=!window.L_DISABLE_3D&&(vt||pe||bt)&&!Ur&&!Ai,le=typeof orientation<"u"||Nt("mobile"),Te=le&&Ee,tt=le&&pe,gn=!window.PointerEvent&&window.MSPointerEvent,it=!!(window.PointerEvent||gn),Hr="ontouchstart"in window||!!window.TouchEvent,Ta=!window.L_NO_TOUCH&&(Hr||it),Ma=le&&rn,Gn=le&&jn,wo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,sn=function(){var i=!1;try{var c=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",O,c),window.removeEventListener("testPassiveEventSupport",O,c)}catch{}return i}(),Si=function(){return!!document.createElement("canvas").getContext}(),bi=!!(document.createElementNS&&yn("svg").createSVGRect),or=!!bi&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),fc=!bi&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var c=i.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),ti=navigator.platform.indexOf("Mac")===0,_o=navigator.platform.indexOf("Linux")===0;function Nt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Ne={ie:rt,ielt9:Ke,edge:Fr,webkit:Ee,android:zr,android23:vi,androidStock:Ci,opera:rn,chrome:Ei,gecko:jn,safari:Gt,phantom:Ai,opera12:Ur,win:Is,ie3d:vt,webkit3d:pe,gecko3d:bt,any3d:ct,mobile:le,mobileWebkit:Te,mobileWebkit3d:tt,msPointer:gn,pointer:it,touch:Ta,touchNative:Hr,mobileOpera:Ma,mobileGecko:Gn,retina:wo,passiveEvents:sn,canvas:Si,svg:bi,vml:fc,inlineSvg:or,mac:ti,linux:_o},Nn=Ne.msPointer?"MSPointerDown":"pointerdown",ve=Ne.msPointer?"MSPointerMove":"pointermove",ni=Ne.msPointer?"MSPointerUp":"pointerup",Ts=Ne.msPointer?"MSPointerCancel":"pointercancel",on={touchstart:Nn,touchmove:ve,touchend:ni,touchcancel:Ts},ri={touchstart:Vr,touchmove:ss,touchend:ss,touchcancel:ss},Ar={},is=!1;function ar(i,c,p){return c==="touchstart"&&Ct(),ri[c]?(p=ri[c].bind(this,p),i.addEventListener(on[c],p,!1),p):(console.warn("wrong event specified:",c),O)}function gc(i,c,p){if(!on[c]){console.warn("wrong event specified:",c);return}i.removeEventListener(on[c],p,!1)}function pc(i){Ar[i.pointerId]=i}function lr(i){Ar[i.pointerId]&&(Ar[i.pointerId]=i)}function an(i){delete Ar[i.pointerId]}function Ct(){is||(document.addEventListener(Nn,pc,!0),document.addEventListener(ve,lr,!0),document.addEventListener(ni,an,!0),document.addEventListener(Ts,an,!0),is=!0)}function ss(i,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in Ar)c.touches.push(Ar[p]);c.changedTouches=[c],i(c)}}function Vr(i,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Jt(c),ss(i,c)}function vo(i){var c={},p,_;for(_ in i)p=i[_],c[_]=p&&p.bind?p.bind(i):p;return i=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var ie=200;function mc(i,c){i.addEventListener("dblclick",c);var p=0,_;function E(T){if(T.detail!==1){_=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var j=Ii(T);if(!(j.some(function(q){return q instanceof HTMLLabelElement&&q.attributes.for})&&!j.some(function(q){return q instanceof HTMLInputElement||q instanceof HTMLSelectElement}))){var Y=Date.now();Y-p<=ie?(_++,_===2&&c(vo(T))):_=1,p=Y}}}return i.addEventListener("click",E),{dblclick:c,simDblclick:E}}function Lt(i,c){i.removeEventListener("dblclick",c.dblclick),i.removeEventListener("click",c.simDblclick)}var Zr=G(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),os=G(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),at=os==="webkitTransition"||os==="OTransition"?os+"End":"transitionend";function st(i){return typeof i=="string"?document.getElementById(i):i}function Ze(i,c){var p=i.style[c]||i.currentStyle&&i.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(i,null);p=_?_[c]:null}return p==="auto"?null:p}function et(i,c,p){var _=document.createElement(i);return _.className=c||"",p&&p.appendChild(_),_}function wt(i){var c=i.parentNode;c&&c.removeChild(i)}function Ni(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Et(i){var c=i.parentNode;c&&c.lastChild!==i&&c.appendChild(i)}function In(i){var c=i.parentNode;c&&c.firstChild!==i&&c.insertBefore(i,c.firstChild)}function Co(i,c){if(i.classList!==void 0)return i.classList.contains(c);var p=Sr(i);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function Ie(i,c){if(i.classList!==void 0)for(var p=J(c),_=0,E=p.length;_<E;_++)i.classList.add(p[_]);else if(!Co(i,c)){var T=Sr(i);Eo(i,(T?T+" ":"")+c)}}function ht(i,c){i.classList!==void 0?i.classList.remove(c):Eo(i,V((" "+Sr(i)+" ").replace(" "+c+" "," ")))}function Eo(i,c){i.className.baseVal===void 0?i.className=c:i.className.baseVal=c}function Sr(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Ge(i,c){"opacity"in i.style?i.style.opacity=c:"filter"in i.style&&ln(i,c)}function ln(i,c){var p=!1,_="DXImageTransform.Microsoft.Alpha";try{p=i.filters.item(_)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):i.style.filter+=" progid:"+_+"(opacity="+c+")"}function G(i){for(var c=document.documentElement.style,p=0;p<i.length;p++)if(i[p]in c)return i[p];return!1}function M(i,c,p){var _=c||new ne(0,0);i.style[Zr]=(Ne.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(p?" scale("+p+")":"")}function ye(i,c){i._leaflet_pos=c,Ne.any3d?M(i,c):(i.style.left=c.x+"px",i.style.top=c.y+"px")}function At(i){return i._leaflet_pos||new ne(0,0)}var cn,as,ls;if("onselectstart"in document)cn=function(){je(window,"selectstart",Jt)},as=function(){we(window,"selectstart",Jt)};else{var un=G(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);cn=function(){if(un){var i=document.documentElement.style;ls=i[un],i[un]="none"}},as=function(){un&&(document.documentElement.style[un]=ls,ls=void 0)}}function Me(){je(window,"dragstart",Jt)}function _t(){we(window,"dragstart",Jt)}var cs,Ao;function us(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(ii(),cs=i,Ao=i.style.outlineStyle,i.style.outlineStyle="none",je(window,"keydown",ii))}function ii(){cs&&(cs.style.outlineStyle=Ao,cs=void 0,Ao=void 0,we(window,"keydown",ii))}function Ms(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function So(i){var c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}var Yt={__proto__:null,TRANSFORM:Zr,TRANSITION:os,TRANSITION_END:at,get:st,getStyle:Ze,create:et,remove:wt,empty:Ni,toFront:Et,toBack:In,hasClass:Co,addClass:Ie,removeClass:ht,setClass:Eo,getClass:Sr,setOpacity:Ge,testProp:G,setTransform:M,setPosition:ye,getPosition:At,get disableTextSelection(){return cn},get enableTextSelection(){return as},disableImageDrag:Me,enableImageDrag:_t,preventOutline:us,restoreOutline:ii,getSizedParentNode:Ms,getScale:So};function je(i,c,p,_){if(c&&typeof c=="object")for(var E in c)Ht(i,E,c[E],p);else{c=J(c);for(var T=0,j=c.length;T<j;T++)Ht(i,c[T],p,_)}return this}var qt="_leaflet_events";function we(i,c,p,_){if(arguments.length===1)ka(i),delete i[qt];else if(c&&typeof c=="object")for(var E in c)bo(i,E,c[E],p);else if(c=J(c),arguments.length===2)ka(i,function(Y){return X(c,Y)!==-1});else for(var T=0,j=c.length;T<j;T++)bo(i,c[T],p,_);return this}function ka(i,c){for(var p in i[qt]){var _=p.split(/\d/)[0];(!c||c(_))&&bo(i,_,null,null,p)}}var ze={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ht(i,c,p,_){var E=c+S(p)+(_?"_"+S(_):"");if(i[qt]&&i[qt][E])return this;var T=function(Y){return p.call(_||i,Y||window.event)},j=T;!Ne.touchNative&&Ne.pointer&&c.indexOf("touch")===0?T=ar(i,c,T):Ne.touch&&c==="dblclick"?T=mc(i,T):"addEventListener"in i?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?i.addEventListener(ze[c]||c,T,Ne.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(T=function(Y){Y=Y||window.event,si(i,Y)&&j(Y)},i.addEventListener(ze[c],T,!1)):i.addEventListener(c,j,!1):i.attachEvent("on"+c,T),i[qt]=i[qt]||{},i[qt][E]=T}function bo(i,c,p,_,E){E=E||c+S(p)+(_?"_"+S(_):"");var T=i[qt]&&i[qt][E];if(!T)return this;!Ne.touchNative&&Ne.pointer&&c.indexOf("touch")===0?gc(i,c,T):Ne.touch&&c==="dblclick"?Lt(i,T):"removeEventListener"in i?i.removeEventListener(ze[c]||c,T,!1):i.detachEvent("on"+c,T),i[qt][E]=null}function br(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function ks(i){return Ht(i,"wheel",br),this}function Yn(i){return je(i,"mousedown touchstart dblclick contextmenu",br),i._leaflet_disable_click=!0,this}function Jt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Xn(i){return Jt(i),br(i),this}function Ii(i){if(i.composedPath)return i.composedPath();for(var c=[],p=i.target;p;)c.push(p),p=p.parentNode;return c}function Ti(i,c){if(!c)return new ne(i.clientX,i.clientY);var p=So(c),_=p.boundingClientRect;return new ne((i.clientX-_.left)/p.x-c.clientLeft,(i.clientY-_.top)/p.y-c.clientTop)}var Oa=Ne.linux&&Ne.chrome?window.devicePixelRatio:Ne.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Mi(i){return Ne.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Oa:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function si(i,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==i;)p=p.parentNode}catch{return!1}return p!==i}var wn={__proto__:null,on:je,off:we,stopPropagation:br,disableScrollPropagation:ks,disableClickPropagation:Yn,preventDefault:Jt,stop:Xn,getPropagationPath:Ii,getMousePosition:Ti,getWheelDelta:Mi,isExternalTarget:si,addListener:je,removeListener:we},No=_e.extend({run:function(i,c,p,_){this.stop(),this._el=i,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=At(i),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Re(this._animate,this),this._step()},_step:function(i){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),i):(this._runFrame(1),this._complete())},_runFrame:function(i,c){var p=this._startPos.add(this._offset.multiplyBy(i));c&&p._round(),ye(this._el,p),this.fire("step")},_complete:function(){me(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Je=_e.extend({options:{crs:Qe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,c){c=U(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=w(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ue(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=os&&Ne.any3d&&!Ne.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),je(this._proxy,at,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),i=this._limitCenter(ue(i),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=h({animate:p.animate},p.zoom),p.pan=h({animate:p.animate,duration:p.duration},p.pan));var _=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,c,p.zoom):this._tryAnimatedPan(i,p.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(i,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(i,c){return this._loaded?this.setView(this.getCenter(),i,{zoom:c}):(this._zoom=i,this)},zoomIn:function(i,c){return i=i||(Ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,c)},zoomOut:function(i,c){return i=i||(Ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,c)},setZoomAround:function(i,c,p){var _=this.getZoomScale(c),E=this.getSize().divideBy(2),T=i instanceof ne?i:this.latLngToContainerPoint(i),j=T.subtract(E).multiplyBy(1-1/_),Y=this.containerPointToLatLng(E.add(j));return this.setView(Y,c,{zoom:p})},_getBoundsCenterZoom:function(i,c){c=c||{},i=i.getBounds?i.getBounds():Fe(i);var p=ce(c.paddingTopLeft||c.padding||[0,0]),_=ce(c.paddingBottomRight||c.padding||[0,0]),E=this.getBoundsZoom(i,!1,p.add(_));if(E=typeof c.maxZoom=="number"?Math.min(c.maxZoom,E):E,E===1/0)return{center:i.getCenter(),zoom:E};var T=_.subtract(p).divideBy(2),j=this.project(i.getSouthWest(),E),Y=this.project(i.getNorthEast(),E),q=this.unproject(j.add(Y).divideBy(2).add(T),E);return{center:q,zoom:E}},fitBounds:function(i,c){if(i=Fe(i),!i.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(i,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,c){return this.setView(i,this._zoom,{pan:c})},panBy:function(i,c){if(i=ce(i).round(),c=c||{},!i.x&&!i.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new No,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Ie(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,c,p){if(p=p||{},p.animate===!1||!Ne.any3d)return this.setView(i,c,p);this._stop();var _=this.project(this.getCenter()),E=this.project(i),T=this.getSize(),j=this._zoom;i=ue(i),c=c===void 0?j:c;var Y=Math.max(T.x,T.y),q=Y*this.getZoomScale(j,c),oe=E.distanceTo(_)||1,Ce=1.42,Be=Ce*Ce;function qe(Qt){var za=Qt?-1:1,Ag=Qt?q:Y,Sg=q*q-Y*Y+za*Be*Be*oe*oe,bg=2*Ag*Be*oe,Ec=Sg/bg,lh=Math.sqrt(Ec*Ec+1)-Ec,Ng=lh<1e-9?-18:Math.log(lh);return Ng}function On(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function dn(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}function gr(Qt){return On(Qt)/dn(Qt)}var zn=qe(0);function Ps(Qt){return Y*(dn(zn)/dn(zn+Ce*Qt))}function _g(Qt){return Y*(dn(zn)*gr(zn+Ce*Qt)-On(zn))/Be}function vg(Qt){return 1-Math.pow(1-Qt,1.5)}var Cg=Date.now(),oh=(qe(1)-zn)/Ce,Eg=p.duration?1e3*p.duration:1e3*oh*.8;function ah(){var Qt=(Date.now()-Cg)/Eg,za=vg(Qt)*oh;Qt<=1?(this._flyToFrame=Re(ah,this),this._move(this.unproject(_.add(E.subtract(_).multiplyBy(_g(za)/oe)),j),this.getScaleZoom(Y/Ps(za),j),{flyTo:!0})):this._move(i,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),ah.call(this),this},flyToBounds:function(i,c){var p=this._getBoundsCenterZoom(i,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(i){return i=Fe(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var c=this.options.minZoom;return this.options.minZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var c=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,c){this._enforcingBounds=!0;var p=this.getCenter(),_=this._limitCenter(p,this._zoom,Fe(i));return p.equals(_)||this.panTo(_,c),this._enforcingBounds=!1,this},panInside:function(i,c){c=c||{};var p=ce(c.paddingTopLeft||c.padding||[0,0]),_=ce(c.paddingBottomRight||c.padding||[0,0]),E=this.project(this.getCenter()),T=this.project(i),j=this.getPixelBounds(),Y=De([j.min.add(p),j.max.subtract(_)]),q=Y.getSize();if(!Y.contains(T)){this._enforcingBounds=!0;var oe=T.subtract(Y.getCenter()),Ce=Y.extend(T).getSize().subtract(q);E.x+=oe.x<0?-Ce.x:Ce.x,E.y+=oe.y<0?-Ce.y:Ce.y,this.panTo(this.unproject(E),c),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=h({animate:!1,pan:!0},i===!0?{animate:!0}:i);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),_=c.divideBy(2).round(),E=p.divideBy(2).round(),T=_.subtract(E);return!T.x&&!T.y?this:(i.animate&&i.pan?this.panBy(T):(i.pan&&this._rawPanBy(T),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(w(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=h({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=w(this._handleGeolocationResponse,this),p=w(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,i):navigator.geolocation.getCurrentPosition(c,p,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var c=i.code,p=i.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var c=i.coords.latitude,p=i.coords.longitude,_=new Xe(c,p),E=_.toBounds(i.coords.accuracy*2),T=this._locateOptions;if(T.setView){var j=this.getBoundsZoom(E);this.setView(_,T.maxZoom?Math.min(j,T.maxZoom):j)}var Y={latlng:_,bounds:E,timestamp:i.timestamp};for(var q in i.coords)typeof i.coords[q]=="number"&&(Y[q]=i.coords[q]);this.fire("locationfound",Y)}},addHandler:function(i,c){if(!c)return this;var p=this[i]=new c(this);return this._handlers.push(p),this.options[i]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(me(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)wt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,c){var p="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),_=et("div",p,c||this._mapPane);return i&&(this._panes[i]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),c=this.unproject(i.getBottomLeft()),p=this.unproject(i.getTopRight());return new dt(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,c,p){i=Fe(i),p=ce(p||[0,0]);var _=this.getZoom()||0,E=this.getMinZoom(),T=this.getMaxZoom(),j=i.getNorthWest(),Y=i.getSouthEast(),q=this.getSize().subtract(p),oe=De(this.project(Y,_),this.project(j,_)).getSize(),Ce=Ne.any3d?this.options.zoomSnap:1,Be=q.x/oe.x,qe=q.y/oe.y,On=c?Math.max(Be,qe):Math.min(Be,qe);return _=this.getScaleZoom(On,_),Ce&&(_=Math.round(_/(Ce/100))*(Ce/100),_=c?Math.ceil(_/Ce)*Ce:Math.floor(_/Ce)*Ce),Math.max(E,Math.min(T,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,c){var p=this._getTopLeftPoint(i,c);return new Pe(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(i)/p.scale(c)},getScaleZoom:function(i,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var _=p.zoom(i*p.scale(c));return isNaN(_)?1/0:_},project:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ue(i),c)},unproject:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(ce(i),c)},layerPointToLatLng:function(i){var c=ce(i).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(i){var c=this.project(ue(i))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ue(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Fe(i))},distance:function(i,c){return this.options.crs.distance(ue(i),ue(c))},containerPointToLayerPoint:function(i){return ce(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return ce(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var c=this.containerPointToLayerPoint(ce(i));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(i)))},mouseEventToContainerPoint:function(i){return Ti(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var c=this._container=st(i);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");je(c,"scroll",this._onScroll,this),this._containerId=S(c)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ne.any3d,Ie(i,"leaflet-container"+(Ne.touch?" leaflet-touch":"")+(Ne.retina?" leaflet-retina":"")+(Ne.ielt9?" leaflet-oldie":"")+(Ne.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Ze(i,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ye(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ie(i.markerPane,"leaflet-zoom-hide"),Ie(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,c,p){ye(this._mapPane,new ne(0,0));var _=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var E=this._zoom!==c;this._moveStart(E,p)._move(i,c)._moveEnd(E),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(i,c){return i&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(i,c,p,_){c===void 0&&(c=this._zoom);var E=this._zoom!==c;return this._zoom=c,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),_?p&&p.pinch&&this.fire("zoom",p):((E||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return me(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){ye(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[S(this._container)]=this;var c=i?we:je;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Ne.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){me(this._resizeRequest),this._resizeRequest=Re(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,c){for(var p=[],_,E=c==="mouseout"||c==="mouseover",T=i.target||i.srcElement,j=!1;T;){if(_=this._targets[S(T)],_&&(c==="click"||c==="preclick")&&this._draggableMoved(_)){j=!0;break}if(_&&_.listens(c,!0)&&(E&&!si(T,i)||(p.push(_),E))||T===this._container)break;T=T.parentNode}return!p.length&&!j&&!E&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var c=i.target||i.srcElement;if(!(!this._loaded||c._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(c))){var p=i.type;p==="mousedown"&&us(c),this._fireDOMEvent(i,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,c,p){if(i.type==="click"){var _=h({},i);_.type="preclick",this._fireDOMEvent(_,_.type,p)}var E=this._findEventTargets(i,c);if(p){for(var T=[],j=0;j<p.length;j++)p[j].listens(c,!0)&&T.push(p[j]);E=T.concat(E)}if(E.length){c==="contextmenu"&&Jt(i);var Y=E[0],q={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var oe=Y.getLatLng&&(!Y._radius||Y._radius<=10);q.containerPoint=oe?this.latLngToContainerPoint(Y.getLatLng()):this.mouseEventToContainerPoint(i),q.layerPoint=this.containerPointToLayerPoint(q.containerPoint),q.latlng=oe?Y.getLatLng():this.layerPointToLatLng(q.layerPoint)}for(j=0;j<E.length;j++)if(E[j].fire(c,q,!0),q.originalEvent._stopped||E[j].options.bubblingMouseEvents===!1&&X(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,c=this._handlers.length;i<c;i++)this._handlers[i].disable()},whenReady:function(i,c){return this._loaded?i.call(c||this,{target:this}):this.on("load",i,c),this},_getMapPanePos:function(){return At(this._mapPane)||new ne(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,c){var p=i&&c!==void 0?this._getNewPixelOrigin(i,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,c){var p=this.getSize()._divideBy(2);return this.project(i,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,c,p){var _=this._getNewPixelOrigin(p,c);return this.project(i,c)._subtract(_)},_latLngBoundsToNewLayerBounds:function(i,c,p){var _=this._getNewPixelOrigin(p,c);return De([this.project(i.getSouthWest(),c)._subtract(_),this.project(i.getNorthWest(),c)._subtract(_),this.project(i.getSouthEast(),c)._subtract(_),this.project(i.getNorthEast(),c)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,c,p){if(!p)return i;var _=this.project(i,c),E=this.getSize().divideBy(2),T=new Pe(_.subtract(E),_.add(E)),j=this._getBoundsOffset(T,p,c);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?i:this.unproject(_.add(j),c)},_limitOffset:function(i,c){if(!c)return i;var p=this.getPixelBounds(),_=new Pe(p.min.add(i),p.max.add(i));return i.add(this._getBoundsOffset(_,c))},_getBoundsOffset:function(i,c,p){var _=De(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),E=_.min.subtract(i.min),T=_.max.subtract(i.max),j=this._rebound(E.x,-T.x),Y=this._rebound(E.y,-T.y);return new ne(j,Y)},_rebound:function(i,c){return i+c>0?Math.round(i-c)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(c))},_limitZoom:function(i){var c=this.getMinZoom(),p=this.getMaxZoom(),_=Ne.any3d?this.options.zoomSnap:1;return _&&(i=Math.round(i/_)*_),Math.max(c,Math.min(p,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,c){var p=this._getCenterOffset(i)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var i=this._proxy=et("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(c){var p=Zr,_=this._proxy.style[p];M(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),_===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),c=this.getZoom();M(this._proxy,this.project(i,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(c),E=this._getCenterOffset(i)._divideBy(1-1/_);return p.animate!==!0&&!this.getSize().contains(E)?!1:(Re(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(i,c,!0)},this),!0)},_animateZoom:function(i,c,p,_){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=c,Ie(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:c,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(w(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function La(i,c){return new Je(i,c)}var Qn=Le.extend({options:{position:"topright"},initialize:function(i){U(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var c=this._map;return c&&c.removeControl(this),this.options.position=i,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var c=this._container=this.onAdd(i),p=this.getPosition(),_=i._controlCorners[p];return Ie(c,"leaflet-control"),p.indexOf("bottom")!==-1?_.insertBefore(c,_.firstChild):_.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),ds=function(i){return new Qn(i)};Je.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},c="leaflet-",p=this._controlContainer=et("div",c+"control-container",this._container);function _(E,T){var j=c+E+" "+c+T;i[E+T]=et("div",j,p)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)wt(this._controlCorners[i]);wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ra=Qn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,c,p,_){return p<_?-1:_<p?1:0}},initialize:function(i,c,p){U(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in i)this._addLayer(i[_],_);for(_ in c)this._addLayer(c[_],_,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Qn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,c){return this._addLayer(i,c),this._map?this._update():this},addOverlay:function(i,c){return this._addLayer(i,c,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var c=this._getLayer(S(i));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Ie(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Ie(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",c=this._container=et("div",i),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Yn(c),ks(c);var _=this._section=et("section",i+"-list");p&&(this._map.on("click",this.collapse,this),je(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=et("a",i+"-toggle",c);E.href="#",E.title="Layers",E.setAttribute("role","button"),je(E,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){Jt(T),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=et("div",i+"-base",_),this._separator=et("div",i+"-separator",_),this._overlaysList=et("div",i+"-overlays",_),c.appendChild(_)},_getLayer:function(i){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&S(this._layers[c].layer)===i)return this._layers[c]},_addLayer:function(i,c,p){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(w(function(_,E){return this.options.sortFunction(_.layer,E.layer,_.name,E.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ni(this._baseLayersList),Ni(this._overlaysList),this._layerControlInputs=[];var i,c,p,_,E=0;for(p=0;p<this._layers.length;p++)_=this._layers[p],this._addItem(_),c=c||_.overlay,i=i||!_.overlay,E+=_.overlay?0:1;return this.options.hideSingleBase&&(i=i&&E>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=c&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var c=this._getLayer(S(i.target)),p=c.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(i,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(c?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=p,_.firstChild},_addItem:function(i){var c=document.createElement("label"),p=this._map.hasLayer(i.layer),_;i.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=p):_=this._createRadioElement("leaflet-base-layers_"+S(this),p),this._layerControlInputs.push(_),_.layerId=S(i.layer),je(_,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+i.name;var T=document.createElement("span");c.appendChild(T),T.appendChild(_),T.appendChild(E);var j=i.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,c,p,_=[],E=[];this._handlingClick=!0;for(var T=i.length-1;T>=0;T--)c=i[T],p=this._getLayer(c.layerId).layer,c.checked?_.push(p):c.checked||E.push(p);for(T=0;T<E.length;T++)this._map.hasLayer(E[T])&&this._map.removeLayer(E[T]);for(T=0;T<_.length;T++)this._map.hasLayer(_[T])||this._map.addLayer(_[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,c,p,_=this._map.getZoom(),E=i.length-1;E>=0;E--)c=i[E],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&_<p.options.minZoom||p.options.maxZoom!==void 0&&_>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,je(i,"click",Jt),this.expand();var c=this;setTimeout(function(){we(i,"click",Jt),c._preventClick=!1})}}),ft=function(i,c,p){return new Ra(i,c,p)},Os=Qn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var c="leaflet-control-zoom",p=et("div",c+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,c,p,_,E){var T=et("a",p,_);return T.innerHTML=i,T.href="#",T.title=c,T.setAttribute("role","button"),T.setAttribute("aria-label",c),Yn(T),je(T,"click",Xn),je(T,"click",E,this),je(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var i=this._map,c="leaflet-disabled";ht(this._zoomInButton,c),ht(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Ie(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Ie(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Je.mergeOptions({zoomControl:!0}),Je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Os,this.addControl(this.zoomControl))});var Ls=function(i){return new Os(i)},Nr=Qn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var c="leaflet-control-scale",p=et("div",c),_=this.options;return this._addScales(_,c+"-line",p),i.on(_.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),p},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,c,p){i.metric&&(this._mScale=et("div",c,p)),i.imperial&&(this._iScale=et("div",c,p))},_update:function(){var i=this._map,c=i.getSize().y/2,p=i.distance(i.containerPointToLatLng([0,c]),i.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var c=this._getRoundNum(i),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/i)},_updateImperial:function(i){var c=i*3.2808399,p,_,E;c>5280?(p=c/5280,_=this._getRoundNum(p),this._updateScale(this._iScale,_+" mi",_/p)):(E=this._getRoundNum(c),this._updateScale(this._iScale,E+" ft",E/c))},_updateScale:function(i,c,p){i.style.width=Math.round(this.options.maxWidth*p)+"px",i.innerHTML=c},_getRoundNum:function(i){var c=Math.pow(10,(Math.floor(i)+"").length-1),p=i/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),xc=function(i){return new Nr(i)},K='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',He=Qn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ne.inlineSvg?K+" ":"")+"Leaflet</a>"},initialize:function(i){U(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=et("div","leaflet-control-attribution"),Yn(this._container);for(var c in i._layers)i._layers[c].getAttribution&&this.addAttribution(i._layers[c].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var c in this._attributions)this._attributions[c]&&i.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),i.length&&p.push(i.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});Je.mergeOptions({attributionControl:!0}),Je.addInitHook(function(){this.options.attributionControl&&new He().addTo(this)});var $t=function(i){return new He(i)};Qn.Layers=Ra,Qn.Zoom=Os,Qn.Scale=Nr,Qn.Attribution=He,ds.layers=ft,ds.zoom=Ls,ds.scale=xc,ds.attribution=$t;var Tn=Le.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Tn.addTo=function(i,c){return i.addHandler(c,this),this};var Da={Events:We},Pa=Ne.touch?"touchstart mousedown":"mousedown",Wr=_e.extend({options:{clickTolerance:3},initialize:function(i,c,p,_){U(this,_),this._element=i,this._dragStartTarget=c||i,this._preventOutline=p},enable:function(){this._enabled||(je(this._dragStartTarget,Pa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Wr._dragging===this&&this.finishDrag(!0),we(this._dragStartTarget,Pa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Co(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Wr._dragging===this&&this.finishDrag();return}if(!(Wr._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Wr._dragging=this,this._preventOutline&&us(this._element),Me(),cn(),!this._moving)){this.fire("down");var c=i.touches?i.touches[0]:i,p=Ms(this._element);this._startPoint=new ne(c.clientX,c.clientY),this._startPos=At(this._element),this._parentScale=So(p);var _=i.type==="mousedown";je(document,_?"mousemove":"touchmove",this._onMove,this),je(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var c=i.touches&&i.touches.length===1?i.touches[0]:i,p=new ne(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,Jt(i),this._moved||(this.fire("dragstart"),this._moved=!0,Ie(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ie(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),ye(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){ht(document.body,"leaflet-dragging"),this._lastTarget&&(ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),we(document,"mousemove touchmove",this._onMove,this),we(document,"mouseup touchend touchcancel",this._onUp,this),_t(),as();var c=this._moved&&this._moving;this._moving=!1,Wr._dragging=!1,c&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ba(i,c,p){var _,E=[1,4,2,8],T,j,Y,q,oe,Ce,Be,qe;for(T=0,Ce=i.length;T<Ce;T++)i[T]._code=ai(i[T],c);for(Y=0;Y<4;Y++){for(Be=E[Y],_=[],T=0,Ce=i.length,j=Ce-1;T<Ce;j=T++)q=i[T],oe=i[j],q._code&Be?oe._code&Be||(qe=Ir(oe,q,Be,c,p),qe._code=ai(qe,c),_.push(qe)):(oe._code&Be&&(qe=Ir(oe,q,Be,c,p),qe._code=ai(qe,c),_.push(qe)),_.push(q));i=_}return i}function Rs(i,c){var p,_,E,T,j,Y,q,oe,Ce;if(!i||i.length===0)throw new Error("latlngs not passed");Mn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Be=ue([0,0]),qe=Fe(i),On=qe.getNorthWest().distanceTo(qe.getSouthWest())*qe.getNorthEast().distanceTo(qe.getNorthWest());On<1700&&(Be=Dt(i));var dn=i.length,gr=[];for(p=0;p<dn;p++){var zn=ue(i[p]);gr.push(c.project(ue([zn.lat-Be.lat,zn.lng-Be.lng])))}for(Y=q=oe=0,p=0,_=dn-1;p<dn;_=p++)E=gr[p],T=gr[_],j=E.y*T.x-T.y*E.x,q+=(E.x+T.x)*j,oe+=(E.y+T.y)*j,Y+=j*3;Y===0?Ce=gr[0]:Ce=[q/Y,oe/Y];var Ps=c.unproject(ce(Ce));return ue([Ps.lat+Be.lat,Ps.lng+Be.lng])}function Dt(i){for(var c=0,p=0,_=0,E=0;E<i.length;E++){var T=ue(i[E]);c+=T.lat,p+=T.lng,_++}return ue([c/_,p/_])}var Io={__proto__:null,clipPolygon:Ba,polygonCenter:Rs,centroid:Dt};function It(i,c){if(!c||!i.length)return i.slice();var p=c*c;return i=yc(i,p),i=pt(i,p),i}function hs(i,c,p){return Math.sqrt(li(i,c,p,!0))}function oi(i,c,p){return li(i,c,p)}function pt(i,c){var p=i.length,_=typeof Uint8Array<"u"?Uint8Array:Array,E=new _(p);E[0]=E[p-1]=1,Oe(i,E,c,0,p-1);var T,j=[];for(T=0;T<p;T++)E[T]&&j.push(i[T]);return j}function Oe(i,c,p,_,E){var T=0,j,Y,q;for(Y=_+1;Y<=E-1;Y++)q=li(i[Y],i[_],i[E],!0),q>T&&(j=Y,T=q);T>p&&(c[j]=1,Oe(i,c,p,_,j),Oe(i,c,p,j,E))}function yc(i,c){for(var p=[i[0]],_=1,E=0,T=i.length;_<T;_++)cr(i[_],i[E])>c&&(p.push(i[_]),E=_);return E<T-1&&p.push(i[T-1]),p}var yt;function Gr(i,c,p,_,E){var T=_?yt:ai(i,p),j=ai(c,p),Y,q,oe;for(yt=j;;){if(!(T|j))return[i,c];if(T&j)return!1;Y=T||j,q=Ir(i,c,Y,p,E),oe=ai(q,p),Y===T?(i=q,T=oe):(c=q,j=oe)}}function Ir(i,c,p,_,E){var T=c.x-i.x,j=c.y-i.y,Y=_.min,q=_.max,oe,Ce;return p&8?(oe=i.x+T*(q.y-i.y)/j,Ce=q.y):p&4?(oe=i.x+T*(Y.y-i.y)/j,Ce=Y.y):p&2?(oe=q.x,Ce=i.y+j*(q.x-i.x)/T):p&1&&(oe=Y.x,Ce=i.y+j*(Y.x-i.x)/T),new ne(oe,Ce,E)}function ai(i,c){var p=0;return i.x<c.min.x?p|=1:i.x>c.max.x&&(p|=2),i.y<c.min.y?p|=4:i.y>c.max.y&&(p|=8),p}function cr(i,c){var p=c.x-i.x,_=c.y-i.y;return p*p+_*_}function li(i,c,p,_){var E=c.x,T=c.y,j=p.x-E,Y=p.y-T,q=j*j+Y*Y,oe;return q>0&&(oe=((i.x-E)*j+(i.y-T)*Y)/q,oe>1?(E=p.x,T=p.y):oe>0&&(E+=j*oe,T+=Y*oe)),j=i.x-E,Y=i.y-T,_?j*j+Y*Y:new ne(E,T)}function Mn(i){return!B(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Ds(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Mn(i)}function To(i,c){var p,_,E,T,j,Y,q,oe;if(!i||i.length===0)throw new Error("latlngs not passed");Mn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Ce=ue([0,0]),Be=Fe(i),qe=Be.getNorthWest().distanceTo(Be.getSouthWest())*Be.getNorthEast().distanceTo(Be.getNorthWest());qe<1700&&(Ce=Dt(i));var On=i.length,dn=[];for(p=0;p<On;p++){var gr=ue(i[p]);dn.push(c.project(ue([gr.lat-Ce.lat,gr.lng-Ce.lng])))}for(p=0,_=0;p<On-1;p++)_+=dn[p].distanceTo(dn[p+1])/2;if(_===0)oe=dn[0];else for(p=0,T=0;p<On-1;p++)if(j=dn[p],Y=dn[p+1],E=j.distanceTo(Y),T+=E,T>_){q=(T-_)/E,oe=[Y.x-q*(Y.x-j.x),Y.y-q*(Y.y-j.y)];break}var zn=c.unproject(ce(oe));return ue([zn.lat+Ce.lat,zn.lng+Ce.lng])}var ja={__proto__:null,simplify:It,pointToSegmentDistance:hs,closestPointOnSegment:oi,clipSegment:Gr,_getEdgeIntersection:Ir,_getBitCode:ai,_sqClosestPointOnSegment:li,isFlat:Mn,_flat:Ds,polylineCenter:To},Mo={project:function(i){return new ne(i.lng,i.lat)},unproject:function(i){return new Xe(i.y,i.x)},bounds:new Pe([-180,-90],[180,90])},Yr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Pe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var c=Math.PI/180,p=this.R,_=i.lat*c,E=this.R_MINOR/p,T=Math.sqrt(1-E*E),j=T*Math.sin(_),Y=Math.tan(Math.PI/4-_/2)/Math.pow((1-j)/(1+j),T/2);return _=-p*Math.log(Math.max(Y,1e-10)),new ne(i.lng*c*p,_)},unproject:function(i){for(var c=180/Math.PI,p=this.R,_=this.R_MINOR/p,E=Math.sqrt(1-_*_),T=Math.exp(-i.y/p),j=Math.PI/2-2*Math.atan(T),Y=0,q=.1,oe;Y<15&&Math.abs(q)>1e-7;Y++)oe=E*Math.sin(j),oe=Math.pow((1-oe)/(1+oe),E/2),q=Math.PI/2-2*Math.atan(T*oe)-j,j+=q;return new Xe(j*c,i.x*c/p)}},ko={__proto__:null,LonLat:Mo,Mercator:Yr,SphericalMercator:vr},wc=h({},gt,{code:"EPSG:3395",projection:Yr,transformation:function(){var i=.5/(Math.PI*Yr.R);return sr(i,.5,-i,.5)}()}),ki=h({},gt,{code:"EPSG:4326",projection:Mo,transformation:sr(1/180,1,-1/180,.5)}),_c=h({},Zt,{projection:Mo,transformation:sr(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,c){var p=c.lng-i.lng,_=c.lat-i.lat;return Math.sqrt(p*p+_*_)},infinite:!0});Zt.Earth=gt,Zt.EPSG3395=wc,Zt.EPSG3857=Qe,Zt.EPSG900913=Cr,Zt.EPSG4326=ki,Zt.Simple=_c;var Xt=_e.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[S(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[S(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var c=i.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Je.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var c=S(i);return this._layers[c]?this:(this._layers[c]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var c=S(i);return this._layers[c]?(this._loaded&&i.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return S(i)in this._layers},eachLayer:function(i,c){for(var p in this._layers)i.call(c,this._layers[p]);return this},_addLayers:function(i){i=i?B(i)?i:[i]:[];for(var c=0,p=i.length;c<p;c++)this.addLayer(i[c])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[S(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var c=S(i);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,c=-1/0,p=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var E=this._zoomBoundLayers[_].options;i=E.minZoom===void 0?i:Math.min(i,E.minZoom),c=E.maxZoom===void 0?c:Math.max(c,E.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=i===1/0?void 0:i,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Tr=Xt.extend({initialize:function(i,c){U(this,c),this._layers={};var p,_;if(i)for(p=0,_=i.length;p<_;p++)this.addLayer(i[p])},addLayer:function(i){var c=this.getLayerId(i);return this._layers[c]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var c=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(i){var c=typeof i=="number"?i:this.getLayerId(i);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var c=Array.prototype.slice.call(arguments,1),p,_;for(p in this._layers)_=this._layers[p],_[i]&&_[i].apply(_,c);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,c){for(var p in this._layers)i.call(c,this._layers[p]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return S(i)}}),Fn=function(i,c){return new Tr(i,c)},ur=Tr.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Tr.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Tr.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new dt;for(var c in this._layers){var p=this._layers[c];i.extend(p.getBounds?p.getBounds():p.getLatLng())}return i}}),dr=function(i,c){return new ur(i,c)},Oi=Le.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){U(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,c){var p=this._getIconUrl(i);if(!p){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(_,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(i,c){var p=this.options,_=p[c+"Size"];typeof _=="number"&&(_=[_,_]);var E=ce(_),T=ce(c==="shadow"&&p.shadowAnchor||p.iconAnchor||E&&E.divideBy(2,!0));i.className="leaflet-marker-"+c+" "+(p.className||""),T&&(i.style.marginLeft=-T.x+"px",i.style.marginTop=-T.y+"px"),E&&(i.style.width=E.x+"px",i.style.height=E.y+"px")},_createImg:function(i,c){return c=c||document.createElement("img"),c.src=i,c},_getIconUrl:function(i){return Ne.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Oo(i){return new Oi(i)}var fs=Oi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof fs.imagePath!="string"&&(fs.imagePath=this._detectIconPath()),(this.options.imagePath||fs.imagePath)+Oi.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var c=function(p,_,E){var T=_.exec(p);return T&&T[E]};return i=c(i,/^url\((['"])?(.+)\1\)$/,2),i&&c(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=et("div","leaflet-default-icon-path",document.body),c=Ze(i,"background-image")||Ze(i,"backgroundImage");if(document.body.removeChild(i),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),Lo=Tn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Wr(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ie(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var c=this._marker,p=c._map,_=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,T=At(c._icon),j=p.getPixelBounds(),Y=p.getPixelOrigin(),q=De(j.min._subtract(Y).add(E),j.max._subtract(Y).subtract(E));if(!q.contains(T)){var oe=ce((Math.max(q.max.x,T.x)-q.max.x)/(j.max.x-q.max.x)-(Math.min(q.min.x,T.x)-q.min.x)/(j.min.x-q.min.x),(Math.max(q.max.y,T.y)-q.max.y)/(j.max.y-q.max.y)-(Math.min(q.min.y,T.y)-q.min.y)/(j.min.y-q.min.y)).multiplyBy(_);p.panBy(oe,{animate:!1}),this._draggable._newPos._add(oe),this._draggable._startPos._add(oe),ye(c._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=Re(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(me(this._panRequest),this._panRequest=Re(this._adjustPan.bind(this,i)))},_onDrag:function(i){var c=this._marker,p=c._shadow,_=At(c._icon),E=c._map.layerPointToLatLng(_);p&&ye(p,_),c._latlng=E,i.latlng=E,i.oldLatLng=this._oldLatLng,c.fire("move",i).fire("drag",i)},_onDragEnd:function(i){me(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),kn=Xt.extend({options:{icon:new fs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,c){U(this,c),this._latlng=ue(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var c=this._latlng;return this._latlng=ue(i),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=i.icon.createIcon(this._icon),_=!1;p!==this._icon&&(this._icon&&this._removeIcon(),_=!0,i.title&&(p.title=i.title),p.tagName==="IMG"&&(p.alt=i.alt||"")),Ie(p,c),i.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(p,"focus",this._panOnFocus,this);var E=i.icon.createShadow(this._shadow),T=!1;E!==this._shadow&&(this._removeShadow(),T=!0),E&&(Ie(E,c),E.alt=""),this._shadow=E,i.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&T&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&we(this._icon,"focus",this._panOnFocus,this),wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&ye(this._icon,i),this._shadow&&ye(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Ie(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Lo)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Lo(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Ge(this._icon,i),this._shadow&&Ge(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var c=this.options.icon.options,p=c.iconSize?ce(c.iconSize):ce(0,0),_=c.iconAnchor?ce(c.iconAnchor):ce(0,0);i.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:p.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function vc(i,c){return new kn(i,c)}var hr=Xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return U(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Xr=hr.extend({options:{fill:!0,radius:10},initialize:function(i,c){U(this,c),this._latlng=ue(i),this._radius=this.options.radius},setLatLng:function(i){var c=this._latlng;return this._latlng=ue(i),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var c=i&&i.radius||this._radius;return hr.prototype.setStyle.call(this,i),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,c=this._radiusY||i,p=this._clickTolerance(),_=[i+p,c+p];this._pxBounds=new Pe(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function nt(i,c){return new Xr(i,c)}var Li=Xr.extend({initialize:function(i,c,p){if(typeof c=="number"&&(c=h({},p,{radius:c})),U(this,c),this._latlng=ue(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new dt(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:hr.prototype.setStyle,_project:function(){var i=this._latlng.lng,c=this._latlng.lat,p=this._map,_=p.options.crs;if(_.distance===gt.distance){var E=Math.PI/180,T=this._mRadius/gt.R/E,j=p.project([c+T,i]),Y=p.project([c-T,i]),q=j.add(Y).divideBy(2),oe=p.unproject(q).lat,Ce=Math.acos((Math.cos(T*E)-Math.sin(c*E)*Math.sin(oe*E))/(Math.cos(c*E)*Math.cos(oe*E)))/E;(isNaN(Ce)||Ce===0)&&(Ce=T/Math.cos(Math.PI/180*c)),this._point=q.subtract(p.getPixelOrigin()),this._radius=isNaN(Ce)?0:q.x-p.project([oe,i-Ce]).x,this._radiusY=q.y-j.y}else{var Be=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Be).x}this._updateBounds()}});function b(i,c,p){return new Li(i,c,p)}var t=hr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,c){U(this,c),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var c=1/0,p=null,_=li,E,T,j=0,Y=this._parts.length;j<Y;j++)for(var q=this._parts[j],oe=1,Ce=q.length;oe<Ce;oe++){E=q[oe-1],T=q[oe];var Be=_(i,E,T,!0);Be<c&&(c=Be,p=_(i,E,T))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return To(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,c){return c=c||this._defaultShape(),i=ue(i),c.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new dt,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var c=[],p=Mn(i),_=0,E=i.length;_<E;_++)p?(c[_]=ue(i[_]),this._bounds.extend(c[_])):c[_]=this._convertLatLngs(i[_]);return c},_project:function(){var i=new Pe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),c=new ne(i,i);this._rawPxBounds&&(this._pxBounds=new Pe([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(i,c,p){var _=i[0]instanceof Xe,E=i.length,T,j;if(_){for(j=[],T=0;T<E;T++)j[T]=this._map.latLngToLayerPoint(i[T]),p.extend(j[T]);c.push(j)}else for(T=0;T<E;T++)this._projectLatlngs(i[T],c,p)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,_,E,T,j,Y,q;for(p=0,E=0,T=this._rings.length;p<T;p++)for(q=this._rings[p],_=0,j=q.length;_<j-1;_++)Y=Gr(q[_],q[_+1],i,_,!0),Y&&(c[E]=c[E]||[],c[E].push(Y[0]),(Y[1]!==q[_+1]||_===j-2)&&(c[E].push(Y[1]),E++))}},_simplifyPoints:function(){for(var i=this._parts,c=this.options.smoothFactor,p=0,_=i.length;p<_;p++)i[p]=It(i[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,c){var p,_,E,T,j,Y,q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(p=0,T=this._parts.length;p<T;p++)for(Y=this._parts[p],_=0,j=Y.length,E=j-1;_<j;E=_++)if(!(!c&&_===0)&&hs(i,Y[E],Y[_])<=q)return!0;return!1}});function r(i,c){return new t(i,c)}t._flat=Ds;var o=t.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var c=t.prototype._convertLatLngs.call(this,i),p=c.length;return p>=2&&c[0]instanceof Xe&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(i){t.prototype._setLatLngs.call(this,i),Mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,c=this.options.weight,p=new ne(c,c);if(i=new Pe(i.min.subtract(p),i.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,E=this._rings.length,T;_<E;_++)T=Ba(this._rings[_],i,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var c=!1,p,_,E,T,j,Y,q,oe;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(T=0,q=this._parts.length;T<q;T++)for(p=this._parts[T],j=0,oe=p.length,Y=oe-1;j<oe;Y=j++)_=p[j],E=p[Y],_.y>i.y!=E.y>i.y&&i.x<(E.x-_.x)*(i.y-_.y)/(E.y-_.y)+_.x&&(c=!c);return c||t.prototype._containsPoint.call(this,i,!0)}});function a(i,c){return new o(i,c)}var l=ur.extend({initialize:function(i,c){U(this,c),this._layers={},i&&this.addData(i)},addData:function(i){var c=B(i)?i:i.features,p,_,E;if(c){for(p=0,_=c.length;p<_;p++)E=c[p],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var T=this.options;if(T.filter&&!T.filter(i))return this;var j=d(i,T);return j?(j.feature=R(i),j.defaultOptions=j.options,this.resetStyle(j),T.onEachFeature&&T.onEachFeature(i,j),this.addLayer(j)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=h({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(c){this._setLayerStyle(c,i)},this)},_setLayerStyle:function(i,c){i.setStyle&&(typeof c=="function"&&(c=c(i.feature)),i.setStyle(c))}});function d(i,c){var p=i.type==="Feature"?i.geometry:i,_=p?p.coordinates:null,E=[],T=c&&c.pointToLayer,j=c&&c.coordsToLatLng||m,Y,q,oe,Ce;if(!_&&!p)return null;switch(p.type){case"Point":return Y=j(_),f(T,i,Y,c);case"MultiPoint":for(oe=0,Ce=_.length;oe<Ce;oe++)Y=j(_[oe]),E.push(f(T,i,Y,c));return new ur(E);case"LineString":case"MultiLineString":return q=x(_,p.type==="LineString"?0:1,j),new t(q,c);case"Polygon":case"MultiPolygon":return q=x(_,p.type==="Polygon"?1:2,j),new o(q,c);case"GeometryCollection":for(oe=0,Ce=p.geometries.length;oe<Ce;oe++){var Be=d({geometry:p.geometries[oe],type:"Feature",properties:i.properties},c);Be&&E.push(Be)}return new ur(E);case"FeatureCollection":for(oe=0,Ce=p.features.length;oe<Ce;oe++){var qe=d(p.features[oe],c);qe&&E.push(qe)}return new ur(E);default:throw new Error("Invalid GeoJSON object.")}}function f(i,c,p,_){return i?i(c,p):new kn(p,_&&_.markersInheritOptions&&_)}function m(i){return new Xe(i[1],i[0],i[2])}function x(i,c,p){for(var _=[],E=0,T=i.length,j;E<T;E++)j=c?x(i[E],c-1,p):(p||m)(i[E]),_.push(j);return _}function C(i,c){return i=ue(i),i.alt!==void 0?[H(i.lng,c),H(i.lat,c),H(i.alt,c)]:[H(i.lng,c),H(i.lat,c)]}function N(i,c,p,_){for(var E=[],T=0,j=i.length;T<j;T++)E.push(c?N(i[T],Mn(i[T])?0:c-1,p,_):C(i[T],_));return!c&&p&&E.length>0&&E.push(E[0].slice()),E}function I(i,c){return i.feature?h({},i.feature,{geometry:c}):R(c)}function R(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var F={toGeoJSON:function(i){return I(this,{type:"Point",coordinates:C(this.getLatLng(),i)})}};kn.include(F),Li.include(F),Xr.include(F),t.include({toGeoJSON:function(i){var c=!Mn(this._latlngs),p=N(this._latlngs,c?1:0,!1,i);return I(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),o.include({toGeoJSON:function(i){var c=!Mn(this._latlngs),p=c&&!Mn(this._latlngs[0]),_=N(this._latlngs,p?2:c?1:0,!0,i);return c||(_=[_]),I(this,{type:(p?"Multi":"")+"Polygon",coordinates:_})}}),Tr.include({toMultiPoint:function(i){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(i).geometry.coordinates)}),I(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(i){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(i);var p=c==="GeometryCollection",_=[];return this.eachLayer(function(E){if(E.toGeoJSON){var T=E.toGeoJSON(i);if(p)_.push(T.geometry);else{var j=R(T);j.type==="FeatureCollection"?_.push.apply(_,j.features):_.push(j)}}}),p?I(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function z(i,c){return new l(i,c)}var W=z,Q=Xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,c,p){this._url=i,this._bounds=Fe(c),U(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ie(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Et(this._image),this},bringToBack:function(){return this._map&&In(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Fe(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",c=this._image=i?this._url:et("img");if(Ie(c,"leaflet-image-layer"),this._zoomAnimated&&Ie(c,"leaflet-zoom-animated"),this.options.className&&Ie(c,this.options.className),c.onselectstart=O,c.onmousemove=O,c.onload=w(this.fire,this,"load"),c.onerror=w(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(i){var c=this._map.getZoomScale(i.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;M(this._image,p,c)},_reset:function(){var i=this._image,c=new Pe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();ye(i,c.min),i.style.width=p.x+"px",i.style.height=p.y+"px"},_updateOpacity:function(){Ge(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),de=function(i,c,p){return new Q(i,c,p)},he=Q.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",c=this._image=i?this._url:et("video");if(Ie(c,"leaflet-image-layer"),this._zoomAnimated&&Ie(c,"leaflet-zoom-animated"),this.options.className&&Ie(c,this.options.className),c.onselectstart=O,c.onmousemove=O,c.onloadeddata=w(this.fire,this,"load"),i){for(var p=c.getElementsByTagName("source"),_=[],E=0;E<p.length;E++)_.push(p[E].src);this._url=p.length>0?_:[c.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var j=et("source");j.src=this._url[T],c.appendChild(j)}}});function ae(i,c,p){return new he(i,c,p)}var Ye=Q.extend({_initImage:function(){var i=this._image=this._url;Ie(i,"leaflet-image-layer"),this._zoomAnimated&&Ie(i,"leaflet-zoom-animated"),this.options.className&&Ie(i,this.options.className),i.onselectstart=O,i.onmousemove=O}});function Ue(i,c,p){return new Ye(i,c,p)}var Tt=Xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,c){i&&(i instanceof Xe||B(i))?(this._latlng=ue(i),U(this,c)):(U(this,i),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Ge(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Ge(this._container,1),this.bringToFront(),this.options.interactive&&(Ie(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Ge(this._container,0),this._removeTimeout=setTimeout(w(wt,void 0,this._container),200)):wt(this._container),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ue(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Et(this._container),this},bringToBack:function(){return this._map&&In(this._container),this},_prepareOpen:function(i){var c=this._source;if(!c._map)return!1;if(c instanceof ur){c=null;var p=this._source._layers;for(var _ in p)if(p[_]._map){c=p[_];break}if(!c)return!1;this._source=c}if(!i)if(c.getCenter)i=c.getCenter();else if(c.getLatLng)i=c.getLatLng();else if(c.getBounds)i=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")i.innerHTML=c;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),c=ce(this.options.offset),p=this._getAnchor();this._zoomAnimated?ye(this._container,i.add(p)):c=c.add(i).add(p);var _=this._containerBottom=-c.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=_+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});Je.include({_initOverlay:function(i,c,p,_){var E=c;return E instanceof i||(E=new i(_).setContent(c)),p&&E.setLatLng(p),E}}),Xt.include({_initOverlay:function(i,c,p,_){var E=p;return E instanceof i?(U(E,_),E._source=this):(E=c&&!_?c:new i(_,this),E.setContent(p)),E}});var _n=Tt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Tt.prototype.openOn.call(this,i)},onAdd:function(i){Tt.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof hr||this._source.on("preclick",br))},onRemove:function(i){Tt.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof hr||this._source.off("preclick",br))},getEvents:function(){var i=Tt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",c=this._container=et("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=et("div",i+"-content-wrapper",c);if(this._contentNode=et("div",i+"-content",p),Yn(c),ks(this._contentNode),je(c,"contextmenu",br),this._tipContainer=et("div",i+"-tip-container",c),this._tip=et("div",i+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=et("a",i+"-close-button",c);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',je(_,"click",function(E){Jt(E),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,c=i.style;c.width="",c.whiteSpace="nowrap";var p=i.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var _=i.offsetHeight,E=this.options.maxHeight,T="leaflet-popup-scrolled";E&&_>E?(c.height=E+"px",Ie(i,T)):ht(i,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),p=this._getAnchor();ye(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,c=parseInt(Ze(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,_=this._containerWidth,E=new ne(this._containerLeft,-p-this._containerBottom);E._add(At(this._container));var T=i.layerPointToContainerPoint(E),j=ce(this.options.autoPanPadding),Y=ce(this.options.autoPanPaddingTopLeft||j),q=ce(this.options.autoPanPaddingBottomRight||j),oe=i.getSize(),Ce=0,Be=0;T.x+_+q.x>oe.x&&(Ce=T.x+_-oe.x+q.x),T.x-Ce-Y.x<0&&(Ce=T.x-Y.x),T.y+p+q.y>oe.y&&(Be=T.y+p-oe.y+q.y),T.y-Be-Y.y<0&&(Be=T.y-Y.y),(Ce||Be)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([Ce,Be]))}},_getAnchor:function(){return ce(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),vn=function(i,c){return new _n(i,c)};Je.mergeOptions({closePopupOnClick:!0}),Je.include({openPopup:function(i,c,p){return this._initOverlay(_n,i,c,p).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Xt.include({bindPopup:function(i,c){return this._popup=this._initOverlay(_n,this._popup,i,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof ur||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Xn(i);var c=i.layer||i.target;if(this._popup._source===c&&!(c instanceof hr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=c,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ut=Tt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Tt.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Tt.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Tt.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",c=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=et("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+S(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var c,p,_=this._map,E=this._container,T=_.latLngToContainerPoint(_.getCenter()),j=_.layerPointToContainerPoint(i),Y=this.options.direction,q=E.offsetWidth,oe=E.offsetHeight,Ce=ce(this.options.offset),Be=this._getAnchor();Y==="top"?(c=q/2,p=oe):Y==="bottom"?(c=q/2,p=0):Y==="center"?(c=q/2,p=oe/2):Y==="right"?(c=0,p=oe/2):Y==="left"?(c=q,p=oe/2):j.x<T.x?(Y="right",c=0,p=oe/2):(Y="left",c=q+(Ce.x+Be.x)*2,p=oe/2),i=i.subtract(ce(c,p,!0)).add(Ce).add(Be),ht(E,"leaflet-tooltip-right"),ht(E,"leaflet-tooltip-left"),ht(E,"leaflet-tooltip-top"),ht(E,"leaflet-tooltip-bottom"),Ie(E,"leaflet-tooltip-"+Y),ye(E,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Ge(this._container,i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(c)},_getAnchor:function(){return ce(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),en=function(i,c){return new ut(i,c)};Je.include({openTooltip:function(i,c,p){return this._initOverlay(ut,i,c,p).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Xt.include({bindTooltip:function(i,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ut,this._tooltip,i,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var c=i?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof ur||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&(je(c,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),je(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var c=i.latlng,p,_;this._tooltip.options.sticky&&i.originalEvent&&(p=this._map.mouseEventToContainerPoint(i.originalEvent),_=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(c)}});var Cn=Oi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var c=i&&i.tagName==="DIV"?i:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Ni(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var _=ce(p.bgPos);c.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function Ri(i){return new Cn(i)}Oi.Default=fs;var fr=Xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ne.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){U(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),wt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Et(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(In(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof ne?i:new ne(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var c=this.getPane().children,p=-i(-1/0,1/0),_=0,E=c.length,T;_<E;_++)T=c[_].style.zIndex,c[_]!==this._container&&T&&(p=i(p,+T));isFinite(p)&&(this.options.zIndex=p+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ne.ielt9){Ge(this._container,this.options.opacity);var i=+new Date,c=!1,p=!1;for(var _ in this._tiles){var E=this._tiles[_];if(!(!E.current||!E.loaded)){var T=Math.min(1,(i-E.loaded)/200);Ge(E.el,T),T<1?c=!0:(E.active?p=!0:this._onOpaqueTile(E),E.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&(me(this._fadeFrame),this._fadeFrame=Re(this._updateOpacity,this))}},_onOpaqueTile:O,_initContainer:function(){this._container||(this._container=et("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,c=this.options.maxZoom;if(i!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===i?(this._levels[p].el.style.zIndex=c-Math.abs(i-p),this._onUpdateLevel(p)):(wt(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var _=this._levels[i],E=this._map;return _||(_=this._levels[i]={},_.el=et("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=c,_.origin=E.project(E.unproject(E.getPixelOrigin()),i).round(),_.zoom=i,this._setZoomTransform(_,E.getCenter(),E.getZoom()),O(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:O,_onRemoveLevel:O,_onCreateLevel:O,_pruneTiles:function(){if(this._map){var i,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)c=this._tiles[i],c.retain=c.current;for(i in this._tiles)if(c=this._tiles[i],c.current&&!c.active){var _=c.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var c in this._tiles)this._tiles[c].coords.z===i&&this._removeTile(c)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)wt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,c,p,_){var E=Math.floor(i/2),T=Math.floor(c/2),j=p-1,Y=new ne(+E,+T);Y.z=+j;var q=this._tileCoordsToKey(Y),oe=this._tiles[q];return oe&&oe.active?(oe.retain=!0,!0):(oe&&oe.loaded&&(oe.retain=!0),j>_?this._retainParent(E,T,j,_):!1)},_retainChildren:function(i,c,p,_){for(var E=2*i;E<2*i+2;E++)for(var T=2*c;T<2*c+2;T++){var j=new ne(E,T);j.z=p+1;var Y=this._tileCoordsToKey(j),q=this._tiles[Y];if(q&&q.active){q.retain=!0;continue}else q&&q.loaded&&(q.retain=!0);p+1<_&&this._retainChildren(E,T,p+1,_)}},_resetView:function(i){var c=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var c=this.options;return c.minNativeZoom!==void 0&&i<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<i?c.maxNativeZoom:i},_setView:function(i,c,p,_){var E=Math.round(c);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var T=this.options.updateWhenZooming&&E!==this._tileZoom;(!_||T)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(i),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(i,c)},_setZoomTransforms:function(i,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],i,c)},_setZoomTransform:function(i,c,p){var _=this._map.getZoomScale(p,i.zoom),E=i.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(c,p)).round();Ne.any3d?M(i.el,E,_):ye(i.el,E)},_resetGrid:function(){var i=this._map,c=i.options.crs,p=this._tileSize=this.getTileSize(),_=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,c.wrapLng[0]],_).x/p.x),Math.ceil(i.project([0,c.wrapLng[1]],_).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([c.wrapLat[0],0],_).y/p.x),Math.ceil(i.project([c.wrapLat[1],0],_).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),_=c.getZoomScale(p,this._tileZoom),E=c.project(i,this._tileZoom).floor(),T=c.getSize().divideBy(_*2);return new Pe(E.subtract(T),E.add(T))},_update:function(i){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(i===void 0&&(i=c.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(i),E=this._pxBoundsToTileRange(_),T=E.getCenter(),j=[],Y=this.options.keepBuffer,q=new Pe(E.getBottomLeft().subtract([Y,-Y]),E.getTopRight().add([Y,-Y]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var oe in this._tiles){var Ce=this._tiles[oe].coords;(Ce.z!==this._tileZoom||!q.contains(new ne(Ce.x,Ce.y)))&&(this._tiles[oe].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(i,p);return}for(var Be=E.min.y;Be<=E.max.y;Be++)for(var qe=E.min.x;qe<=E.max.x;qe++){var On=new ne(qe,Be);if(On.z=this._tileZoom,!!this._isValidTile(On)){var dn=this._tiles[this._tileCoordsToKey(On)];dn?dn.current=!0:j.push(On)}}if(j.sort(function(zn,Ps){return zn.distanceTo(T)-Ps.distanceTo(T)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gr=document.createDocumentFragment();for(qe=0;qe<j.length;qe++)this._addTile(j[qe],gr);this._level.el.appendChild(gr)}}}},_isValidTile:function(i){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(i.x<p.min.x||i.x>p.max.x)||!c.wrapLat&&(i.y<p.min.y||i.y>p.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(i);return Fe(this.options.bounds).overlaps(_)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var c=this._map,p=this.getTileSize(),_=i.scaleBy(p),E=_.add(p),T=c.unproject(_,i.z),j=c.unproject(E,i.z);return[T,j]},_tileCoordsToBounds:function(i){var c=this._tileCoordsToNwSe(i),p=new dt(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var c=i.split(":"),p=new ne(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(i){var c=this._tiles[i];c&&(wt(c.el),delete this._tiles[i],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Ie(i,"leaflet-tile");var c=this.getTileSize();i.style.width=c.x+"px",i.style.height=c.y+"px",i.onselectstart=O,i.onmousemove=O,Ne.ielt9&&this.options.opacity<1&&Ge(i,this.options.opacity)},_addTile:function(i,c){var p=this._getTilePos(i),_=this._tileCoordsToKey(i),E=this.createTile(this._wrapCoords(i),w(this._tileReady,this,i));this._initTile(E),this.createTile.length<2&&Re(w(this._tileReady,this,i,null,E)),ye(E,p),this._tiles[_]={el:E,coords:i,current:!0},c.appendChild(E),this.fire("tileloadstart",{tile:E,coords:i})},_tileReady:function(i,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:i});var _=this._tileCoordsToKey(i);p=this._tiles[_],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Ge(p.el,0),me(this._fadeFrame),this._fadeFrame=Re(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(Ie(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ne.ielt9||!this._map._fadeAnimated?Re(this._pruneTiles,this):setTimeout(w(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var c=new ne(this._wrapX?k(i.x,this._wrapX):i.x,this._wrapY?k(i.y,this._wrapY):i.y);return c.z=i.z,c},_pxBoundsToTileRange:function(i){var c=this.getTileSize();return new Pe(i.min.unscaleBy(c).floor(),i.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Cc(i){return new fr(i)}var Di=fr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,c){this._url=i,c=U(this,c),c.detectRetina&&Ne.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,c){return this._url===i&&c===void 0&&(c=!0),this._url=i,c||this.redraw(),this},createTile:function(i,c){var p=document.createElement("img");return je(p,"load",w(this._tileOnLoad,this,c,p)),je(p,"error",w(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(i),p},getTileUrl:function(i){var c={r:Ne.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-i.y;this.options.tms&&(c.y=p),c["-y"]=p}return D(this._url,h(c,this.options))},_tileOnLoad:function(i,c){Ne.ielt9?setTimeout(w(i,this,null,c),0):i(null,c)},_tileOnError:function(i,c,p){var _=this.options.errorTileUrl;_&&c.getAttribute("src")!==_&&(c.src=_),i(p,c)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,_=this.options.zoomOffset;return p&&(i=c-i),i+_},_getSubdomain:function(i){var c=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var i,c;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(c=this._tiles[i].el,c.onload=O,c.onerror=O,!c.complete)){c.src=ge;var p=this._tiles[i].coords;wt(c),delete this._tiles[i],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(i){var c=this._tiles[i];if(c)return c.el.setAttribute("src",ge),fr.prototype._removeTile.call(this,i)},_tileReady:function(i,c,p){if(!(!this._map||p&&p.getAttribute("src")===ge))return fr.prototype._tileReady.call(this,i,c,p)}});function Yd(i,c){return new Di(i,c)}var Xd=Di.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,c){this._url=i;var p=h({},this.defaultWmsParams);for(var _ in c)_ in this.options||(p[_]=c[_]);c=U(this,c);var E=c.detectRetina&&Ne.retina?2:1,T=this.getTileSize();p.width=T.x*E,p.height=T.y*E,this.wmsParams=p},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Di.prototype.onAdd.call(this,i)},getTileUrl:function(i){var c=this._tileCoordsToNwSe(i),p=this._crs,_=De(p.project(c[0]),p.project(c[1])),E=_.min,T=_.max,j=(this._wmsVersion>=1.3&&this._crs===ki?[E.y,E.x,T.y,T.x]:[E.x,E.y,T.x,T.y]).join(","),Y=Di.prototype.getTileUrl.call(this,i);return Y+xe(this.wmsParams,Y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(i,c){return h(this.wmsParams,i),c||this.redraw(),this}});function pg(i,c){return new Xd(i,c)}Di.WMS=Xd,Yd.wms=pg;var ci=Xt.extend({options:{padding:.1},initialize:function(i){U(this,i),S(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ie(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,c){var p=this._map.getZoomScale(c,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,c),T=_.multiplyBy(-p).add(E).subtract(this._map._getNewPixelOrigin(i,c));Ne.any3d?M(this._container,T,p):ye(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-i)).round();this._bounds=new Pe(p,p.add(c.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Qd=ci.extend({options:{tolerance:0},getEvents:function(){var i=ci.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ci.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");je(i,"mousemove",this._onMouseMove,this),je(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),je(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){me(this._redrawRequest),delete this._ctx,wt(this._container),we(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var c in this._layers)i=this._layers[c],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ci.prototype._update.call(this);var i=this._bounds,c=this._container,p=i.getSize(),_=Ne.retina?2:1;ye(c,i.min),c.width=_*p.x,c.height=_*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",Ne.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){ci.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[S(i)]=i;var c=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var c=i._order,p=c.next,_=c.prev;p?p.prev=_:this._drawLast=_,_?_.next=p:this._drawFirst=p,delete i._order,delete this._layers[S(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var c=i.options.dashArray.split(/[, ]+/),p=[],_,E;for(E=0;E<c.length;E++){if(_=Number(c[E]),isNaN(_))return;p.push(_)}i.options._dashArray=p}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||Re(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var c=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Pe,this._redrawBounds.extend(i._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(i._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var c=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)i=_.layer,(!c||i._pxBounds&&i._pxBounds.intersects(c))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,c){if(this._drawing){var p,_,E,T,j=i._parts,Y=j.length,q=this._ctx;if(Y){for(q.beginPath(),p=0;p<Y;p++){for(_=0,E=j[p].length;_<E;_++)T=j[p][_],q[_?"lineTo":"moveTo"](T.x,T.y);c&&q.closePath()}this._fillStroke(q,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var c=i._point,p=this._ctx,_=Math.max(Math.round(i._radius),1),E=(Math.max(Math.round(i._radiusY),1)||_)/_;E!==1&&(p.save(),p.scale(1,E)),p.beginPath(),p.arc(c.x,c.y/E,_,0,Math.PI*2,!1),E!==1&&p.restore(),this._fillStroke(p,i)}},_fillStroke:function(i,c){var p=c.options;p.fill&&(i.globalAlpha=p.fillOpacity,i.fillStyle=p.fillColor||p.color,i.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(i.setLineDash&&i.setLineDash(c.options&&c.options._dashArray||[]),i.globalAlpha=p.opacity,i.lineWidth=p.weight,i.strokeStyle=p.color,i.lineCap=p.lineCap,i.lineJoin=p.lineJoin,i.stroke())},_onClick:function(i){for(var c=this._map.mouseEventToLayerPoint(i),p,_,E=this._drawFirst;E;E=E.next)p=E.layer,p.options.interactive&&p._containsPoint(c)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(p))&&(_=p);this._fireEvent(_?[_]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,c)}},_handleMouseOut:function(i){var c=this._hoveredLayer;c&&(ht(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,c){if(!this._mouseHoverThrottled){for(var p,_,E=this._drawFirst;E;E=E.next)p=E.layer,p.options.interactive&&p._containsPoint(c)&&(_=p);_!==this._hoveredLayer&&(this._handleMouseOut(i),_&&(Ie(this._container,"leaflet-interactive"),this._fireEvent([_],i,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(w(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,c,p){this._map._fireDOMEvent(c,p||c.type,i)},_bringToFront:function(i){var c=i._order;if(c){var p=c.next,_=c.prev;if(p)p.prev=_;else return;_?_.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(i)}},_bringToBack:function(i){var c=i._order;if(c){var p=c.next,_=c.prev;if(_)_.next=p;else return;p?p.prev=_:_&&(this._drawLast=_),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(i)}}});function Kd(i){return Ne.canvas?new Qd(i):null}var Ro=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),mg={_initContainer:function(){this._container=et("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ci.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var c=i._container=Ro("shape");Ie(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",i._path=Ro("path"),c.appendChild(i._path),this._updateStyle(i),this._layers[S(i)]=i},_addPath:function(i){var c=i._container;this._container.appendChild(c),i.options.interactive&&i.addInteractiveTarget(c)},_removePath:function(i){var c=i._container;wt(c),i.removeInteractiveTarget(c),delete this._layers[S(i)]},_updateStyle:function(i){var c=i._stroke,p=i._fill,_=i.options,E=i._container;E.stroked=!!_.stroke,E.filled=!!_.fill,_.stroke?(c||(c=i._stroke=Ro("stroke")),E.appendChild(c),c.weight=_.weight+"px",c.color=_.color,c.opacity=_.opacity,_.dashArray?c.dashStyle=B(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=_.lineCap.replace("butt","flat"),c.joinstyle=_.lineJoin):c&&(E.removeChild(c),i._stroke=null),_.fill?(p||(p=i._fill=Ro("fill")),E.appendChild(p),p.color=_.fillColor||_.color,p.opacity=_.fillOpacity):p&&(E.removeChild(p),i._fill=null)},_updateCircle:function(i){var c=i._point.round(),p=Math.round(i._radius),_=Math.round(i._radiusY||p);this._setPath(i,i._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+_+" 0,"+65535*360)},_setPath:function(i,c){i._path.v=c},_bringToFront:function(i){Et(i._container)},_bringToBack:function(i){In(i._container)}},Fa=Ne.vml?Ro:yn,Do=ci.extend({_initContainer:function(){this._container=Fa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Fa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wt(this._container),we(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ci.prototype._update.call(this);var i=this._bounds,c=i.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),ye(p,i.min),p.setAttribute("viewBox",[i.min.x,i.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(i){var c=i._path=Fa("path");i.options.className&&Ie(c,i.options.className),i.options.interactive&&Ie(c,"leaflet-interactive"),this._updateStyle(i),this._layers[S(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){wt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[S(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var c=i._path,p=i.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(i,c){this._setPath(i,Er(i._parts,c))},_updateCircle:function(i){var c=i._point,p=Math.max(Math.round(i._radius),1),_=Math.max(Math.round(i._radiusY),1)||p,E="a"+p+","+_+" 0 1,0 ",T=i._empty()?"M0 0":"M"+(c.x-p)+","+c.y+E+p*2+",0 "+E+-p*2+",0 ";this._setPath(i,T)},_setPath:function(i,c){i._path.setAttribute("d",c)},_bringToFront:function(i){Et(i._path)},_bringToBack:function(i){In(i._path)}});Ne.vml&&Do.include(mg);function qd(i){return Ne.svg||Ne.vml?new Do(i):null}Je.include({getRenderer:function(i){var c=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var c=this._paneRenderers[i];return c===void 0&&(c=this._createRenderer({pane:i}),this._paneRenderers[i]=c),c},_createRenderer:function(i){return this.options.preferCanvas&&Kd(i)||qd(i)}});var Jd=o.extend({initialize:function(i,c){o.prototype.initialize.call(this,this._boundsToLatLngs(i),c)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Fe(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function xg(i,c){return new Jd(i,c)}Do.create=Fa,Do.pointsToPath=Er,l.geometryToLayer=d,l.coordsToLatLng=m,l.coordsToLatLngs=x,l.latLngToCoords=C,l.latLngsToCoords=N,l.getFeature=I,l.asFeature=R,Je.mergeOptions({boxZoom:!0});var $d=Tn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),cn(),Me(),this._startPoint=this._map.mouseEventToContainerPoint(i),je(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=et("div","leaflet-zoom-box",this._container),Ie(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var c=new Pe(this._point,this._startPoint),p=c.getSize();ye(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(wt(this._box),ht(this._container,"leaflet-crosshair")),as(),_t(),we(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(w(this._resetState,this),0);var c=new dt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Je.addInitHook("addHandler","boxZoom",$d),Je.mergeOptions({doubleClickZoom:!0});var eh=Tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var c=this._map,p=c.getZoom(),_=c.options.zoomDelta,E=i.originalEvent.shiftKey?p-_:p+_;c.options.doubleClickZoom==="center"?c.setZoom(E):c.setZoomAround(i.containerPoint,E)}});Je.addInitHook("addHandler","doubleClickZoom",eh),Je.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var th=Tn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Wr(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Ie(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ht(this._map._container,"leaflet-grab"),ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=Fe(this._map.options.maxBounds);this._offsetLimit=De(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,c){return i-(i-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;i.x<c.min.x&&(i.x=this._viscousLimit(i.x,c.min.x)),i.y<c.min.y&&(i.y=this._viscousLimit(i.y,c.min.y)),i.x>c.max.x&&(i.x=this._viscousLimit(i.x,c.max.x)),i.y>c.max.y&&(i.y=this._viscousLimit(i.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,c=Math.round(i/2),p=this._initialWorldOffset,_=this._draggable._newPos.x,E=(_-c+p)%i+c-p,T=(_+c+p)%i-c-p,j=Math.abs(E+p)<Math.abs(T+p)?E:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(i){var c=this._map,p=c.options,_=!p.inertia||i.noInertia||this._times.length<2;if(c.fire("dragend",i),_)c.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,j=p.easeLinearity,Y=E.multiplyBy(j/T),q=Y.distanceTo([0,0]),oe=Math.min(p.inertiaMaxSpeed,q),Ce=Y.multiplyBy(oe/q),Be=oe/(p.inertiaDeceleration*j),qe=Ce.multiplyBy(-Be/2).round();!qe.x&&!qe.y?c.fire("moveend"):(qe=c._limitOffset(qe,c.options.maxBounds),Re(function(){c.panBy(qe,{duration:Be,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});Je.addInitHook("addHandler","dragging",th),Je.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nh=Tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),je(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),we(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,c=document.documentElement,p=i.scrollTop||c.scrollTop,_=i.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(_,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var c=this._panKeys={},p=this.keyCodes,_,E;for(_=0,E=p.left.length;_<E;_++)c[p.left[_]]=[-1*i,0];for(_=0,E=p.right.length;_<E;_++)c[p.right[_]]=[i,0];for(_=0,E=p.down.length;_<E;_++)c[p.down[_]]=[0,i];for(_=0,E=p.up.length;_<E;_++)c[p.up[_]]=[0,-1*i]},_setZoomDelta:function(i){var c=this._zoomKeys={},p=this.keyCodes,_,E;for(_=0,E=p.zoomIn.length;_<E;_++)c[p.zoomIn[_]]=i;for(_=0,E=p.zoomOut.length;_<E;_++)c[p.zoomOut[_]]=-i},_addHooks:function(){je(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){we(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var c=i.keyCode,p=this._map,_;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(_=this._panKeys[c],i.shiftKey&&(_=ce(_).multiplyBy(3)),p.options.maxBounds&&(_=p._limitOffset(ce(_),p.options.maxBounds)),p.options.worldCopyJump){var E=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(_)));p.panTo(E)}else p.panBy(_)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Xn(i)}}});Je.addInitHook("addHandler","keyboard",nh),Je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var rh=Tn.extend({addHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){we(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var c=Mi(i),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var _=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(w(this._performZoom,this),_),Xn(i)},_performZoom:function(){var i=this._map,c=i.getZoom(),p=this._map.options.zoomSnap||0;i._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,T=p?Math.ceil(E/p)*p:E,j=i._limitZoom(c+(this._delta>0?T:-T))-c;this._delta=0,this._startTime=null,j&&(i.options.scrollWheelZoom==="center"?i.setZoom(c+j):i.setZoomAround(this._lastMousePos,c+j))}});Je.addInitHook("addHandler","scrollWheelZoom",rh);var yg=600;Je.mergeOptions({tapHold:Ne.touchNative&&Ne.safari&&Ne.mobile,tapTolerance:15});var ih=Tn.extend({addHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var c=i.touches[0];this._startPos=this._newPos=new ne(c.clientX,c.clientY),this._holdTimeout=setTimeout(w(function(){this._cancel(),this._isTapValid()&&(je(document,"touchend",Jt),je(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),yg),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){we(document,"touchend",Jt),we(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),we(document,"touchend touchcancel contextmenu",this._cancel,this),we(document,"touchmove",this._onMove,this)},_onMove:function(i){var c=i.touches[0];this._newPos=new ne(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,c){var p=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});Je.addInitHook("addHandler","tapHold",ih),Je.mergeOptions({touchZoom:Ne.touch,bounceAtZoomLimits:!0});var sh=Tn.extend({addHooks:function(){Ie(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var c=this._map;if(!(!i.touches||i.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(i.touches[0]),_=c.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(_)._divideBy(2))),this._startDist=p.distanceTo(_),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),Jt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(i.touches[0]),_=c.mouseEventToContainerPoint(i.touches[1]),E=p.distanceTo(_)/this._startDist;if(this._zoom=c.getScaleZoom(E,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&E<1||this._zoom>c.getMaxZoom()&&E>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var T=p._add(_)._divideBy(2)._subtract(this._centerPoint);if(E===1&&T.x===0&&T.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),me(this._animRequest);var j=w(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Re(j,this,!0),Jt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,me(this._animRequest),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Je.addInitHook("addHandler","touchZoom",sh),Je.BoxZoom=$d,Je.DoubleClickZoom=eh,Je.Drag=th,Je.Keyboard=nh,Je.ScrollWheelZoom=rh,Je.TapHold=ih,Je.TouchZoom=sh,s.Bounds=Pe,s.Browser=Ne,s.CRS=Zt,s.Canvas=Qd,s.Circle=Li,s.CircleMarker=Xr,s.Class=Le,s.Control=Qn,s.DivIcon=Cn,s.DivOverlay=Tt,s.DomEvent=wn,s.DomUtil=Yt,s.Draggable=Wr,s.Evented=_e,s.FeatureGroup=ur,s.GeoJSON=l,s.GridLayer=fr,s.Handler=Tn,s.Icon=Oi,s.ImageOverlay=Q,s.LatLng=Xe,s.LatLngBounds=dt,s.Layer=Xt,s.LayerGroup=Tr,s.LineUtil=ja,s.Map=Je,s.Marker=kn,s.Mixin=Da,s.Path=hr,s.Point=ne,s.PolyUtil=Io,s.Polygon=o,s.Polyline=t,s.Popup=_n,s.PosAnimation=No,s.Projection=ko,s.Rectangle=Jd,s.Renderer=ci,s.SVG=Do,s.SVGOverlay=Ye,s.TileLayer=Di,s.Tooltip=ut,s.Transformation=Wt,s.Util=Ve,s.VideoOverlay=he,s.bind=w,s.bounds=De,s.canvas=Kd,s.circle=b,s.circleMarker=nt,s.control=ds,s.divIcon=Ri,s.extend=h,s.featureGroup=dr,s.geoJSON=z,s.geoJson=W,s.gridLayer=Cc,s.icon=Oo,s.imageOverlay=de,s.latLng=ue,s.latLngBounds=Fe,s.layerGroup=Fn,s.map=La,s.marker=vc,s.point=ce,s.polygon=a,s.polyline=r,s.popup=vn,s.rectangle=xg,s.setOptions=U,s.stamp=S,s.svg=qd,s.svgOverlay=Ue,s.tileLayer=Yd,s.tooltip=en,s.transformation=sr,s.version=u,s.videoOverlay=ae;var wg=window.L;s.noConflict=function(){return window.L=wg,this},window.L=s})})(Gu,Gu.exports);var yo=Gu.exports;const oa=jf(yo);function dc(e,n,s){return Object.freeze({instance:e,context:n,container:s})}function hc(e,n){return n==null?function(u,h){const g=se.useRef();return g.current||(g.current=e(u,h)),g}:function(u,h){const g=se.useRef();g.current||(g.current=e(u,h));const w=se.useRef(u),{instance:A}=g.current;return se.useEffect(function(){w.current!==u&&(n(A,u,w.current),w.current=u)},[A,u,h]),g}}function og(e,n){se.useEffect(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){var g;(g=n.layerContainer)==null||g.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function ag(e){return function(s){const u=cc(),h=e(uc(s,u),u);return tg(u.map,s.attribution),Zd(h.current,s.eventHandlers),og(h.current,u),h}}function bx(e,n){const s=se.useRef();se.useEffect(function(){if(n.pathOptions!==s.current){const h=n.pathOptions??{};e.instance.setStyle(h),s.current=h}},[e,n])}function Nx(e){return function(s){const u=cc(),h=e(uc(s,u),u);return Zd(h.current,s.eventHandlers),og(h.current,u),bx(h.current,s),h}}function Ix(e,n){const s=hc(e,n),u=ag(s);return sg(u)}function Tx(e,n){const s=hc(e),u=Sx(s,n);return Ex(u)}function Mx(e,n){const s=hc(e,n),u=Nx(s);return sg(u)}function kx(e,n){const s=hc(e,n),u=ag(s);return Ax(u)}function Ox(e,n,s){const{opacity:u,zIndex:h}=n;u!=null&&u!==s.opacity&&e.setOpacity(u),h!=null&&h!==s.zIndex&&e.setZIndex(h)}function Lx(){return cc().map}function Yu(){return Yu=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(e[u]=s[u])}return e},Yu.apply(this,arguments)}function Rx({bounds:e,boundsOptions:n,center:s,children:u,className:h,id:g,placeholder:w,style:A,whenReady:S,zoom:v,...k},O){const[H]=se.useState({className:h,id:g,style:A}),[V,J]=se.useState(null);se.useImperativeHandle(O,()=>(V==null?void 0:V.map)??null,[V]);const U=se.useCallback(P=>{if(P!==null&&V===null){const D=new yo.Map(P,k);s!=null&&v!=null?D.setView(s,v):e!=null&&D.fitBounds(e,n),S!=null&&D.whenReady(S),J(Cx(D))}},[]);se.useEffect(()=>()=>{V==null||V.map.remove()},[V]);const xe=V?wl.createElement(ig,{value:V},u):w??null;return wl.createElement("div",Yu({},H,{ref:U}),xe)}const Dx=se.forwardRef(Rx),Px=Ix(function({position:n,...s},u){const h=new yo.Marker(n,s);return dc(h,ng(u,{overlayContainer:h}))},function(n,s,u){s.position!==u.position&&n.setLatLng(s.position),s.icon!=null&&s.icon!==u.icon&&n.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==u.zIndexOffset&&n.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==u.opacity&&n.setOpacity(s.opacity),n.dragging!=null&&s.draggable!==u.draggable&&(s.draggable===!0?n.dragging.enable():n.dragging.disable())}),Bx=Mx(function({positions:n,...s},u){const h=new yo.Polyline(n,s);return dc(h,ng(u,{overlayContainer:h}))},function(n,s,u){s.positions!==u.positions&&n.setLatLngs(s.positions)}),jx=Tx(function(n,s){const u=new yo.Popup(n,s.overlayContainer);return dc(u,s)},function(n,s,{position:u},h){se.useEffect(function(){const{instance:w}=n;function A(v){v.popup===w&&(w.update(),h(!0))}function S(v){v.popup===w&&h(!1)}return s.map.on({popupopen:A,popupclose:S}),s.overlayContainer==null?(u!=null&&w.setLatLng(u),w.openOn(s.map)):s.overlayContainer.bindPopup(w),function(){var k;s.map.off({popupopen:A,popupclose:S}),(k=s.overlayContainer)==null||k.unbindPopup(),s.map.removeLayer(w)}},[n,s,h,u])}),Fx=kx(function({url:n,...s},u){const h=new yo.TileLayer(n,uc(s,u));return dc(h,u)},function(n,s,u){Ox(n,s,u);const{url:h}=s;h!=null&&h!==u.url&&n.setUrl(h)});delete oa.Icon.Default.prototype._getIconUrl;const zx=(e,n)=>{const s=e===0,u=e===n-1;if(s)return oa.divIcon({html:'<div class="flex items-center justify-center w-10 h-10 bg-gradient-to-br from-primary-600 to-primary-700 rounded-full shadow-lg border-4 border-white dark:border-gray-800 text-white font-black text-xs">START</div>',iconSize:[40,40],className:"custom-marker-start"});if(u)return oa.divIcon({html:'<div class="flex items-center justify-center w-10 h-10 bg-gradient-to-br from-accent-500 to-accent-600 rounded-full shadow-lg border-4 border-white dark:border-gray-800 text-white font-black text-xs">END</div>',iconSize:[40,40],className:"custom-marker-end"});const h=["bg-blue-500","bg-indigo-500","bg-purple-500","bg-pink-500","bg-rose-500"],g=h[e%h.length];return oa.divIcon({html:`<div class="flex items-center justify-center w-9 h-9 ${g} rounded-full shadow-lg border-3 border-white dark:border-gray-800 text-white font-bold text-xs">${e+1}</div>`,iconSize:[36,36],className:"custom-marker"})};function Ux({points:e}){const n=Lx();return se.useEffect(()=>{if(e&&e.length>0){const s=oa.latLngBounds(e.map(u=>[u.lat,u.lng]));n.fitBounds(s,{padding:[80,80]})}},[e,n]),null}function Hx({stops:e}){const[n,s]=se.useState(null),[u,h]=se.useState(!1);if(se.useEffect(()=>{const v=document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches;h(v);const k=window.matchMedia("(prefers-color-scheme: dark)"),O=H=>h(H.matches);return k.addEventListener("change",O),()=>k.removeEventListener("change",O)},[]),!e||e.length===0)return y.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-800",children:[y.jsx(eg,{className:"w-12 h-12 text-gray-400 mb-3"}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Sem pontos no mapa"})]});const g=e.map(v=>[v.lat,v.lng]),w=[e[0].lat,e[0].lng],A=u?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",S=u?"#8B5CF6":"#7C3AED";return y.jsxs("div",{className:"h-full w-full relative z-0",children:[y.jsxs(Dx,{center:w,zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,className:"map-container",children:[y.jsx(Fx,{attribution:' <a href="https://carto.com/">CartoDB</a>',url:A,maxZoom:19}),y.jsx(Bx,{positions:g,pathOptions:{color:S,weight:3,opacity:.8,dashArray:"5, 5",lineCap:"round",lineJoin:"round"}}),e.map((v,k)=>y.jsx(Px,{position:[v.lat,v.lng],icon:zx(k,e.length),eventHandlers:{click:()=>s(k)},children:y.jsx(jx,{className:"custom-popup",children:y.jsxs("div",{className:"min-w-max p-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-gray-200",children:[y.jsx(so,{className:"w-4 h-4 text-primary-600"}),y.jsxs("strong",{className:"text-gray-900",children:["Parada ",v.id]})]}),y.jsx("p",{className:"text-sm text-gray-700 font-medium mb-1",children:v.address}),y.jsx("div",{className:"mt-3 pt-2 border-t border-gray-200",children:y.jsxs("span",{className:"inline-block bg-primary-100 text-primary-800 text-xs px-2.5 py-1 rounded-full font-semibold",children:[v.packages.length," pacote",v.packages.length!==1?"s":""]})})]})})},k)),y.jsx(Ux,{points:e})]}),n!==null&&y.jsx(Vx,{stop:e[n],index:n,total:e.length,onClose:()=>s(null)})]})}function Vx({stop:e,index:n,total:s,onClose:u}){const[h,g]=se.useState(!1);return y.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-40 animate-slide-up",onClick:w=>{w.target===w.currentTarget&&u()},children:[y.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-md",onClick:u}),y.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-t-3xl shadow-2xl transition-all duration-300 ${h?"h-2/3":"h-fit max-h-96"} border-t-2 border-primary-600`,children:[y.jsx("div",{className:"flex justify-center pt-4 pb-3 bg-gradient-to-b from-transparent to-gray-50 dark:to-gray-800/50",children:y.jsx("div",{className:"w-14 h-1.5 bg-gradient-to-r from-gray-300 via-gray-400 to-gray-300 dark:from-gray-600 dark:via-gray-500 dark:to-gray-600 rounded-full shadow-md"})}),y.jsx("div",{className:"px-5 pb-4 border-b border-gray-100 dark:border-gray-700",children:y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-600 to-primary-700 flex items-center justify-center text-white font-black text-lg shadow-lg shadow-primary-500/30",children:n+1}),y.jsxs("div",{children:[y.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-bold uppercase tracking-wide",children:["Parada ",n+1," de ",s]}),y.jsx("h3",{className:"font-black text-lg text-gray-900 dark:text-white",children:e.id})]})]}),y.jsx("button",{onClick:u,className:"w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center justify-center transition-all active:scale-90",children:y.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-300",children:""})})]})}),y.jsxs("div",{className:`overflow-y-auto px-5 py-4 ${h?"max-h-[calc(2/3vh-120px)]":"max-h-64"}`,children:[y.jsx("div",{className:"mb-5 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/10 rounded-2xl border border-blue-200 dark:border-blue-800/30",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(eg,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-bold uppercase tracking-wide mb-1",children:"Endereo"}),y.jsx("p",{className:"font-bold text-base text-gray-900 dark:text-white",children:e.address})]})]})}),y.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/10 rounded-2xl border border-green-200 dark:border-green-800/30",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(so,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),y.jsx("p",{className:"text-xs font-bold text-green-700 dark:text-green-400 uppercase tracking-wide",children:"Pacotes"})]}),y.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-green-600 text-white text-xs font-bold shadow-lg shadow-green-500/30",children:[y.jsx(so,{className:"w-3.5 h-3.5"}),e.packages.length]})]}),e.packages&&e.packages.length>0&&y.jsxs("div",{className:"space-y-2 text-sm",children:[e.packages.slice(0,4).map((w,A)=>y.jsxs("div",{className:"flex items-center gap-2 bg-white/50 dark:bg-gray-800/50 p-2 rounded-lg",children:[y.jsx("div",{className:"w-2 h-2 rounded-full bg-green-600"}),y.jsx("span",{className:"font-mono text-xs text-gray-700 dark:text-gray-300 truncate",children:w})]},A)),e.packages.length>4&&y.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 italic pl-2",children:["+",e.packages.length-4," mais pacotes"]})]})]}),y.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border border-yellow-200 dark:border-yellow-800/30 flex items-center gap-2",children:[y.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),y.jsx("p",{className:"text-xs font-semibold text-yellow-700 dark:text-yellow-400",children:"Aguardando confirmao"})]}),y.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 space-y-3",children:[y.jsxs("button",{className:"btn-primary w-full flex items-center justify-center gap-2 active:scale-95",children:[y.jsx(Wu,{className:"w-5 h-5"}),y.jsx("span",{children:"Navegar At Aqui"})]}),y.jsxs("button",{className:"w-full px-4 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold hover:shadow-lg hover:shadow-green-500/30 transition-all active:scale-95 shadow-lg shadow-green-500/20 flex items-center justify-center gap-2",children:[y.jsx($1,{className:"w-5 h-5"}),y.jsx("span",{children:"Confirmar Entrega"})]})]})]})]})]})}function Zx({data:e,adminStats:n}){return e?e.view==="personal"?y.jsx(Wx,{data:e}):e.view==="company"?y.jsx(Gx,{data:e,adminStats:n}):y.jsx("div",{children:"Tipo de visualizao desconhecido."}):y.jsxs("div",{className:"space-y-4 animate-fade-in",children:[y.jsx("div",{className:"skeleton h-48 rounded-3xl"}),y.jsx("div",{className:"skeleton h-32 rounded-2xl"}),y.jsx("div",{className:"skeleton h-40 rounded-2xl"})]})}function Wx({data:e}){const n=e.balance.toFixed(2).replace(".",","),s=n.split(",")[0],u=n.split(",")[1];return y.jsxs("div",{className:"space-y-5 animate-fade-in",children:[y.jsxs("div",{className:"relative overflow-hidden gradient-success rounded-3xl p-6 text-white shadow-glass",children:[y.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -mr-20 -mt-20"}),y.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -ml-16 -mb-16"}),y.jsxs("div",{className:"relative z-10",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:y.jsx(yx,{className:"w-5 h-5"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs font-medium text-white/70",children:"Seus Ganhos"}),y.jsx("p",{className:"text-xs font-bold text-white/90",children:e.period})]})]}),y.jsx("div",{className:"mb-6",children:y.jsxs("div",{className:"flex items-baseline gap-1",children:[y.jsx("span",{className:"text-xl font-bold opacity-80",children:"R$"}),y.jsx("span",{className:"text-5xl font-black tracking-tight",children:s}),y.jsxs("span",{className:"text-2xl font-bold opacity-80",children:[",",u]})]})}),y.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/20",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(ix,{className:"w-4 h-4 text-white/70"}),y.jsx("span",{className:"text-xs font-medium text-white/90",children:"Prximo pagamento: Sexta"})]}),y.jsx("span",{className:"badge bg-yellow-400/30 text-yellow-100 border-yellow-400/50 text-[10px]",children:"A RECEBER"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsx(_f,{label:"Entregas",value:"--",icon:y.jsx(lc,{className:"w-4 h-4"}),trend:"positive"}),y.jsx(_f,{label:"Mdia/Dia",value:`R$ ${(e.balance/5).toFixed(0)}`,icon:y.jsx(io,{className:"w-4 h-4"}),trend:"neutral"})]}),y.jsxs("div",{className:"card-premium overflow-hidden",children:[y.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-800/50 px-5 py-3 border-b border-gray-100 dark:border-gray-700/50",children:y.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-2",children:[y.jsx(lx,{className:"w-4 h-4"}),"Extrato Recente"]})}),y.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[y.jsx(Kc,{title:"Rota de Hoje",subtitle:"Processando...",value:"--",status:"pending"}),y.jsx(Kc,{title:"Rota Ontem",subtitle:"Concluda",value:`+ R$ ${((e.balance>0?e.balance:50)*.4).toFixed(2).replace(".",",")}`,status:"completed"}),y.jsx(Kc,{title:"Bnus Meta Semanal",subtitle:"Extra conquistado",value:`+ R$ ${((e.balance>0?e.balance:50)*.1).toFixed(2).replace(".",",")}`,status:"bonus"})]})]})]})}function Gx({data:e,adminStats:n}){const{revenue:s,costs:u,profit:h}=e.company_stats,[g,w]=se.useState(""),[A,S]=se.useState(""),[v,k]=se.useState(!1),[O,H]=se.useState(null),V=h.toFixed(2).replace(".",","),J=h>=0,U=(n==null?void 0:n.active_session)&&(n==null?void 0:n.pending)===0,xe=async()=>{k(!0),H(null);try{const P=await fetch("/api/session/finalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({extra_revenue:g?parseFloat(g):0,other_costs:A?parseFloat(A):0})}),D=await P.json();if(!P.ok)throw new Error(D.detail||"Falha ao fechar dia");H(" Dia fechado com sucesso.")}catch(P){H(P.message)}finally{k(!1)}};return y.jsxs("div",{className:"space-y-5 animate-fade-in",children:[y.jsxs("div",{className:"relative overflow-hidden gradient-dark rounded-3xl p-6 text-white shadow-glass",children:[y.jsx("div",{className:"absolute top-0 right-0 opacity-10",children:y.jsx(io,{size:120,strokeWidth:1})}),y.jsxs("div",{className:"relative z-10",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("div",{className:"w-10 h-10 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:y.jsx(lc,{className:"w-5 h-5"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs text-gray-400",children:"Lucro Lquido"}),y.jsx("p",{className:"text-xs font-bold text-gray-300",children:e.period})]})]}),y.jsx("div",{className:"mb-6",children:y.jsxs("div",{className:`text-5xl font-black ${J?"text-green-400":"text-red-400"}`,children:["R$ ",V]})}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{className:"bg-white/5 backdrop-blur-sm p-4 rounded-xl border border-white/10",children:[y.jsxs("div",{className:"flex items-center gap-1.5 text-green-300 text-xs mb-2 font-medium",children:[y.jsx(nx,{className:"w-3.5 h-3.5"})," Receita"]}),y.jsxs("div",{className:"text-2xl font-black text-white",children:["R$ ",s.toFixed(0)]})]}),y.jsxs("div",{className:"bg-white/5 backdrop-blur-sm p-4 rounded-xl border border-white/10",children:[y.jsxs("div",{className:"flex items-center gap-1.5 text-red-300 text-xs mb-2 font-medium",children:[y.jsx(tx,{className:"w-3.5 h-3.5"})," Custos"]}),y.jsxs("div",{className:"text-2xl font-black text-white",children:["R$ ",u.toFixed(0)]})]})]})]})]}),y.jsxs("div",{className:"card-premium overflow-hidden",children:[y.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 px-5 py-3 border-b border-gray-100 dark:border-gray-700/50",children:y.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-2",children:[y.jsx(oo,{className:"w-4 h-4"}),"Repasse aos Entregadores"]})}),y.jsx("div",{className:"p-5 space-y-4",children:Object.entries(e.deliverers_stats).length>0?Object.entries(e.deliverers_stats).map(([P,D],B)=>y.jsxs("div",{className:"flex items-center justify-between group hover:bg-gray-50 dark:hover:bg-gray-800/50 p-3 rounded-xl transition-all",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-black text-xs shadow-lg shadow-blue-500/30",children:P.substring(0,2).toUpperCase()}),y.jsxs("div",{children:[y.jsx("p",{className:"font-bold text-sm text-gray-900 dark:text-white",children:P}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Colaborador"})]})]}),y.jsx("div",{className:"text-right",children:y.jsxs("p",{className:"font-black text-lg text-gray-900 dark:text-white",children:["R$ ",D.toFixed(2).replace(".",",")]})})]},B)):y.jsxs("div",{className:"text-center py-8",children:[y.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:y.jsx(oo,{className:"w-8 h-8 text-gray-400"})}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Nenhum repasse registrado"}),y.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Os valores aparecero aqui"})]})})]}),U&&y.jsxs("div",{className:"card-premium p-5 space-y-3",children:[y.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:" Fechar Dia"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Todos os pacotes foram finalizados. Informe custos e lucros extras para fechar a sesso."}),y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y.jsx("input",{type:"number",placeholder:"Lucro extra",value:g,onChange:P=>w(P.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"}),y.jsx("input",{type:"number",placeholder:"Custos extras",value:A,onChange:P=>S(P.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),y.jsx("button",{onClick:xe,disabled:v,className:`w-full py-3 rounded-lg text-sm font-semibold ${v?"bg-gray-400 text-white":"bg-emerald-600 text-white"}`,children:v?"Fechando...":"Fechar Dia"}),O&&y.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:O})]})]})}function _f({label:e,value:n,icon:s,trend:u}){const h={positive:"text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30",negative:"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30",neutral:"text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30"};return y.jsxs("div",{className:"card-premium p-4",children:[y.jsx("div",{className:`w-8 h-8 rounded-xl flex items-center justify-center mb-3 ${h[u]}`,children:s}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium mb-1",children:e}),y.jsx("p",{className:"text-lg font-black text-gray-900 dark:text-white",children:n})]})}function Kc({title:e,subtitle:n,value:s,status:u}){const h={pending:{color:"text-gray-400",bg:"bg-gray-100 dark:bg-gray-800"},completed:{color:"text-green-600 dark:text-green-400",bg:"bg-green-50 dark:bg-green-900/20"},bonus:{color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"}};return y.jsxs("div",{className:"flex justify-between items-center p-4 hover:bg-gray-50 dark:hover:bg-gray-800/30 transition-all",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"font-bold text-sm text-gray-900 dark:text-white mb-0.5",children:e}),y.jsx("p",{className:`text-xs font-semibold ${h[u].color}`,children:n})]}),y.jsx("div",{className:`text-sm font-black font-mono ${h[u].color}`,children:s})]})}function Yx(){const[e,n]=se.useState([]),[s,u]=se.useState(!0),[h,g]=se.useState(!1),[w,A]=se.useState({name:"",telegram_id:"",is_partner:!1}),[S,v]=se.useState([]),k=()=>{u(!0),fetch("/api/admin/team").then(U=>U.json()).then(U=>{n(U),u(!1)}).catch(U=>{console.error(U),u(!1)})};se.useEffect(()=>{k(),V()},[]);const O=async U=>{if(U.preventDefault(),!w.name||!w.telegram_id)return;(await fetch("/api/admin/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...w,telegram_id:parseInt(w.telegram_id)})})).ok?(g(!1),A({name:"",telegram_id:"",is_partner:!1}),k()):alert("Erro ao adicionar member")},H=async U=>{confirm("Tem certeza que deseja remover este entregador?")&&(await fetch(`/api/admin/team/${U}`,{method:"DELETE"}),k())},V=async()=>{try{const xe=await(await fetch("/api/delivery/pending-transfers")).json();v(xe.transfers||[])}catch(U){console.error("Erro ao buscar transferncias:",U)}},J=async(U,xe,P="")=>{try{(await fetch("/api/delivery/transfer-approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transfer_id:U,approved:xe,admin_id:123456,admin_name:"Admin",rejection_reason:P})})).ok&&(alert(xe?"Transferncia aprovada!":"Transferncia rejeitada!"),V())}catch{alert("Erro ao processar transferncia")}};return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[y.jsx(oo,{className:"text-blue-500"})," Gesto de Equipe"]}),y.jsx("p",{className:"text-sm text-gray-500",children:"Gerencie seus entregadores e parceiros"})]}),y.jsx("button",{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg shadow-lg shadow-blue-500/30 transition-all active:scale-95",children:y.jsx(xx,{size:20})})]}),y.jsx("div",{className:"space-y-3",children:s?y.jsx("div",{className:"text-center text-gray-500 py-10",children:"Carregando equipe..."}):e.length===0?y.jsx("div",{className:"text-center text-gray-400 py-10 bg-gray-50 dark:bg-gray-800 rounded-xl border border-dashed border-gray-300",children:"Nenhum membro na equipe ainda."}):e.map(U=>y.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex justify-between items-center group",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg ${U.is_partner?"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-300":"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-300"}`,children:U.name.substring(0,1).toUpperCase()}),y.jsxs("div",{children:[y.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[U.name,U.is_partner&&y.jsx(hx,{size:14,className:"text-purple-500",title:"Scio"})]}),y.jsxs("div",{className:"flex gap-3 text-xs text-gray-500 mt-1",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(px,{size:10})," ",U.deliveries," entregas"]}),y.jsxs("span",{className:"font-mono",children:["ID: ",U.id]})]})]})]}),y.jsx("button",{onClick:()=>H(U.id),className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:y.jsx(gx,{size:18})})]},U.id))}),S.length>0&&y.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-6 border border-yellow-200 dark:border-yellow-800",children:[y.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2 mb-4 text-yellow-800 dark:text-yellow-200",children:[y.jsx(J1,{size:20})," Solicitaes de Transferncia Pendentes (",S.length,")"]}),y.jsx("div",{className:"space-y-3",children:S.map(U=>y.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[y.jsxs("div",{className:"flex justify-between items-start mb-3",children:[y.jsxs("div",{children:[y.jsxs("p",{className:"font-semibold text-sm",children:[U.from_deliverer.name,"  ",U.to_deliverer.name]}),y.jsxs("p",{className:"text-xs text-gray-500",children:[U.package_count," pacote(s)"]})]}),y.jsx("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300 px-2 py-1 rounded",children:"Pendente"})]}),y.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:[y.jsx("strong",{children:"Motivo:"})," ",U.reason]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsxs("button",{onClick:()=>J(U.id,!0),className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg text-sm font-semibold transition",children:[y.jsx(ox,{size:16})," Aprovar"]}),y.jsxs("button",{onClick:()=>{const xe=prompt("Motivo da rejeio (opcional):");J(U.id,!1,xe||"")},className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2 rounded-lg text-sm font-semibold transition",children:[y.jsx(wx,{size:16})," Rejeitar"]})]})]},U.id))})]}),h&&y.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:y.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-fade-in",children:[y.jsx("h3",{className:"text-lg font-bold mb-4",children:"Novo Entregador"}),y.jsxs("form",{onSubmit:O,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Nome"}),y.jsx("input",{type:"text",required:!0,className:"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-lg p-3 outline-none focus:ring-2 ring-blue-500",placeholder:"Ex: Joo Silva",value:w.name,onChange:U=>A({...w,name:U.target.value})})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Telegram ID"}),y.jsx("input",{type:"number",required:!0,className:"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-lg p-3 outline-none focus:ring-2 ring-blue-500 font-mono",placeholder:"Ex: 123456789",value:w.telegram_id,onChange:U=>A({...w,telegram_id:U.target.value})}),y.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Pea pro entregador enviar /id para o bot."})]}),y.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[y.jsx("input",{type:"checkbox",id:"is_partner",className:"w-5 h-5 rounded text-blue-600 focus:ring-blue-500 border-gray-300",checked:w.is_partner,onChange:U=>A({...w,is_partner:U.target.checked})}),y.jsx("label",{htmlFor:"is_partner",className:"text-sm font-medium",children:"Scio (No recebe por pacote)"})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 py-3 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl text-sm font-medium",children:"Cancelar"}),y.jsx("button",{type:"submit",className:"flex-1 py-3 bg-blue-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-blue-500/30",children:"Salvar"})]})]})]})})]})}const Xx=({onScan:e,onClose:n})=>{const[s,u]=se.useState([]),[h,g]=se.useState("camera"),w=se.useRef(null),A=se.useRef(null),S=se.useRef(null),v=se.useRef(null);se.useEffect(()=>(h==="camera"&&k(),()=>O()),[h]);const k=async()=>{try{const P=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});v.current=P,w.current&&(w.current.srcObject=P,w.current.play().catch(D=>console.error("Play error:",D))),H()}catch(P){console.error("Cmera bloqueada:",P),g("upload")}},O=()=>{v.current&&v.current.getTracks().forEach(P=>P.stop())},H=()=>{if(!w.current||!A.current)return;const P=A.current,D=P.getContext("2d"),B=w.current,X=()=>{B.readyState===B.HAVE_ENOUGH_DATA&&(P.width=B.videoWidth,P.height=B.videoHeight,D.drawImage(B,0,0),D.getImageData(0,0,P.width,P.height)),requestAnimationFrame(X)};X()},V=async P=>{const D=new FileReader;D.onload=async B=>{const X=new Image;X.onload=()=>{if(A.current){const ge=A.current;ge.width=X.width,ge.height=X.height,ge.getContext("2d").drawImage(X,0,0),J(P.name.replace(/\D/g,"")||"manual-"+Date.now())}},X.src=B.target.result},D.readAsDataURL(P)},J=P=>{if(!P||s.includes(P))return;const D={id:P,timestamp:new Date().toLocaleTimeString("pt-BR"),confirmed:!1};u([...s,D]),e==null||e(P)},U=P=>{P.key==="Enter"&&(J(P.target.value),P.target.value="")},xe=()=>{n==null||n(s.map(P=>P.id))};return y.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-2xl w-full mx-4 space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h2",{className:"text-2xl font-bold",children:" Scanner de Cdigos"}),y.jsx("button",{onClick:()=>n==null?void 0:n([]),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:y.jsx(_x,{className:"w-6 h-6"})})]}),y.jsx("div",{className:"flex gap-2 border-b dark:border-gray-700",children:["camera","upload","manual"].map(P=>y.jsxs("button",{onClick:()=>g(P),className:`px-4 py-2 capitalize font-medium transition ${h===P?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[P==="camera"&&""," ",P==="upload"&&""," ",P==="manual"&&""," ",P]},P))}),h==="camera"&&y.jsxs("div",{className:"space-y-4",children:[y.jsx("video",{ref:w,className:"w-full h-64 bg-black rounded-lg object-cover",playsInline:!0}),y.jsx("canvas",{ref:A,style:{display:"none"}}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:" Posicione o cdigo de barras ou QR code em frente  cmera"})]}),h==="upload"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("button",{onClick:()=>{var P;return(P=S.current)==null?void 0:P.click()},className:"w-full border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[y.jsx(mx,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),y.jsx("p",{className:"text-sm font-medium",children:"Clique para selecionar imagem"})]}),y.jsx("input",{ref:S,type:"file",accept:"image/*",className:"hidden",onChange:P=>{var D;return((D=P.target.files)==null?void 0:D[0])&&V(P.target.files[0])}}),y.jsx("canvas",{ref:A,style:{display:"none"}})]}),h==="manual"&&y.jsxs("div",{className:"space-y-4",children:[y.jsx("input",{type:"text",placeholder:"Digite o cdigo e pressione ENTER...",onKeyPress:U,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),y.jsx("p",{className:"text-xs text-gray-500",children:"til para insero manual de CPF, CNPJ ou IDs"})]}),s.length>0&&y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[y.jsxs("h3",{className:"font-semibold mb-2",children:[" ",s.length," cdigo(s) escaneado(s)"]}),y.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:s.map((P,D)=>y.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-gray-700 p-2 rounded",children:[y.jsx("span",{className:"font-mono text-sm",children:P.id}),y.jsx("span",{className:"text-xs text-gray-500",children:P.timestamp}),y.jsx("button",{onClick:()=>u(s.filter((B,X)=>X!==D)),className:"text-red-500 hover:text-red-700",children:""})]},D))})]}),y.jsxs("div",{className:"flex gap-2 pt-4 border-t dark:border-gray-700",children:[y.jsx("button",{onClick:()=>n==null?void 0:n([]),className:"flex-1 px-4 py-2 bg-gray-300 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-400 dark:hover:bg-gray-600 font-medium",children:"Cancelar"}),y.jsxs("button",{onClick:xe,disabled:s.length===0,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[y.jsx($1,{className:"w-4 h-4"})," Confirmar (",s.length,")"]})]})]})})};function Qx(){var Cr,yn,Er,Ot,rt,Ke,Fr,Ee,zr,vi,Bn,Ci,rn,Ei,jn,Gt,Ai,Ur,Is,vt,pe,bt,ct;const[e,n]=se.useState("simple"),[s,u]=se.useState(""),[h,g]=se.useState(""),[w,A]=se.useState(null),[S,v]=se.useState(!1),[k,O]=se.useState(null),[H,V]=se.useState(!1),[J,U]=se.useState(null),[xe,P]=se.useState(""),[D,B]=se.useState(!1),[X,ge]=se.useState(null),[re,Z]=se.useState(null),[te,ee]=se.useState(2),[Se,Re]=se.useState([]),[me,Ve]=se.useState({}),[Le,$]=se.useState(!1),[We,_e]=se.useState(null),[ne,ke]=se.useState([]),ce=se.useRef(null),[Pe,De]=se.useState(!1);se.useEffect(()=>{fetch("/api/admin/team").then(le=>le.json()).then(ke).catch(()=>ke([]))},[]);const dt=async()=>{if(!s.trim()||!h){_e("Preencha os endereos e o valor total");return}v(!0),_e(null),A(null);const le=new FormData;le.append("addresses_text",s),le.append("route_value",parseFloat(h));try{const Te=await fetch("/api/routes/analyze-addresses",{method:"POST",body:le});if(!Te.ok){const gn=await Te.json();throw new Error(gn.detail||"Falha ao analisar")}const tt=await Te.json();A(tt)}catch(Te){_e(Te.message)}finally{v(!1)}},Fe=()=>{u(""),g(""),A(null),O(null),_e(null)},Xe=async()=>{if(!s.trim()){_e("Cole os endereos primeiro");return}V(!0),_e(null);const le=new FormData;le.append("addresses_text",s);try{const Te=await fetch("/api/routes/generate-map",{method:"POST",body:le});if(!Te.ok){const gn=await Te.json();throw new Error(gn.detail||"Falha ao gerar mapa")}const tt=await Te.json();O(tt.map_url)}catch(Te){_e(Te.message)}finally{V(!1)}},ue=le=>{le.target.files.length>0&&(U(le.target.files[0]),_e(null))},Zt=async()=>{if(!J||!xe){_e("Selecione arquivo e informe valor");return}$(!0),_e(null);const le=new FormData;le.append("file",J);try{const Te=await fetch("/api/romaneio/import",{method:"POST",body:le});if(!Te.ok){const gn=await Te.json();throw new Error(gn.detail||"Falha ao importar romaneio")}const tt=await Te.json();B(!0),tt.session_id&&ge(tt.session_id),U(null),ce.current&&(ce.current.value="")}catch(Te){_e(Te.message)}finally{$(!1)}},gt=async()=>{if(!J){_e("Selecione arquivo para importar");return}$(!0),_e(null);const le=new FormData;le.append("file",J);try{const Te=await fetch("/api/session/romaneio/import-additional",{method:"POST",body:le});if(!Te.ok){const gn=await Te.json();throw new Error(gn.detail||"Falha ao importar adicional")}const tt=await Te.json();tt.session_id&&ge(tt.session_id),U(null),ce.current&&(ce.current.value="")}catch(Te){_e(Te.message)}finally{$(!1)}},jr=async()=>{$(!0),_e(null);try{const le=await fetch("/api/session/report");if(!le.ok){const tt=await le.json();throw new Error(tt.detail||"Falha ao gerar relatrio")}const Te=await le.json();Z(Te)}catch(le){_e(le.message)}finally{$(!1)}},vr=async()=>{$(!0),_e(null),Re([]);try{const le=await fetch("/api/routes/optimize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({num_deliverers:Number(te)})});if(!le.ok){const tt=await le.json();throw new Error(tt.detail||"Falha ao otimizar rotas")}const Te=await le.json();Re(Te.routes||[])}catch(le){_e(le.message)}finally{$(!1)}},Wt=async(le,Te)=>{try{const tt=await fetch("/api/routes/assign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({route_id:le,deliverer_id:Number(Te)})});if(!tt.ok){const gn=await tt.json();throw new Error(gn.detail||"Falha ao atribuir")}Ve(gn=>({...gn,[le]:Te}))}catch(tt){_e(tt.message)}},sr=async()=>{if(!(Se.length>0&&Se.every(Te=>me[Te.route_id]))){_e("Selecione um entregador para cada rota antes de iniciar.");return}$(!0),_e(null);try{const Te=await fetch("/api/routes/send",{method:"POST"});if(!Te.ok){const tt=await Te.json();throw new Error(tt.detail||"Falha ao enviar rotas")}}catch(Te){_e(Te.message)}finally{$(!1)}},Qe=Se.length>0&&Se.every(le=>me[le.route_id]);return y.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[y.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl p-6 shadow-lg text-white",children:[y.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2 mb-2",children:[y.jsx(sa,{size:32})," Anlise de Rota com IA"]}),y.jsx("p",{className:"text-purple-100",children:"Cole endereos ou importe romaneio. A IA te diz se vale a pena."})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("button",{onClick:()=>n("simple"),className:`py-3 px-4 rounded-xl font-bold text-sm transition-all ${e==="simple"?"bg-purple-600 text-white shadow-lg scale-105":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700"}`,children:[y.jsx(sa,{size:18,className:"inline mr-2"}),"Colar Endereos"]}),y.jsxs("button",{onClick:()=>n("import"),className:`py-3 px-4 rounded-xl font-bold text-sm transition-all ${e==="import"?"bg-blue-600 text-white shadow-lg scale-105":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700"}`,children:[y.jsx(il,{size:18,className:"inline mr-2"}),"Importar Romaneio"]})]}),We&&y.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex gap-3",children:[y.jsx(J1,{className:"text-red-600 flex-shrink-0"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-bold text-red-800 dark:text-red-300",children:"Erro"}),y.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:We})]})]}),e==="simple"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[y.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:" Cola os Endereos (um por linha)"}),y.jsx("textarea",{value:s,onChange:le=>u(le.target.value),placeholder:`Rua Principado de Mnaco, 37, Apt 501
Rua Mena Barreto, 161, Loja BMRIO
Rua General Polidoro, 322, 301
...`,className:"w-full h-48 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm focus:ring-2 focus:ring-purple-500"}),y.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[s.trim().split(`
`).length," endereo(s) detectado(s)"]})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[y.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:" Valor Total da Rota"}),y.jsx("input",{type:"number",value:h,onChange:le=>g(le.target.value),placeholder:"Ex: 150.00",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("button",{onClick:()=>De(!0),className:"py-3 px-4 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg font-bold flex items-center justify-center gap-2 transition",children:[y.jsx(sx,{className:"w-4 h-4"})," Scanner"]}),y.jsxs("button",{onClick:dt,disabled:S||!s.trim()||!h,className:"py-3 px-4 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 text-white rounded-lg font-bold flex items-center justify-center gap-2 transition",children:[y.jsx(sa,{className:"w-4 h-4"}),S?"Analisando...":"Analisar"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("button",{onClick:dt,disabled:S||!s.trim()||!h,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:[y.jsx(yl,{size:20}),S?"Analisando...":"Analisar IA"]}),y.jsx("button",{onClick:Fe,className:"bg-gray-300 hover:bg-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-bold py-3 rounded-lg transition-colors",children:"Limpar"})]}),w&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:`bg-gradient-to-r rounded-xl p-6 text-white ${((Cr=w.header)==null?void 0:Cr[" SCORE"])>=7?"from-green-500 to-emerald-600":((yn=w.header)==null?void 0:yn[" SCORE"])>=5?"from-yellow-500 to-orange-600":"from-red-500 to-pink-600"}`,children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm opacity-80",children:"Valor"}),y.jsx("p",{className:"text-2xl font-bold",children:(Er=w.header)==null?void 0:Er[" VALOR"]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm opacity-80",children:"Tipo"}),y.jsx("p",{className:"text-2xl font-bold",children:(Ot=w.header)==null?void 0:Ot[" TIPO"]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm opacity-80",children:"Score"}),y.jsx("p",{className:"text-3xl font-bold",children:(rt=w.header)==null?void 0:rt[" SCORE"]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm opacity-80",children:"Ganho/hora"}),y.jsx("p",{className:"text-2xl font-bold",children:(Ke=w.financial)==null?void 0:Ke.hourly})]})]}),y.jsx("p",{className:"mt-4 text-sm font-semibold",children:(Fr=w.header)==null?void 0:Fr[" RECOMENDAO"]})]}),w.top_drops&&w.top_drops.length>0&&y.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-xl p-5 border-2 border-orange-200 dark:border-orange-700",children:[y.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2 text-lg",children:[y.jsx(lc,{size:22,className:"text-orange-600"})," Top Drops (Ruas com Maior Concentrao)"]}),y.jsx("div",{className:"space-y-3",children:w.top_drops.map((le,Te)=>y.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all transform hover:scale-102 ${Te===0?"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 border-yellow-300 dark:border-yellow-600 shadow-md":Te===1?"bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30 border-blue-300 dark:border-blue-600":"bg-gradient-to-r from-gray-100 to-slate-100 dark:from-gray-700 dark:to-slate-700 border-gray-300 dark:border-gray-600"}`,children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("span",{className:"text-4xl",children:le.emoji}),y.jsxs("div",{children:[y.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg",children:le.street}),y.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-semibold",children:[le.count," endereos"]})]})]}),y.jsxs("div",{className:"text-right",children:[y.jsx("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:le.percentage}),y.jsx("p",{className:"text-xs text-gray-500",children:"concentrao"})]})]},Te))})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[y.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:" Perfil da Rota"}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[y.jsx("p",{className:"text-xs text-gray-500",children:"Tipo"}),y.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(Ee=w.profile)==null?void 0:Ee.type})]}),y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[y.jsx("p",{className:"text-xs text-gray-500",children:"Comercial"}),y.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(zr=w.profile)==null?void 0:zr.commercial_pct})]}),y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[y.jsx("p",{className:"text-xs text-gray-500",children:"Pacotes"}),y.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(vi=w.profile)==null?void 0:vi.total_packages})]}),y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[y.jsx("p",{className:"text-xs text-gray-500",children:"Paradas"}),y.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(Bn=w.profile)==null?void 0:Bn.unique_stops})]})]})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[y.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:" Prs"}),y.jsx("ul",{className:"space-y-2",children:(rn=(Ci=w.analysis)==null?void 0:Ci.pros)==null?void 0:rn.map((le,Te)=>y.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300",children:[y.jsx("span",{className:"text-green-500 font-bold mt-0.5",children:""}),le]},Te))})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[y.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:" Contras"}),y.jsx("ul",{className:"space-y-2",children:(jn=(Ei=w.analysis)==null?void 0:Ei.cons)==null?void 0:jn.map((le,Te)=>y.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300",children:[y.jsx("span",{className:"text-red-500 font-bold mt-0.5",children:""}),le]},Te))})]}),y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:[y.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-2",children:" Comentrio da IA"}),y.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-400 whitespace-pre-wrap leading-relaxed",children:w.ai_comment})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[y.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 text-white font-bold flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Qo,{size:20})," Minimapa da Rota"]}),H&&y.jsx("span",{className:"text-sm",children:" Gerando..."})]}),k?y.jsx("iframe",{src:k,className:"w-full h-96 border-0",title:"Mapa da Rota",allowFullScreen:""}):y.jsxs("div",{className:"p-6 text-center",children:[y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:" Geocodificao lenta (3-5 seg por endereo)"}),y.jsx("button",{onClick:Xe,disabled:H,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:H?" Gerando Mapa...":" Gerar Mapa"})]})]})]})]}),e==="import"&&y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:y.jsxs("div",{onClick:()=>{var le;return(le=ce.current)==null?void 0:le.click()},className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-8 text-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[y.jsx("input",{type:"file",ref:ce,onChange:ue,accept:".xlsx,.xls",className:"hidden"}),y.jsx(il,{size:48,className:"mx-auto text-gray-400 mb-4"}),J?y.jsxs("div",{children:[y.jsx("p",{className:"font-bold text-green-600",children:J.name}),y.jsxs("p",{className:"text-sm text-gray-500",children:[(J.size/1024).toFixed(1)," KB"]})]}):y.jsxs("div",{children:[y.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300",children:"Clique ou arraste arquivo Excel"}),y.jsx("p",{className:"text-sm text-gray-500",children:"Suporta .xlsx ou .xls (Shopee)"})]})]})}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[y.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:" Valor Inicial da Sesso"}),y.jsx("input",{type:"number",value:xe,onChange:le=>P(le.target.value),placeholder:"Ex: 500.00",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),D?y.jsxs("div",{className:"space-y-3",children:[y.jsxs("button",{onClick:gt,disabled:Le||!J,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:[y.jsx(il,{size:20}),Le?"Importando...":"Importar Mais um Romaneio"]}),y.jsx("button",{onClick:jr,disabled:Le,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white font-bold py-3 rounded-lg transition-colors",children:Le?"Gerando...":" Gerar Relatrio Completo"})]}):y.jsxs("button",{onClick:Zt,disabled:Le||!J||!xe,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:[y.jsx(il,{size:20}),Le?"Importando...":"Importar Romaneio"]}),re&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4",children:[y.jsx("p",{className:"font-bold text-green-900 dark:text-green-300",children:" Sesso Anlise Gerada!"}),y.jsx("p",{className:"text-sm text-green-800 dark:text-green-400",children:"Prximo: Otimizar e distribuir entregadores"})]}),re.formatted&&y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 space-y-4",children:[y.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:" Anlise da Sesso"}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[y.jsx("p",{className:"text-xs text-gray-500",children:"Valor"}),y.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(Gt=re.formatted.header)==null?void 0:Gt.value})]}),y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[y.jsx("p",{className:"text-xs text-gray-500",children:"Tipo"}),y.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(Ai=re.formatted.header)==null?void 0:Ai.type})]}),y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[y.jsx("p",{className:"text-xs text-gray-500",children:"Score"}),y.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(Ur=re.formatted.header)==null?void 0:Ur.score})]}),y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[y.jsx("p",{className:"text-xs text-gray-500",children:"Recomendao"}),y.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(Is=re.formatted.header)==null?void 0:Is.recommendation})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[y.jsx("p",{className:"text-xs text-blue-600",children:"Ganho/Hora"}),y.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(vt=re.formatted.earnings)==null?void 0:vt.hourly})]}),y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[y.jsx("p",{className:"text-xs text-blue-600",children:"Ganho/Pacote"}),y.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(pe=re.formatted.earnings)==null?void 0:pe.package})]}),y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg col-span-2",children:[y.jsx("p",{className:"text-xs text-blue-600",children:"Tempo Estimado"}),y.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(bt=re.formatted.earnings)==null?void 0:bt.time_estimate})]})]}),((ct=re.formatted.top_drops)==null?void 0:ct.length)>0&&y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white mb-2",children:" Top Drops"}),y.jsx("div",{className:"space-y-2",children:re.formatted.top_drops.map((le,Te)=>y.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-lg",children:le.emoji}),y.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:le.street})]}),y.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[le.count," endereos"]})]},Te))})]})]}),re.minimap_url&&y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[y.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 text-white font-bold",children:" Minimapa da Sesso"}),y.jsx("iframe",{src:re.minimap_url,className:"w-full h-96 border-0",title:"Minimapa da Sesso",allowFullScreen:""})]})]}),D&&y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[y.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:" Quantos Entregadores?"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"number",min:"1",max:"10",value:te,onChange:le=>ee(le.target.value),className:"flex-1 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),y.jsx("button",{onClick:vr,disabled:Le||!D,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-bold px-6 py-3 rounded-lg transition-colors",children:Le?"...":" Otimizar"})]})]}),Se.length>0&&y.jsxs("div",{className:"space-y-3",children:[y.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Atribua Entregadores"}),Se.map((le,Te)=>y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[y.jsxs("p",{className:"font-bold text-gray-900 dark:text-white mb-3",children:["Rota ",Te+1,": ",le.total_stops??"-"," paradas, ",le.total_packages??"-"," pacotes"]}),le.map_url&&y.jsx("div",{className:"mb-3",children:y.jsx("a",{href:le.map_url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-sm font-semibold text-purple-700 dark:text-purple-300 hover:underline",children:" Ver mapa desta rota"})}),y.jsxs("select",{value:me[le.route_id]||"",onChange:tt=>Wt(le.route_id,tt.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[y.jsx("option",{value:"",children:"-- Selecione Entregador --"}),ne.map(tt=>y.jsx("option",{value:tt.id,children:tt.name},tt.id))]})]},le.route_id)),y.jsx("button",{onClick:sr,disabled:!Qe||Le,className:`w-full ${Qe?"bg-green-600 hover:bg-green-700":"bg-gray-400"} text-white font-bold py-3 rounded-lg transition-colors`,children:Le?"Enviando...":" Iniciar Rotas"}),y.jsx("button",{onClick:()=>window.location.href="/?tab=separation",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition-colors",children:" Abrir Modo Separao"})]})]}),Pe&&y.jsx(Xx,{onScan:le=>{if(le&&le.length>0){const Te=le.join(`
`);u(tt=>tt?tt+`
`+Te:Te)}},onClose:()=>De(!1)})]})}var Ae;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ae||(Ae={}));var vf=new Map([[Ae.QR_CODE,"QR_CODE"],[Ae.AZTEC,"AZTEC"],[Ae.CODABAR,"CODABAR"],[Ae.CODE_39,"CODE_39"],[Ae.CODE_93,"CODE_93"],[Ae.CODE_128,"CODE_128"],[Ae.DATA_MATRIX,"DATA_MATRIX"],[Ae.MAXICODE,"MAXICODE"],[Ae.ITF,"ITF"],[Ae.EAN_13,"EAN_13"],[Ae.EAN_8,"EAN_8"],[Ae.PDF_417,"PDF_417"],[Ae.RSS_14,"RSS_14"],[Ae.RSS_EXPANDED,"RSS_EXPANDED"],[Ae.UPC_A,"UPC_A"],[Ae.UPC_E,"UPC_E"],[Ae.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Cf;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Cf||(Cf={}));function Kx(e){return Object.values(Ae).includes(e)}var es;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(es||(es={}));var Lr=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[es.SCAN_TYPE_CAMERA,es.SCAN_TYPE_FILE],e}(),lg=function(){function e(n,s){this.format=n,this.formatName=s}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!vf.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,vf.get(n))},e}(),Ef=function(){function e(){}return e.createFromText=function(n){var s={text:n};return{decodedText:n,result:s}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}(),Xu;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Xu||(Xu={}));var cg=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:Xu.UNKWOWN_ERROR}},e}(),ug=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,s){(this.verbose||s===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function qr(e){return typeof e>"u"||e===null}function qx(e,n,s){return e>s?s:e<n?n:e}var qs=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),mt=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(n){return"Last Match: ".concat(n)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Af=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),dg=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,s){if(typeof n!="object"){var u=typeof n;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(u,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(h),w=Object.keys(n),A=0,S=w;A<S.length;A++){var v=S[A];if(g.has(v))return s.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},e}(),Qu={exports:{}};(function(e,n){(function(s,u){u(n)})(js,function(s){function u(b){return b==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,t){b.__proto__=t}||function(b,t){for(var r in t)t.hasOwnProperty(r)&&(b[r]=t[r])};function g(b,t){h(b,t);function r(){this.constructor=b}b.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function w(b,t){var r=Object.setPrototypeOf;r?r(b,t):b.__proto__=t}function A(b,t){t===void 0&&(t=b.constructor);var r=Error.captureStackTrace;r&&r(b,t)}var S=function(b){g(t,b);function t(r){var o=this.constructor,a=b.call(this,r)||this;return Object.defineProperty(a,"name",{value:o.name,enumerable:!1}),w(a,o.prototype),A(a),a}return t}(Error);class v extends S{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}v.kind="Exception";class k extends v{}k.kind="ArgumentException";class O extends v{}O.kind="IllegalArgumentException";class H{constructor(t){if(this.binarizer=t,t===null)throw new O("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,o,a){const l=this.binarizer.getLuminanceSource().crop(t,r,o,a);return new H(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new H(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new H(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class V extends v{static getChecksumInstance(){return new V}}V.kind="ChecksumException";class J{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class U{static arraycopy(t,r,o,a,l){for(;l--;)o[a++]=t[r++]}static currentTimeMillis(){return Date.now()}}class xe extends v{}xe.kind="IndexOutOfBoundsException";class P extends xe{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}P.kind="ArrayIndexOutOfBoundsException";class D{static fill(t,r){for(let o=0,a=t.length;o<a;o++)t[o]=r}static fillWithin(t,r,o,a){D.rangeCheck(t.length,r,o);for(let l=r;l<o;l++)t[l]=a}static rangeCheck(t,r,o){if(r>o)throw new O("fromIndex("+r+") > toIndex("+o+")");if(r<0)throw new P(r);if(o>t)throw new P(o)}static asList(...t){return t}static create(t,r,o){return Array.from({length:t}).map(l=>Array.from({length:r}).fill(o))}static createInt32Array(t,r,o){return Array.from({length:t}).map(l=>Int32Array.from({length:r}).fill(o))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let o=0,a=t.length;o<a;o++)if(t[o]!==r[o])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const o of t)r=31*r+o;return r}static fillUint8Array(t,r){for(let o=0;o!==t.length;o++)t[o]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const o=new Uint8Array(r);return o.set(t),o}return t.slice(0,r)}static copyOfRange(t,r,o){const a=o-r,l=new Int32Array(a);return U.arraycopy(t,r,l,0,a),l}static binarySearch(t,r,o){o===void 0&&(o=D.numberComparator);let a=0,l=t.length-1;for(;a<=l;){const d=l+a>>1,f=o(r,t[d]);if(f>0)a=d+1;else if(f<0)l=d-1;else return d}return-a-1}static numberComparator(t,r){return t-r}}class B{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let o=31;return r=t<<16,r!==0&&(o-=16,t=r),r=t<<8,r!==0&&(o-=8,t=r),r=t<<4,r!==0&&(o-=4,t=r),r=t<<2,r!==0&&(o-=2,t=r),o-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class X{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=X.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=X.makeArray(t);U.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const o=this.bits;let a=Math.floor(t/32),l=o[a];l&=~((1<<(t&31))-1);const d=o.length;for(;l===0;){if(++a===d)return r;l=o[a]}const f=a*32+B.numberOfTrailingZeros(l);return f>r?r:f}getNextUnset(t){const r=this.size;if(t>=r)return r;const o=this.bits;let a=Math.floor(t/32),l=~o[a];l&=~((1<<(t&31))-1);const d=o.length;for(;l===0;){if(++a===d)return r;l=~o[a]}const f=a*32+B.numberOfTrailingZeros(l);return f>r?r:f}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new O;if(r===t)return;r--;const o=Math.floor(t/32),a=Math.floor(r/32),l=this.bits;for(let d=o;d<=a;d++){const f=d>o?0:t&31,x=(2<<(d<a?31:r&31))-(1<<f);l[d]|=x}}clear(){const t=this.bits.length,r=this.bits;for(let o=0;o<t;o++)r[o]=0}isRange(t,r,o){if(r<t||t<0||r>this.size)throw new O;if(r===t)return!0;r--;const a=Math.floor(t/32),l=Math.floor(r/32),d=this.bits;for(let f=a;f<=l;f++){const m=f>a?0:t&31,C=(2<<(f<l?31:r&31))-(1<<m)&4294967295;if((d[f]&C)!==(o?C:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let o=r;o>0;o--)this.appendBit((t>>o-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let o=0;o<r;o++)this.appendBit(t.get(o))}xor(t){if(this.size!==t.size)throw new O("Sizes don't match");const r=this.bits;for(let o=0,a=r.length;o<a;o++)r[o]^=t.bits[o]}toBytes(t,r,o,a){for(let l=0;l<a;l++){let d=0;for(let f=0;f<8;f++)this.get(t)&&(d|=1<<7-f),t++;r[o+l]=d}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),o=r+1,a=this.bits;for(let l=0;l<o;l++){let d=a[l];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,t[r-l]=d}if(this.size!==o*32){const l=o*32-this.size;let d=t[0]>>>l;for(let f=1;f<o;f++){const m=t[f];d|=m<<32-l,t[f-1]=d,d=m>>>l}t[o-1]=d}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof X))return!1;const r=t;return this.size===r.size&&D.equals(this.bits,r.bits)}hashCode(){return 31*this.size+D.hashCode(this.bits)}toString(){let t="";for(let r=0,o=this.size;r<o;r++)r&7||(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new X(this.size,this.bits.slice())}}var ge;(function(b){b[b.OTHER=0]="OTHER",b[b.PURE_BARCODE=1]="PURE_BARCODE",b[b.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",b[b.TRY_HARDER=3]="TRY_HARDER",b[b.CHARACTER_SET=4]="CHARACTER_SET",b[b.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",b[b.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",b[b.ASSUME_GS1=7]="ASSUME_GS1",b[b.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",b[b.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",b[b.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ge||(ge={}));var re=ge;class Z extends v{static getFormatInstance(){return new Z}}Z.kind="FormatException";var te;(function(b){b[b.Cp437=0]="Cp437",b[b.ISO8859_1=1]="ISO8859_1",b[b.ISO8859_2=2]="ISO8859_2",b[b.ISO8859_3=3]="ISO8859_3",b[b.ISO8859_4=4]="ISO8859_4",b[b.ISO8859_5=5]="ISO8859_5",b[b.ISO8859_6=6]="ISO8859_6",b[b.ISO8859_7=7]="ISO8859_7",b[b.ISO8859_8=8]="ISO8859_8",b[b.ISO8859_9=9]="ISO8859_9",b[b.ISO8859_10=10]="ISO8859_10",b[b.ISO8859_11=11]="ISO8859_11",b[b.ISO8859_13=12]="ISO8859_13",b[b.ISO8859_14=13]="ISO8859_14",b[b.ISO8859_15=14]="ISO8859_15",b[b.ISO8859_16=15]="ISO8859_16",b[b.SJIS=16]="SJIS",b[b.Cp1250=17]="Cp1250",b[b.Cp1251=18]="Cp1251",b[b.Cp1252=19]="Cp1252",b[b.Cp1256=20]="Cp1256",b[b.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",b[b.UTF8=22]="UTF8",b[b.ASCII=23]="ASCII",b[b.Big5=24]="Big5",b[b.GB18030=25]="GB18030",b[b.EUC_KR=26]="EUC_KR"})(te||(te={}));class ee{constructor(t,r,o,...a){this.valueIdentifier=t,this.name=o,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=a,ee.VALUE_IDENTIFIER_TO_ECI.set(t,this),ee.NAME_TO_ECI.set(o,this);const l=this.values;for(let d=0,f=l.length;d!==f;d++){const m=l[d];ee.VALUES_TO_ECI.set(m,this)}for(const d of a)ee.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new Z("incorect value");const r=ee.VALUES_TO_ECI.get(t);if(r===void 0)throw new Z("incorect value");return r}static getCharacterSetECIByName(t){const r=ee.NAME_TO_ECI.get(t);if(r===void 0)throw new Z("incorect value");return r}equals(t){if(!(t instanceof ee))return!1;const r=t;return this.getName()===r.getName()}}ee.VALUE_IDENTIFIER_TO_ECI=new Map,ee.VALUES_TO_ECI=new Map,ee.NAME_TO_ECI=new Map,ee.Cp437=new ee(te.Cp437,Int32Array.from([0,2]),"Cp437"),ee.ISO8859_1=new ee(te.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),ee.ISO8859_2=new ee(te.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),ee.ISO8859_3=new ee(te.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),ee.ISO8859_4=new ee(te.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),ee.ISO8859_5=new ee(te.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),ee.ISO8859_6=new ee(te.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),ee.ISO8859_7=new ee(te.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),ee.ISO8859_8=new ee(te.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),ee.ISO8859_9=new ee(te.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),ee.ISO8859_10=new ee(te.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),ee.ISO8859_11=new ee(te.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),ee.ISO8859_13=new ee(te.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),ee.ISO8859_14=new ee(te.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),ee.ISO8859_15=new ee(te.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),ee.ISO8859_16=new ee(te.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),ee.SJIS=new ee(te.SJIS,20,"SJIS","Shift_JIS"),ee.Cp1250=new ee(te.Cp1250,21,"Cp1250","windows-1250"),ee.Cp1251=new ee(te.Cp1251,22,"Cp1251","windows-1251"),ee.Cp1252=new ee(te.Cp1252,23,"Cp1252","windows-1252"),ee.Cp1256=new ee(te.Cp1256,24,"Cp1256","windows-1256"),ee.UnicodeBigUnmarked=new ee(te.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),ee.UTF8=new ee(te.UTF8,26,"UTF8","UTF-8"),ee.ASCII=new ee(te.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),ee.Big5=new ee(te.Big5,28,"Big5"),ee.GB18030=new ee(te.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),ee.EUC_KR=new ee(te.EUC_KR,30,"EUC_KR","EUC-KR");class Se extends v{}Se.kind="UnsupportedOperationException";class Re{static decode(t,r){const o=this.encodingName(r);return this.customDecoder?this.customDecoder(t,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(t,o):new TextDecoder(o).decode(t)}static shouldDecodeOnFallback(t){return!Re.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const o=this.encodingName(r);return this.customEncoder?this.customEncoder(t,o):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof ee?t:ee.getCharacterSetECIByName(t)}static decodeFallback(t,r){const o=this.encodingCharacterSet(r);if(Re.isDecodeFallbackSupported(o)){let a="";for(let l=0,d=t.length;l<d;l++){let f=t[l].toString(16);f.length<2&&(f="0"+f),a+="%"+f}return decodeURIComponent(a)}if(o.equals(ee.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new Se(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(ee.UTF8)||t.equals(ee.ISO8859_1)||t.equals(ee.ASCII)}static encodeFallback(t){const o=btoa(unescape(encodeURIComponent(t))).split(""),a=[];for(let l=0;l<o.length;l++)a.push(o[l].charCodeAt(0));return new Uint8Array(a)}}class me{static castAsNonUtf8Char(t,r=null){const o=r?r.getName():this.ISO88591;return Re.decode(new Uint8Array([t]),o)}static guessEncoding(t,r){if(r!=null&&r.get(re.CHARACTER_SET)!==void 0)return r.get(re.CHARACTER_SET).toString();const o=t.length;let a=!0,l=!0,d=!0,f=0,m=0,x=0,C=0,N=0,I=0,R=0,F=0,z=0,W=0,Q=0;const de=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let he=0;he<o&&(a||l||d);he++){const ae=t[he]&255;d&&(f>0?ae&128?f--:d=!1:ae&128&&(ae&64?(f++,ae&32?(f++,ae&16?(f++,ae&8?d=!1:C++):x++):m++):d=!1)),a&&(ae>127&&ae<160?a=!1:ae>159&&(ae<192||ae===215||ae===247)&&Q++),l&&(N>0?ae<64||ae===127||ae>252?l=!1:N--:ae===128||ae===160||ae>239?l=!1:ae>160&&ae<224?(I++,F=0,R++,R>z&&(z=R)):ae>127?(N++,R=0,F++,F>W&&(W=F)):(R=0,F=0))}return d&&f>0&&(d=!1),l&&N>0&&(l=!1),d&&(de||m+x+C>0)?me.UTF8:l&&(me.ASSUME_SHIFT_JIS||z>=3||W>=3)?me.SHIFT_JIS:a&&l?z===2&&I===2||Q*10>=o?me.SHIFT_JIS:me.ISO88591:a?me.ISO88591:l?me.SHIFT_JIS:d?me.UTF8:me.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let o=-1;function a(d,f,m,x,C,N){if(d==="%%")return"%";if(r[++o]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let I=C?parseInt(C.substr(1)):void 0,R;switch(N){case"s":R=r[o];break;case"c":R=r[o][0];break;case"f":R=parseFloat(r[o]).toFixed(d);break;case"p":R=parseFloat(r[o]).toPrecision(d);break;case"e":R=parseFloat(r[o]).toExponential(d);break;case"x":R=parseInt(r[o]).toString(I||16);break;case"d":R=parseFloat(parseInt(r[o],I||10).toPrecision(d)).toFixed(0);break}R=typeof R=="object"?JSON.stringify(R):(+R).toString(I);let F=parseInt(m),z=m&&m[0]+""=="0"?"0":" ";for(;R.length<F;)R=f!==void 0?R+z:z+R;return R}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(l,a)}static getBytes(t,r){return Re.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}me.SHIFT_JIS=ee.SJIS.getName(),me.GB2312="GB2312",me.ISO88591=ee.ISO8859_1.getName(),me.EUC_JP="EUC_JP",me.UTF8=ee.UTF8.getName(),me.PLATFORM_DEFAULT_ENCODING=me.UTF8,me.ASSUME_SHIFT_JIS=!1;class Ve{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=me.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,o){for(let a=r;r<r+o;a++)this.append(t[a]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class Le{constructor(t,r,o,a){if(this.width=t,this.height=r,this.rowSize=o,this.bits=a,r==null&&(r=t),this.height=r,t<1||r<1)throw new O("Both dimensions must be greater than 0");o==null&&(o=Math.floor((t+31)/32)),this.rowSize=o,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,o=t[0].length,a=new Le(o,r);for(let l=0;l<r;l++){const d=t[l];for(let f=0;f<o;f++)d[f]&&a.set(f,l)}return a}static parseFromString(t,r,o){if(t===null)throw new O("stringRepresentation cannot be null");const a=new Array(t.length);let l=0,d=0,f=-1,m=0,x=0;for(;x<t.length;)if(t.charAt(x)===`
`||t.charAt(x)==="\r"){if(l>d){if(f===-1)f=l-d;else if(l-d!==f)throw new O("row lengths do not match");d=l,m++}x++}else if(t.substring(x,x+r.length)===r)x+=r.length,a[l]=!0,l++;else if(t.substring(x,x+o.length)===o)x+=o.length,a[l]=!1,l++;else throw new O("illegal character encountered: "+t.substring(x));if(l>d){if(f===-1)f=l-d;else if(l-d!==f)throw new O("row lengths do not match");m++}const C=new Le(f,m);for(let N=0;N<l;N++)a[N]&&C.set(Math.floor(N%f),Math.floor(N/f));return C}get(t,r){const o=r*this.rowSize+Math.floor(t/32);return(this.bits[o]>>>(t&31)&1)!==0}set(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]|=1<<(t&31)&4294967295}unset(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]&=~(1<<(t&31)&4294967295)}flip(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new O("input matrix dimensions do not match");const r=new X(Math.floor(this.width/32)+1),o=this.rowSize,a=this.bits;for(let l=0,d=this.height;l<d;l++){const f=l*o,m=t.getRow(l,r).getBitArray();for(let x=0;x<o;x++)a[f+x]^=m[x]}}clear(){const t=this.bits,r=t.length;for(let o=0;o<r;o++)t[o]=0}setRegion(t,r,o,a){if(r<0||t<0)throw new O("Left and top must be nonnegative");if(a<1||o<1)throw new O("Height and width must be at least 1");const l=t+o,d=r+a;if(d>this.height||l>this.width)throw new O("The region must fit inside the matrix");const f=this.rowSize,m=this.bits;for(let x=r;x<d;x++){const C=x*f;for(let N=t;N<l;N++)m[C+Math.floor(N/32)]|=1<<(N&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new X(this.width):r.clear();const o=this.rowSize,a=this.bits,l=t*o;for(let d=0;d<o;d++)r.setBulk(d*32,a[l+d]);return r}setRow(t,r){U.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let o=new X(t),a=new X(t);for(let l=0,d=Math.floor((r+1)/2);l<d;l++)o=this.getRow(l,o),a=this.getRow(r-1-l,a),o.reverse(),a.reverse(),this.setRow(l,a),this.setRow(r-1-l,o)}getEnclosingRectangle(){const t=this.width,r=this.height,o=this.rowSize,a=this.bits;let l=t,d=r,f=-1,m=-1;for(let x=0;x<r;x++)for(let C=0;C<o;C++){const N=a[x*o+C];if(N!==0){if(x<d&&(d=x),x>m&&(m=x),C*32<l){let I=0;for(;!(N<<31-I&4294967295);)I++;C*32+I<l&&(l=C*32+I)}if(C*32+31>f){let I=31;for(;!(N>>>I);)I--;C*32+I>f&&(f=C*32+I)}}}return f<l||m<d?null:Int32Array.from([l,d,f-l+1,m-d+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let o=0;for(;o<r.length&&r[o]===0;)o++;if(o===r.length)return null;const a=o/t;let l=o%t*32;const d=r[o];let f=0;for(;!(d<<31-f&4294967295);)f++;return l+=f,Int32Array.from([l,a])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let o=r.length-1;for(;o>=0&&r[o]===0;)o--;if(o<0)return null;const a=Math.floor(o/t);let l=Math.floor(o%t)*32;const d=r[o];let f=31;for(;!(d>>>f);)f--;return l+=f,Int32Array.from([l,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Le))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&D.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+D.hashCode(this.bits),t}toString(t="X ",r="  ",o=`
`){return this.buildToString(t,r,o)}buildToString(t,r,o){let a=new Ve;for(let l=0,d=this.height;l<d;l++){for(let f=0,m=this.width;f<m;f++)a.append(this.get(f,l)?t:r);a.append(o)}return a.toString()}clone(){return new Le(this.width,this.height,this.rowSize,this.bits.slice())}}class $ extends v{static getNotFoundInstance(){return new $}}$.kind="NotFoundException";class We extends J{constructor(t){super(t),this.luminances=We.EMPTY,this.buckets=new Int32Array(We.LUMINANCE_BUCKETS)}getBlackRow(t,r){const o=this.getLuminanceSource(),a=o.getWidth();r==null||r.getSize()<a?r=new X(a):r.clear(),this.initArrays(a);const l=o.getRow(t,this.luminances),d=this.buckets;for(let m=0;m<a;m++)d[(l[m]&255)>>We.LUMINANCE_SHIFT]++;const f=We.estimateBlackPoint(d);if(a<3)for(let m=0;m<a;m++)(l[m]&255)<f&&r.set(m);else{let m=l[0]&255,x=l[1]&255;for(let C=1;C<a-1;C++){const N=l[C+1]&255;(x*4-m-N)/2<f&&r.set(C),m=x,x=N}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),o=t.getHeight(),a=new Le(r,o);this.initArrays(r);const l=this.buckets;for(let m=1;m<5;m++){const x=Math.floor(o*m/5),C=t.getRow(x,this.luminances),N=Math.floor(r*4/5);for(let I=Math.floor(r/5);I<N;I++){const R=C[I]&255;l[R>>We.LUMINANCE_SHIFT]++}}const d=We.estimateBlackPoint(l),f=t.getMatrix();for(let m=0;m<o;m++){const x=m*r;for(let C=0;C<r;C++)(f[x+C]&255)<d&&a.set(C,m)}return a}createBinarizer(t){return new We(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let o=0;o<We.LUMINANCE_BUCKETS;o++)r[o]=0}static estimateBlackPoint(t){const r=t.length;let o=0,a=0,l=0;for(let C=0;C<r;C++)t[C]>l&&(a=C,l=t[C]),t[C]>o&&(o=t[C]);let d=0,f=0;for(let C=0;C<r;C++){const N=C-a,I=t[C]*N*N;I>f&&(d=C,f=I)}if(a>d){const C=a;a=d,d=C}if(d-a<=r/16)throw new $;let m=d-1,x=-1;for(let C=d-1;C>a;C--){const N=C-a,I=N*N*(d-C)*(o-t[C]);I>x&&(m=C,x=I)}return m<<We.LUMINANCE_SHIFT}}We.LUMINANCE_BITS=5,We.LUMINANCE_SHIFT=8-We.LUMINANCE_BITS,We.LUMINANCE_BUCKETS=1<<We.LUMINANCE_BITS,We.EMPTY=Uint8ClampedArray.from([0]);class _e extends We{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),o=t.getHeight();if(r>=_e.MINIMUM_DIMENSION&&o>=_e.MINIMUM_DIMENSION){const a=t.getMatrix();let l=r>>_e.BLOCK_SIZE_POWER;r&_e.BLOCK_SIZE_MASK&&l++;let d=o>>_e.BLOCK_SIZE_POWER;o&_e.BLOCK_SIZE_MASK&&d++;const f=_e.calculateBlackPoints(a,l,d,r,o),m=new Le(r,o);_e.calculateThresholdForBlock(a,l,d,r,o,f,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new _e(t)}static calculateThresholdForBlock(t,r,o,a,l,d,f){const m=l-_e.BLOCK_SIZE,x=a-_e.BLOCK_SIZE;for(let C=0;C<o;C++){let N=C<<_e.BLOCK_SIZE_POWER;N>m&&(N=m);const I=_e.cap(C,2,o-3);for(let R=0;R<r;R++){let F=R<<_e.BLOCK_SIZE_POWER;F>x&&(F=x);const z=_e.cap(R,2,r-3);let W=0;for(let de=-2;de<=2;de++){const he=d[I+de];W+=he[z-2]+he[z-1]+he[z]+he[z+1]+he[z+2]}const Q=W/25;_e.thresholdBlock(t,F,N,Q,a,f)}}}static cap(t,r,o){return t<r?r:t>o?o:t}static thresholdBlock(t,r,o,a,l,d){for(let f=0,m=o*l+r;f<_e.BLOCK_SIZE;f++,m+=l)for(let x=0;x<_e.BLOCK_SIZE;x++)(t[m+x]&255)<=a&&d.set(r+x,o+f)}static calculateBlackPoints(t,r,o,a,l){const d=l-_e.BLOCK_SIZE,f=a-_e.BLOCK_SIZE,m=new Array(o);for(let x=0;x<o;x++){m[x]=new Int32Array(r);let C=x<<_e.BLOCK_SIZE_POWER;C>d&&(C=d);for(let N=0;N<r;N++){let I=N<<_e.BLOCK_SIZE_POWER;I>f&&(I=f);let R=0,F=255,z=0;for(let Q=0,de=C*a+I;Q<_e.BLOCK_SIZE;Q++,de+=a){for(let he=0;he<_e.BLOCK_SIZE;he++){const ae=t[de+he]&255;R+=ae,ae<F&&(F=ae),ae>z&&(z=ae)}if(z-F>_e.MIN_DYNAMIC_RANGE)for(Q++,de+=a;Q<_e.BLOCK_SIZE;Q++,de+=a)for(let he=0;he<_e.BLOCK_SIZE;he++)R+=t[de+he]&255}let W=R>>_e.BLOCK_SIZE_POWER*2;if(z-F<=_e.MIN_DYNAMIC_RANGE&&(W=F/2,x>0&&N>0)){const Q=(m[x-1][N]+2*m[x][N-1]+m[x-1][N-1])/4;F<Q&&(W=Q)}m[x][N]=W}}return m}}_e.BLOCK_SIZE_POWER=3,_e.BLOCK_SIZE=1<<_e.BLOCK_SIZE_POWER,_e.BLOCK_SIZE_MASK=_e.BLOCK_SIZE-1,_e.MINIMUM_DIMENSION=_e.BLOCK_SIZE*5,_e.MIN_DYNAMIC_RANGE=24;class ne{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,o,a){throw new Se("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Se("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Se("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new Ve;for(let o=0;o<this.height;o++){const a=this.getRow(o,t);for(let l=0;l<this.width;l++){const d=a[l]&255;let f;d<64?f="#":d<128?f="+":d<192?f=".":f=" ",r.append(f)}r.append(`
`)}return r.toString()}}class ke extends ne{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const o=this.delegate.getRow(t,r),a=this.getWidth();for(let l=0;l<a;l++)o[l]=255-(o[l]&255);return o}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(r);for(let a=0;a<r;a++)o[a]=255-(t[a]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,o,a){return new ke(this.delegate.crop(t,r,o,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ke(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ke(this.delegate.rotateCounterClockwise45())}}class ce extends ne{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=ce.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return ce.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,o){const a=new Uint8ClampedArray(r*o);for(let l=0,d=0,f=t.length;l<f;l+=4,d++){let m;if(t[l+3]===0)m=255;else{const C=t[l],N=t[l+1],I=t[l+2];m=306*C+601*N+117*I+512>>10}a[d]=m}return a}getRow(t,r){if(t<0||t>=this.getHeight())throw new O("Requested row is outside the image: "+t);const o=this.getWidth(),a=t*o;return r===null?r=this.buffer.slice(a,a+o):(r.length<o&&(r=new Uint8ClampedArray(o)),r.set(this.buffer.slice(a,a+o))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,o,a){return super.crop(t,r,o,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),o=r.getContext("2d"),a=t*ce.DEGREE_TO_RADIANS,l=this.canvas.width,d=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(a))*l+Math.abs(Math.sin(a))*d),m=Math.ceil(Math.abs(Math.sin(a))*l+Math.abs(Math.cos(a))*d);return r.width=f,r.height=m,o.translate(f/2,m/2),o.rotate(a),o.drawImage(this.canvas,l/-2,d/-2),this.buffer=ce.makeBufferFromCanvasImageData(r),this}invert(){return new ke(this)}}ce.DEGREE_TO_RADIANS=Math.PI/180;class Pe{constructor(t,r,o){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var De=(globalThis||js||self||window||void 0)&&(globalThis||js||self||window||void 0).__awaiter||function(b,t,r,o){function a(l){return l instanceof r?l:new r(function(d){d(l)})}return new(r||(r=Promise))(function(l,d){function f(C){try{x(o.next(C))}catch(N){d(N)}}function m(C){try{x(o.throw(C))}catch(N){d(N)}}function x(C){C.done?l(C.value):a(C.value).then(f,m)}x((o=o.apply(b,t||[])).next())})};class dt{constructor(t,r=500,o){this.reader=t,this.timeBetweenScansMillis=r,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return De(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const o of t){const a=o.kind==="video"?"videoinput":o.kind;if(a!=="videoinput")continue;const l=o.deviceId||o.id,d=o.label||`Video device ${r.length+1}`,f=o.groupId,m={deviceId:l,label:d,kind:a,groupId:f};r.push(m)}return r})}getVideoInputDevices(){return De(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new Pe(r.deviceId,r.label))})}findDeviceById(t){return De(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(o=>o.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return De(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return De(this,void 0,void 0,function*(){this.reset();let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const a={video:o};return yield this.decodeOnceFromConstraints(a,r)})}decodeOnceFromConstraints(t,r){return De(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(o,r)})}decodeOnceFromStream(t,r){return De(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(t,r,o){return De(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,o)})}decodeFromVideoDevice(t,r,o){return De(this,void 0,void 0,function*(){let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const l={video:a};return yield this.decodeFromConstraints(l,r,o)})}decodeFromConstraints(t,r,o){return De(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(a,r,o)})}decodeFromStream(t,r,o){return De(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(a,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return De(this,void 0,void 0,function*(){const o=this.prepareVideoElement(r);return this.addVideoSource(o,t),this.videoElement=o,this.stream=t,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(t){return new Promise((r,o)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return De(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const o=document.getElementById(t);if(!o)throw new k(`element with id '${t}' not found`);if(o.nodeName.toLowerCase()!==r.toLowerCase())throw new k(`element with id '${t}' must be an ${r} element`);return o}decodeFromImage(t,r){if(!t&&!r)throw new k("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new k("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,o){if(t===void 0&&r===void 0)throw new k("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,o):this.decodeFromVideoElementContinuously(t,o)}decodeFromImageElement(t){if(!t)throw new k("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let o;return this.isImageLoaded(r)?o=this.decodeOnce(r,!1,!0):o=this._decodeOnLoadImage(r),o}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const o=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(o,r)}_decodeFromVideoElementSetup(t){if(!t)throw new k("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new k("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const o=this._decodeOnLoadImage(r);return r.src=t,o}decodeFromVideoUrl(t){if(!t)throw new k("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),o=this.decodeFromVideoElement(r);return r.src=t,o}decodeFromVideoUrlContinuously(t,r){if(!t)throw new k("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(o,r);return o.src=t,a}_decodeOnLoadImage(t){return new Promise((r,o)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,o),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return De(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return De(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,o=!0){this._stopAsyncDecode=!1;const a=(l,d)=>{if(this._stopAsyncDecode){d(new $("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(t);l(f)}catch(f){const m=r&&f instanceof $,C=(f instanceof V||f instanceof Z)&&o;if(m||C)return setTimeout(a,this._timeBetweenDecodingAttempts,l,d);d(f)}};return new Promise((l,d)=>a(l,d))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(t);r(a,null),setTimeout(o,this.timeBetweenScansMillis)}catch(a){r(null,a);const l=a instanceof V||a instanceof Z,d=a instanceof $;(l||d)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,o){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,o=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),o=new ce(r),a=new _e(o);return new H(a)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let o,a;return typeof t<"u"&&(t instanceof HTMLVideoElement?(o=t.videoWidth,a=t.videoHeight):t instanceof HTMLImageElement&&(o=t.naturalWidth||t.width,a=t.naturalHeight||t.height)),r.style.width=o+"px",r.style.height=a+"px",r.width=o,r.height=a,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Fe{constructor(t,r,o=r==null?0:8*r.length,a,l,d=U.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=o,this.resultPoints=a,this.format=l,this.timestamp=d,this.text=t,this.rawBytes=r,o==null?this.numBits=r==null?0:8*r.length:this.numBits=o,this.resultPoints=a,this.format=l,this.resultMetadata=null,d==null?this.timestamp=U.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const o=new Array(r.length+t.length);U.arraycopy(r,0,o,0,r.length),U.arraycopy(t,0,o,r.length,t.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Xe;(function(b){b[b.AZTEC=0]="AZTEC",b[b.CODABAR=1]="CODABAR",b[b.CODE_39=2]="CODE_39",b[b.CODE_93=3]="CODE_93",b[b.CODE_128=4]="CODE_128",b[b.DATA_MATRIX=5]="DATA_MATRIX",b[b.EAN_8=6]="EAN_8",b[b.EAN_13=7]="EAN_13",b[b.ITF=8]="ITF",b[b.MAXICODE=9]="MAXICODE",b[b.PDF_417=10]="PDF_417",b[b.QR_CODE=11]="QR_CODE",b[b.RSS_14=12]="RSS_14",b[b.RSS_EXPANDED=13]="RSS_EXPANDED",b[b.UPC_A=14]="UPC_A",b[b.UPC_E=15]="UPC_E",b[b.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xe||(Xe={}));var ue=Xe,Zt;(function(b){b[b.OTHER=0]="OTHER",b[b.ORIENTATION=1]="ORIENTATION",b[b.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",b[b.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",b[b.ISSUE_NUMBER=4]="ISSUE_NUMBER",b[b.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",b[b.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",b[b.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",b[b.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",b[b.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",b[b.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Zt||(Zt={}));var gt=Zt;class jr{constructor(t,r,o,a,l=-1,d=-1){this.rawBytes=t,this.text=r,this.byteSegments=o,this.ecLevel=a,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=d,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class vr{exp(t){return this.expTable[t]}log(t){if(t===0)throw new O;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class Wt{constructor(t,r){if(r.length===0)throw new O;this.field=t;const o=r.length;if(o>1&&r[0]===0){let a=1;for(;a<o&&r[a]===0;)a++;a===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-a),U.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let o;if(t===1){o=0;for(let d=0,f=r.length;d!==f;d++){const m=r[d];o=vr.addOrSubtract(o,m)}return o}o=r[0];const a=r.length,l=this.field;for(let d=1;d<a;d++)o=vr.addOrSubtract(l.multiply(t,o),r[d]);return o}addOrSubtract(t){if(!this.field.equals(t.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,o=t.coefficients;if(r.length>o.length){const d=r;r=o,o=d}let a=new Int32Array(o.length);const l=o.length-r.length;U.arraycopy(o,0,a,0,l);for(let d=l;d<o.length;d++)a[d]=vr.addOrSubtract(r[d-l],o[d]);return new Wt(this.field,a)}multiply(t){if(!this.field.equals(t.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,o=r.length,a=t.coefficients,l=a.length,d=new Int32Array(o+l-1),f=this.field;for(let m=0;m<o;m++){const x=r[m];for(let C=0;C<l;C++)d[m+C]=vr.addOrSubtract(d[m+C],f.multiply(x,a[C]))}return new Wt(f,d)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,o=this.field,a=new Int32Array(r),l=this.coefficients;for(let d=0;d<r;d++)a[d]=o.multiply(l[d],t);return new Wt(o,a)}multiplyByMonomial(t,r){if(t<0)throw new O;if(r===0)return this.field.getZero();const o=this.coefficients,a=o.length,l=new Int32Array(a+t),d=this.field;for(let f=0;f<a;f++)l[f]=d.multiply(o[f],r);return new Wt(d,l)}divide(t){if(!this.field.equals(t.field))throw new O("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new O("Divide by 0");const r=this.field;let o=r.getZero(),a=this;const l=t.getCoefficient(t.getDegree()),d=r.inverse(l);for(;a.getDegree()>=t.getDegree()&&!a.isZero();){const f=a.getDegree()-t.getDegree(),m=r.multiply(a.getCoefficient(a.getDegree()),d),x=t.multiplyByMonomial(f,m),C=r.buildMonomial(f,m);o=o.addOrSubtract(C),a=a.addOrSubtract(x)}return[o,a]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let o=this.getCoefficient(r);if(o!==0){if(o<0?(t+=" - ",o=-o):t.length>0&&(t+=" + "),r===0||o!==1){const a=this.field.log(o);a===0?t+="1":a===1?t+="a":(t+="a^",t+=a)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class sr extends v{}sr.kind="ArithmeticException";class Qe extends vr{constructor(t,r,o){super(),this.primitive=t,this.size=r,this.generatorBase=o;const a=new Int32Array(r);let l=1;for(let f=0;f<r;f++)a[f]=l,l*=2,l>=r&&(l^=t,l&=r-1);this.expTable=a;const d=new Int32Array(r);for(let f=0;f<r-1;f++)d[a[f]]=f;this.logTable=d,this.zero=new Wt(this,Int32Array.from([0])),this.one=new Wt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new O;if(r===0)return this.zero;const o=new Int32Array(t+1);return o[0]=r,new Wt(this,o)}inverse(t){if(t===0)throw new sr;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}Qe.AZTEC_DATA_12=new Qe(4201,4096,1),Qe.AZTEC_DATA_10=new Qe(1033,1024,1),Qe.AZTEC_DATA_6=new Qe(67,64,1),Qe.AZTEC_PARAM=new Qe(19,16,1),Qe.QR_CODE_FIELD_256=new Qe(285,256,0),Qe.DATA_MATRIX_FIELD_256=new Qe(301,256,1),Qe.AZTEC_DATA_8=Qe.DATA_MATRIX_FIELD_256,Qe.MAXICODE_FIELD_64=Qe.AZTEC_DATA_6;class Cr extends v{}Cr.kind="ReedSolomonException";class yn extends v{}yn.kind="IllegalStateException";class Er{constructor(t){this.field=t}decode(t,r){const o=this.field,a=new Wt(o,t),l=new Int32Array(r);let d=!0;for(let R=0;R<r;R++){const F=a.evaluateAt(o.exp(R+o.getGeneratorBase()));l[l.length-1-R]=F,F!==0&&(d=!1)}if(d)return;const f=new Wt(o,l),m=this.runEuclideanAlgorithm(o.buildMonomial(r,1),f,r),x=m[0],C=m[1],N=this.findErrorLocations(x),I=this.findErrorMagnitudes(C,N);for(let R=0;R<N.length;R++){const F=t.length-1-o.log(N[R]);if(F<0)throw new Cr("Bad error location");t[F]=Qe.addOrSubtract(t[F],I[R])}}runEuclideanAlgorithm(t,r,o){if(t.getDegree()<r.getDegree()){const R=t;t=r,r=R}const a=this.field;let l=t,d=r,f=a.getZero(),m=a.getOne();for(;d.getDegree()>=(o/2|0);){let R=l,F=f;if(l=d,f=m,l.isZero())throw new Cr("r_{i-1} was zero");d=R;let z=a.getZero();const W=l.getCoefficient(l.getDegree()),Q=a.inverse(W);for(;d.getDegree()>=l.getDegree()&&!d.isZero();){const de=d.getDegree()-l.getDegree(),he=a.multiply(d.getCoefficient(d.getDegree()),Q);z=z.addOrSubtract(a.buildMonomial(de,he)),d=d.addOrSubtract(l.multiplyByMonomial(de,he))}if(m=z.multiply(f).addOrSubtract(F),d.getDegree()>=l.getDegree())throw new yn("Division algorithm failed to reduce polynomial?")}const x=m.getCoefficient(0);if(x===0)throw new Cr("sigmaTilde(0) was zero");const C=a.inverse(x),N=m.multiplyScalar(C),I=d.multiplyScalar(C);return[N,I]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const o=new Int32Array(r);let a=0;const l=this.field;for(let d=1;d<l.getSize()&&a<r;d++)t.evaluateAt(d)===0&&(o[a]=l.inverse(d),a++);if(a!==r)throw new Cr("Error locator degree does not match number of roots");return o}findErrorMagnitudes(t,r){const o=r.length,a=new Int32Array(o),l=this.field;for(let d=0;d<o;d++){const f=l.inverse(r[d]);let m=1;for(let x=0;x<o;x++)if(d!==x){const C=l.multiply(r[x],f),N=C&1?C&-2:C|1;m=l.multiply(m,N)}a[d]=l.multiply(t.evaluateAt(f),l.inverse(m)),l.getGeneratorBase()!==0&&(a[d]=l.multiply(a[d],f))}return a}}var Ot;(function(b){b[b.UPPER=0]="UPPER",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.DIGIT=3]="DIGIT",b[b.PUNCT=4]="PUNCT",b[b.BINARY=5]="BINARY"})(Ot||(Ot={}));class rt{decode(t){this.ddata=t;let r=t.getBits(),o=this.extractBits(r),a=this.correctBits(o),l=rt.convertBoolArrayToByteArray(a),d=rt.getEncodedData(a),f=new jr(l,d,null,null);return f.setNumBits(a.length),f}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,o=Ot.UPPER,a=Ot.UPPER,l="",d=0;for(;d<r;)if(a===Ot.BINARY){if(r-d<5)break;let f=rt.readCode(t,d,5);if(d+=5,f===0){if(r-d<11)break;f=rt.readCode(t,d,11)+31,d+=11}for(let m=0;m<f;m++){if(r-d<8){d=r;break}const x=rt.readCode(t,d,8);l+=me.castAsNonUtf8Char(x),d+=8}a=o}else{let f=a===Ot.DIGIT?4:5;if(r-d<f)break;let m=rt.readCode(t,d,f);d+=f;let x=rt.getCharacter(a,m);x.startsWith("CTRL_")?(o=a,a=rt.getTable(x.charAt(5)),x.charAt(6)==="L"&&(o=a)):(l+=x,a=o)}return l}static getTable(t){switch(t){case"L":return Ot.LOWER;case"P":return Ot.PUNCT;case"M":return Ot.MIXED;case"D":return Ot.DIGIT;case"B":return Ot.BINARY;case"U":default:return Ot.UPPER}}static getCharacter(t,r){switch(t){case Ot.UPPER:return rt.UPPER_TABLE[r];case Ot.LOWER:return rt.LOWER_TABLE[r];case Ot.MIXED:return rt.MIXED_TABLE[r];case Ot.PUNCT:return rt.PUNCT_TABLE[r];case Ot.DIGIT:return rt.DIGIT_TABLE[r];default:throw new yn("Bad table")}}correctBits(t){let r,o;this.ddata.getNbLayers()<=2?(o=6,r=Qe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,r=Qe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,r=Qe.AZTEC_DATA_10):(o=12,r=Qe.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),l=t.length/o;if(l<a)throw new Z;let d=t.length%o,f=new Int32Array(l);for(let I=0;I<l;I++,d+=o)f[I]=rt.readCode(t,d,o);try{new Er(r).decode(f,l-a)}catch(I){throw new Z(I)}let m=(1<<o)-1,x=0;for(let I=0;I<a;I++){let R=f[I];if(R===0||R===m)throw new Z;(R===1||R===m-1)&&x++}let C=new Array(a*o-x),N=0;for(let I=0;I<a;I++){let R=f[I];if(R===1||R===m-1)C.fill(R>1,N,N+o-1),N+=o-1;else for(let F=o-1;F>=0;--F)C[N++]=(R&1<<F)!==0}return C}extractBits(t){let r=this.ddata.isCompact(),o=this.ddata.getNbLayers(),a=(r?11:14)+o*4,l=new Int32Array(a),d=new Array(this.totalBitsInLayer(o,r));if(r)for(let f=0;f<l.length;f++)l[f]=f;else{let f=a+1+2*B.truncDivision(B.truncDivision(a,2)-1,15),m=a/2,x=B.truncDivision(f,2);for(let C=0;C<m;C++){let N=C+B.truncDivision(C,15);l[m-C-1]=x-N-1,l[m+C]=x+N+1}}for(let f=0,m=0;f<o;f++){let x=(o-f)*4+(r?9:12),C=f*2,N=a-1-C;for(let I=0;I<x;I++){let R=I*2;for(let F=0;F<2;F++)d[m+R+F]=t.get(l[C+F],l[C+I]),d[m+2*x+R+F]=t.get(l[C+I],l[N-F]),d[m+4*x+R+F]=t.get(l[N-F],l[N-I]),d[m+6*x+R+F]=t.get(l[N-I],l[C+F])}m+=x*8}return d}static readCode(t,r,o){let a=0;for(let l=r;l<r+o;l++)a<<=1,t[l]&&(a|=1);return a}static readByte(t,r){let o=t.length-r;return o>=8?rt.readCode(t,r,8):rt.readCode(t,r,o)<<8-o}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let o=0;o<r.length;o++)r[o]=rt.readByte(t,8*o);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}rt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],rt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],rt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],rt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],rt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ke{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,o,a){const l=t-o,d=r-a;return Math.sqrt(l*l+d*d)}static sum(t){let r=0;for(let o=0,a=t.length;o!==a;o++){const l=t[o];r+=l}return r}}class Fr{static floatToIntBits(t){return t}}Fr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ee{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Ee){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Fr.floatToIntBits(this.x)+Fr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),o=this.distance(t[1],t[2]),a=this.distance(t[0],t[2]);let l,d,f;if(o>=r&&o>=a?(d=t[0],l=t[1],f=t[2]):a>=o&&a>=r?(d=t[1],l=t[0],f=t[2]):(d=t[2],l=t[0],f=t[1]),this.crossProductZ(l,d,f)<0){const m=l;l=f,f=m}t[0]=l,t[1]=d,t[2]=f}static distance(t,r){return Ke.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,o){const a=r.x,l=r.y;return(o.x-a)*(t.y-l)-(o.y-l)*(t.x-a)}}class zr{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class vi extends zr{constructor(t,r,o,a,l){super(t,r),this.compact=o,this.nbDatablocks=a,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Bn{constructor(t,r,o,a){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=Bn.INIT_SIZE),o==null&&(o=t.getWidth()/2|0),a==null&&(a=t.getHeight()/2|0);const l=r/2|0;if(this.leftInit=o-l,this.rightInit=o+l,this.upInit=a-l,this.downInit=a+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new $}detect(){let t=this.leftInit,r=this.rightInit,o=this.upInit,a=this.downInit,l=!1,d=!0,f=!1,m=!1,x=!1,C=!1,N=!1;const I=this.width,R=this.height;for(;d;){d=!1;let F=!0;for(;(F||!m)&&r<I;)F=this.containsBlackPoint(o,a,r,!1),F?(r++,d=!0,m=!0):m||r++;if(r>=I){l=!0;break}let z=!0;for(;(z||!x)&&a<R;)z=this.containsBlackPoint(t,r,a,!0),z?(a++,d=!0,x=!0):x||a++;if(a>=R){l=!0;break}let W=!0;for(;(W||!C)&&t>=0;)W=this.containsBlackPoint(o,a,t,!1),W?(t--,d=!0,C=!0):C||t--;if(t<0){l=!0;break}let Q=!0;for(;(Q||!N)&&o>=0;)Q=this.containsBlackPoint(t,r,o,!0),Q?(o--,d=!0,N=!0):N||o--;if(o<0){l=!0;break}d&&(f=!0)}if(!l&&f){const F=r-t;let z=null;for(let he=1;z===null&&he<F;he++)z=this.getBlackPointOnSegment(t,a-he,t+he,a);if(z==null)throw new $;let W=null;for(let he=1;W===null&&he<F;he++)W=this.getBlackPointOnSegment(t,o+he,t+he,o);if(W==null)throw new $;let Q=null;for(let he=1;Q===null&&he<F;he++)Q=this.getBlackPointOnSegment(r,o+he,r-he,o);if(Q==null)throw new $;let de=null;for(let he=1;de===null&&he<F;he++)de=this.getBlackPointOnSegment(r,a-he,r-he,a);if(de==null)throw new $;return this.centerEdges(de,z,Q,W)}else throw new $}getBlackPointOnSegment(t,r,o,a){const l=Ke.round(Ke.distance(t,r,o,a)),d=(o-t)/l,f=(a-r)/l,m=this.image;for(let x=0;x<l;x++){const C=Ke.round(t+x*d),N=Ke.round(r+x*f);if(m.get(C,N))return new Ee(C,N)}return null}centerEdges(t,r,o,a){const l=t.getX(),d=t.getY(),f=r.getX(),m=r.getY(),x=o.getX(),C=o.getY(),N=a.getX(),I=a.getY(),R=Bn.CORR;return l<this.width/2?[new Ee(N-R,I+R),new Ee(f+R,m+R),new Ee(x-R,C-R),new Ee(l+R,d-R)]:[new Ee(N+R,I+R),new Ee(f+R,m-R),new Ee(x-R,C+R),new Ee(l-R,d-R)]}containsBlackPoint(t,r,o,a){const l=this.image;if(a){for(let d=t;d<=r;d++)if(l.get(d,o))return!0}else for(let d=t;d<=r;d++)if(l.get(o,d))return!0;return!1}}Bn.INIT_SIZE=10,Bn.CORR=1;class Ci{static checkAndNudgePoints(t,r){const o=t.getWidth(),a=t.getHeight();let l=!0;for(let d=0;d<r.length&&l;d+=2){const f=Math.floor(r[d]),m=Math.floor(r[d+1]);if(f<-1||f>o||m<-1||m>a)throw new $;l=!1,f===-1?(r[d]=0,l=!0):f===o&&(r[d]=o-1,l=!0),m===-1?(r[d+1]=0,l=!0):m===a&&(r[d+1]=a-1,l=!0)}l=!0;for(let d=r.length-2;d>=0&&l;d-=2){const f=Math.floor(r[d]),m=Math.floor(r[d+1]);if(f<-1||f>o||m<-1||m>a)throw new $;l=!1,f===-1?(r[d]=0,l=!0):f===o&&(r[d]=o-1,l=!0),m===-1?(r[d+1]=0,l=!0):m===a&&(r[d+1]=a-1,l=!0)}}}class rn{constructor(t,r,o,a,l,d,f,m,x){this.a11=t,this.a21=r,this.a31=o,this.a12=a,this.a22=l,this.a32=d,this.a13=f,this.a23=m,this.a33=x}static quadrilateralToQuadrilateral(t,r,o,a,l,d,f,m,x,C,N,I,R,F,z,W){const Q=rn.quadrilateralToSquare(t,r,o,a,l,d,f,m);return rn.squareToQuadrilateral(x,C,N,I,R,F,z,W).times(Q)}transformPoints(t){const r=t.length,o=this.a11,a=this.a12,l=this.a13,d=this.a21,f=this.a22,m=this.a23,x=this.a31,C=this.a32,N=this.a33;for(let I=0;I<r;I+=2){const R=t[I],F=t[I+1],z=l*R+m*F+N;t[I]=(o*R+d*F+x)/z,t[I+1]=(a*R+f*F+C)/z}}transformPointsWithValues(t,r){const o=this.a11,a=this.a12,l=this.a13,d=this.a21,f=this.a22,m=this.a23,x=this.a31,C=this.a32,N=this.a33,I=t.length;for(let R=0;R<I;R++){const F=t[R],z=r[R],W=l*F+m*z+N;t[R]=(o*F+d*z+x)/W,r[R]=(a*F+f*z+C)/W}}static squareToQuadrilateral(t,r,o,a,l,d,f,m){const x=t-o+l-f,C=r-a+d-m;if(x===0&&C===0)return new rn(o-t,l-o,t,a-r,d-a,r,0,0,1);{const N=o-l,I=f-l,R=a-d,F=m-d,z=N*F-I*R,W=(x*F-I*C)/z,Q=(N*C-x*R)/z;return new rn(o-t+W*o,f-t+Q*f,t,a-r+W*a,m-r+Q*m,r,W,Q,1)}}static quadrilateralToSquare(t,r,o,a,l,d,f,m){return rn.squareToQuadrilateral(t,r,o,a,l,d,f,m).buildAdjoint()}buildAdjoint(){return new rn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new rn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class Ei extends Ci{sampleGrid(t,r,o,a,l,d,f,m,x,C,N,I,R,F,z,W,Q,de,he){const ae=rn.quadrilateralToQuadrilateral(a,l,d,f,m,x,C,N,I,R,F,z,W,Q,de,he);return this.sampleGridWithTransform(t,r,o,ae)}sampleGridWithTransform(t,r,o,a){if(r<=0||o<=0)throw new $;const l=new Le(r,o),d=new Float32Array(2*r);for(let f=0;f<o;f++){const m=d.length,x=f+.5;for(let C=0;C<m;C+=2)d[C]=C/2+.5,d[C+1]=x;a.transformPoints(d),Ci.checkAndNudgePoints(t,d);try{for(let C=0;C<m;C+=2)t.get(Math.floor(d[C]),Math.floor(d[C+1]))&&l.set(C/2,f)}catch{throw new $}}return l}}class jn{static setGridSampler(t){jn.gridSampler=t}static getInstance(){return jn.gridSampler}}jn.gridSampler=new Ei;class Gt{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new Ee(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ai{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),o=this.getBullsEyeCorners(r);if(t){let d=o[0];o[0]=o[2],o[2]=d}this.extractParameters(o);let a=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),l=this.getMatrixCornerPoints(o);return new vi(a,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new $;let r=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(o,r);let a=0;for(let d=0;d<4;d++){let f=o[(this.shift+d)%4];this.compact?(a<<=7,a+=f>>1&127):(a<<=10,a+=(f>>2&992)+(f>>1&31))}let l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(t,r){let o=0;t.forEach((a,l,d)=>{let f=(a>>r-2<<1)+(a&1);o=(o<<3)+f}),o=((o&1)<<11)+(o>>1);for(let a=0;a<4;a++)if(B.bitCount(o^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new $}getCorrectedParameterData(t,r){let o,a;r?(o=7,a=2):(o=10,a=4);let l=o-a,d=new Int32Array(o);for(let m=o-1;m>=0;--m)d[m]=t&15,t>>=4;try{new Er(Qe.AZTEC_PARAM).decode(d,l)}catch{throw new $}let f=0;for(let m=0;m<a;m++)f=(f<<4)+d[m];return f}getBullsEyeCorners(t){let r=t,o=t,a=t,l=t,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let N=this.getFirstDifferent(r,d,1,-1),I=this.getFirstDifferent(o,d,1,1),R=this.getFirstDifferent(a,d,-1,1),F=this.getFirstDifferent(l,d,-1,-1);if(this.nbCenterLayers>2){let z=this.distancePoint(F,N)*this.nbCenterLayers/(this.distancePoint(l,r)*(this.nbCenterLayers+2));if(z<.75||z>1.25||!this.isWhiteOrBlackRectangle(N,I,R,F))break}r=N,o=I,a=R,l=F,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new $;this.compact=this.nbCenterLayers===5;let f=new Ee(r.getX()+.5,r.getY()-.5),m=new Ee(o.getX()+.5,o.getY()+.5),x=new Ee(a.getX()-.5,a.getY()+.5),C=new Ee(l.getX()-.5,l.getY()-.5);return this.expandSquare([f,m,x,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,o,a;try{let f=new Bn(this.image).detect();t=f[0],r=f[1],o=f[2],a=f[3]}catch{let m=this.image.getWidth()/2,x=this.image.getHeight()/2;t=this.getFirstDifferent(new Gt(m+7,x-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Gt(m+7,x+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Gt(m-7,x+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Gt(m-7,x-7),!1,-1,-1).toResultPoint()}let l=Ke.round((t.getX()+a.getX()+r.getX()+o.getX())/4),d=Ke.round((t.getY()+a.getY()+r.getY()+o.getY())/4);try{let f=new Bn(this.image,15,l,d).detect();t=f[0],r=f[1],o=f[2],a=f[3]}catch{t=this.getFirstDifferent(new Gt(l+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Gt(l+7,d+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Gt(l-7,d+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Gt(l-7,d-7),!1,-1,-1).toResultPoint()}return l=Ke.round((t.getX()+a.getX()+r.getX()+o.getX())/4),d=Ke.round((t.getY()+a.getY()+r.getY()+o.getY())/4),new Gt(l,d)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,o,a,l){let d=jn.getInstance(),f=this.getDimension(),m=f/2-this.nbCenterLayers,x=f/2+this.nbCenterLayers;return d.sampleGrid(t,f,f,m,m,x,m,x,x,m,x,r.getX(),r.getY(),o.getX(),o.getY(),a.getX(),a.getY(),l.getX(),l.getY())}sampleLine(t,r,o){let a=0,l=this.distanceResultPoint(t,r),d=l/o,f=t.getX(),m=t.getY(),x=d*(r.getX()-t.getX())/l,C=d*(r.getY()-t.getY())/l;for(let N=0;N<o;N++)this.image.get(Ke.round(f+N*x),Ke.round(m+N*C))&&(a|=1<<o-N-1);return a}isWhiteOrBlackRectangle(t,r,o,a){let l=3;t=new Gt(t.getX()-l,t.getY()+l),r=new Gt(r.getX()-l,r.getY()-l),o=new Gt(o.getX()+l,o.getY()-l),a=new Gt(a.getX()+l,a.getY()+l);let d=this.getColor(a,t);if(d===0)return!1;let f=this.getColor(t,r);return f!==d||(f=this.getColor(r,o),f!==d)?!1:(f=this.getColor(o,a),f===d)}getColor(t,r){let o=this.distancePoint(t,r),a=(r.getX()-t.getX())/o,l=(r.getY()-t.getY())/o,d=0,f=t.getX(),m=t.getY(),x=this.image.get(t.getX(),t.getY()),C=Math.ceil(o);for(let I=0;I<C;I++)f+=a,m+=l,this.image.get(Ke.round(f),Ke.round(m))!==x&&d++;let N=d/o;return N>.1&&N<.9?0:N<=.1===x?1:-1}getFirstDifferent(t,r,o,a){let l=t.getX()+o,d=t.getY()+a;for(;this.isValid(l,d)&&this.image.get(l,d)===r;)l+=o,d+=a;for(l-=o,d-=a;this.isValid(l,d)&&this.image.get(l,d)===r;)l+=o;for(l-=o;this.isValid(l,d)&&this.image.get(l,d)===r;)d+=a;return d-=a,new Gt(l,d)}expandSquare(t,r,o){let a=o/(2*r),l=t[0].getX()-t[2].getX(),d=t[0].getY()-t[2].getY(),f=(t[0].getX()+t[2].getX())/2,m=(t[0].getY()+t[2].getY())/2,x=new Ee(f+a*l,m+a*d),C=new Ee(f-a*l,m-a*d);l=t[1].getX()-t[3].getX(),d=t[1].getY()-t[3].getY(),f=(t[1].getX()+t[3].getX())/2,m=(t[1].getY()+t[3].getY())/2;let N=new Ee(f+a*l,m+a*d),I=new Ee(f-a*l,m-a*d);return[x,N,C,I]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=Ke.round(t.getX()),o=Ke.round(t.getY());return this.isValid(r,o)}distancePoint(t,r){return Ke.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return Ke.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class Ur{decode(t,r=null){let o=null,a=new Ai(t.getBlackMatrix()),l=null,d=null;try{let C=a.detectMirror(!1);l=C.getPoints(),this.reportFoundResultPoints(r,l),d=new rt().decode(C)}catch(C){o=C}if(d==null)try{let C=a.detectMirror(!0);l=C.getPoints(),this.reportFoundResultPoints(r,l),d=new rt().decode(C)}catch(C){throw o??C}let f=new Fe(d.getText(),d.getRawBytes(),d.getNumBits(),l,ue.AZTEC,U.currentTimeMillis()),m=d.getByteSegments();m!=null&&f.putMetadata(gt.BYTE_SEGMENTS,m);let x=d.getECLevel();return x!=null&&f.putMetadata(gt.ERROR_CORRECTION_LEVEL,x),f}reportFoundResultPoints(t,r){if(t!=null){let o=t.get(re.NEED_RESULT_POINT_CALLBACK);o!=null&&r.forEach((a,l,d)=>{o.foundPossibleResultPoint(a)})}}reset(){}}class Is extends dt{constructor(t=500){super(new Ur,t)}}class vt{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(re.TRY_HARDER)===!0&&t.isRotateSupported()){const l=t.rotateCounterClockwise(),d=this.doDecode(l,r),f=d.getResultMetadata();let m=270;f!==null&&f.get(gt.ORIENTATION)===!0&&(m=m+f.get(gt.ORIENTATION)%360),d.putMetadata(gt.ORIENTATION,m);const x=d.getResultPoints();if(x!==null){const C=l.getHeight();for(let N=0;N<x.length;N++)x[N]=new Ee(C-x[N].getY()-1,x[N].getX())}return d}else throw new $}}reset(){}doDecode(t,r){const o=t.getWidth(),a=t.getHeight();let l=new X(o);const d=r&&r.get(re.TRY_HARDER)===!0,f=Math.max(1,a>>(d?8:5));let m;d?m=a:m=15;const x=Math.trunc(a/2);for(let C=0;C<m;C++){const N=Math.trunc((C+1)/2),I=(C&1)===0,R=x+f*(I?N:-N);if(R<0||R>=a)break;try{l=t.getBlackRow(R,l)}catch{continue}for(let F=0;F<2;F++){if(F===1&&(l.reverse(),r&&r.get(re.NEED_RESULT_POINT_CALLBACK)===!0)){const z=new Map;r.forEach((W,Q)=>z.set(Q,W)),z.delete(re.NEED_RESULT_POINT_CALLBACK),r=z}try{const z=this.decodeRow(R,l,r);if(F===1){z.putMetadata(gt.ORIENTATION,180);const W=z.getResultPoints();W!==null&&(W[0]=new Ee(o-W[0].getX()-1,W[0].getY()),W[1]=new Ee(o-W[1].getX()-1,W[1].getY()))}return z}catch{}}}throw new $}static recordPattern(t,r,o){const a=o.length;for(let x=0;x<a;x++)o[x]=0;const l=t.getSize();if(r>=l)throw new $;let d=!t.get(r),f=0,m=r;for(;m<l;){if(t.get(m)!==d)o[f]++;else{if(++f===a)break;o[f]=1,d=!d}m++}if(!(f===a||f===a-1&&m===l))throw new $}static recordPatternInReverse(t,r,o){let a=o.length,l=t.get(r);for(;r>0&&a>=0;)t.get(--r)!==l&&(a--,l=!l);if(a>=0)throw new $;vt.recordPattern(t,r+1,o)}static patternMatchVariance(t,r,o){const a=t.length;let l=0,d=0;for(let x=0;x<a;x++)l+=t[x],d+=r[x];if(l<d)return Number.POSITIVE_INFINITY;const f=l/d;o*=f;let m=0;for(let x=0;x<a;x++){const C=t[x],N=r[x]*f,I=C>N?C-N:N-C;if(I>o)return Number.POSITIVE_INFINITY;m+=I}return m/l}}class pe extends vt{static findStartPattern(t){const r=t.getSize(),o=t.getNextSet(0);let a=0,l=Int32Array.from([0,0,0,0,0,0]),d=o,f=!1;const m=6;for(let x=o;x<r;x++)if(t.get(x)!==f)l[a]++;else{if(a===m-1){let C=pe.MAX_AVG_VARIANCE,N=-1;for(let I=pe.CODE_START_A;I<=pe.CODE_START_C;I++){const R=vt.patternMatchVariance(l,pe.CODE_PATTERNS[I],pe.MAX_INDIVIDUAL_VARIANCE);R<C&&(C=R,N=I)}if(N>=0&&t.isRange(Math.max(0,d-(x-d)/2),d,!1))return Int32Array.from([d,x,N]);d+=l[0]+l[1],l=l.slice(2,l.length-1),l[a-1]=0,l[a]=0,a--}else a++;l[a]=1,f=!f}throw new $}static decodeCode(t,r,o){vt.recordPattern(t,o,r);let a=pe.MAX_AVG_VARIANCE,l=-1;for(let d=0;d<pe.CODE_PATTERNS.length;d++){const f=pe.CODE_PATTERNS[d],m=this.patternMatchVariance(r,f,pe.MAX_INDIVIDUAL_VARIANCE);m<a&&(a=m,l=d)}if(l>=0)return l;throw new $}decodeRow(t,r,o){const a=o&&o.get(re.ASSUME_GS1)===!0,l=pe.findStartPattern(r),d=l[2];let f=0;const m=new Uint8Array(20);m[f++]=d;let x;switch(d){case pe.CODE_START_A:x=pe.CODE_CODE_A;break;case pe.CODE_START_B:x=pe.CODE_CODE_B;break;case pe.CODE_START_C:x=pe.CODE_CODE_C;break;default:throw new Z}let C=!1,N=!1,I="",R=l[0],F=l[1];const z=Int32Array.from([0,0,0,0,0,0]);let W=0,Q=0,de=d,he=0,ae=!0,Ye=!1,Ue=!1;for(;!C;){const fr=N;switch(N=!1,W=Q,Q=pe.decodeCode(r,z,F),m[f++]=Q,Q!==pe.CODE_STOP&&(ae=!0),Q!==pe.CODE_STOP&&(he++,de+=he*Q),R=F,F+=z.reduce((Cc,Di)=>Cc+Di,0),Q){case pe.CODE_START_A:case pe.CODE_START_B:case pe.CODE_START_C:throw new Z}switch(x){case pe.CODE_CODE_A:if(Q<64)Ue===Ye?I+=String.fromCharCode(32+Q):I+=String.fromCharCode(32+Q+128),Ue=!1;else if(Q<96)Ue===Ye?I+=String.fromCharCode(Q-64):I+=String.fromCharCode(Q+64),Ue=!1;else switch(Q!==pe.CODE_STOP&&(ae=!1),Q){case pe.CODE_FNC_1:a&&(I.length===0?I+="]C1":I+="");break;case pe.CODE_FNC_2:case pe.CODE_FNC_3:break;case pe.CODE_FNC_4_A:!Ye&&Ue?(Ye=!0,Ue=!1):Ye&&Ue?(Ye=!1,Ue=!1):Ue=!0;break;case pe.CODE_SHIFT:N=!0,x=pe.CODE_CODE_B;break;case pe.CODE_CODE_B:x=pe.CODE_CODE_B;break;case pe.CODE_CODE_C:x=pe.CODE_CODE_C;break;case pe.CODE_STOP:C=!0;break}break;case pe.CODE_CODE_B:if(Q<96)Ue===Ye?I+=String.fromCharCode(32+Q):I+=String.fromCharCode(32+Q+128),Ue=!1;else switch(Q!==pe.CODE_STOP&&(ae=!1),Q){case pe.CODE_FNC_1:a&&(I.length===0?I+="]C1":I+="");break;case pe.CODE_FNC_2:case pe.CODE_FNC_3:break;case pe.CODE_FNC_4_B:!Ye&&Ue?(Ye=!0,Ue=!1):Ye&&Ue?(Ye=!1,Ue=!1):Ue=!0;break;case pe.CODE_SHIFT:N=!0,x=pe.CODE_CODE_A;break;case pe.CODE_CODE_A:x=pe.CODE_CODE_A;break;case pe.CODE_CODE_C:x=pe.CODE_CODE_C;break;case pe.CODE_STOP:C=!0;break}break;case pe.CODE_CODE_C:if(Q<100)Q<10&&(I+="0"),I+=Q;else switch(Q!==pe.CODE_STOP&&(ae=!1),Q){case pe.CODE_FNC_1:a&&(I.length===0?I+="]C1":I+="");break;case pe.CODE_CODE_A:x=pe.CODE_CODE_A;break;case pe.CODE_CODE_B:x=pe.CODE_CODE_B;break;case pe.CODE_STOP:C=!0;break}break}fr&&(x=x===pe.CODE_CODE_A?pe.CODE_CODE_B:pe.CODE_CODE_A)}const Tt=F-R;if(F=r.getNextUnset(F),!r.isRange(F,Math.min(r.getSize(),F+(F-R)/2),!1))throw new $;if(de-=he*W,de%103!==W)throw new V;const _n=I.length;if(_n===0)throw new $;_n>0&&ae&&(x===pe.CODE_CODE_C?I=I.substring(0,_n-2):I=I.substring(0,_n-1));const vn=(l[1]+l[0])/2,ut=R+Tt/2,en=m.length,Cn=new Uint8Array(en);for(let fr=0;fr<en;fr++)Cn[fr]=m[fr];const Ri=[new Ee(vn,t),new Ee(ut,t)];return new Fe(I,Cn,0,Ri,ue.CODE_128,new Date().getTime())}}pe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],pe.MAX_AVG_VARIANCE=.25,pe.MAX_INDIVIDUAL_VARIANCE=.7,pe.CODE_SHIFT=98,pe.CODE_CODE_C=99,pe.CODE_CODE_B=100,pe.CODE_CODE_A=101,pe.CODE_FNC_1=102,pe.CODE_FNC_2=97,pe.CODE_FNC_3=96,pe.CODE_FNC_4_A=101,pe.CODE_FNC_4_B=100,pe.CODE_START_A=103,pe.CODE_START_B=104,pe.CODE_START_C=105,pe.CODE_STOP=106;class bt extends vt{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,o){let a=this.counters;a.fill(0),this.decodeRowResult="";let l=bt.findAsteriskPattern(r,a),d=r.getNextSet(l[1]),f=r.getSize(),m,x;do{bt.recordPattern(r,d,a);let z=bt.toNarrowWidePattern(a);if(z<0)throw new $;m=bt.patternToChar(z),this.decodeRowResult+=m,x=d;for(let W of a)d+=W;d=r.getNextSet(d)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let z of a)C+=z;let N=d-x-C;if(d!==f&&N*2<C)throw new $;if(this.usingCheckDigit){let z=this.decodeRowResult.length-1,W=0;for(let Q=0;Q<z;Q++)W+=bt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Q));if(this.decodeRowResult.charAt(z)!==bt.ALPHABET_STRING.charAt(W%43))throw new V;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new $;let I;this.extendedMode?I=bt.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;let R=(l[1]+l[0])/2,F=x+C/2;return new Fe(I,null,0,[new Ee(R,t),new Ee(F,t)],ue.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let o=t.getSize(),a=t.getNextSet(0),l=0,d=a,f=!1,m=r.length;for(let x=a;x<o;x++)if(t.get(x)!==f)r[l]++;else{if(l===m-1){if(this.toNarrowWidePattern(r)===bt.ASTERISK_ENCODING&&t.isRange(Math.max(0,d-Math.floor((x-d)/2)),d,!1))return[d,x];d+=r[0]+r[1],r.copyWithin(0,2,2+l-1),r[l-1]=0,r[l]=0,l--}else l++;r[l]=1,f=!f}throw new $}static toNarrowWidePattern(t){let r=t.length,o=0,a;do{let l=2147483647;for(let m of t)m<l&&m>o&&(l=m);o=l,a=0;let d=0,f=0;for(let m=0;m<r;m++){let x=t[m];x>o&&(f|=1<<r-1-m,a++,d+=x)}if(a===3){for(let m=0;m<r&&a>0;m++){let x=t[m];if(x>o&&(a--,x*2>=d))return-1}return f}}while(a>3);return-1}static patternToChar(t){for(let r=0;r<bt.CHARACTER_ENCODINGS.length;r++)if(bt.CHARACTER_ENCODINGS[r]===t)return bt.ALPHABET_STRING.charAt(r);if(t===bt.ASTERISK_ENCODING)return"*";throw new $}static decodeExtended(t){let r=t.length,o="";for(let a=0;a<r;a++){let l=t.charAt(a);if(l==="+"||l==="$"||l==="%"||l==="/"){let d=t.charAt(a+1),f="\0";switch(l){case"+":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)+32);else throw new Z;break;case"$":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)-64);else throw new Z;break;case"%":if(d>="A"&&d<="E")f=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")f=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")f=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")f="\0";else if(d==="V")f="@";else if(d==="W")f="`";else if(d==="X"||d==="Y"||d==="Z")f="";else throw new Z;break;case"/":if(d>="A"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")f=":";else throw new Z;break}o+=f,a++}else o+=l}return o}}bt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",bt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],bt.ASTERISK_ENCODING=148;class ct extends vt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,o){let a=this.decodeStart(r),l=this.decodeEnd(r),d=new Ve;ct.decodeMiddle(r,a[1],l[0],d);let f=d.toString(),m=null;o!=null&&(m=o.get(re.ALLOWED_LENGTHS)),m==null&&(m=ct.DEFAULT_ALLOWED_LENGTHS);let x=f.length,C=!1,N=0;for(let F of m){if(x===F){C=!0;break}F>N&&(N=F)}if(!C&&x>N&&(C=!0),!C)throw new Z;const I=[new Ee(a[1],t),new Ee(l[0],t)];return new Fe(f,null,0,I,ue.ITF,new Date().getTime())}static decodeMiddle(t,r,o,a){let l=new Int32Array(10),d=new Int32Array(5),f=new Int32Array(5);for(l.fill(0),d.fill(0),f.fill(0);r<o;){vt.recordPattern(t,r,l);for(let x=0;x<5;x++){let C=2*x;d[x]=l[C],f[x]=l[C+1]}let m=ct.decodeDigit(d);a.append(m.toString()),m=this.decodeDigit(f),a.append(m.toString()),l.forEach(function(x){r+=x})}}decodeStart(t){let r=ct.skipWhiteSpace(t),o=ct.findGuardPattern(t,r,ct.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(t,o[0]),o}validateQuietZone(t,r){let o=this.narrowLineWidth*10;o=o<r?o:r;for(let a=r-1;o>0&&a>=0&&!t.get(a);a--)o--;if(o!==0)throw new $}static skipWhiteSpace(t){const r=t.getSize(),o=t.getNextSet(0);if(o===r)throw new $;return o}decodeEnd(t){t.reverse();try{let r=ct.skipWhiteSpace(t),o;try{o=ct.findGuardPattern(t,r,ct.END_PATTERN_REVERSED[0])}catch(l){l instanceof $&&(o=ct.findGuardPattern(t,r,ct.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,o[0]);let a=o[0];return o[0]=t.getSize()-o[1],o[1]=t.getSize()-a,o}finally{t.reverse()}}static findGuardPattern(t,r,o){let a=o.length,l=new Int32Array(a),d=t.getSize(),f=!1,m=0,x=r;l.fill(0);for(let C=r;C<d;C++)if(t.get(C)!==f)l[m]++;else{if(m===a-1){if(vt.patternMatchVariance(l,o,ct.MAX_INDIVIDUAL_VARIANCE)<ct.MAX_AVG_VARIANCE)return[x,C];x+=l[0]+l[1],U.arraycopy(l,2,l,0,m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,f=!f}throw new $}static decodeDigit(t){let r=ct.MAX_AVG_VARIANCE,o=-1,a=ct.PATTERNS.length;for(let l=0;l<a;l++){let d=ct.PATTERNS[l],f=vt.patternMatchVariance(t,d,ct.MAX_INDIVIDUAL_VARIANCE);f<r?(r=f,o=l):f===r&&(o=-1)}if(o>=0)return o%10;throw new $}}ct.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ct.MAX_AVG_VARIANCE=.38,ct.MAX_INDIVIDUAL_VARIANCE=.5,ct.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ct.START_PATTERN=Int32Array.from([1,1,1,1]),ct.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class le extends vt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,o,a=0,l=Int32Array.from([0,0,0]);for(;!r;){l=Int32Array.from([0,0,0]),o=le.findGuardPattern(t,a,!1,this.START_END_PATTERN,l);let d=o[0];a=o[1];let f=d-(a-d);f>=0&&(r=t.isRange(f,d,!1))}return o}static checkChecksum(t){return le.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let o=parseInt(t.charAt(r-1),10);return le.getStandardUPCEANChecksum(t.substring(0,r-1))===o}static getStandardUPCEANChecksum(t){let r=t.length,o=0;for(let a=r-1;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Z;o+=l}o*=3;for(let a=r-2;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Z;o+=l}return(1e3-o)%10}static decodeEnd(t,r){return le.findGuardPattern(t,r,!1,le.START_END_PATTERN,new Int32Array(le.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,o,a){return this.findGuardPattern(t,r,o,a,new Int32Array(a.length))}static findGuardPattern(t,r,o,a,l){let d=t.getSize();r=o?t.getNextUnset(r):t.getNextSet(r);let f=0,m=r,x=a.length,C=o;for(let N=r;N<d;N++)if(t.get(N)!==C)l[f]++;else{if(f===x-1){if(vt.patternMatchVariance(l,a,le.MAX_INDIVIDUAL_VARIANCE)<le.MAX_AVG_VARIANCE)return Int32Array.from([m,N]);m+=l[0]+l[1];let I=l.slice(2,l.length-1);for(let R=0;R<f-1;R++)l[R]=I[R];l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,C=!C}throw new $}static decodeDigit(t,r,o,a){this.recordPattern(t,o,r);let l=this.MAX_AVG_VARIANCE,d=-1,f=a.length;for(let m=0;m<f;m++){let x=a[m],C=vt.patternMatchVariance(r,x,le.MAX_INDIVIDUAL_VARIANCE);C<l&&(l=C,d=m)}if(d>=0)return d;throw new $}}le.MAX_AVG_VARIANCE=.48,le.MAX_INDIVIDUAL_VARIANCE=.7,le.START_END_PATTERN=Int32Array.from([1,1,1]),le.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),le.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),le.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Te{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,o){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(r,o,a),d=a.toString(),f=Te.parseExtensionString(d),m=[new Ee((o[0]+o[1])/2,t),new Ee(l,t)],x=new Fe(d,null,0,m,ue.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&x.putAllMetadata(f),x}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),d=r[1],f=0;for(let x=0;x<5&&d<l;x++){let C=le.decodeDigit(t,a,d,le.L_AND_G_PATTERNS);o+=String.fromCharCode(48+C%10);for(let N of a)d+=N;C>=10&&(f|=1<<4-x),x!==4&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(o.length!==5)throw new $;let m=this.determineCheckDigit(f);if(Te.extensionChecksum(o.toString())!==m)throw new $;return d}static extensionChecksum(t){let r=t.length,o=0;for(let a=r-2;a>=0;a-=2)o+=t.charAt(a).charCodeAt(0)-48;o*=3;for(let a=r-1;a>=0;a-=2)o+=t.charAt(a).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new $}static parseExtensionString(t){if(t.length!==5)return null;let r=Te.parseExtension5String(t);return r==null?null:new Map([[gt.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let o=parseInt(t.substring(1)),a=(o/100).toString(),l=o%100,d=l<10?"0"+l:l.toString();return r+a+"."+d}}class tt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,o){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(r,o,a),d=a.toString(),f=tt.parseExtensionString(d),m=[new Ee((o[0]+o[1])/2,t),new Ee(l,t)],x=new Fe(d,null,0,m,ue.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&x.putAllMetadata(f),x}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),d=r[1],f=0;for(let m=0;m<2&&d<l;m++){let x=le.decodeDigit(t,a,d,le.L_AND_G_PATTERNS);o+=String.fromCharCode(48+x%10);for(let C of a)d+=C;x>=10&&(f|=1<<1-m),m!==1&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(o.length!==2)throw new $;if(parseInt(o.toString())%4!==f)throw new $;return d}static parseExtensionString(t){return t.length!==2?null:new Map([[gt.ISSUE_NUMBER,parseInt(t)]])}}class gn{static decodeRow(t,r,o){let a=le.findGuardPattern(r,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Te().decodeRow(t,r,a)}catch{return new tt().decodeRow(t,r,a)}}}gn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class it extends le{constructor(){super(),this.decodeRowStringBuffer="",it.L_AND_G_PATTERNS=it.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=it.L_PATTERNS[t-10],o=new Int32Array(r.length);for(let a=0;a<r.length;a++)o[a]=r[r.length-a-1];it.L_AND_G_PATTERNS[t]=o}}decodeRow(t,r,o){let a=it.findStartGuardPattern(r),l=o==null?null:o.get(re.NEED_RESULT_POINT_CALLBACK);if(l!=null){const ae=new Ee((a[0]+a[1])/2,t);l.foundPossibleResultPoint(ae)}let d=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=d.rowOffset,m=d.resultString;if(l!=null){const ae=new Ee(f,t);l.foundPossibleResultPoint(ae)}let x=this.decodeEnd(r,f);if(l!=null){const ae=new Ee((x[0]+x[1])/2,t);l.foundPossibleResultPoint(ae)}let C=x[1],N=C+(C-x[0]);if(N>=r.getSize()||!r.isRange(C,N,!1))throw new $;let I=m.toString();if(I.length<8)throw new Z;if(!it.checkChecksum(I))throw new V;let R=(a[1]+a[0])/2,F=(x[1]+x[0])/2,z=this.getBarcodeFormat(),W=[new Ee(R,t),new Ee(F,t)],Q=new Fe(I,null,0,W,z,new Date().getTime()),de=0;try{let ae=gn.decodeRow(t,r,x[1]);Q.putMetadata(gt.UPC_EAN_EXTENSION,ae.getText()),Q.putAllMetadata(ae.getResultMetadata()),Q.addResultPoints(ae.getResultPoints()),de=ae.getText().length}catch{}let he=o==null?null:o.get(re.ALLOWED_EAN_EXTENSIONS);if(he!=null){let ae=!1;for(let Ye in he)if(de.toString()===Ye){ae=!0;break}if(!ae)throw new $}return Q}decodeEnd(t,r){return it.findGuardPattern(t,r,!1,it.START_END_PATTERN,new Int32Array(it.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return it.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let o=parseInt(t.charAt(r-1),10);return it.getStandardUPCEANChecksum(t.substring(0,r-1))===o}static getStandardUPCEANChecksum(t){let r=t.length,o=0;for(let a=r-1;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Z;o+=l}o*=3;for(let a=r-2;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Z;o+=l}return(1e3-o)%10}}class Hr extends it{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),d=r[1],f=0;for(let x=0;x<6&&d<l;x++){let C=it.decodeDigit(t,a,d,it.L_AND_G_PATTERNS);o+=String.fromCharCode(48+C%10);for(let N of a)d+=N;C>=10&&(f|=1<<5-x)}o=Hr.determineFirstDigit(o,f),d=it.findGuardPattern(t,d,!0,it.MIDDLE_PATTERN,new Int32Array(it.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&d<l;x++){let C=it.decodeDigit(t,a,d,it.L_PATTERNS);o+=String.fromCharCode(48+C);for(let N of a)d+=N}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return ue.EAN_13}static determineFirstDigit(t,r){for(let o=0;o<10;o++)if(r===this.FIRST_DIGIT_ENCODINGS[o])return t=String.fromCharCode(48+o)+t,t;throw new $}}Hr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ta extends it{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,o){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),d=r[1];for(let m=0;m<4&&d<l;m++){let x=it.decodeDigit(t,a,d,it.L_PATTERNS);o+=String.fromCharCode(48+x);for(let C of a)d+=C}d=it.findGuardPattern(t,d,!0,it.MIDDLE_PATTERN,new Int32Array(it.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&d<l;m++){let x=it.decodeDigit(t,a,d,it.L_PATTERNS);o+=String.fromCharCode(48+x);for(let C of a)d+=C}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return ue.EAN_8}}class Ma extends it{constructor(){super(...arguments),this.ean13Reader=new Hr}getBarcodeFormat(){return ue.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,o))}decodeMiddle(t,r,o){return this.ean13Reader.decodeMiddle(t,r,o)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let o=new Fe(r.substring(1),null,null,t.getResultPoints(),ue.UPC_A);return t.getResultMetadata()!=null&&o.putAllMetadata(t.getResultMetadata()),o}else throw new $}reset(){this.ean13Reader.reset()}}class Gn extends it{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,o){const a=this.decodeMiddleCounters.map(x=>x);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const l=t.getSize();let d=r[1],f=0;for(let x=0;x<6&&d<l;x++){const C=Gn.decodeDigit(t,a,d,Gn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+C%10);for(let N of a)d+=N;C>=10&&(f|=1<<5-x)}let m=Gn.determineNumSysAndCheckDigit(o,f);return{rowOffset:d,resultString:m}}decodeEnd(t,r){return Gn.findGuardPatternWithoutCounters(t,r,!0,Gn.MIDDLE_END_PATTERN)}checkChecksum(t){return it.checkChecksum(Gn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let o=0;o<=1;o++)for(let a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][a]){let l=String.fromCharCode(48+o),d=String.fromCharCode(48+a);return l+t+d}throw $.getNotFoundInstance()}getBarcodeFormat(){return ue.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(l=>l.charCodeAt(0)),o=new Ve;o.append(t.charAt(0));let a=r[5];switch(a){case 0:case 1:case 2:o.appendChars(r,0,2),o.append(a),o.append("0000"),o.appendChars(r,2,3);break;case 3:o.appendChars(r,0,3),o.append("00000"),o.appendChars(r,3,2);break;case 4:o.appendChars(r,0,4),o.append("00000"),o.append(r[4]);break;default:o.appendChars(r,0,5),o.append("0000"),o.append(a);break}return t.length>=8&&o.append(t.charAt(7)),o.toString()}}Gn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Gn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class wo extends vt{constructor(t){super();let r=t==null?null:t.get(re.POSSIBLE_FORMATS),o=[];u(r)?(o.push(new Hr),o.push(new Ma),o.push(new Ta),o.push(new Gn)):(r.indexOf(ue.EAN_13)>-1&&o.push(new Hr),r.indexOf(ue.UPC_A)>-1&&o.push(new Ma),r.indexOf(ue.EAN_8)>-1&&o.push(new Ta),r.indexOf(ue.UPC_E)>-1&&o.push(new Gn)),this.readers=o}decodeRow(t,r,o){for(let a of this.readers)try{const l=a.decodeRow(t,r,o),d=l.getBarcodeFormat()===ue.EAN_13&&l.getText().charAt(0)==="0",f=o==null?null:o.get(re.POSSIBLE_FORMATS),m=f==null||f.includes(ue.UPC_A);if(d&&m){const x=l.getRawBytes(),C=new Fe(l.getText().substring(1),x,x?x.length:null,l.getResultPoints(),ue.UPC_A);return C.putAllMetadata(l.getResultMetadata()),C}return l}catch{}throw new $}reset(){for(let t of this.readers)t.reset()}}class sn extends vt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let o=0;o<r.length;o++)if(vt.patternMatchVariance(t,r[o],sn.MAX_INDIVIDUAL_VARIANCE)<sn.MAX_AVG_VARIANCE)return o;throw new $}static count(t){return Ke.sum(new Int32Array(t))}static increment(t,r){let o=0,a=r[0];for(let l=1;l<t.length;l++)r[l]>a&&(a=r[l],o=l);t[o]++}static decrement(t,r){let o=0,a=r[0];for(let l=1;l<t.length;l++)r[l]<a&&(a=r[l],o=l);t[o]--}static isFinderPattern(t){let r=t[0]+t[1],o=r+t[2]+t[3],a=r/o;if(a>=sn.MIN_FINDER_PATTERN_RATIO&&a<=sn.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let f of t)f>d&&(d=f),f<l&&(l=f);return d<10*l}return!1}}sn.MAX_AVG_VARIANCE=.2,sn.MAX_INDIVIDUAL_VARIANCE=.45,sn.MIN_FINDER_PATTERN_RATIO=9.5/12,sn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Si{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Si))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class bi{constructor(t,r,o,a,l){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ee(o,l)),this.resultPoints.push(new Ee(a,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof bi))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class or{constructor(){}static getRSSvalue(t,r,o){let a=0;for(let m of t)a+=m;let l=0,d=0,f=t.length;for(let m=0;m<f-1;m++){let x;for(x=1,d|=1<<m;x<t[m];x++,d&=~(1<<m)){let C=or.combins(a-x-1,f-m-2);if(o&&d===0&&a-x-(f-m-1)>=f-m-1&&(C-=or.combins(a-x-(f-m),f-m-2)),f-m-1>1){let N=0;for(let I=a-x-(f-m-2);I>r;I--)N+=or.combins(a-x-I-1,f-m-3);C-=N*(f-1-m)}else a-x>r&&C--;l+=C}a-=x}return l}static combins(t,r){let o,a;t-r>r?(a=r,o=t-r):(a=t-r,o=r);let l=1,d=1;for(let f=t;f>o;f--)l*=f,d<=a&&(l/=d,d++);for(;d<=a;)l/=d,d++;return l}}class fc{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let o=12*r,a=new X(o),l=0,f=t[0].getRightChar().getValue();for(let m=11;m>=0;--m)f&1<<m&&a.set(l),l++;for(let m=1;m<t.length;++m){let x=t[m],C=x.getLeftChar().getValue();for(let N=11;N>=0;--N)C&1<<N&&a.set(l),l++;if(x.getRightChar()!=null){let N=x.getRightChar().getValue();for(let I=11;I>=0;--I)N&1<<I&&a.set(l),l++}}return a}}class ti{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class _o{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Nt extends _o{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===Nt.FNC1}}Nt.FNC1="$";class Ne extends _o{constructor(t,r,o){super(t),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Nn extends _o{constructor(t,r,o){if(super(t),r<0||r>10||o<0||o>10)throw new Z;this.firstDigit=r,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Nn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Nn.FNC1}isAnyFNC1(){return this.firstDigit===Nn.FNC1||this.secondDigit===Nn.FNC1}}Nn.FNC1=10;class ve{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new $;let r=t.substring(0,2);for(let l of ve.TWO_DIGIT_DATA_LENGTH)if(l[0]===r)return l[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(2,l[2],t):ve.processFixedAI(2,l[1],t);if(t.length<3)throw new $;let o=t.substring(0,3);for(let l of ve.THREE_DIGIT_DATA_LENGTH)if(l[0]===o)return l[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(3,l[2],t):ve.processFixedAI(3,l[1],t);for(let l of ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===o)return l[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(4,l[2],t):ve.processFixedAI(4,l[1],t);if(t.length<4)throw new $;let a=t.substring(0,4);for(let l of ve.FOUR_DIGIT_DATA_LENGTH)if(l[0]===a)return l[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(4,l[2],t):ve.processFixedAI(4,l[1],t);throw new $}static processFixedAI(t,r,o){if(o.length<t)throw new $;let a=o.substring(0,t);if(o.length<t+r)throw new $;let l=o.substring(t,t+r),d=o.substring(t+r),f="("+a+")"+l,m=ve.parseFieldsInGeneralPurpose(d);return m==null?f:f+m}static processVariableAI(t,r,o){let a=o.substring(0,t),l;o.length<t+r?l=o.length:l=t+r;let d=o.substring(t,l),f=o.substring(l),m="("+a+")"+d,x=ve.parseFieldsInGeneralPurpose(f);return x==null?m:m+x}}ve.VARIABLE_LENGTH=[],ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ve.VARIABLE_LENGTH,20],["22",ve.VARIABLE_LENGTH,29],["30",ve.VARIABLE_LENGTH,8],["37",ve.VARIABLE_LENGTH,8],["90",ve.VARIABLE_LENGTH,30],["91",ve.VARIABLE_LENGTH,30],["92",ve.VARIABLE_LENGTH,30],["93",ve.VARIABLE_LENGTH,30],["94",ve.VARIABLE_LENGTH,30],["95",ve.VARIABLE_LENGTH,30],["96",ve.VARIABLE_LENGTH,30],["97",ve.VARIABLE_LENGTH,3],["98",ve.VARIABLE_LENGTH,30],["99",ve.VARIABLE_LENGTH,30]],ve.THREE_DIGIT_DATA_LENGTH=[["240",ve.VARIABLE_LENGTH,30],["241",ve.VARIABLE_LENGTH,30],["242",ve.VARIABLE_LENGTH,6],["250",ve.VARIABLE_LENGTH,30],["251",ve.VARIABLE_LENGTH,30],["253",ve.VARIABLE_LENGTH,17],["254",ve.VARIABLE_LENGTH,20],["400",ve.VARIABLE_LENGTH,30],["401",ve.VARIABLE_LENGTH,30],["402",17],["403",ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ve.VARIABLE_LENGTH,20],["421",ve.VARIABLE_LENGTH,15],["422",3],["423",ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ve.VARIABLE_LENGTH,15],["391",ve.VARIABLE_LENGTH,18],["392",ve.VARIABLE_LENGTH,15],["393",ve.VARIABLE_LENGTH,18],["703",ve.VARIABLE_LENGTH,30]],ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ve.VARIABLE_LENGTH,20],["8003",ve.VARIABLE_LENGTH,30],["8004",ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ve.VARIABLE_LENGTH,30],["8008",ve.VARIABLE_LENGTH,12],["8018",18],["8020",ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ve.VARIABLE_LENGTH,70],["8200",ve.VARIABLE_LENGTH,70]];class ni{constructor(t){this.buffer=new Ve,this.information=t}decodeAllCodes(t,r){let o=r,a=null;do{let l=this.decodeGeneralPurposeField(o,a),d=ve.parseFieldsInGeneralPurpose(l.getNewString());if(d!=null&&t.append(d),l.isRemaining()?a=""+l.getRemainingValue():a=null,o===l.getNewPosition())break;o=l.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(t,4);return l===0?new Nn(this.information.getSize(),Nn.FNC1,Nn.FNC1):new Nn(this.information.getSize(),l-1,Nn.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),o=(r-8)/11,a=(r-8)%11;return new Nn(t+7,o,a)}extractNumericValueFromBitArray(t,r){return ni.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,o){let a=0;for(let l=0;l<o;++l)t.get(r+l)&&(a|=1<<o-l-1);return a}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Ne(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Ne(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let o=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(o!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new Ne(this.current.getPosition(),this.buffer.toString()):r=new Ne(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new ti(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new Ne(this.current.getPosition(),this.buffer.toString());return new ti(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ti(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Ne(this.current.getPosition(),this.buffer.toString());return new ti(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ti(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Ne(this.current.getPosition(),this.buffer.toString());return new ti(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ti(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<116)return!0;if(t+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,8);return a>=232&&a<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Nt(t+5,Nt.FNC1);if(r>=5&&r<15)return new Nt(t+5,"0"+(r-5));let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<90)return new Nt(t+7,""+(o+1));if(o>=90&&o<116)return new Nt(t+7,""+(o+7));let a=this.extractNumericValueFromBitArray(t,8),l;switch(a){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new Z}return new Nt(t+8,l)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,6);return o>=16&&o<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Nt(t+5,Nt.FNC1);if(r>=5&&r<15)return new Nt(t+5,"0"+(r-5));let o=this.extractNumericValueFromBitArray(t,6);if(o>=32&&o<58)return new Nt(t+6,""+(o+33));let a;switch(o){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new yn("Decoding invalid alphanumeric value: "+o)}return new Nt(t+6,a)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class Ts{constructor(t){this.information=t,this.generalDecoder=new ni(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class on extends Ts{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let o=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,o)}encodeCompressedGtinWithoutAI(t,r,o){for(let a=0;a<4;++a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);l/100===0&&t.append("0"),l/10===0&&t.append("0"),t.append(l)}on.appendCheckDigit(t,o)}static appendCheckDigit(t,r){let o=0;for(let a=0;a<13;a++){let l=t.charAt(a+r).charCodeAt(0)-48;o+=a&1?l:3*l}o=10-o%10,o===10&&(o=0),t.append(o)}}on.GTIN_SIZE=40;class ri extends on{constructor(t){super(t)}parseInformation(){let t=new Ve;t.append("(01)");let r=t.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(ri.HEADER_SIZE,4);return t.append(o),this.encodeCompressedGtinWithoutAI(t,ri.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,ri.HEADER_SIZE+44)}}ri.HEADER_SIZE=4;class Ar extends Ts{constructor(t){super(t)}parseInformation(){let t=new Ve;return this.getGeneralDecoder().decodeAllCodes(t,Ar.HEADER_SIZE)}}Ar.HEADER_SIZE=5;class is extends on{constructor(t){super(t)}encodeCompressedWeight(t,r,o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,o);this.addWeightCode(t,a);let l=this.checkWeight(a),d=1e5;for(let f=0;f<5;++f)l/d===0&&t.append("0"),d/=10;t.append(l)}}class ar extends is{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=ar.HEADER_SIZE+is.GTIN_SIZE+ar.WEIGHT_SIZE)throw new $;let t=new Ve;return this.encodeCompressedGtin(t,ar.HEADER_SIZE),this.encodeCompressedWeight(t,ar.HEADER_SIZE+is.GTIN_SIZE,ar.WEIGHT_SIZE),t.toString()}}ar.HEADER_SIZE=5,ar.WEIGHT_SIZE=15;class gc extends ar{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class pc extends ar{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class lr extends on{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<lr.HEADER_SIZE+on.GTIN_SIZE)throw new $;let t=new Ve;this.encodeCompressedGtin(t,lr.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(lr.HEADER_SIZE+on.GTIN_SIZE,lr.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(lr.HEADER_SIZE+on.GTIN_SIZE+lr.LAST_DIGIT_SIZE,null);return t.append(o.getNewString()),t.toString()}}lr.HEADER_SIZE=8,lr.LAST_DIGIT_SIZE=2;class an extends on{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<an.HEADER_SIZE+on.GTIN_SIZE)throw new $;let t=new Ve;this.encodeCompressedGtin(t,an.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(an.HEADER_SIZE+on.GTIN_SIZE,an.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(an.HEADER_SIZE+on.GTIN_SIZE+an.LAST_DIGIT_SIZE,an.FIRST_THREE_DIGITS_SIZE);o/100==0&&t.append("0"),o/10==0&&t.append("0"),t.append(o);let a=this.getGeneralDecoder().decodeGeneralPurposeField(an.HEADER_SIZE+on.GTIN_SIZE+an.LAST_DIGIT_SIZE+an.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()}}an.HEADER_SIZE=8,an.LAST_DIGIT_SIZE=2,an.FIRST_THREE_DIGITS_SIZE=10;class Ct extends is{constructor(t,r,o){super(t),this.dateCode=o,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=Ct.HEADER_SIZE+Ct.GTIN_SIZE+Ct.WEIGHT_SIZE+Ct.DATE_SIZE)throw new $;let t=new Ve;return this.encodeCompressedGtin(t,Ct.HEADER_SIZE),this.encodeCompressedWeight(t,Ct.HEADER_SIZE+Ct.GTIN_SIZE,Ct.WEIGHT_SIZE),this.encodeCompressedDate(t,Ct.HEADER_SIZE+Ct.GTIN_SIZE+Ct.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,Ct.DATE_SIZE);if(o==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let a=o%32;o/=32;let l=o%12+1;o/=12;let d=o;d/10==0&&t.append("0"),t.append(d),l/10==0&&t.append("0"),t.append(l),a/10==0&&t.append("0"),t.append(a)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}Ct.HEADER_SIZE=8,Ct.WEIGHT_SIZE=20,Ct.DATE_SIZE=16;function ss(b){try{if(b.get(1))return new ri(b);if(!b.get(2))return new Ar(b);switch(ni.extractNumericValueFromBitArray(b,1,4)){case 4:return new gc(b);case 5:return new pc(b)}switch(ni.extractNumericValueFromBitArray(b,1,5)){case 12:return new lr(b);case 13:return new an(b)}switch(ni.extractNumericValueFromBitArray(b,1,7)){case 56:return new Ct(b,"310","11");case 57:return new Ct(b,"320","11");case 58:return new Ct(b,"310","13");case 59:return new Ct(b,"320","13");case 60:return new Ct(b,"310","15");case 61:return new Ct(b,"320","15");case 62:return new Ct(b,"310","17");case 63:return new Ct(b,"320","17")}}catch(t){throw console.log(t),new yn("unknown decoder: "+b)}}class Vr{constructor(t,r,o,a){this.leftchar=t,this.rightchar=r,this.finderpattern=o,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof Vr?Vr.equalsOrNull(t.leftchar,r.leftchar)&&Vr.equalsOrNull(t.rightchar,r.rightchar)&&Vr.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:Vr.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class vo{constructor(t,r,o){this.pairs=t,this.rowNumber=r,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof vo?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let o;return t.forEach((a,l)=>{r.forEach(d=>{a.getLeftChar().getValue()===d.getLeftChar().getValue()&&a.getRightChar().getValue()===d.getRightChar().getValue()&&a.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(o=!0)})}),o}}class ie extends sn{constructor(t){super(...arguments),this.pairs=new Array(ie.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,o){this.pairs.length=0,this.startFromEven=!1;try{return ie.constructResult(this.decodeRow2pairs(t,r))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,ie.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(l){if(l instanceof $){if(!this.pairs.length)throw new $;o=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new $}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let o=r;o<this.rows.length;o++){let a=this.rows[o];this.pairs.length=0;for(let d of t)this.pairs.push(d.getPairs());if(this.pairs.push(a.getPairs()),!ie.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(t);l.push(a);try{return this.checkRows(l,o+1)}catch(d){this.verbose&&console.log(d)}}throw new $}static isValidSequence(t){for(let r of ie.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let o=!0;for(let a=0;a<t.length;a++)if(t[a].getFinderPattern().getValue()!=r[a]){o=!1;break}if(o)return!0}return!1}storeRow(t,r){let o=0,a=!1,l=!1;for(;o<this.rows.length;){let d=this.rows[o];if(d.getRowNumber()>t){l=d.isEquivalent(this.pairs);break}a=d.isEquivalent(this.pairs),o++}l||a||ie.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new vo(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let o of r)if(o.getPairs().length!==t.length){for(let a of o.getPairs())for(let l of t)if(Vr.equals(a,l))break}}static isPartialRow(t,r){for(let o of r){let a=!0;for(let l of t){let d=!1;for(let f of o.getPairs())if(l.equals(f)){d=!0;break}if(!d){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=fc.buildBitArray(t),a=ss(r).parseInformation(),l=t[0].getFinderPattern().getResultPoints(),d=t[t.length-1].getFinderPattern().getResultPoints(),f=[l[0],l[1],d[0],d[1]];return new Fe(a,null,null,f,ue.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),o=t.getRightChar();if(o==null)return!1;let a=o.getChecksumPortion(),l=2;for(let f=1;f<this.pairs.size();++f){let m=this.pairs.get(f);a+=m.getLeftChar().getChecksumPortion(),l++;let x=m.getRightChar();x!=null&&(a+=x.getChecksumPortion(),l++)}return a%=211,211*(l-4)+a==r.getValue()}static getNextSecondBar(t,r){let o;return t.get(r)?(o=t.getNextUnset(r),o=t.getNextSet(o)):(o=t.getNextSet(r),o=t.getNextUnset(o)),o}retrieveNextPair(t,r,o){let a=r.length%2==0;this.startFromEven&&(a=!a);let l,d=!0,f=-1;do this.findNextPair(t,r,f),l=this.parseFoundFinderPattern(t,o,a),l==null?f=ie.getNextSecondBar(t,this.startEnd[0]):d=!1;while(d);let m=this.decodeDataCharacter(t,l,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new $;let x;try{x=this.decodeDataCharacter(t,l,a,!1)}catch(C){x=null,this.verbose&&console.log(C)}return new Vr(m,x,l,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,o){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),d;o>=0?d=o:this.isEmptyPair(r)?d=0:d=r[r.length-1].getFinderPattern().getStartEnd()[1];let f=r.length%2!=0;this.startFromEven&&(f=!f);let m=!1;for(;d<l&&(m=!t.get(d),!!m);)d++;let x=0,C=d;for(let N=d;N<l;N++)if(t.get(N)!=m)a[x]++;else{if(x==3){if(f&&ie.reverseCounters(a),ie.isFinderPattern(a)){this.startEnd[0]=C,this.startEnd[1]=N;return}f&&ie.reverseCounters(a),C+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,x--}else x++;a[x]=1,m=!m}throw new $}static reverseCounters(t){let r=t.length;for(let o=0;o<r/2;++o){let a=t[o];t[o]=t[r-o-1],t[r-o-1]=a}}parseFoundFinderPattern(t,r,o){let a,l,d;if(o){let x=this.startEnd[0]-1;for(;x>=0&&!t.get(x);)x--;x++,a=this.startEnd[0]-x,l=x,d=this.startEnd[1]}else l=this.startEnd[0],d=t.getNextUnset(this.startEnd[1]+1),a=d-this.startEnd[1];let f=this.getDecodeFinderCounters();U.arraycopy(f,0,f,1,f.length-1),f[0]=a;let m;try{m=this.parseFinderValue(f,ie.FINDER_PATTERNS)}catch{return null}return new bi(m,[l,d],l,d,r)}decodeDataCharacter(t,r,o,a){let l=this.getDataCharacterCounters();for(let ut=0;ut<l.length;ut++)l[ut]=0;if(a)ie.recordPatternInReverse(t,r.getStartEnd()[0],l);else{ie.recordPattern(t,r.getStartEnd()[1],l);for(let ut=0,en=l.length-1;ut<en;ut++,en--){let Cn=l[ut];l[ut]=l[en],l[en]=Cn}}let d=17,f=Ke.sum(new Int32Array(l))/d,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(f-m)/m>.3)throw new $;let x=this.getOddCounts(),C=this.getEvenCounts(),N=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let ut=0;ut<l.length;ut++){let en=1*l[ut]/f,Cn=en+.5;if(Cn<1){if(en<.3)throw new $;Cn=1}else if(Cn>8){if(en>8.7)throw new $;Cn=8}let Ri=ut/2;ut&1?(C[Ri]=Cn,I[Ri]=en-Cn):(x[Ri]=Cn,N[Ri]=en-Cn)}this.adjustOddEvenCounts(d);let R=4*r.getValue()+(o?0:2)+(a?0:1)-1,F=0,z=0;for(let ut=x.length-1;ut>=0;ut--){if(ie.isNotA1left(r,o,a)){let en=ie.WEIGHTS[R][2*ut];z+=x[ut]*en}F+=x[ut]}let W=0;for(let ut=C.length-1;ut>=0;ut--)if(ie.isNotA1left(r,o,a)){let en=ie.WEIGHTS[R][2*ut+1];W+=C[ut]*en}let Q=z+W;if(F&1||F>13||F<4)throw new $;let de=(13-F)/2,he=ie.SYMBOL_WIDEST[de],ae=9-he,Ye=or.getRSSvalue(x,he,!0),Ue=or.getRSSvalue(C,ae,!1),Tt=ie.EVEN_TOTAL_SUBSET[de],_n=ie.GSUM[de],vn=Ye*Tt+Ue+_n;return new Si(vn,Q)}static isNotA1left(t,r,o){return!(t.getValue()==0&&r&&o)}adjustOddEvenCounts(t){let r=Ke.sum(new Int32Array(this.getOddCounts())),o=Ke.sum(new Int32Array(this.getEvenCounts())),a=!1,l=!1;r>13?l=!0:r<4&&(a=!0);let d=!1,f=!1;o>13?f=!0:o<4&&(d=!0);let m=r+o-t,x=(r&1)==1,C=(o&1)==0;if(m==1)if(x){if(C)throw new $;l=!0}else{if(!C)throw new $;f=!0}else if(m==-1)if(x){if(C)throw new $;a=!0}else{if(!C)throw new $;d=!0}else if(m==0){if(x){if(!C)throw new $;r<o?(a=!0,f=!0):(l=!0,d=!0)}else if(C)throw new $}else throw new $;if(a){if(l)throw new $;ie.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&ie.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(f)throw new $;ie.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&ie.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ie.SYMBOL_WIDEST=[7,5,4,3,1],ie.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ie.GSUM=[0,348,1388,2948,3988],ie.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ie.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ie.FINDER_PAT_A=0,ie.FINDER_PAT_B=1,ie.FINDER_PAT_C=2,ie.FINDER_PAT_D=3,ie.FINDER_PAT_E=4,ie.FINDER_PAT_F=5,ie.FINDER_PATTERN_SEQUENCES=[[ie.FINDER_PAT_A,ie.FINDER_PAT_A],[ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B],[ie.FINDER_PAT_A,ie.FINDER_PAT_C,ie.FINDER_PAT_B,ie.FINDER_PAT_D],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_C],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_D,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_D],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_E],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F]],ie.MAX_PAIRS=11;class mc extends Si{constructor(t,r,o){super(t,r),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Lt extends sn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,o){const a=this.decodePair(r,!1,t,o);Lt.addOrTally(this.possibleLeftPairs,a),r.reverse();let l=this.decodePair(r,!0,t,o);Lt.addOrTally(this.possibleRightPairs,l),r.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&Lt.checkChecksum(d,f))return Lt.constructResult(d,f)}throw new $}static addOrTally(t,r){if(r==null)return;let o=!1;for(let a of t)if(a.getValue()===r.getValue()){a.incrementCount(),o=!0;break}o||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let o=4537077*t.getValue()+r.getValue(),a=new String(o).toString(),l=new Ve;for(let x=13-a.length;x>0;x--)l.append("0");l.append(a);let d=0;for(let x=0;x<13;x++){let C=l.charAt(x).charCodeAt(0)-48;d+=x&1?C:3*C}d=10-d%10,d===10&&(d=0),l.append(d.toString());let f=t.getFinderPattern().getResultPoints(),m=r.getFinderPattern().getResultPoints();return new Fe(l.toString(),null,0,[f[0],f[1],m[0],m[1]],ue.RSS_14,new Date().getTime())}static checkChecksum(t,r){let o=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,o===a}decodePair(t,r,o,a){try{let l=this.findFinderPattern(t,r),d=this.parseFoundFinderPattern(t,o,r,l),f=a==null?null:a.get(re.NEED_RESULT_POINT_CALLBACK);if(f!=null){let C=(l[0]+l[1])/2;r&&(C=t.getSize()-1-C),f.foundPossibleResultPoint(new Ee(C,o))}let m=this.decodeDataCharacter(t,d,!0),x=this.decodeDataCharacter(t,d,!1);return new mc(1597*m.getValue()+x.getValue(),m.getChecksumPortion()+4*x.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(t,r,o){let a=this.getDataCharacterCounters();for(let W=0;W<a.length;W++)a[W]=0;if(o)vt.recordPatternInReverse(t,r.getStartEnd()[0],a);else{vt.recordPattern(t,r.getStartEnd()[1]+1,a);for(let W=0,Q=a.length-1;W<Q;W++,Q--){let de=a[W];a[W]=a[Q],a[Q]=de}}let l=o?16:15,d=Ke.sum(new Int32Array(a))/l,f=this.getOddCounts(),m=this.getEvenCounts(),x=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let W=0;W<a.length;W++){let Q=a[W]/d,de=Math.floor(Q+.5);de<1?de=1:de>8&&(de=8);let he=Math.floor(W/2);W&1?(m[he]=de,C[he]=Q-de):(f[he]=de,x[he]=Q-de)}this.adjustOddEvenCounts(o,l);let N=0,I=0;for(let W=f.length-1;W>=0;W--)I*=9,I+=f[W],N+=f[W];let R=0,F=0;for(let W=m.length-1;W>=0;W--)R*=9,R+=m[W],F+=m[W];let z=I+3*R;if(o){if(N&1||N>12||N<4)throw new $;let W=(12-N)/2,Q=Lt.OUTSIDE_ODD_WIDEST[W],de=9-Q,he=or.getRSSvalue(f,Q,!1),ae=or.getRSSvalue(m,de,!0),Ye=Lt.OUTSIDE_EVEN_TOTAL_SUBSET[W],Ue=Lt.OUTSIDE_GSUM[W];return new Si(he*Ye+ae+Ue,z)}else{if(F&1||F>10||F<4)throw new $;let W=(10-F)/2,Q=Lt.INSIDE_ODD_WIDEST[W],de=9-Q,he=or.getRSSvalue(f,Q,!0),ae=or.getRSSvalue(m,de,!1),Ye=Lt.INSIDE_ODD_TOTAL_SUBSET[W],Ue=Lt.INSIDE_GSUM[W];return new Si(ae*Ye+he+Ue,z)}}findFinderPattern(t,r){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),l=!1,d=0;for(;d<a&&(l=!t.get(d),r!==l);)d++;let f=0,m=d;for(let x=d;x<a;x++)if(t.get(x)!==l)o[f]++;else{if(f===3){if(sn.isFinderPattern(o))return[m,x];m+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,l=!l}throw new $}parseFoundFinderPattern(t,r,o,a){let l=t.get(a[0]),d=a[0]-1;for(;d>=0&&l!==t.get(d);)d--;d++;const f=a[0]-d,m=this.getDecodeFinderCounters(),x=new Int32Array(m.length);U.arraycopy(m,0,x,1,m.length-1),x[0]=f;const C=this.parseFinderValue(x,Lt.FINDER_PATTERNS);let N=d,I=a[1];return o&&(N=t.getSize()-1-N,I=t.getSize()-1-I),new bi(C,[d,a[1]],N,I,r)}adjustOddEvenCounts(t,r){let o=Ke.sum(new Int32Array(this.getOddCounts())),a=Ke.sum(new Int32Array(this.getEvenCounts())),l=!1,d=!1,f=!1,m=!1;t?(o>12?d=!0:o<4&&(l=!0),a>12?m=!0:a<4&&(f=!0)):(o>11?d=!0:o<5&&(l=!0),a>10?m=!0:a<4&&(f=!0));let x=o+a-r,C=(o&1)===(t?1:0),N=(a&1)===1;if(x===1)if(C){if(N)throw new $;d=!0}else{if(!N)throw new $;m=!0}else if(x===-1)if(C){if(N)throw new $;l=!0}else{if(!N)throw new $;f=!0}else if(x===0){if(C){if(!N)throw new $;o<a?(l=!0,m=!0):(d=!0,f=!0)}else if(N)throw new $}else throw new $;if(l){if(d)throw new $;sn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&sn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new $;sn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&sn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Lt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Lt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Lt.OUTSIDE_GSUM=[0,161,961,2015,2715],Lt.INSIDE_GSUM=[0,336,1036,1516],Lt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Lt.INSIDE_ODD_WIDEST=[2,4,6,8],Lt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Zr extends vt{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const o=t?t.get(re.POSSIBLE_FORMATS):null,a=t&&t.get(re.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ue.EAN_13)||o.includes(ue.UPC_A)||o.includes(ue.EAN_8)||o.includes(ue.UPC_E))&&this.readers.push(new wo(t)),o.includes(ue.CODE_39)&&this.readers.push(new bt(a)),o.includes(ue.CODE_128)&&this.readers.push(new pe),o.includes(ue.ITF)&&this.readers.push(new ct),o.includes(ue.RSS_14)&&this.readers.push(new Lt),o.includes(ue.RSS_EXPANDED)&&this.readers.push(new ie(this.verbose))):(this.readers.push(new wo(t)),this.readers.push(new bt),this.readers.push(new wo(t)),this.readers.push(new pe),this.readers.push(new ct),this.readers.push(new Lt),this.readers.push(new ie(this.verbose)))}decodeRow(t,r,o){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,o)}catch{}throw new $}reset(){this.readers.forEach(t=>t.reset())}}class os extends dt{constructor(t=500,r){super(new Zr(r),t,r)}}class at{constructor(t,r,o){this.ecCodewords=t,this.ecBlocks=[r],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class st{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(t,r,o,a,l,d){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=o,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=l,this.ecBlocks=d;let f=0;const m=d.getECCodewords(),x=d.getECBlocks();for(let C of x)f+=C.getCount()*(C.getDataCodewords()+m);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if(t&1||r&1)throw new Z;for(let o of Ze.VERSIONS)if(o.symbolSizeRows===t&&o.symbolSizeColumns===r)return o;throw new Z}toString(){return""+this.versionNumber}static buildVersions(){return[new Ze(1,10,10,8,8,new at(5,new st(1,3))),new Ze(2,12,12,10,10,new at(7,new st(1,5))),new Ze(3,14,14,12,12,new at(10,new st(1,8))),new Ze(4,16,16,14,14,new at(12,new st(1,12))),new Ze(5,18,18,16,16,new at(14,new st(1,18))),new Ze(6,20,20,18,18,new at(18,new st(1,22))),new Ze(7,22,22,20,20,new at(20,new st(1,30))),new Ze(8,24,24,22,22,new at(24,new st(1,36))),new Ze(9,26,26,24,24,new at(28,new st(1,44))),new Ze(10,32,32,14,14,new at(36,new st(1,62))),new Ze(11,36,36,16,16,new at(42,new st(1,86))),new Ze(12,40,40,18,18,new at(48,new st(1,114))),new Ze(13,44,44,20,20,new at(56,new st(1,144))),new Ze(14,48,48,22,22,new at(68,new st(1,174))),new Ze(15,52,52,24,24,new at(42,new st(2,102))),new Ze(16,64,64,14,14,new at(56,new st(2,140))),new Ze(17,72,72,16,16,new at(36,new st(4,92))),new Ze(18,80,80,18,18,new at(48,new st(4,114))),new Ze(19,88,88,20,20,new at(56,new st(4,144))),new Ze(20,96,96,22,22,new at(68,new st(4,174))),new Ze(21,104,104,24,24,new at(56,new st(6,136))),new Ze(22,120,120,18,18,new at(68,new st(6,175))),new Ze(23,132,132,20,20,new at(62,new st(8,163))),new Ze(24,144,144,22,22,new at(62,new st(8,156),new st(2,155))),new Ze(25,8,18,6,16,new at(7,new st(1,5))),new Ze(26,8,32,6,14,new at(11,new st(1,10))),new Ze(27,12,26,10,24,new at(14,new st(1,16))),new Ze(28,12,36,10,16,new at(18,new st(1,22))),new Ze(29,16,36,14,16,new at(24,new st(1,32))),new Ze(30,16,48,14,22,new at(28,new st(1,49)))]}}Ze.VERSIONS=Ze.buildVersions();class et{constructor(t){const r=t.getHeight();if(r<8||r>144||r&1)throw new Z;this.version=et.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Le(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),o=t.getWidth();return Ze.getVersionForDimensions(r,o)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,o=4,a=0;const l=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let f=!1,m=!1,x=!1,C=!1;do if(o===l&&a===0&&!f)t[r++]=this.readCorner1(l,d)&255,o-=2,a+=2,f=!0;else if(o===l-2&&a===0&&d&3&&!m)t[r++]=this.readCorner2(l,d)&255,o-=2,a+=2,m=!0;else if(o===l+4&&a===2&&!(d&7)&&!x)t[r++]=this.readCorner3(l,d)&255,o-=2,a+=2,x=!0;else if(o===l-2&&a===0&&(d&7)===4&&!C)t[r++]=this.readCorner4(l,d)&255,o-=2,a+=2,C=!0;else{do o<l&&a>=0&&!this.readMappingMatrix.get(a,o)&&(t[r++]=this.readUtah(o,a,l,d)&255),o-=2,a+=2;while(o>=0&&a<d);o+=1,a+=3;do o>=0&&a<d&&!this.readMappingMatrix.get(a,o)&&(t[r++]=this.readUtah(o,a,l,d)&255),o+=2,a-=2;while(o<l&&a>=0);o+=3,a+=1}while(o<l||a<d);if(r!==this.version.getTotalCodewords())throw new Z;return t}readModule(t,r,o,a){return t<0&&(t+=o,r+=4-(o+4&7)),r<0&&(r+=a,t+=4-(a+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,o,a){let l=0;return this.readModule(t-2,r-2,o,a)&&(l|=1),l<<=1,this.readModule(t-2,r-1,o,a)&&(l|=1),l<<=1,this.readModule(t-1,r-2,o,a)&&(l|=1),l<<=1,this.readModule(t-1,r-1,o,a)&&(l|=1),l<<=1,this.readModule(t-1,r,o,a)&&(l|=1),l<<=1,this.readModule(t,r-2,o,a)&&(l|=1),l<<=1,this.readModule(t,r-1,o,a)&&(l|=1),l<<=1,this.readModule(t,r,o,a)&&(l|=1),l}readCorner1(t,r){let o=0;return this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,1,t,r)&&(o|=1),o<<=1,this.readModule(t-1,2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(2,r-1,t,r)&&(o|=1),o<<=1,this.readModule(3,r-1,t,r)&&(o|=1),o}readCorner2(t,r){let o=0;return this.readModule(t-3,0,t,r)&&(o|=1),o<<=1,this.readModule(t-2,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(0,r-4,t,r)&&(o|=1),o<<=1,this.readModule(0,r-3,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o}readCorner3(t,r){let o=0;return this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(0,r-3,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-3,t,r)&&(o|=1),o<<=1,this.readModule(1,r-2,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o}readCorner4(t,r){let o=0;return this.readModule(t-3,0,t,r)&&(o|=1),o<<=1,this.readModule(t-2,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(2,r-1,t,r)&&(o|=1),o<<=1,this.readModule(3,r-1,t,r)&&(o|=1),o}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new O("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),d=r/a|0,f=o/l|0,m=d*a,x=f*l,C=new Le(x,m);for(let N=0;N<d;++N){const I=N*a;for(let R=0;R<f;++R){const F=R*l;for(let z=0;z<a;++z){const W=N*(a+2)+1+z,Q=I+z;for(let de=0;de<l;++de){const he=R*(l+2)+1+de;if(t.get(he,W)){const ae=F+de;C.set(ae,Q)}}}}}return C}}class wt{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const o=r.getECBlocks();let a=0;const l=o.getECBlocks();for(let z of l)a+=z.getCount();const d=new Array(a);let f=0;for(let z of l)for(let W=0;W<z.getCount();W++){const Q=z.getDataCodewords(),de=o.getECCodewords()+Q;d[f++]=new wt(Q,new Uint8Array(de))}const x=d[0].codewords.length-o.getECCodewords(),C=x-1;let N=0;for(let z=0;z<C;z++)for(let W=0;W<f;W++)d[W].codewords[z]=t[N++];const I=r.getVersionNumber()===24,R=I?8:f;for(let z=0;z<R;z++)d[z].codewords[x-1]=t[N++];const F=d[0].codewords.length;for(let z=x;z<F;z++)for(let W=0;W<f;W++){const Q=I?(W+8)%f:W,de=I&&Q>7?z-1:z;d[Q].codewords[de]=t[N++]}if(N!==t.length)throw new O;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ni{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new O(""+t);let r=0,o=this.bitOffset,a=this.byteOffset;const l=this.bytes;if(o>0){const d=8-o,f=t<d?t:d,m=d-f,x=255>>8-f<<m;r=(l[a]&x)>>m,t-=f,o+=f,o===8&&(o=0,a++)}if(t>0){for(;t>=8;)r=r<<8|l[a]&255,a++,t-=8;if(t>0){const d=8-t,f=255>>d<<d;r=r<<t|(l[a]&f)>>d,o+=t}}return this.bitOffset=o,this.byteOffset=a,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Et;(function(b){b[b.PAD_ENCODE=0]="PAD_ENCODE",b[b.ASCII_ENCODE=1]="ASCII_ENCODE",b[b.C40_ENCODE=2]="C40_ENCODE",b[b.TEXT_ENCODE=3]="TEXT_ENCODE",b[b.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",b[b.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",b[b.BASE256_ENCODE=6]="BASE256_ENCODE"})(Et||(Et={}));class In{static decode(t){const r=new Ni(t),o=new Ve,a=new Ve,l=new Array;let d=Et.ASCII_ENCODE;do if(d===Et.ASCII_ENCODE)d=this.decodeAsciiSegment(r,o,a);else{switch(d){case Et.C40_ENCODE:this.decodeC40Segment(r,o);break;case Et.TEXT_ENCODE:this.decodeTextSegment(r,o);break;case Et.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,o);break;case Et.EDIFACT_ENCODE:this.decodeEdifactSegment(r,o);break;case Et.BASE256_ENCODE:this.decodeBase256Segment(r,o,l);break;default:throw new Z}d=Et.ASCII_ENCODE}while(d!==Et.PAD_ENCODE&&r.available()>0);return a.length()>0&&o.append(a.toString()),new jr(t,o.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(t,r,o){let a=!1;do{let l=t.readBits(8);if(l===0)throw new Z;if(l<=128)return a&&(l+=128),r.append(String.fromCharCode(l-1)),Et.ASCII_ENCODE;if(l===129)return Et.PAD_ENCODE;if(l<=229){const d=l-130;d<10&&r.append("0"),r.append(""+d)}else switch(l){case 230:return Et.C40_ENCODE;case 231:return Et.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),o.insert(0,"");break;case 237:r.append("[)>06"),o.insert(0,"");break;case 238:return Et.ANSIX12_ENCODE;case 239:return Et.TEXT_ENCODE;case 240:return Et.EDIFACT_ENCODE;case 241:break;default:if(l!==254||t.available()!==0)throw new Z;break}}while(t.available()>0);return Et.ASCII_ENCODE}static decodeC40Segment(t,r){let o=!1;const a=[];let l=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),a);for(let f=0;f<3;f++){const m=a[f];switch(l){case 0:if(m<3)l=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[m];o?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):r.append(x)}else throw new Z;break;case 1:o?(r.append(String.fromCharCode(m+128)),o=!1):r.append(String.fromCharCode(m)),l=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[m];o?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):r.append(x)}else switch(m){case 27:r.append("");break;case 30:o=!0;break;default:throw new Z}l=0;break;case 3:o?(r.append(String.fromCharCode(m+224)),o=!1):r.append(String.fromCharCode(m+96)),l=0;break;default:throw new Z}}}while(t.available()>0)}static decodeTextSegment(t,r){let o=!1,a=[],l=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),a);for(let f=0;f<3;f++){const m=a[f];switch(l){case 0:if(m<3)l=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[m];o?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):r.append(x)}else throw new Z;break;case 1:o?(r.append(String.fromCharCode(m+128)),o=!1):r.append(String.fromCharCode(m)),l=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[m];o?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):r.append(x)}else switch(m){case 27:r.append("");break;case 30:o=!0;break;default:throw new Z}l=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[m];o?(r.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):r.append(x),l=0}else throw new Z;break;default:throw new Z}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const o=[];do{if(t.available()===8)return;const a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),o);for(let l=0;l<3;l++){const d=o[l];switch(d){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(d<14)r.append(String.fromCharCode(d+44));else if(d<40)r.append(String.fromCharCode(d+51));else throw new Z;break}}}while(t.available()>0)}static parseTwoBytes(t,r,o){let a=(t<<8)+r-1,l=Math.floor(a/1600);o[0]=l,a-=l*1600,l=Math.floor(a/40),o[1]=l,o[2]=a-l*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let o=0;o<4;o++){let a=t.readBits(6);if(a===31){const l=8-t.getBitOffset();l!==8&&t.readBits(l);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(t.available()>0)}static decodeBase256Segment(t,r,o){let a=1+t.getByteOffset();const l=this.unrandomize255State(t.readBits(8),a++);let d;if(l===0?d=t.available()/8|0:l<250?d=l:d=250*(l-249)+this.unrandomize255State(t.readBits(8),a++),d<0)throw new Z;const f=new Uint8Array(d);for(let m=0;m<d;m++){if(t.available()<8)throw new Z;f[m]=this.unrandomize255State(t.readBits(8),a++)}o.push(f);try{r.append(Re.decode(f,me.ISO88591))}catch(m){throw new yn("Platform does not support required encoding: "+m.message)}}static unrandomize255State(t,r){const o=149*r%255+1,a=t-o;return a>=0?a:a+256}}In.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],In.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],In.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],In.TEXT_SHIFT2_SET_CHARS=In.C40_SHIFT2_SET_CHARS,In.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Co{constructor(){this.rsDecoder=new Er(Qe.DATA_MATRIX_FIELD_256)}decode(t){const r=new et(t),o=r.getVersion(),a=r.readCodewords(),l=wt.getDataBlocks(a,o);let d=0;for(let x of l)d+=x.getNumDataCodewords();const f=new Uint8Array(d),m=l.length;for(let x=0;x<m;x++){const C=l[x],N=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(N,I);for(let R=0;R<I;R++)f[R*m+x]=N[R]}return In.decode(f)}correctErrors(t,r){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-r)}catch{throw new V}for(let a=0;a<r;a++)t[a]=o[a]}}class Ie{constructor(t){this.image=t,this.rectangleDetector=new Bn(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new $;r=this.shiftToModuleCenter(r);const o=r[0],a=r[1],l=r[2],d=r[3];let f=this.transitionsBetween(o,d)+1,m=this.transitionsBetween(l,d)+1;(f&1)===1&&(f+=1),(m&1)===1&&(m+=1),4*f<7*m&&4*m<7*f&&(f=m=Math.max(f,m));let x=Ie.sampleGrid(this.image,o,a,l,d,f,m);return new zr(x,[o,a,l,d])}static shiftPoint(t,r,o){let a=(r.getX()-t.getX())/(o+1),l=(r.getY()-t.getY())/(o+1);return new Ee(t.getX()+a,t.getY()+l)}static moveAway(t,r,o){let a=t.getX(),l=t.getY();return a<r?a-=1:a+=1,l<o?l-=1:l+=1,new Ee(a,l)}detectSolid1(t){let r=t[0],o=t[1],a=t[3],l=t[2],d=this.transitionsBetween(r,o),f=this.transitionsBetween(o,a),m=this.transitionsBetween(a,l),x=this.transitionsBetween(l,r),C=d,N=[l,r,o,a];return C>f&&(C=f,N[0]=r,N[1]=o,N[2]=a,N[3]=l),C>m&&(C=m,N[0]=o,N[1]=a,N[2]=l,N[3]=r),C>x&&(N[0]=a,N[1]=l,N[2]=r,N[3]=o),N}detectSolid2(t){let r=t[0],o=t[1],a=t[2],l=t[3],d=this.transitionsBetween(r,l),f=Ie.shiftPoint(o,a,(d+1)*4),m=Ie.shiftPoint(a,o,(d+1)*4),x=this.transitionsBetween(f,r),C=this.transitionsBetween(m,l);return x<C?(t[0]=r,t[1]=o,t[2]=a,t[3]=l):(t[0]=o,t[1]=a,t[2]=l,t[3]=r),t}correctTopRight(t){let r=t[0],o=t[1],a=t[2],l=t[3],d=this.transitionsBetween(r,l),f=this.transitionsBetween(o,l),m=Ie.shiftPoint(r,o,(f+1)*4),x=Ie.shiftPoint(a,o,(d+1)*4);d=this.transitionsBetween(m,l),f=this.transitionsBetween(x,l);let C=new Ee(l.getX()+(a.getX()-o.getX())/(d+1),l.getY()+(a.getY()-o.getY())/(d+1)),N=new Ee(l.getX()+(r.getX()-o.getX())/(f+1),l.getY()+(r.getY()-o.getY())/(f+1));if(!this.isValid(C))return this.isValid(N)?N:null;if(!this.isValid(N))return C;let I=this.transitionsBetween(m,C)+this.transitionsBetween(x,C),R=this.transitionsBetween(m,N)+this.transitionsBetween(x,N);return I>R?C:N}shiftToModuleCenter(t){let r=t[0],o=t[1],a=t[2],l=t[3],d=this.transitionsBetween(r,l)+1,f=this.transitionsBetween(a,l)+1,m=Ie.shiftPoint(r,o,f*4),x=Ie.shiftPoint(a,o,d*4);d=this.transitionsBetween(m,l)+1,f=this.transitionsBetween(x,l)+1,(d&1)===1&&(d+=1),(f&1)===1&&(f+=1);let C=(r.getX()+o.getX()+a.getX()+l.getX())/4,N=(r.getY()+o.getY()+a.getY()+l.getY())/4;r=Ie.moveAway(r,C,N),o=Ie.moveAway(o,C,N),a=Ie.moveAway(a,C,N),l=Ie.moveAway(l,C,N);let I,R;return m=Ie.shiftPoint(r,o,f*4),m=Ie.shiftPoint(m,l,d*4),I=Ie.shiftPoint(o,r,f*4),I=Ie.shiftPoint(I,a,d*4),x=Ie.shiftPoint(a,l,f*4),x=Ie.shiftPoint(x,o,d*4),R=Ie.shiftPoint(l,a,f*4),R=Ie.shiftPoint(R,r,d*4),[m,I,x,R]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,o,a,l,d,f){return jn.getInstance().sampleGrid(t,d,f,.5,.5,d-.5,.5,d-.5,f-.5,.5,f-.5,r.getX(),r.getY(),l.getX(),l.getY(),a.getX(),a.getY(),o.getX(),o.getY())}transitionsBetween(t,r){let o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),l=Math.trunc(r.getX()),d=Math.trunc(r.getY()),f=Math.abs(d-a)>Math.abs(l-o);if(f){let z=o;o=a,a=z,z=l,l=d,d=z}let m=Math.abs(l-o),x=Math.abs(d-a),C=-m/2,N=a<d?1:-1,I=o<l?1:-1,R=0,F=this.image.get(f?a:o,f?o:a);for(let z=o,W=a;z!==l;z+=I){let Q=this.image.get(f?W:z,f?z:W);if(Q!==F&&(R++,F=Q),C+=x,C>0){if(W===d)break;W+=N,C-=m}}return R}}class ht{constructor(){this.decoder=new Co}decode(t,r=null){let o,a;if(r!=null&&r.has(re.PURE_BARCODE)){const x=ht.extractPureBits(t.getBlackMatrix());o=this.decoder.decode(x),a=ht.NO_POINTS}else{const x=new Ie(t.getBlackMatrix()).detect();o=this.decoder.decode(x.getBits()),a=x.getPoints()}const l=o.getRawBytes(),d=new Fe(o.getText(),l,8*l.length,a,ue.DATA_MATRIX,U.currentTimeMillis()),f=o.getByteSegments();f!=null&&d.putMetadata(gt.BYTE_SEGMENTS,f);const m=o.getECLevel();return m!=null&&d.putMetadata(gt.ERROR_CORRECTION_LEVEL,m),d}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(r==null||o==null)throw new $;const a=this.moduleSize(r,t);let l=r[1];const d=o[1];let f=r[0];const x=(o[0]-f+1)/a,C=(d-l+1)/a;if(x<=0||C<=0)throw new $;const N=a/2;l+=N,f+=N;const I=new Le(x,C);for(let R=0;R<C;R++){const F=l+R*a;for(let z=0;z<x;z++)t.get(f+z*a,F)&&I.set(z,R)}return I}static moduleSize(t,r){const o=r.getWidth();let a=t[0];const l=t[1];for(;a<o&&r.get(a,l);)a++;if(a===o)throw new $;const d=a-t[0];if(d===0)throw new $;return d}}ht.NO_POINTS=[];class Eo extends dt{constructor(t=500){super(new ht,t)}}var Sr;(function(b){b[b.L=0]="L",b[b.M=1]="M",b[b.Q=2]="Q",b[b.H=3]="H"})(Sr||(Sr={}));class Ge{constructor(t,r,o){this.value=t,this.stringValue=r,this.bits=o,Ge.FOR_BITS.set(o,this),Ge.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return Ge.L;case"M":return Ge.M;case"Q":return Ge.Q;case"H":return Ge.H;default:throw new k(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof Ge))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=Ge.FOR_BITS.size)throw new O;return Ge.FOR_BITS.get(t)}}Ge.FOR_BITS=new Map,Ge.FOR_VALUE=new Map,Ge.L=new Ge(Sr.L,"L",1),Ge.M=new Ge(Sr.M,"M",0),Ge.Q=new Ge(Sr.Q,"Q",3),Ge.H=new Ge(Sr.H,"H",2);class ln{constructor(t){this.errorCorrectionLevel=Ge.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return B.bitCount(t^r)}static decodeFormatInformation(t,r){const o=ln.doDecodeFormatInformation(t,r);return o!==null?o:ln.doDecodeFormatInformation(t^ln.FORMAT_INFO_MASK_QR,r^ln.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let o=Number.MAX_SAFE_INTEGER,a=0;for(const l of ln.FORMAT_INFO_DECODE_LOOKUP){const d=l[0];if(d===t||d===r)return new ln(l[1]);let f=ln.numBitsDiffering(t,d);f<o&&(a=l[1],o=f),t!==r&&(f=ln.numBitsDiffering(r,d),f<o&&(a=l[1],o=f))}return o<=3?new ln(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof ln))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}ln.FORMAT_INFO_MASK_QR=21522,ln.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class G{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const o of r)t+=o.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class M{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ye{constructor(t,r,...o){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=o;let a=0;const l=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();for(const f of d)a+=f.getCount()*(f.getDataCodewords()+l);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new Z;try{return this.getVersionForNumber((t-17)/4)}catch{throw new Z}}static getVersionForNumber(t){if(t<1||t>40)throw new O;return ye.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,o=0;for(let a=0;a<ye.VERSION_DECODE_INFO.length;a++){const l=ye.VERSION_DECODE_INFO[a];if(l===t)return ye.getVersionForNumber(a+7);const d=ln.numBitsDiffering(t,l);d<r&&(o=a+7,r=d)}return r<=3?ye.getVersionForNumber(o):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new Le(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const o=this.alignmentPatternCenters.length;for(let a=0;a<o;a++){const l=this.alignmentPatternCenters[a]-2;for(let d=0;d<o;d++)a===0&&(d===0||d===o-1)||a===o-1&&d===0||r.setRegion(this.alignmentPatternCenters[d]-2,l,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ye.VERSIONS=[new ye(1,new Int32Array(0),new G(7,new M(1,19)),new G(10,new M(1,16)),new G(13,new M(1,13)),new G(17,new M(1,9))),new ye(2,Int32Array.from([6,18]),new G(10,new M(1,34)),new G(16,new M(1,28)),new G(22,new M(1,22)),new G(28,new M(1,16))),new ye(3,Int32Array.from([6,22]),new G(15,new M(1,55)),new G(26,new M(1,44)),new G(18,new M(2,17)),new G(22,new M(2,13))),new ye(4,Int32Array.from([6,26]),new G(20,new M(1,80)),new G(18,new M(2,32)),new G(26,new M(2,24)),new G(16,new M(4,9))),new ye(5,Int32Array.from([6,30]),new G(26,new M(1,108)),new G(24,new M(2,43)),new G(18,new M(2,15),new M(2,16)),new G(22,new M(2,11),new M(2,12))),new ye(6,Int32Array.from([6,34]),new G(18,new M(2,68)),new G(16,new M(4,27)),new G(24,new M(4,19)),new G(28,new M(4,15))),new ye(7,Int32Array.from([6,22,38]),new G(20,new M(2,78)),new G(18,new M(4,31)),new G(18,new M(2,14),new M(4,15)),new G(26,new M(4,13),new M(1,14))),new ye(8,Int32Array.from([6,24,42]),new G(24,new M(2,97)),new G(22,new M(2,38),new M(2,39)),new G(22,new M(4,18),new M(2,19)),new G(26,new M(4,14),new M(2,15))),new ye(9,Int32Array.from([6,26,46]),new G(30,new M(2,116)),new G(22,new M(3,36),new M(2,37)),new G(20,new M(4,16),new M(4,17)),new G(24,new M(4,12),new M(4,13))),new ye(10,Int32Array.from([6,28,50]),new G(18,new M(2,68),new M(2,69)),new G(26,new M(4,43),new M(1,44)),new G(24,new M(6,19),new M(2,20)),new G(28,new M(6,15),new M(2,16))),new ye(11,Int32Array.from([6,30,54]),new G(20,new M(4,81)),new G(30,new M(1,50),new M(4,51)),new G(28,new M(4,22),new M(4,23)),new G(24,new M(3,12),new M(8,13))),new ye(12,Int32Array.from([6,32,58]),new G(24,new M(2,92),new M(2,93)),new G(22,new M(6,36),new M(2,37)),new G(26,new M(4,20),new M(6,21)),new G(28,new M(7,14),new M(4,15))),new ye(13,Int32Array.from([6,34,62]),new G(26,new M(4,107)),new G(22,new M(8,37),new M(1,38)),new G(24,new M(8,20),new M(4,21)),new G(22,new M(12,11),new M(4,12))),new ye(14,Int32Array.from([6,26,46,66]),new G(30,new M(3,115),new M(1,116)),new G(24,new M(4,40),new M(5,41)),new G(20,new M(11,16),new M(5,17)),new G(24,new M(11,12),new M(5,13))),new ye(15,Int32Array.from([6,26,48,70]),new G(22,new M(5,87),new M(1,88)),new G(24,new M(5,41),new M(5,42)),new G(30,new M(5,24),new M(7,25)),new G(24,new M(11,12),new M(7,13))),new ye(16,Int32Array.from([6,26,50,74]),new G(24,new M(5,98),new M(1,99)),new G(28,new M(7,45),new M(3,46)),new G(24,new M(15,19),new M(2,20)),new G(30,new M(3,15),new M(13,16))),new ye(17,Int32Array.from([6,30,54,78]),new G(28,new M(1,107),new M(5,108)),new G(28,new M(10,46),new M(1,47)),new G(28,new M(1,22),new M(15,23)),new G(28,new M(2,14),new M(17,15))),new ye(18,Int32Array.from([6,30,56,82]),new G(30,new M(5,120),new M(1,121)),new G(26,new M(9,43),new M(4,44)),new G(28,new M(17,22),new M(1,23)),new G(28,new M(2,14),new M(19,15))),new ye(19,Int32Array.from([6,30,58,86]),new G(28,new M(3,113),new M(4,114)),new G(26,new M(3,44),new M(11,45)),new G(26,new M(17,21),new M(4,22)),new G(26,new M(9,13),new M(16,14))),new ye(20,Int32Array.from([6,34,62,90]),new G(28,new M(3,107),new M(5,108)),new G(26,new M(3,41),new M(13,42)),new G(30,new M(15,24),new M(5,25)),new G(28,new M(15,15),new M(10,16))),new ye(21,Int32Array.from([6,28,50,72,94]),new G(28,new M(4,116),new M(4,117)),new G(26,new M(17,42)),new G(28,new M(17,22),new M(6,23)),new G(30,new M(19,16),new M(6,17))),new ye(22,Int32Array.from([6,26,50,74,98]),new G(28,new M(2,111),new M(7,112)),new G(28,new M(17,46)),new G(30,new M(7,24),new M(16,25)),new G(24,new M(34,13))),new ye(23,Int32Array.from([6,30,54,78,102]),new G(30,new M(4,121),new M(5,122)),new G(28,new M(4,47),new M(14,48)),new G(30,new M(11,24),new M(14,25)),new G(30,new M(16,15),new M(14,16))),new ye(24,Int32Array.from([6,28,54,80,106]),new G(30,new M(6,117),new M(4,118)),new G(28,new M(6,45),new M(14,46)),new G(30,new M(11,24),new M(16,25)),new G(30,new M(30,16),new M(2,17))),new ye(25,Int32Array.from([6,32,58,84,110]),new G(26,new M(8,106),new M(4,107)),new G(28,new M(8,47),new M(13,48)),new G(30,new M(7,24),new M(22,25)),new G(30,new M(22,15),new M(13,16))),new ye(26,Int32Array.from([6,30,58,86,114]),new G(28,new M(10,114),new M(2,115)),new G(28,new M(19,46),new M(4,47)),new G(28,new M(28,22),new M(6,23)),new G(30,new M(33,16),new M(4,17))),new ye(27,Int32Array.from([6,34,62,90,118]),new G(30,new M(8,122),new M(4,123)),new G(28,new M(22,45),new M(3,46)),new G(30,new M(8,23),new M(26,24)),new G(30,new M(12,15),new M(28,16))),new ye(28,Int32Array.from([6,26,50,74,98,122]),new G(30,new M(3,117),new M(10,118)),new G(28,new M(3,45),new M(23,46)),new G(30,new M(4,24),new M(31,25)),new G(30,new M(11,15),new M(31,16))),new ye(29,Int32Array.from([6,30,54,78,102,126]),new G(30,new M(7,116),new M(7,117)),new G(28,new M(21,45),new M(7,46)),new G(30,new M(1,23),new M(37,24)),new G(30,new M(19,15),new M(26,16))),new ye(30,Int32Array.from([6,26,52,78,104,130]),new G(30,new M(5,115),new M(10,116)),new G(28,new M(19,47),new M(10,48)),new G(30,new M(15,24),new M(25,25)),new G(30,new M(23,15),new M(25,16))),new ye(31,Int32Array.from([6,30,56,82,108,134]),new G(30,new M(13,115),new M(3,116)),new G(28,new M(2,46),new M(29,47)),new G(30,new M(42,24),new M(1,25)),new G(30,new M(23,15),new M(28,16))),new ye(32,Int32Array.from([6,34,60,86,112,138]),new G(30,new M(17,115)),new G(28,new M(10,46),new M(23,47)),new G(30,new M(10,24),new M(35,25)),new G(30,new M(19,15),new M(35,16))),new ye(33,Int32Array.from([6,30,58,86,114,142]),new G(30,new M(17,115),new M(1,116)),new G(28,new M(14,46),new M(21,47)),new G(30,new M(29,24),new M(19,25)),new G(30,new M(11,15),new M(46,16))),new ye(34,Int32Array.from([6,34,62,90,118,146]),new G(30,new M(13,115),new M(6,116)),new G(28,new M(14,46),new M(23,47)),new G(30,new M(44,24),new M(7,25)),new G(30,new M(59,16),new M(1,17))),new ye(35,Int32Array.from([6,30,54,78,102,126,150]),new G(30,new M(12,121),new M(7,122)),new G(28,new M(12,47),new M(26,48)),new G(30,new M(39,24),new M(14,25)),new G(30,new M(22,15),new M(41,16))),new ye(36,Int32Array.from([6,24,50,76,102,128,154]),new G(30,new M(6,121),new M(14,122)),new G(28,new M(6,47),new M(34,48)),new G(30,new M(46,24),new M(10,25)),new G(30,new M(2,15),new M(64,16))),new ye(37,Int32Array.from([6,28,54,80,106,132,158]),new G(30,new M(17,122),new M(4,123)),new G(28,new M(29,46),new M(14,47)),new G(30,new M(49,24),new M(10,25)),new G(30,new M(24,15),new M(46,16))),new ye(38,Int32Array.from([6,32,58,84,110,136,162]),new G(30,new M(4,122),new M(18,123)),new G(28,new M(13,46),new M(32,47)),new G(30,new M(48,24),new M(14,25)),new G(30,new M(42,15),new M(32,16))),new ye(39,Int32Array.from([6,26,54,82,110,138,166]),new G(30,new M(20,117),new M(4,118)),new G(28,new M(40,47),new M(7,48)),new G(30,new M(43,24),new M(22,25)),new G(30,new M(10,15),new M(67,16))),new ye(40,Int32Array.from([6,30,58,86,114,142,170]),new G(30,new M(19,118),new M(6,119)),new G(28,new M(18,47),new M(31,48)),new G(30,new M(34,24),new M(34,25)),new G(30,new M(20,15),new M(61,16)))];var At;(function(b){b[b.DATA_MASK_000=0]="DATA_MASK_000",b[b.DATA_MASK_001=1]="DATA_MASK_001",b[b.DATA_MASK_010=2]="DATA_MASK_010",b[b.DATA_MASK_011=3]="DATA_MASK_011",b[b.DATA_MASK_100=4]="DATA_MASK_100",b[b.DATA_MASK_101=5]="DATA_MASK_101",b[b.DATA_MASK_110=6]="DATA_MASK_110",b[b.DATA_MASK_111=7]="DATA_MASK_111"})(At||(At={}));class cn{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let o=0;o<r;o++)for(let a=0;a<r;a++)this.isMasked(o,a)&&t.flip(a,o)}}cn.values=new Map([[At.DATA_MASK_000,new cn(At.DATA_MASK_000,(b,t)=>(b+t&1)===0)],[At.DATA_MASK_001,new cn(At.DATA_MASK_001,(b,t)=>(b&1)===0)],[At.DATA_MASK_010,new cn(At.DATA_MASK_010,(b,t)=>t%3===0)],[At.DATA_MASK_011,new cn(At.DATA_MASK_011,(b,t)=>(b+t)%3===0)],[At.DATA_MASK_100,new cn(At.DATA_MASK_100,(b,t)=>(Math.floor(b/2)+Math.floor(t/3)&1)===0)],[At.DATA_MASK_101,new cn(At.DATA_MASK_101,(b,t)=>b*t%6===0)],[At.DATA_MASK_110,new cn(At.DATA_MASK_110,(b,t)=>b*t%6<3)],[At.DATA_MASK_111,new cn(At.DATA_MASK_111,(b,t)=>(b+t+b*t%3&1)===0)]]);class as{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new Z;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let l=0;l<6;l++)t=this.copyBit(l,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let l=5;l>=0;l--)t=this.copyBit(8,l,t);const r=this.bitMatrix.getHeight();let o=0;const a=r-7;for(let l=r-1;l>=a;l--)o=this.copyBit(8,l,o);for(let l=r-8;l<r;l++)o=this.copyBit(l,8,o);if(this.parsedFormatInfo=ln.decodeFormatInformation(t,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return ye.getVersionForNumber(r);let o=0;const a=t-11;for(let d=5;d>=0;d--)for(let f=t-9;f>=a;f--)o=this.copyBit(f,d,o);let l=ye.decodeVersionInformation(o);if(l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;o=0;for(let d=5;d>=0;d--)for(let f=t-9;f>=a;f--)o=this.copyBit(d,f,o);if(l=ye.decodeVersionInformation(o),l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;throw new Z}copyBit(t,r,o){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?o<<1|1:o<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),o=cn.values.get(t.getDataMask()),a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a);const l=r.buildFunctionPattern();let d=!0;const f=new Uint8Array(r.getTotalCodewords());let m=0,x=0,C=0;for(let N=a-1;N>0;N-=2){N===6&&N--;for(let I=0;I<a;I++){const R=d?a-1-I:I;for(let F=0;F<2;F++)l.get(N-F,R)||(C++,x<<=1,this.bitMatrix.get(N-F,R)&&(x|=1),C===8&&(f[m++]=x,C=0,x=0))}d=!d}if(m!==r.getTotalCodewords())throw new Z;return f}remask(){if(this.parsedFormatInfo===null)return;const t=cn.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,o=t.getWidth();r<o;r++)for(let a=r+1,l=t.getHeight();a<l;a++)t.get(r,a)!==t.get(a,r)&&(t.flip(a,r),t.flip(r,a))}}class ls{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,o){if(t.length!==r.getTotalCodewords())throw new O;const a=r.getECBlocksForLevel(o);let l=0;const d=a.getECBlocks();for(const F of d)l+=F.getCount();const f=new Array(l);let m=0;for(const F of d)for(let z=0;z<F.getCount();z++){const W=F.getDataCodewords(),Q=a.getECCodewordsPerBlock()+W;f[m++]=new ls(W,new Uint8Array(Q))}const x=f[0].codewords.length;let C=f.length-1;for(;C>=0&&f[C].codewords.length!==x;)C--;C++;const N=x-a.getECCodewordsPerBlock();let I=0;for(let F=0;F<N;F++)for(let z=0;z<m;z++)f[z].codewords[F]=t[I++];for(let F=C;F<m;F++)f[F].codewords[N]=t[I++];const R=f[0].codewords.length;for(let F=N;F<R;F++)for(let z=0;z<m;z++){const W=z<C?F:F+1;f[z].codewords[W]=t[I++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var un;(function(b){b[b.TERMINATOR=0]="TERMINATOR",b[b.NUMERIC=1]="NUMERIC",b[b.ALPHANUMERIC=2]="ALPHANUMERIC",b[b.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",b[b.BYTE=4]="BYTE",b[b.ECI=5]="ECI",b[b.KANJI=6]="KANJI",b[b.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",b[b.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",b[b.HANZI=9]="HANZI"})(un||(un={}));class Me{constructor(t,r,o,a){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=o,this.bits=a,Me.FOR_BITS.set(a,this),Me.FOR_VALUE.set(t,this)}static forBits(t){const r=Me.FOR_BITS.get(t);if(r===void 0)throw new O;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let o;return r<=9?o=0:r<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Me))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}Me.FOR_BITS=new Map,Me.FOR_VALUE=new Map,Me.TERMINATOR=new Me(un.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Me.NUMERIC=new Me(un.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Me.ALPHANUMERIC=new Me(un.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Me.STRUCTURED_APPEND=new Me(un.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Me.BYTE=new Me(un.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Me.ECI=new Me(un.ECI,"ECI",Int32Array.from([0,0,0]),7),Me.KANJI=new Me(un.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Me.FNC1_FIRST_POSITION=new Me(un.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Me.FNC1_SECOND_POSITION=new Me(un.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Me.HANZI=new Me(un.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class _t{static decode(t,r,o,a){const l=new Ni(t);let d=new Ve;const f=new Array;let m=-1,x=-1;try{let C=null,N=!1,I;do{if(l.available()<4)I=Me.TERMINATOR;else{const R=l.readBits(4);I=Me.forBits(R)}switch(I){case Me.TERMINATOR:break;case Me.FNC1_FIRST_POSITION:case Me.FNC1_SECOND_POSITION:N=!0;break;case Me.STRUCTURED_APPEND:if(l.available()<16)throw new Z;m=l.readBits(8),x=l.readBits(8);break;case Me.ECI:const R=_t.parseECIValue(l);if(C=ee.getCharacterSetECIByValue(R),C===null)throw new Z;break;case Me.HANZI:const F=l.readBits(4),z=l.readBits(I.getCharacterCountBits(r));F===_t.GB2312_SUBSET&&_t.decodeHanziSegment(l,d,z);break;default:const W=l.readBits(I.getCharacterCountBits(r));switch(I){case Me.NUMERIC:_t.decodeNumericSegment(l,d,W);break;case Me.ALPHANUMERIC:_t.decodeAlphanumericSegment(l,d,W,N);break;case Me.BYTE:_t.decodeByteSegment(l,d,W,C,f,a);break;case Me.KANJI:_t.decodeKanjiSegment(l,d,W);break;default:throw new Z}break}}while(I!==Me.TERMINATOR)}catch{throw new Z}return new jr(t,d.toString(),f.length===0?null:f,o===null?null:o.toString(),m,x)}static decodeHanziSegment(t,r,o){if(o*13>t.available())throw new Z;const a=new Uint8Array(2*o);let l=0;for(;o>0;){const d=t.readBits(13);let f=d/96<<8&4294967295|d%96;f<959?f+=41377:f+=42657,a[l]=f>>8&255,a[l+1]=f&255,l+=2,o--}try{r.append(Re.decode(a,me.GB2312))}catch(d){throw new Z(d)}}static decodeKanjiSegment(t,r,o){if(o*13>t.available())throw new Z;const a=new Uint8Array(2*o);let l=0;for(;o>0;){const d=t.readBits(13);let f=d/192<<8&4294967295|d%192;f<7936?f+=33088:f+=49472,a[l]=f>>8,a[l+1]=f,l+=2,o--}try{r.append(Re.decode(a,me.SHIFT_JIS))}catch(d){throw new Z(d)}}static decodeByteSegment(t,r,o,a,l,d){if(8*o>t.available())throw new Z;const f=new Uint8Array(o);for(let x=0;x<o;x++)f[x]=t.readBits(8);let m;a===null?m=me.guessEncoding(f,d):m=a.getName();try{r.append(Re.decode(f,m))}catch(x){throw new Z(x)}l.push(f)}static toAlphaNumericChar(t){if(t>=_t.ALPHANUMERIC_CHARS.length)throw new Z;return _t.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,o,a){const l=r.length();for(;o>1;){if(t.available()<11)throw new Z;const d=t.readBits(11);r.append(_t.toAlphaNumericChar(Math.floor(d/45))),r.append(_t.toAlphaNumericChar(d%45)),o-=2}if(o===1){if(t.available()<6)throw new Z;r.append(_t.toAlphaNumericChar(t.readBits(6)))}if(a)for(let d=l;d<r.length();d++)r.charAt(d)==="%"&&(d<r.length()-1&&r.charAt(d+1)==="%"?r.deleteCharAt(d+1):r.setCharAt(d,""))}static decodeNumericSegment(t,r,o){for(;o>=3;){if(t.available()<10)throw new Z;const a=t.readBits(10);if(a>=1e3)throw new Z;r.append(_t.toAlphaNumericChar(Math.floor(a/100))),r.append(_t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(_t.toAlphaNumericChar(a%10)),o-=3}if(o===2){if(t.available()<7)throw new Z;const a=t.readBits(7);if(a>=100)throw new Z;r.append(_t.toAlphaNumericChar(Math.floor(a/10))),r.append(_t.toAlphaNumericChar(a%10))}else if(o===1){if(t.available()<4)throw new Z;const a=t.readBits(4);if(a>=10)throw new Z;r.append(_t.toAlphaNumericChar(a))}}static parseECIValue(t){const r=t.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const o=t.readBits(8);return(r&63)<<8&4294967295|o}if((r&224)===192){const o=t.readBits(16);return(r&31)<<16&4294967295|o}throw new Z}}_t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",_t.GB2312_SUBSET=1;class cs{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class Ao{constructor(){this.rsDecoder=new Er(Qe.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(Le.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const o=new as(t);let a=null;try{return this.decodeBitMatrixParser(o,r)}catch(l){a=l}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const l=this.decodeBitMatrixParser(o,r);return l.setOther(new cs(!0)),l}catch(l){throw a!==null?a:l}}decodeBitMatrixParser(t,r){const o=t.readVersion(),a=t.readFormatInformation().getErrorCorrectionLevel(),l=t.readCodewords(),d=ls.getDataBlocks(l,o,a);let f=0;for(const C of d)f+=C.getNumDataCodewords();const m=new Uint8Array(f);let x=0;for(const C of d){const N=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(N,I);for(let R=0;R<I;R++)m[x++]=N[R]}return _t.decode(m,o,a,r)}correctErrors(t,r){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-r)}catch{throw new V}for(let a=0;a<r;a++)t[a]=o[a]}}class us extends Ee{constructor(t,r,o){super(t,r),this.estimatedModuleSize=o}aboutEquals(t,r,o){if(Math.abs(r-this.getY())<=t&&Math.abs(o-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,r,o){const a=(this.getX()+r)/2,l=(this.getY()+t)/2,d=(this.estimatedModuleSize+o)/2;return new us(a,l,d)}}class ii{constructor(t,r,o,a,l,d,f){this.image=t,this.startX=r,this.startY=o,this.width=a,this.height=l,this.moduleSize=d,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,o=this.width,a=t+o,l=this.startY+r/2,d=new Int32Array(3),f=this.image;for(let m=0;m<r;m++){const x=l+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));d[0]=0,d[1]=0,d[2]=0;let C=t;for(;C<a&&!f.get(C,x);)C++;let N=0;for(;C<a;){if(f.get(C,x))if(N===1)d[1]++;else if(N===2){if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,x,C);if(I!==null)return I}d[0]=d[2],d[1]=1,d[2]=0,N=1}else d[++N]++;else N===1&&N++,d[N]++;C++}if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,x,a);if(I!==null)return I}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new $}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,o=r/2;for(let a=0;a<3;a++)if(Math.abs(r-t[a])>=o)return!1;return!0}crossCheckVertical(t,r,o,a){const l=this.image,d=l.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let m=t;for(;m>=0&&l.get(r,m)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&!l.get(r,m)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=t+1;m<d&&l.get(r,m)&&f[1]<=o;)f[1]++,m++;if(m===d||f[1]>o)return NaN;for(;m<d&&!l.get(r,m)&&f[2]<=o;)f[2]++,m++;if(f[2]>o)return NaN;const x=f[0]+f[1]+f[2];return 5*Math.abs(x-a)>=2*a?NaN:this.foundPatternCross(f)?ii.centerFromEnd(f,m):NaN}handlePossibleCenter(t,r,o){const a=t[0]+t[1]+t[2],l=ii.centerFromEnd(t,o),d=this.crossCheckVertical(r,l,2*t[1],a);if(!isNaN(d)){const f=(t[0]+t[1]+t[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(f,d,l))return x.combineEstimate(d,l,f);const m=new us(l,d,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class Ms extends Ee{constructor(t,r,o,a){super(t,r),this.estimatedModuleSize=o,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,o){if(Math.abs(r-this.getY())<=t&&Math.abs(o-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,r,o){const a=this.count+1,l=(this.count*this.getX()+r)/a,d=(this.count*this.getY()+t)/a,f=(this.count*this.estimatedModuleSize+o)/a;return new Ms(l,d,f,a)}}class So{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Yt{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(re.TRY_HARDER)!==void 0,o=t!=null&&t.get(re.PURE_BARCODE)!==void 0,a=this.image,l=a.getHeight(),d=a.getWidth();let f=Math.floor(3*l/(4*Yt.MAX_MODULES));(f<Yt.MIN_SKIP||r)&&(f=Yt.MIN_SKIP);let m=!1;const x=new Int32Array(5);for(let N=f-1;N<l&&!m;N+=f){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let I=0;for(let R=0;R<d;R++)if(a.get(R,N))(I&1)===1&&I++,x[I]++;else if(I&1)x[I]++;else if(I===4)if(Yt.foundPatternCross(x)){if(this.handlePossibleCenter(x,N,R,o)===!0)if(f=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const z=this.findRowSkip();z>x[2]&&(N+=z-x[2]-f,R=d-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,I=3;continue}I=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,I=3;else x[++I]++;Yt.foundPatternCross(x)&&this.handlePossibleCenter(x,N,d,o)===!0&&(f=x[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return Ee.orderBestPatterns(C),new So(C)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let l=0;l<5;l++){const d=t[l];if(d===0)return!1;r+=d}if(r<7)return!1;const o=r/7,a=o/2;return Math.abs(o-t[0])<a&&Math.abs(o-t[1])<a&&Math.abs(3*o-t[2])<3*a&&Math.abs(o-t[3])<a&&Math.abs(o-t[4])<a}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,o,a){const l=this.getCrossCheckStateCount();let d=0;const f=this.image;for(;t>=d&&r>=d&&f.get(r-d,t-d);)l[2]++,d++;if(t<d||r<d)return!1;for(;t>=d&&r>=d&&!f.get(r-d,t-d)&&l[1]<=o;)l[1]++,d++;if(t<d||r<d||l[1]>o)return!1;for(;t>=d&&r>=d&&f.get(r-d,t-d)&&l[0]<=o;)l[0]++,d++;if(l[0]>o)return!1;const m=f.getHeight(),x=f.getWidth();for(d=1;t+d<m&&r+d<x&&f.get(r+d,t+d);)l[2]++,d++;if(t+d>=m||r+d>=x)return!1;for(;t+d<m&&r+d<x&&!f.get(r+d,t+d)&&l[3]<o;)l[3]++,d++;if(t+d>=m||r+d>=x||l[3]>=o)return!1;for(;t+d<m&&r+d<x&&f.get(r+d,t+d)&&l[4]<o;)l[4]++,d++;if(l[4]>=o)return!1;const C=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(C-a)<2*a&&Yt.foundPatternCross(l)}crossCheckVertical(t,r,o,a){const l=this.image,d=l.getHeight(),f=this.getCrossCheckStateCount();let m=t;for(;m>=0&&l.get(r,m);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!l.get(r,m)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&l.get(r,m)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=t+1;m<d&&l.get(r,m);)f[2]++,m++;if(m===d)return NaN;for(;m<d&&!l.get(r,m)&&f[3]<o;)f[3]++,m++;if(m===d||f[3]>=o)return NaN;for(;m<d&&l.get(r,m)&&f[4]<o;)f[4]++,m++;if(f[4]>=o)return NaN;const x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-a)>=2*a?NaN:Yt.foundPatternCross(f)?Yt.centerFromEnd(f,m):NaN}crossCheckHorizontal(t,r,o,a){const l=this.image,d=l.getWidth(),f=this.getCrossCheckStateCount();let m=t;for(;m>=0&&l.get(m,r);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!l.get(m,r)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&l.get(m,r)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=t+1;m<d&&l.get(m,r);)f[2]++,m++;if(m===d)return NaN;for(;m<d&&!l.get(m,r)&&f[3]<o;)f[3]++,m++;if(m===d||f[3]>=o)return NaN;for(;m<d&&l.get(m,r)&&f[4]<o;)f[4]++,m++;if(f[4]>=o)return NaN;const x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-a)>=a?NaN:Yt.foundPatternCross(f)?Yt.centerFromEnd(f,m):NaN}handlePossibleCenter(t,r,o,a){const l=t[0]+t[1]+t[2]+t[3]+t[4];let d=Yt.centerFromEnd(t,o),f=this.crossCheckVertical(r,Math.floor(d),t[2],l);if(!isNaN(f)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(f),t[2],l),!isNaN(d)&&(!a||this.crossCheckDiagonal(Math.floor(f),Math.floor(d),t[2],l)))){const m=l/7;let x=!1;const C=this.possibleCenters;for(let N=0,I=C.length;N<I;N++){const R=C[N];if(R.aboutEquals(m,f,d)){C[N]=R.combineEstimate(f,d,m),x=!0;break}}if(!x){const N=new Ms(d,f,m);C.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const o of this.possibleCenters)if(o.getCount()>=Yt.CENTER_QUORUM)if(r==null)r=o;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-o.getX())-Math.abs(r.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const o=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Yt.CENTER_QUORUM&&(t++,r+=d.getEstimatedModuleSize());if(t<3)return!1;const a=r/o;let l=0;for(const d of this.possibleCenters)l+=Math.abs(d.getEstimatedModuleSize()-a);return l<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new $;const r=this.possibleCenters;let o;if(t>3){let a=0,l=0;for(const m of this.possibleCenters){const x=m.getEstimatedModuleSize();a+=x,l+=x*x}o=a/t;let d=Math.sqrt(l/t-o*o);r.sort((m,x)=>{const C=Math.abs(x.getEstimatedModuleSize()-o),N=Math.abs(m.getEstimatedModuleSize()-o);return C<N?-1:C>N?1:0});const f=Math.max(.2*o,d);for(let m=0;m<r.length&&r.length>3;m++){const x=r[m];Math.abs(x.getEstimatedModuleSize()-o)>f&&(r.splice(m,1),m--)}}if(r.length>3){let a=0;for(const l of r)a+=l.getEstimatedModuleSize();o=a/r.length,r.sort((l,d)=>{if(d.getCount()===l.getCount()){const f=Math.abs(d.getEstimatedModuleSize()-o),m=Math.abs(l.getEstimatedModuleSize()-o);return f<m?1:f>m?-1:0}else return d.getCount()-l.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Yt.CENTER_QUORUM=2,Yt.MIN_SKIP=3,Yt.MAX_MODULES=57;class je{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(re.NEED_RESULT_POINT_CALLBACK);const o=new Yt(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(o)}processFinderPatternInfo(t){const r=t.getTopLeft(),o=t.getTopRight(),a=t.getBottomLeft(),l=this.calculateModuleSize(r,o,a);if(l<1)throw new $("No pattern found in proccess finder.");const d=je.computeDimension(r,o,a,l),f=ye.getProvisionalVersionForDimension(d),m=f.getDimensionForVersion()-7;let x=null;if(f.getAlignmentPatternCenters().length>0){const R=o.getX()-r.getX()+a.getX(),F=o.getY()-r.getY()+a.getY(),z=1-3/m,W=Math.floor(r.getX()+z*(R-r.getX())),Q=Math.floor(r.getY()+z*(F-r.getY()));for(let de=4;de<=16;de<<=1)try{x=this.findAlignmentInRegion(l,W,Q,de);break}catch(he){if(!(he instanceof $))throw he}}const C=je.createTransform(r,o,a,x,d),N=je.sampleGrid(this.image,C,d);let I;return x===null?I=[a,r,o]:I=[a,r,o,x],new zr(N,I)}static createTransform(t,r,o,a,l){const d=l-3.5;let f,m,x,C;return a!==null?(f=a.getX(),m=a.getY(),x=d-3,C=x):(f=r.getX()-t.getX()+o.getX(),m=r.getY()-t.getY()+o.getY(),x=d,C=d),rn.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,x,C,3.5,d,t.getX(),t.getY(),r.getX(),r.getY(),f,m,o.getX(),o.getY())}static sampleGrid(t,r,o){return jn.getInstance().sampleGridWithTransform(t,o,o,r)}static computeDimension(t,r,o,a){const l=Ke.round(Ee.distance(t,r)/a),d=Ke.round(Ee.distance(t,o)/a);let f=Math.floor((l+d)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new $("Dimensions could be not found.")}return f}calculateModuleSize(t,r,o){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,o))/2}calculateModuleSizeOneWay(t,r){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(o)?a/7:isNaN(a)?o/7:(o+a)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,o,a){let l=this.sizeOfBlackWhiteBlackRun(t,r,o,a),d=1,f=t-(o-t);f<0?(d=t/(t-f),f=0):f>=this.image.getWidth()&&(d=(this.image.getWidth()-1-t)/(f-t),f=this.image.getWidth()-1);let m=Math.floor(r-(a-r)*d);return d=1,m<0?(d=r/(r-m),m=0):m>=this.image.getHeight()&&(d=(this.image.getHeight()-1-r)/(m-r),m=this.image.getHeight()-1),f=Math.floor(t+(f-t)*d),l+=this.sizeOfBlackWhiteBlackRun(t,r,f,m),l-1}sizeOfBlackWhiteBlackRun(t,r,o,a){const l=Math.abs(a-r)>Math.abs(o-t);if(l){let R=t;t=r,r=R,R=o,o=a,a=R}const d=Math.abs(o-t),f=Math.abs(a-r);let m=-d/2;const x=t<o?1:-1,C=r<a?1:-1;let N=0;const I=o+x;for(let R=t,F=r;R!==I;R+=x){const z=l?F:R,W=l?R:F;if(N===1===this.image.get(z,W)){if(N===2)return Ke.distance(R,F,t,r);N++}if(m+=f,m>0){if(F===a)break;F+=C,m-=d}}return N===2?Ke.distance(o+x,a,t,r):NaN}findAlignmentInRegion(t,r,o,a){const l=Math.floor(a*t),d=Math.max(0,r-l),f=Math.min(this.image.getWidth()-1,r+l);if(f-d<t*3)throw new $("Alignment top exceeds estimated module size.");const m=Math.max(0,o-l),x=Math.min(this.image.getHeight()-1,o+l);if(x-m<t*3)throw new $("Alignment bottom exceeds estimated module size.");return new ii(this.image,d,m,f-d,x-m,t,this.resultPointCallback).find()}}class qt{constructor(){this.decoder=new Ao}getDecoder(){return this.decoder}decode(t,r){let o,a;if(r!=null&&r.get(re.PURE_BARCODE)!==void 0){const m=qt.extractPureBits(t.getBlackMatrix());o=this.decoder.decodeBitMatrix(m,r),a=qt.NO_POINTS}else{const m=new je(t.getBlackMatrix()).detect(r);o=this.decoder.decodeBitMatrix(m.getBits(),r),a=m.getPoints()}o.getOther()instanceof cs&&o.getOther().applyMirroredCorrection(a);const l=new Fe(o.getText(),o.getRawBytes(),void 0,a,ue.QR_CODE,void 0),d=o.getByteSegments();d!==null&&l.putMetadata(gt.BYTE_SEGMENTS,d);const f=o.getECLevel();return f!==null&&l.putMetadata(gt.ERROR_CORRECTION_LEVEL,f),o.hasStructuredAppend()&&(l.putMetadata(gt.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),l.putMetadata(gt.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),l}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(r===null||o===null)throw new $;const a=this.moduleSize(r,t);let l=r[1],d=o[1],f=r[0],m=o[0];if(f>=m||l>=d)throw new $;if(d-l!==m-f&&(m=f+(d-l),m>=t.getWidth()))throw new $;const x=Math.round((m-f+1)/a),C=Math.round((d-l+1)/a);if(x<=0||C<=0)throw new $;if(C!==x)throw new $;const N=Math.floor(a/2);l+=N,f+=N;const I=f+Math.floor((x-1)*a)-m;if(I>0){if(I>N)throw new $;f-=I}const R=l+Math.floor((C-1)*a)-d;if(R>0){if(R>N)throw new $;l-=R}const F=new Le(x,C);for(let z=0;z<C;z++){const W=l+Math.floor(z*a);for(let Q=0;Q<x;Q++)t.get(f+Math.floor(Q*a),W)&&F.set(Q,z)}return F}static moduleSize(t,r){const o=r.getHeight(),a=r.getWidth();let l=t[0],d=t[1],f=!0,m=0;for(;l<a&&d<o;){if(f!==r.get(l,d)){if(++m===5)break;f=!f}l++,d++}if(l===a||d===o)throw new $;return(l-t[0])/7}}qt.NO_POINTS=new Array;class we{PDF417Common(){}static getBitCountSum(t){return Ke.sum(t)}static toIntArray(t){if(t==null||!t.length)return we.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let o=0;for(const a of t)r[o++]=a;return r}static getCodeword(t){const r=D.binarySearch(we.SYMBOL_TABLE,t&262143);return r<0?-1:(we.CODEWORD_TABLE[r]-1)%we.NUMBER_OF_CODEWORDS}}we.NUMBER_OF_CODEWORDS=929,we.MAX_CODEWORDS_IN_BARCODE=we.NUMBER_OF_CODEWORDS-1,we.MIN_ROWS_IN_BARCODE=3,we.MAX_ROWS_IN_BARCODE=90,we.MODULES_IN_CODEWORD=17,we.MODULES_IN_STOP_PATTERN=18,we.BARS_IN_MODULE=8,we.EMPTY_INT_ARRAY=new Int32Array([]),we.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),we.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ka{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class ze{static detectMultiple(t,r,o){let a=t.getBlackMatrix(),l=ze.detect(o,a);return l.length||(a=a.clone(),a.rotate180(),l=ze.detect(o,a)),new ka(a,l)}static detect(t,r){const o=new Array;let a=0,l=0,d=!1;for(;a<r.getHeight();){const f=ze.findVertices(r,a,l);if(f[0]==null&&f[3]==null){if(!d)break;d=!1,l=0;for(const m of o)m[1]!=null&&(a=Math.trunc(Math.max(a,m[1].getY()))),m[3]!=null&&(a=Math.max(a,Math.trunc(m[3].getY())));a+=ze.ROW_STEP;continue}if(d=!0,o.push(f),!t)break;f[2]!=null?(l=Math.trunc(f[2].getX()),a=Math.trunc(f[2].getY())):(l=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY()))}return o}static findVertices(t,r,o){const a=t.getHeight(),l=t.getWidth(),d=new Array(8);return ze.copyToResult(d,ze.findRowsWithPattern(t,a,l,r,o,ze.START_PATTERN),ze.INDEXES_START_PATTERN),d[4]!=null&&(o=Math.trunc(d[4].getX()),r=Math.trunc(d[4].getY())),ze.copyToResult(d,ze.findRowsWithPattern(t,a,l,r,o,ze.STOP_PATTERN),ze.INDEXES_STOP_PATTERN),d}static copyToResult(t,r,o){for(let a=0;a<o.length;a++)t[o[a]]=r[a]}static findRowsWithPattern(t,r,o,a,l,d){const f=new Array(4);let m=!1;const x=new Int32Array(d.length);for(;a<r;a+=ze.ROW_STEP){let N=ze.findGuardPattern(t,l,a,o,!1,d,x);if(N!=null){for(;a>0;){const I=ze.findGuardPattern(t,l,--a,o,!1,d,x);if(I!=null)N=I;else{a++;break}}f[0]=new Ee(N[0],a),f[1]=new Ee(N[1],a),m=!0;break}}let C=a+1;if(m){let N=0,I=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;C<r;C++){const R=ze.findGuardPattern(t,I[0],C,o,!1,d,x);if(R!=null&&Math.abs(I[0]-R[0])<ze.MAX_PATTERN_DRIFT&&Math.abs(I[1]-R[1])<ze.MAX_PATTERN_DRIFT)I=R,N=0;else{if(N>ze.SKIPPED_ROW_COUNT_MAX)break;N++}}C-=N+1,f[2]=new Ee(I[0],C),f[3]=new Ee(I[1],C)}return C-a<ze.BARCODE_MIN_HEIGHT&&D.fill(f,null),f}static findGuardPattern(t,r,o,a,l,d,f){D.fillWithin(f,0,f.length,0);let m=r,x=0;for(;t.get(m,o)&&m>0&&x++<ze.MAX_PIXEL_DRIFT;)m--;let C=m,N=0,I=d.length;for(let R=l;C<a;C++)if(t.get(C,o)!==R)f[N]++;else{if(N===I-1){if(ze.patternMatchVariance(f,d,ze.MAX_INDIVIDUAL_VARIANCE)<ze.MAX_AVG_VARIANCE)return new Int32Array([m,C]);m+=f[0]+f[1],U.arraycopy(f,2,f,0,N-1),f[N-1]=0,f[N]=0,N--}else N++;f[N]=1,R=!R}return N===I-1&&ze.patternMatchVariance(f,d,ze.MAX_INDIVIDUAL_VARIANCE)<ze.MAX_AVG_VARIANCE?new Int32Array([m,C-1]):null}static patternMatchVariance(t,r,o){let a=t.length,l=0,d=0;for(let x=0;x<a;x++)l+=t[x],d+=r[x];if(l<d)return 1/0;let f=l/d;o*=f;let m=0;for(let x=0;x<a;x++){let C=t[x],N=r[x]*f,I=C>N?C-N:N-C;if(I>o)return 1/0;m+=I}return m/l}}ze.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ze.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ze.MAX_AVG_VARIANCE=.42,ze.MAX_INDIVIDUAL_VARIANCE=.8,ze.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ze.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ze.MAX_PIXEL_DRIFT=3,ze.MAX_PATTERN_DRIFT=5,ze.SKIPPED_ROW_COUNT_MAX=25,ze.ROW_STEP=5,ze.BARCODE_MIN_HEIGHT=10;class Ht{constructor(t,r){if(r.length===0)throw new O;this.field=t;let o=r.length;if(o>1&&r[0]===0){let a=1;for(;a<o&&r[a]===0;)a++;a===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-a),U.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let a=0;for(let l of this.coefficients)a=this.field.add(a,l);return a}let r=this.coefficients[0],o=this.coefficients.length;for(let a=1;a<o;a++)r=this.field.add(this.field.multiply(t,r),this.coefficients[a]);return r}add(t){if(!this.field.equals(t.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,o=t.coefficients;if(r.length>o.length){let d=r;r=o,o=d}let a=new Int32Array(o.length),l=o.length-r.length;U.arraycopy(o,0,a,0,l);for(let d=l;d<o.length;d++)a[d]=this.field.add(r[d-l],o[d]);return new Ht(this.field,a)}subtract(t){if(!this.field.equals(t.field))throw new O("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Ht?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Ht(this.field,new Int32Array([0]));let r=this.coefficients,o=r.length,a=t.coefficients,l=a.length,d=new Int32Array(o+l-1);for(let f=0;f<o;f++){let m=r[f];for(let x=0;x<l;x++)d[f+x]=this.field.add(d[f+x],this.field.multiply(m,a[x]))}return new Ht(this.field,d)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let o=0;o<t;o++)r[o]=this.field.subtract(0,this.coefficients[o]);return new Ht(this.field,r)}multiplyScalar(t){if(t===0)return new Ht(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,o=new Int32Array(r);for(let a=0;a<r;a++)o[a]=this.field.multiply(this.coefficients[a],t);return new Ht(this.field,o)}multiplyByMonomial(t,r){if(t<0)throw new O;if(r===0)return new Ht(this.field,new Int32Array([0]));let o=this.coefficients.length,a=new Int32Array(o+t);for(let l=0;l<o;l++)a[l]=this.field.multiply(this.coefficients[l],r);return new Ht(this.field,a)}toString(){let t=new Ve;for(let r=this.getDegree();r>=0;r--){let o=this.getCoefficient(r);o!==0&&(o<0?(t.append(" - "),o=-o):t.length()>0&&t.append(" + "),(r===0||o!==1)&&t.append(o),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class bo{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new O;return this.logTable[t]}inverse(t){if(t===0)throw new sr;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class br extends bo{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let o=1;for(let a=0;a<t;a++)this.expTable[a]=o,o=o*r%t;for(let a=0;a<t-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new Ht(this,new Int32Array([0])),this.one=new Ht(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new O;if(r===0)return this.zero;let o=new Int32Array(t+1);return o[0]=r,new Ht(this,o)}}br.PDF417_GF=new br(we.NUMBER_OF_CODEWORDS,3);class ks{constructor(){this.field=br.PDF417_GF}decode(t,r,o){let a=new Ht(this.field,t),l=new Int32Array(r),d=!1;for(let F=r;F>0;F--){let z=a.evaluateAt(this.field.exp(F));l[r-F]=z,z!==0&&(d=!0)}if(!d)return 0;let f=this.field.getOne();if(o!=null)for(const F of o){let z=this.field.exp(t.length-1-F),W=new Ht(this.field,new Int32Array([this.field.subtract(0,z),1]));f=f.multiply(W)}let m=new Ht(this.field,l),x=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),m,r),C=x[0],N=x[1],I=this.findErrorLocations(C),R=this.findErrorMagnitudes(N,C,I);for(let F=0;F<I.length;F++){let z=t.length-1-this.field.log(I[F]);if(z<0)throw V.getChecksumInstance();t[z]=this.field.subtract(t[z],R[F])}return I.length}runEuclideanAlgorithm(t,r,o){if(t.getDegree()<r.getDegree()){let I=t;t=r,r=I}let a=t,l=r,d=this.field.getZero(),f=this.field.getOne();for(;l.getDegree()>=Math.round(o/2);){let I=a,R=d;if(a=l,d=f,a.isZero())throw V.getChecksumInstance();l=I;let F=this.field.getZero(),z=a.getCoefficient(a.getDegree()),W=this.field.inverse(z);for(;l.getDegree()>=a.getDegree()&&!l.isZero();){let Q=l.getDegree()-a.getDegree(),de=this.field.multiply(l.getCoefficient(l.getDegree()),W);F=F.add(this.field.buildMonomial(Q,de)),l=l.subtract(a.multiplyByMonomial(Q,de))}f=F.multiply(d).subtract(R).negative()}let m=f.getCoefficient(0);if(m===0)throw V.getChecksumInstance();let x=this.field.inverse(m),C=f.multiply(x),N=l.multiply(x);return[C,N]}findErrorLocations(t){let r=t.getDegree(),o=new Int32Array(r),a=0;for(let l=1;l<this.field.getSize()&&a<r;l++)t.evaluateAt(l)===0&&(o[a]=this.field.inverse(l),a++);if(a!==r)throw V.getChecksumInstance();return o}findErrorMagnitudes(t,r,o){let a=r.getDegree(),l=new Int32Array(a);for(let x=1;x<=a;x++)l[a-x]=this.field.multiply(x,r.getCoefficient(x));let d=new Ht(this.field,l),f=o.length,m=new Int32Array(f);for(let x=0;x<f;x++){let C=this.field.inverse(o[x]),N=this.field.subtract(0,t.evaluateAt(C)),I=this.field.inverse(d.evaluateAt(C));m[x]=this.field.multiply(N,I)}return m}}class Yn{constructor(t,r,o,a,l){t instanceof Yn?this.constructor_2(t):this.constructor_1(t,r,o,a,l)}constructor_1(t,r,o,a,l){const d=r==null||o==null,f=a==null||l==null;if(d&&f)throw new $;d?(r=new Ee(0,a.getY()),o=new Ee(0,l.getY())):f&&(a=new Ee(t.getWidth()-1,r.getY()),l=new Ee(t.getWidth()-1,o.getY())),this.image=t,this.topLeft=r,this.bottomLeft=o,this.topRight=a,this.bottomRight=l,this.minX=Math.trunc(Math.min(r.getX(),o.getX())),this.maxX=Math.trunc(Math.max(a.getX(),l.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(o.getY(),l.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new Yn(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,o){let a=this.topLeft,l=this.bottomLeft,d=this.topRight,f=this.bottomRight;if(t>0){let m=o?this.topLeft:this.topRight,x=Math.trunc(m.getY()-t);x<0&&(x=0);let C=new Ee(m.getX(),x);o?a=C:d=C}if(r>0){let m=o?this.bottomLeft:this.bottomRight,x=Math.trunc(m.getY()+r);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let C=new Ee(m.getX(),x);o?l=C:f=C}return new Yn(this.image,a,l,d,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Jt{constructor(t,r,o,a){this.columnCount=t,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=o,this.rowCount=r+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Xn{constructor(){this.buffer=""}static form(t,r){let o=-1;function a(d,f,m,x,C,N){if(d==="%%")return"%";if(r[++o]===void 0)return;d=x?parseInt(x.substr(1)):void 0;let I=C?parseInt(C.substr(1)):void 0,R;switch(N){case"s":R=r[o];break;case"c":R=r[o][0];break;case"f":R=parseFloat(r[o]).toFixed(d);break;case"p":R=parseFloat(r[o]).toPrecision(d);break;case"e":R=parseFloat(r[o]).toExponential(d);break;case"x":R=parseInt(r[o]).toString(I||16);break;case"d":R=parseFloat(parseInt(r[o],I||10).toPrecision(d)).toFixed(0);break}R=typeof R=="object"?JSON.stringify(R):(+R).toString(I);let F=parseInt(m),z=m&&m[0]+""=="0"?"0":" ";for(;R.length<F;)R=f!==void 0?R+z:z+R;return R}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(l,a)}format(t,...r){this.buffer+=Xn.form(t,r)}toString(){return this.buffer}}class Ii{constructor(t){this.boundingBox=new Yn(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let o=1;o<Ii.MAX_NEARBY_DISTANCE;o++){let a=this.imageRowToCodewordIndex(t)-o;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(t)+o,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Xn;let r=0;for(const o of this.codewords){if(o==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,o.getRowNumber(),o.getValue())}return t.toString()}}Ii.MAX_NEARBY_DISTANCE=5;class Ti{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[o,a]of this.values.entries()){const l={getKey:()=>o,getValue:()=>a};l.getValue()>t?(t=l.getValue(),r=[],r.push(l.getKey())):l.getValue()===t&&r.push(l.getKey())}return we.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class Oa extends Ii{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t!=null&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let o=this.getBoundingBox(),a=this._isLeft?o.getTopLeft():o.getTopRight(),l=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=-1,x=1,C=0;for(let N=d;N<f;N++){if(r[N]==null)continue;let I=r[N],R=I.getRowNumber()-m;if(R===0)C++;else if(R===1)x=Math.max(x,C),C=1,m=I.getRowNumber();else if(R<0||I.getRowNumber()>=t.getRowCount()||R>N)r[N]=null;else{let F;x>2?F=(x-2)*R:F=R;let z=F>=N;for(let W=1;W<=F&&!z;W++)z=r[N-W]!=null;z?r[N]=null:(m=I.getRowNumber(),C=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let o of this.getCodewords())if(o!=null){let a=o.getRowNumber();if(a>=r.length)continue;r[a]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),o=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.getCodewords(),m=-1;for(let x=l;x<d;x++){if(f[x]==null)continue;let C=f[x];C.setRowNumberAsRowIndicatorColumn();let N=C.getRowNumber()-m;N===0||(N===1?m=C.getRowNumber():C.getRowNumber()>=t.getRowCount()?f[x]=null:m=C.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new Ti,o=new Ti,a=new Ti,l=new Ti;for(let f of t){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let m=f.getValue()%30,x=f.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:o.setValue(m*3+1);break;case 1:l.setValue(m/3),a.setValue(m%3);break;case 2:r.setValue(m+1);break}}if(r.getValue().length===0||o.getValue().length===0||a.getValue().length===0||l.getValue().length===0||r.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<we.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>we.MAX_ROWS_IN_BARCODE)return null;let d=new Jt(r.getValue()[0],o.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(t,d),d}removeIncorrectCodewords(t,r){for(let o=0;o<t.length;o++){let a=t[o];if(t[o]==null)continue;let l=a.getValue()%30,d=a.getRowNumber();if(d>r.getRowCount()){t[o]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:l*3+1!==r.getRowCountUpperPart()&&(t[o]=null);break;case 1:(Math.trunc(l/3)!==r.getErrorCorrectionLevel()||l%3!==r.getRowCountLowerPart())&&(t[o]=null);break;case 2:l+1!==r.getColumnCount()&&(t[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Mi{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=we.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let o=this.detectionResultColumns[r].getCodewords();for(let a=0;a<o.length;a++)o[a]!=null&&(o[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,o))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<t.length;o++)if(t[o]!=null&&r[o]!=null&&t[o].getRowNumber()===r[o].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let l=this.detectionResultColumns[a].getCodewords()[o];l!=null&&(l.setRowNumber(t[o].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++){if(r[o]==null)continue;let a=r[o].getRowNumber(),l=0;for(let d=this.barcodeColumnCount+1;d>0&&l<this.ADJUST_ROW_NUMBER_SKIP;d--){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(l=Mi.adjustRowNumberIfValid(a,l,f),f.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let o=0;o<r.length;o++){if(r[o]==null)continue;let a=r[o].getRowNumber(),l=0;for(let d=1;d<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;d++){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(l=Mi.adjustRowNumberIfValid(a,l,f),f.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(t)?(o.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,o){if(!this.detectionResultColumns[t-1])return;let a=o[r],l=this.detectionResultColumns[t-1].getCodewords(),d=l;this.detectionResultColumns[t+1]!=null&&(d=this.detectionResultColumns[t+1].getCodewords());let f=new Array(14);f[2]=l[r],f[3]=d[r],r>0&&(f[0]=o[r-1],f[4]=l[r-1],f[5]=d[r-1]),r>1&&(f[8]=o[r-2],f[10]=l[r-2],f[11]=d[r-2]),r<o.length-1&&(f[1]=o[r+1],f[6]=l[r+1],f[7]=d[r+1]),r<o.length-2&&(f[9]=o[r+2],f[12]=l[r+2],f[13]=d[r+2]);for(let m of f)if(Mi.adjustRowNumber(a,m))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new Xn;for(let o=0;o<t.getCodewords().length;o++){r.format("CW %3d:",o);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}let l=this.detectionResultColumns[a].getCodewords()[o];if(l==null){r.format("    |   ");continue}r.format(" %3d|%3d",l.getRowNumber(),l.getValue())}r.format("%n")}return r.toString()}}class si{constructor(t,r,o,a){this.rowNumber=si.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(o),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==si.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}si.BARCODE_ROW_UNKNOWN=-1;class wn{static initialize(){for(let t=0;t<we.SYMBOL_TABLE.length;t++){let r=we.SYMBOL_TABLE[t],o=r&1;for(let a=0;a<we.BARS_IN_MODULE;a++){let l=0;for(;(r&1)===o;)l+=1,r>>=1;o=r&1,wn.RATIOS_TABLE[t]||(wn.RATIOS_TABLE[t]=new Array(we.BARS_IN_MODULE)),wn.RATIOS_TABLE[t][we.BARS_IN_MODULE-a-1]=Math.fround(l/we.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=wn.getDecodedCodewordValue(wn.sampleBitCounts(t));return r!==-1?r:wn.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=Ke.sum(t),o=new Int32Array(we.BARS_IN_MODULE),a=0,l=0;for(let d=0;d<we.MODULES_IN_CODEWORD;d++){let f=r/(2*we.MODULES_IN_CODEWORD)+d*r/we.MODULES_IN_CODEWORD;l+t[a]<=f&&(l+=t[a],a++),o[a]++}return o}static getDecodedCodewordValue(t){let r=wn.getBitValue(t);return we.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let o=0;o<t.length;o++)for(let a=0;a<t[o];a++)r=r<<1|(o%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=Ke.sum(t),o=new Array(we.BARS_IN_MODULE);if(r>1)for(let d=0;d<o.length;d++)o[d]=Math.fround(t[d]/r);let a=Fr.MAX_VALUE,l=-1;this.bSymbolTableReady||wn.initialize();for(let d=0;d<wn.RATIOS_TABLE.length;d++){let f=0,m=wn.RATIOS_TABLE[d];for(let x=0;x<we.BARS_IN_MODULE;x++){let C=Math.fround(m[x]-o[x]);if(f+=Math.fround(C*C),f>=a)break}f<a&&(a=f,l=we.SYMBOL_TABLE[d])}return l}}wn.bSymbolTableReady=!1,wn.RATIOS_TABLE=new Array(we.SYMBOL_TABLE.length).map(b=>new Array(we.BARS_IN_MODULE));class No{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Je{static parseLong(t,r=void 0){return parseInt(t,r)}}class La extends v{}La.kind="NullPointerException";class Qn{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,o){if(t==null)throw new La;if(r<0||r>t.length||o<0||r+o>t.length||r+o<0)throw new xe;if(o===0)return;for(let a=0;a<o;a++)this.write(t[r+a])}flush(){}close(){}}class ds extends v{}class Ra extends Qn{constructor(t=32){if(super(),this.count=0,t<0)throw new O("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let o=this.buf.length<<1;if(o-t<0&&(o=t),o<0){if(t<0)throw new ds;o=B.MAX_VALUE}this.buf=D.copyOfUint8Array(this.buf,o)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,o){if(r<0||r>t.length||o<0||r+o-t.length>0)throw new xe;this.ensureCapacity(this.count+o),U.arraycopy(t,r,this.buf,this.count,o),this.count+=o}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return D.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var ft;(function(b){b[b.ALPHA=0]="ALPHA",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.PUNCT=3]="PUNCT",b[b.ALPHA_SHIFT=4]="ALPHA_SHIFT",b[b.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ft||(ft={}));function Os(){if(typeof window<"u")return window.BigInt||null;if(typeof js<"u")return js.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ls;function Nr(b){if(typeof Ls>"u"&&(Ls=Os()),Ls===null)throw new Error("BigInt is not supported!");return Ls(b)}function xc(){let b=[];b[0]=Nr(1);let t=Nr(900);b[1]=t;for(let r=2;r<16;r++)b[r]=b[r-1]*t;return b}class K{static decode(t,r){let o=new Ve(""),a=ee.ISO8859_1;o.enableDecoding(a);let l=1,d=t[l++],f=new No;for(;l<t[0];){switch(d){case K.TEXT_COMPACTION_MODE_LATCH:l=K.textCompaction(t,l,o);break;case K.BYTE_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:l=K.byteCompaction(d,t,a,l,o);break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[l++]);break;case K.NUMERIC_COMPACTION_MODE_LATCH:l=K.numericCompaction(t,l,o);break;case K.ECI_CHARSET:ee.getCharacterSetECIByValue(t[l++]);break;case K.ECI_GENERAL_PURPOSE:l+=2;break;case K.ECI_USER_DEFINED:l++;break;case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=K.decodeMacroBlock(t,l,f);break;case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:throw new Z;default:l--,l=K.textCompaction(t,l,o);break}if(l<t.length)d=t[l++];else throw Z.getFormatInstance()}if(o.length()===0)throw Z.getFormatInstance();let m=new jr(null,o.toString(),null,r);return m.setOther(f),m}static decodeMacroBlock(t,r,o){if(r+K.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw Z.getFormatInstance();let a=new Int32Array(K.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<K.NUMBER_OF_SEQUENCE_CODEWORDS;f++,r++)a[f]=t[r];o.setSegmentIndex(B.parseInt(K.decodeBase900toBase10(a,K.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new Ve;r=K.textCompaction(t,r,l),o.setFileId(l.toString());let d=-1;for(t[r]===K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=r+1);r<t[0];)switch(t[r]){case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case K.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new Ve;r=K.textCompaction(t,r+1,f),o.setFileName(f.toString());break;case K.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new Ve;r=K.textCompaction(t,r+1,m),o.setSender(m.toString());break;case K.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new Ve;r=K.textCompaction(t,r+1,x),o.setAddressee(x.toString());break;case K.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new Ve;r=K.numericCompaction(t,r+1,C),o.setSegmentCount(B.parseInt(C.toString()));break;case K.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let N=new Ve;r=K.numericCompaction(t,r+1,N),o.setTimestamp(Je.parseLong(N.toString()));break;case K.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new Ve;r=K.numericCompaction(t,r+1,I),o.setChecksum(B.parseInt(I.toString()));break;case K.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let R=new Ve;r=K.numericCompaction(t,r+1,R),o.setFileSize(Je.parseLong(R.toString()));break;default:throw Z.getFormatInstance()}break;case K.MACRO_PDF417_TERMINATOR:r++,o.setLastSegment(!0);break;default:throw Z.getFormatInstance()}if(d!==-1){let f=r-d;o.isLastSegment()&&f--,o.setOptionalData(D.copyOfRange(t,d,d+f))}return r}static textCompaction(t,r,o){let a=new Int32Array((t[0]-r)*2),l=new Int32Array((t[0]-r)*2),d=0,f=!1;for(;r<t[0]&&!f;){let m=t[r++];if(m<K.TEXT_COMPACTION_MODE_LATCH)a[d]=m/30,a[d+1]=m%30,d+=2;else switch(m){case K.TEXT_COMPACTION_MODE_LATCH:a[d++]=K.TEXT_COMPACTION_MODE_LATCH;break;case K.BYTE_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.NUMERIC_COMPACTION_MODE_LATCH:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:r--,f=!0;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[d]=K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=t[r++],l[d]=m,d++;break}}return K.decodeTextCompaction(a,l,d,o),r}static decodeTextCompaction(t,r,o,a){let l=ft.ALPHA,d=ft.ALPHA,f=0;for(;f<o;){let m=t[f],x="";switch(l){case ft.ALPHA:if(m<26)x=String.fromCharCode(65+m);else switch(m){case 26:x=" ";break;case K.LL:l=ft.LOWER;break;case K.ML:l=ft.MIXED;break;case K.PS:d=l,l=ft.PUNCT_SHIFT;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[f]);break;case K.TEXT_COMPACTION_MODE_LATCH:l=ft.ALPHA;break}break;case ft.LOWER:if(m<26)x=String.fromCharCode(97+m);else switch(m){case 26:x=" ";break;case K.AS:d=l,l=ft.ALPHA_SHIFT;break;case K.ML:l=ft.MIXED;break;case K.PS:d=l,l=ft.PUNCT_SHIFT;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[f]);break;case K.TEXT_COMPACTION_MODE_LATCH:l=ft.ALPHA;break}break;case ft.MIXED:if(m<K.PL)x=K.MIXED_CHARS[m];else switch(m){case K.PL:l=ft.PUNCT;break;case 26:x=" ";break;case K.LL:l=ft.LOWER;break;case K.AL:l=ft.ALPHA;break;case K.PS:d=l,l=ft.PUNCT_SHIFT;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[f]);break;case K.TEXT_COMPACTION_MODE_LATCH:l=ft.ALPHA;break}break;case ft.PUNCT:if(m<K.PAL)x=K.PUNCT_CHARS[m];else switch(m){case K.PAL:l=ft.ALPHA;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[f]);break;case K.TEXT_COMPACTION_MODE_LATCH:l=ft.ALPHA;break}break;case ft.ALPHA_SHIFT:if(l=d,m<26)x=String.fromCharCode(65+m);else switch(m){case 26:x=" ";break;case K.TEXT_COMPACTION_MODE_LATCH:l=ft.ALPHA;break}break;case ft.PUNCT_SHIFT:if(l=d,m<K.PAL)x=K.PUNCT_CHARS[m];else switch(m){case K.PAL:l=ft.ALPHA;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[f]);break;case K.TEXT_COMPACTION_MODE_LATCH:l=ft.ALPHA;break}break}x!==""&&a.append(x),f++}}static byteCompaction(t,r,o,a,l){let d=new Ra,f=0,m=0,x=!1;switch(t){case K.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),N=r[a++];for(;a<r[0]&&!x;)switch(C[f++]=N,m=900*m+N,N=r[a++],N){case K.TEXT_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH:case K.NUMERIC_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:a--,x=!0;break;default:if(f%5===0&&f>0){for(let I=0;I<6;++I)d.write(Number(Nr(m)>>Nr(8*(5-I))));m=0,f=0}break}a===r[0]&&N<K.TEXT_COMPACTION_MODE_LATCH&&(C[f++]=N);for(let I=0;I<f;I++)d.write(C[I]);break;case K.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!x;){let I=r[a++];if(I<K.TEXT_COMPACTION_MODE_LATCH)f++,m=900*m+I;else switch(I){case K.TEXT_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH:case K.NUMERIC_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:a--,x=!0;break}if(f%5===0&&f>0){for(let R=0;R<6;++R)d.write(Number(Nr(m)>>Nr(8*(5-R))));m=0,f=0}}break}return l.append(Re.decode(d.toByteArray(),o)),a}static numericCompaction(t,r,o){let a=0,l=!1,d=new Int32Array(K.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!l;){let f=t[r++];if(r===t[0]&&(l=!0),f<K.TEXT_COMPACTION_MODE_LATCH)d[a]=f,a++;else switch(f){case K.TEXT_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:r--,l=!0;break}(a%K.MAX_NUMERIC_CODEWORDS===0||f===K.NUMERIC_COMPACTION_MODE_LATCH||l)&&a>0&&(o.append(K.decodeBase900toBase10(d,a)),a=0)}return r}static decodeBase900toBase10(t,r){let o=Nr(0);for(let l=0;l<r;l++)o+=K.EXP900[r-l-1]*Nr(t[l]);let a=o.toString();if(a.charAt(0)!=="1")throw new Z;return a.substring(1)}}K.TEXT_COMPACTION_MODE_LATCH=900,K.BYTE_COMPACTION_MODE_LATCH=901,K.NUMERIC_COMPACTION_MODE_LATCH=902,K.BYTE_COMPACTION_MODE_LATCH_6=924,K.ECI_USER_DEFINED=925,K.ECI_GENERAL_PURPOSE=926,K.ECI_CHARSET=927,K.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,K.MACRO_PDF417_TERMINATOR=922,K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,K.MAX_NUMERIC_CODEWORDS=15,K.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,K.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,K.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,K.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,K.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,K.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,K.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,K.PL=25,K.LL=27,K.AS=27,K.ML=28,K.AL=28,K.PS=29,K.PAL=29,K.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,K.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",K.EXP900=Os()?xc():[],K.NUMBER_OF_SEQUENCE_CODEWORDS=2;class He{constructor(){}static decode(t,r,o,a,l,d,f){let m=new Yn(t,r,o,a,l),x=null,C=null,N;for(let F=!0;;F=!1){if(r!=null&&(x=He.getRowIndicatorColumn(t,m,r,!0,d,f)),a!=null&&(C=He.getRowIndicatorColumn(t,m,a,!1,d,f)),N=He.merge(x,C),N==null)throw $.getNotFoundInstance();let z=N.getBoundingBox();if(F&&z!=null&&(z.getMinY()<m.getMinY()||z.getMaxY()>m.getMaxY()))m=z;else break}N.setBoundingBox(m);let I=N.getBarcodeColumnCount()+1;N.setDetectionResultColumn(0,x),N.setDetectionResultColumn(I,C);let R=x!=null;for(let F=1;F<=I;F++){let z=R?F:I-F;if(N.getDetectionResultColumn(z)!==void 0)continue;let W;z===0||z===I?W=new Oa(m,z===0):W=new Ii(m),N.setDetectionResultColumn(z,W);let Q=-1,de=Q;for(let he=m.getMinY();he<=m.getMaxY();he++){if(Q=He.getStartColumn(N,z,he,R),Q<0||Q>m.getMaxX()){if(de===-1)continue;Q=de}let ae=He.detectCodeword(t,m.getMinX(),m.getMaxX(),R,Q,he,d,f);ae!=null&&(W.setCodeword(he,ae),de=Q,d=Math.min(d,ae.getWidth()),f=Math.max(f,ae.getWidth()))}}return He.createDecoderResult(N)}static merge(t,r){if(t==null&&r==null)return null;let o=He.getBarcodeMetadata(t,r);if(o==null)return null;let a=Yn.merge(He.adjustBoundingBox(t),He.adjustBoundingBox(r));return new Mi(o,a)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let o=He.getMax(r),a=0;for(let f of r)if(a+=o-f,f>0)break;let l=t.getCodewords();for(let f=0;a>0&&l[f]==null;f++)a--;let d=0;for(let f=r.length-1;f>=0&&(d+=o-r[f],!(r[f]>0));f--);for(let f=l.length-1;d>0&&l[f]==null;f--)d--;return t.getBoundingBox().addMissingRows(a,d,t.isLeft())}static getMax(t){let r=-1;for(let o of t)r=Math.max(r,o);return r}static getBarcodeMetadata(t,r){let o;if(t==null||(o=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let a;return r==null||(a=r.getBarcodeMetadata())==null?o:o.getColumnCount()!==a.getColumnCount()&&o.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&o.getRowCount()!==a.getRowCount()?null:o}static getRowIndicatorColumn(t,r,o,a,l,d){let f=new Oa(r,a);for(let m=0;m<2;m++){let x=m===0?1:-1,C=Math.trunc(Math.trunc(o.getX()));for(let N=Math.trunc(Math.trunc(o.getY()));N<=r.getMaxY()&&N>=r.getMinY();N+=x){let I=He.detectCodeword(t,0,t.getWidth(),a,C,N,l,d);I!=null&&(f.setCodeword(N,I),a?C=I.getStartX():C=I.getEndX())}}return f}static adjustCodewordCount(t,r){let o=r[0][1],a=o.getValue(),l=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-He.getNumberOfECCodeWords(t.getBarcodeECLevel());if(a.length===0){if(l<1||l>we.MAX_CODEWORDS_IN_BARCODE)throw $.getNotFoundInstance();o.setValue(l)}else a[0]!==l&&o.setValue(l)}static createDecoderResult(t){let r=He.createBarcodeMatrix(t);He.adjustCodewordCount(t,r);let o=new Array,a=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),l=[],d=new Array;for(let m=0;m<t.getBarcodeRowCount();m++)for(let x=0;x<t.getBarcodeColumnCount();x++){let C=r[m][x+1].getValue(),N=m*t.getBarcodeColumnCount()+x;C.length===0?o.push(N):C.length===1?a[N]=C[0]:(d.push(N),l.push(C))}let f=new Array(l.length);for(let m=0;m<f.length;m++)f[m]=l[m];return He.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),a,we.toIntArray(o),we.toIntArray(d),f)}static createDecoderResultFromAmbiguousValues(t,r,o,a,l){let d=new Int32Array(a.length),f=100;for(;f-- >0;){for(let m=0;m<d.length;m++)r[a[m]]=l[m][d[m]];try{return He.decodeCodewords(r,t,o)}catch(m){if(!(m instanceof V))throw m}if(d.length===0)throw V.getChecksumInstance();for(let m=0;m<d.length;m++)if(d[m]<l[m].length-1){d[m]++;break}else if(d[m]=0,m===d.length-1)throw V.getChecksumInstance()}throw V.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let a=0;a<r.length;a++)for(let l=0;l<r[a].length;l++)r[a][l]=new Ti;let o=0;for(let a of t.getDetectionResultColumns()){if(a!=null){for(let l of a.getCodewords())if(l!=null){let d=l.getRowNumber();if(d>=0){if(d>=r.length)continue;r[d][o].setValue(l.getValue())}}}o++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,o,a){let l=a?1:-1,d=null;if(He.isValidBarcodeColumn(t,r-l)&&(d=t.getDetectionResultColumn(r-l).getCodeword(o)),d!=null)return a?d.getEndX():d.getStartX();if(d=t.getDetectionResultColumn(r).getCodewordNearby(o),d!=null)return a?d.getStartX():d.getEndX();if(He.isValidBarcodeColumn(t,r-l)&&(d=t.getDetectionResultColumn(r-l).getCodewordNearby(o)),d!=null)return a?d.getEndX():d.getStartX();let f=0;for(;He.isValidBarcodeColumn(t,r-l);){r-=l;for(let m of t.getDetectionResultColumn(r).getCodewords())if(m!=null)return(a?m.getEndX():m.getStartX())+l*f*(m.getEndX()-m.getStartX());f++}return a?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,o,a,l,d,f,m){l=He.adjustCodewordStartColumn(t,r,o,a,l,d);let x=He.getModuleBitCount(t,r,o,a,l,d);if(x==null)return null;let C,N=Ke.sum(x);if(a)C=l+N;else{for(let F=0;F<x.length/2;F++){let z=x[F];x[F]=x[x.length-1-F],x[x.length-1-F]=z}C=l,l=C-N}if(!He.checkCodewordSkew(N,f,m))return null;let I=wn.getDecodedValue(x),R=we.getCodeword(I);return R===-1?null:new si(l,C,He.getCodewordBucketNumber(I),R)}static getModuleBitCount(t,r,o,a,l,d){let f=l,m=new Int32Array(8),x=0,C=a?1:-1,N=a;for(;(a?f<o:f>=r)&&x<m.length;)t.get(f,d)===N?(m[x]++,f+=C):(x++,N=!N);return x===m.length||f===(a?o:r)&&x===m.length-1?m:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,o,a,l,d){let f=l,m=a?-1:1;for(let x=0;x<2;x++){for(;(a?f>=r:f<o)&&a===t.get(f,d);){if(Math.abs(l-f)>He.CODEWORD_SKEW_SIZE)return l;f+=m}m=-m,a=!a}return f}static checkCodewordSkew(t,r,o){return r-He.CODEWORD_SKEW_SIZE<=t&&t<=o+He.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,o){if(t.length===0)throw Z.getFormatInstance();let a=1<<r+1,l=He.correctErrors(t,o,a);He.verifyCodewordCount(t,a);let d=K.decode(t,""+r);return d.setErrorsCorrected(l),d.setErasures(o.length),d}static correctErrors(t,r,o){if(r!=null&&r.length>o/2+He.MAX_ERRORS||o<0||o>He.MAX_EC_CODEWORDS)throw V.getChecksumInstance();return He.errorCorrection.decode(t,o,r)}static verifyCodewordCount(t,r){if(t.length<4)throw Z.getFormatInstance();let o=t[0];if(o>t.length)throw Z.getFormatInstance();if(o===0)if(r<t.length)t[0]=t.length-r;else throw Z.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),o=0,a=r.length-1;for(;!((t&1)!==o&&(o=t&1,a--,a<0));)r[a]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return He.getCodewordBucketNumber(He.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new Xn;for(let o=0;o<t.length;o++){r.format("Row %2d: ",o);for(let a=0;a<t[o].length;a++){let l=t[o][a];l.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}r.format("%n")}return r.toString()}}He.CODEWORD_SKEW_SIZE=2,He.MAX_ERRORS=3,He.MAX_EC_CODEWORDS=512,He.errorCorrection=new ks;class $t{decode(t,r=null){let o=$t.decode(t,r,!1);if(o==null||o.length===0||o[0]==null)throw $.getNotFoundInstance();return o[0]}decodeMultiple(t,r=null){try{return $t.decode(t,r,!0)}catch(o){throw o instanceof Z||o instanceof V?$.getNotFoundInstance():o}}static decode(t,r,o){const a=new Array,l=ze.detectMultiple(t,r,o);for(const d of l.getPoints()){const f=He.decode(l.getBits(),d[4],d[5],d[6],d[7],$t.getMinCodewordWidth(d),$t.getMaxCodewordWidth(d)),m=new Fe(f.getText(),f.getRawBytes(),void 0,d,ue.PDF_417);m.putMetadata(gt.ERROR_CORRECTION_LEVEL,f.getECLevel());const x=f.getOther();x!=null&&m.putMetadata(gt.PDF417_EXTRA_METADATA,x),a.push(m)}return a.map(d=>d)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?B.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max($t.getMaxWidth(t[0],t[4]),$t.getMaxWidth(t[6],t[2])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN),Math.max($t.getMaxWidth(t[1],t[5]),$t.getMaxWidth(t[7],t[3])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min($t.getMinWidth(t[0],t[4]),$t.getMinWidth(t[6],t[2])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN),Math.min($t.getMinWidth(t[1],t[5]),$t.getMinWidth(t[7],t[3])*we.MODULES_IN_CODEWORD/we.MODULES_IN_STOP_PATTERN)))}reset(){}}class Tn extends v{}Tn.kind="ReaderException";class Da{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!u(t)&&t.get(re.TRY_HARDER)===!0,o=u(t)?null:t.get(re.POSSIBLE_FORMATS),a=new Array;if(!u(o)){const l=o.some(d=>d===ue.UPC_A||d===ue.UPC_E||d===ue.EAN_13||d===ue.EAN_8||d===ue.CODABAR||d===ue.CODE_39||d===ue.CODE_93||d===ue.CODE_128||d===ue.ITF||d===ue.RSS_14||d===ue.RSS_EXPANDED);l&&!r&&a.push(new Zr(t,this.verbose)),o.includes(ue.QR_CODE)&&a.push(new qt),o.includes(ue.DATA_MATRIX)&&a.push(new ht),o.includes(ue.AZTEC)&&a.push(new Ur),o.includes(ue.PDF_417)&&a.push(new $t),l&&r&&a.push(new Zr(t,this.verbose))}a.length===0&&(r||a.push(new Zr(t,this.verbose)),a.push(new qt),a.push(new ht),a.push(new Ur),a.push(new $t),r&&a.push(new Zr(t,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new Tn("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(o){if(o instanceof Tn)continue}throw new $("No MultiFormat Readers were able to detect the code.")}}class Pa extends dt{constructor(t=null,r=500){const o=new Da;o.setHints(t),super(o,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class Wr extends dt{constructor(t=500){super(new $t,t)}}class Ba extends dt{constructor(t=500){super(new qt,t)}}var Rs;(function(b){b[b.ERROR_CORRECTION=0]="ERROR_CORRECTION",b[b.CHARACTER_SET=1]="CHARACTER_SET",b[b.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",b[b.MIN_SIZE=3]="MIN_SIZE",b[b.MAX_SIZE=4]="MAX_SIZE",b[b.MARGIN=5]="MARGIN",b[b.PDF417_COMPACT=6]="PDF417_COMPACT",b[b.PDF417_COMPACTION=7]="PDF417_COMPACTION",b[b.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",b[b.AZTEC_LAYERS=9]="AZTEC_LAYERS",b[b.QR_VERSION=10]="QR_VERSION"})(Rs||(Rs={}));var Dt=Rs;class Io{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Wt(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let o=r[r.length-1];const a=this.field;for(let l=r.length;l<=t;l++){const d=o.multiply(new Wt(a,Int32Array.from([1,a.exp(l-1+a.getGeneratorBase())])));r.push(d),o=d}}return r[t]}encode(t,r){if(r===0)throw new O("No error correction bytes");const o=t.length-r;if(o<=0)throw new O("No data bytes provided");const a=this.buildGenerator(r),l=new Int32Array(o);U.arraycopy(t,0,l,0,o);let d=new Wt(this.field,l);d=d.multiplyByMonomial(r,1);const m=d.divide(a)[1].getCoefficients(),x=r-m.length;for(let C=0;C<x;C++)t[o+C]=0;U.arraycopy(m,0,t,o+x,m.length)}}class It{constructor(){}static applyMaskPenaltyRule1(t){return It.applyMaskPenaltyRule1Internal(t,!0)+It.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const o=t.getArray(),a=t.getWidth(),l=t.getHeight();for(let d=0;d<l-1;d++){const f=o[d];for(let m=0;m<a-1;m++){const x=f[m];x===f[m+1]&&x===o[d+1][m]&&x===o[d+1][m+1]&&r++}}return It.N2*r}static applyMaskPenaltyRule3(t){let r=0;const o=t.getArray(),a=t.getWidth(),l=t.getHeight();for(let d=0;d<l;d++)for(let f=0;f<a;f++){const m=o[d];f+6<a&&m[f]===1&&m[f+1]===0&&m[f+2]===1&&m[f+3]===1&&m[f+4]===1&&m[f+5]===0&&m[f+6]===1&&(It.isWhiteHorizontal(m,f-4,f)||It.isWhiteHorizontal(m,f+7,f+11))&&r++,d+6<l&&o[d][f]===1&&o[d+1][f]===0&&o[d+2][f]===1&&o[d+3][f]===1&&o[d+4][f]===1&&o[d+5][f]===0&&o[d+6][f]===1&&(It.isWhiteVertical(o,f,d-4,d)||It.isWhiteVertical(o,f,d+7,d+11))&&r++}return r*It.N3}static isWhiteHorizontal(t,r,o){r=Math.max(r,0),o=Math.min(o,t.length);for(let a=r;a<o;a++)if(t[a]===1)return!1;return!0}static isWhiteVertical(t,r,o,a){o=Math.max(o,0),a=Math.min(a,t.length);for(let l=o;l<a;l++)if(t[l][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const o=t.getArray(),a=t.getWidth(),l=t.getHeight();for(let m=0;m<l;m++){const x=o[m];for(let C=0;C<a;C++)x[C]===1&&r++}const d=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-d)*10/d)*It.N4}static getDataMaskBit(t,r,o){let a,l;switch(t){case 0:a=o+r&1;break;case 1:a=o&1;break;case 2:a=r%3;break;case 3:a=(o+r)%3;break;case 4:a=Math.floor(o/2)+Math.floor(r/3)&1;break;case 5:l=o*r,a=(l&1)+l%3;break;case 6:l=o*r,a=(l&1)+l%3&1;break;case 7:l=o*r,a=l%3+(o+r&1)&1;break;default:throw new O("Invalid mask pattern: "+t)}return a===0}static applyMaskPenaltyRule1Internal(t,r){let o=0;const a=r?t.getHeight():t.getWidth(),l=r?t.getWidth():t.getHeight(),d=t.getArray();for(let f=0;f<a;f++){let m=0,x=-1;for(let C=0;C<l;C++){const N=r?d[f][C]:d[C][f];N===x?m++:(m>=5&&(o+=It.N1+(m-5)),m=1,x=N)}m>=5&&(o+=It.N1+(m-5))}return o}}It.N1=3,It.N2=3,It.N3=40,It.N4=10;class hs{constructor(t,r){this.width=t,this.height=r;const o=new Array(r);for(let a=0;a!==r;a++)o[a]=new Uint8Array(t);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,o){this.bytes[r][t]=o}setBoolean(t,r,o){this.bytes[r][t]=o?1:0}clear(t){for(const r of this.bytes)D.fill(r,t)}equals(t){if(!(t instanceof hs))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let o=0,a=this.height;o<a;++o){const l=this.bytes[o],d=r.bytes[o];for(let f=0,m=this.width;f<m;++f)if(l[f]!==d[f])return!1}return!0}toString(){const t=new Ve;for(let r=0,o=this.height;r<o;++r){const a=this.bytes[r];for(let l=0,d=this.width;l<d;++l)switch(a[l]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class oi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new Ve;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<oi.NUM_MASK_PATTERNS}}oi.NUM_MASK_PATTERNS=8;class pt extends v{}pt.kind="WriterException";class Oe{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,o,a,l){Oe.clearMatrix(l),Oe.embedBasicPatterns(o,l),Oe.embedTypeInfo(r,a,l),Oe.maybeEmbedVersionInfo(o,l),Oe.embedDataBits(t,a,l)}static embedBasicPatterns(t,r){Oe.embedPositionDetectionPatternsAndSeparators(r),Oe.embedDarkDotAtLeftBottomCorner(r),Oe.maybeEmbedPositionAdjustmentPatterns(t,r),Oe.embedTimingPatterns(r)}static embedTypeInfo(t,r,o){const a=new X;Oe.makeTypeInfoBits(t,r,a);for(let l=0,d=a.getSize();l<d;++l){const f=a.get(a.getSize()-1-l),m=Oe.TYPE_INFO_COORDINATES[l],x=m[0],C=m[1];if(o.setBoolean(x,C,f),l<8){const N=o.getWidth()-l-1;o.setBoolean(N,8,f)}else{const I=o.getHeight()-7+(l-8);o.setBoolean(8,I,f)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const o=new X;Oe.makeVersionInfoBits(t,o);let a=6*3-1;for(let l=0;l<6;++l)for(let d=0;d<3;++d){const f=o.get(a);a--,r.setBoolean(l,r.getHeight()-11+d,f),r.setBoolean(r.getHeight()-11+d,l,f)}}static embedDataBits(t,r,o){let a=0,l=-1,d=o.getWidth()-1,f=o.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);f>=0&&f<o.getHeight();){for(let m=0;m<2;++m){const x=d-m;if(!Oe.isEmpty(o.get(x,f)))continue;let C;a<t.getSize()?(C=t.get(a),++a):C=!1,r!==255&&It.getDataMaskBit(r,x,f)&&(C=!C),o.setBoolean(x,f,C)}f+=l}l=-l,f+=l,d-=2}if(a!==t.getSize())throw new pt("Not all bits consumed: "+a+"/"+t.getSize())}static findMSBSet(t){return 32-B.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new O("0 polynomial");const o=Oe.findMSBSet(r);for(t<<=o-1;Oe.findMSBSet(t)>=o;)t^=r<<Oe.findMSBSet(t)-o;return t}static makeTypeInfoBits(t,r,o){if(!oi.isValidMaskPattern(r))throw new pt("Invalid mask pattern");const a=t.getBits()<<3|r;o.appendBits(a,5);const l=Oe.calculateBCHCode(a,Oe.TYPE_INFO_POLY);o.appendBits(l,10);const d=new X;if(d.appendBits(Oe.TYPE_INFO_MASK_PATTERN,15),o.xor(d),o.getSize()!==15)throw new pt("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const o=Oe.calculateBCHCode(t.getVersionNumber(),Oe.VERSION_INFO_POLY);if(r.appendBits(o,12),r.getSize()!==18)throw new pt("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const o=(r+1)%2;Oe.isEmpty(t.get(r,6))&&t.setNumber(r,6,o),Oe.isEmpty(t.get(6,r))&&t.setNumber(6,r,o)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new pt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,o){for(let a=0;a<8;++a){if(!Oe.isEmpty(o.get(t+a,r)))throw new pt;o.setNumber(t+a,r,0)}}static embedVerticalSeparationPattern(t,r,o){for(let a=0;a<7;++a){if(!Oe.isEmpty(o.get(t,r+a)))throw new pt;o.setNumber(t,r+a,0)}}static embedPositionAdjustmentPattern(t,r,o){for(let a=0;a<5;++a){const l=Oe.POSITION_ADJUSTMENT_PATTERN[a];for(let d=0;d<5;++d)o.setNumber(t+d,r+a,l[d])}}static embedPositionDetectionPattern(t,r,o){for(let a=0;a<7;++a){const l=Oe.POSITION_DETECTION_PATTERN[a];for(let d=0;d<7;++d)o.setNumber(t+d,r+a,l[d])}}static embedPositionDetectionPatternsAndSeparators(t){const r=Oe.POSITION_DETECTION_PATTERN[0].length;Oe.embedPositionDetectionPattern(0,0,t),Oe.embedPositionDetectionPattern(t.getWidth()-r,0,t),Oe.embedPositionDetectionPattern(0,t.getWidth()-r,t);const o=8;Oe.embedHorizontalSeparationPattern(0,o-1,t),Oe.embedHorizontalSeparationPattern(t.getWidth()-o,o-1,t),Oe.embedHorizontalSeparationPattern(0,t.getWidth()-o,t);const a=7;Oe.embedVerticalSeparationPattern(a,0,t),Oe.embedVerticalSeparationPattern(t.getHeight()-a-1,0,t),Oe.embedVerticalSeparationPattern(a,t.getHeight()-a,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const o=t.getVersionNumber()-1,a=Oe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let l=0,d=a.length;l!==d;l++){const f=a[l];if(f>=0)for(let m=0;m!==d;m++){const x=a[m];x>=0&&Oe.isEmpty(r.get(x,f))&&Oe.embedPositionAdjustmentPattern(x-2,f-2,r)}}}}Oe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Oe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Oe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Oe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Oe.VERSION_INFO_POLY=7973,Oe.TYPE_INFO_POLY=1335,Oe.TYPE_INFO_MASK_PATTERN=21522;class yc{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class yt{constructor(){}static calculateMaskPenalty(t){return It.applyMaskPenaltyRule1(t)+It.applyMaskPenaltyRule2(t)+It.applyMaskPenaltyRule3(t)+It.applyMaskPenaltyRule4(t)}static encode(t,r,o=null){let a=yt.DEFAULT_BYTE_MODE_ENCODING;const l=o!==null&&o.get(Dt.CHARACTER_SET)!==void 0;l&&(a=o.get(Dt.CHARACTER_SET).toString());const d=this.chooseMode(t,a),f=new X;if(d===Me.BYTE&&(l||yt.DEFAULT_BYTE_MODE_ENCODING!==a)){const he=ee.getCharacterSetECIByName(a);he!==void 0&&this.appendECI(he,f)}this.appendModeInfo(d,f);const m=new X;this.appendBytes(t,d,m,a);let x;if(o!==null&&o.get(Dt.QR_VERSION)!==void 0){const he=Number.parseInt(o.get(Dt.QR_VERSION).toString(),10);x=ye.getVersionForNumber(he);const ae=this.calculateBitsNeeded(d,f,m,x);if(!this.willFit(ae,x,r))throw new pt("Data too big for requested version")}else x=this.recommendVersion(r,d,f,m);const C=new X;C.appendBitArray(f);const N=d===Me.BYTE?m.getSizeInBytes():t.length;this.appendLengthInfo(N,x,d,C),C.appendBitArray(m);const I=x.getECBlocksForLevel(r),R=x.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(R,C);const F=this.interleaveWithECBytes(C,x.getTotalCodewords(),R,I.getNumBlocks()),z=new oi;z.setECLevel(r),z.setMode(d),z.setVersion(x);const W=x.getDimensionForVersion(),Q=new hs(W,W),de=this.chooseMaskPattern(F,r,x,Q);return z.setMaskPattern(de),Oe.buildMatrix(F,r,x,de,Q),z.setMatrix(Q),z}static recommendVersion(t,r,o,a){const l=this.calculateBitsNeeded(r,o,a,ye.getVersionForNumber(1)),d=this.chooseVersion(l,t),f=this.calculateBitsNeeded(r,o,a,d);return this.chooseVersion(f,t)}static calculateBitsNeeded(t,r,o,a){return r.getSize()+t.getCharacterCountBits(a)+o.getSize()}static getAlphanumericCode(t){return t<yt.ALPHANUMERIC_TABLE.length?yt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(ee.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return Me.KANJI;let o=!1,a=!1;for(let l=0,d=t.length;l<d;++l){const f=t.charAt(l);if(yt.isDigit(f))o=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)a=!0;else return Me.BYTE}return a?Me.ALPHANUMERIC:o?Me.NUMERIC:Me.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=Re.encode(t,ee.SJIS)}catch{return!1}const o=r.length;if(o%2!==0)return!1;for(let a=0;a<o;a+=2){const l=r[a]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(t,r,o,a){let l=Number.MAX_SAFE_INTEGER,d=-1;for(let f=0;f<oi.NUM_MASK_PATTERNS;f++){Oe.buildMatrix(t,r,o,f,a);let m=this.calculateMaskPenalty(a);m<l&&(l=m,d=f)}return d}static chooseVersion(t,r){for(let o=1;o<=40;o++){const a=ye.getVersionForNumber(o);if(yt.willFit(t,a,r))return a}throw new pt("Data too big")}static willFit(t,r,o){const a=r.getTotalCodewords(),d=r.getECBlocksForLevel(o).getTotalECCodewords(),f=a-d,m=(t+7)/8;return f>=m}static terminateBits(t,r){const o=t*8;if(r.getSize()>o)throw new pt("data bits cannot fit in the QR Code"+r.getSize()+" > "+o);for(let d=0;d<4&&r.getSize()<o;++d)r.appendBit(!1);const a=r.getSize()&7;if(a>0)for(let d=a;d<8;d++)r.appendBit(!1);const l=t-r.getSizeInBytes();for(let d=0;d<l;++d)r.appendBits(d&1?17:236,8);if(r.getSize()!==o)throw new pt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,o,a,l,d){if(a>=o)throw new pt("Block ID too large");const f=t%o,m=o-f,x=Math.floor(t/o),C=x+1,N=Math.floor(r/o),I=N+1,R=x-N,F=C-I;if(R!==F)throw new pt("EC bytes mismatch");if(o!==m+f)throw new pt("RS blocks mismatch");if(t!==(N+R)*m+(I+F)*f)throw new pt("Total bytes mismatch");a<m?(l[0]=N,d[0]=R):(l[0]=I,d[0]=F)}static interleaveWithECBytes(t,r,o,a){if(t.getSizeInBytes()!==o)throw new pt("Number of bits and data bytes does not match");let l=0,d=0,f=0;const m=new Array;for(let C=0;C<a;++C){const N=new Int32Array(1),I=new Int32Array(1);yt.getNumDataBytesAndNumECBytesForBlockID(r,o,a,C,N,I);const R=N[0],F=new Uint8Array(R);t.toBytes(8*l,F,0,R);const z=yt.generateECBytes(F,I[0]);m.push(new yc(F,z)),d=Math.max(d,R),f=Math.max(f,z.length),l+=N[0]}if(o!==l)throw new pt("Data bytes does not match offset");const x=new X;for(let C=0;C<d;++C)for(const N of m){const I=N.getDataBytes();C<I.length&&x.appendBits(I[C],8)}for(let C=0;C<f;++C)for(const N of m){const I=N.getErrorCorrectionBytes();C<I.length&&x.appendBits(I[C],8)}if(r!==x.getSizeInBytes())throw new pt("Interleaving error: "+r+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(t,r){const o=t.length,a=new Int32Array(o+r);for(let d=0;d<o;d++)a[d]=t[d]&255;new Io(Qe.QR_CODE_FIELD_256).encode(a,r);const l=new Uint8Array(r);for(let d=0;d<r;d++)l[d]=a[o+d];return l}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,o,a){const l=o.getCharacterCountBits(r);if(t>=1<<l)throw new pt(t+" is bigger than "+((1<<l)-1));a.appendBits(t,l)}static appendBytes(t,r,o,a){switch(r){case Me.NUMERIC:yt.appendNumericBytes(t,o);break;case Me.ALPHANUMERIC:yt.appendAlphanumericBytes(t,o);break;case Me.BYTE:yt.append8BitBytes(t,o,a);break;case Me.KANJI:yt.appendKanjiBytes(t,o);break;default:throw new pt("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=yt.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const o=t.length;let a=0;for(;a<o;){const l=yt.getDigit(t.charAt(a));if(a+2<o){const d=yt.getDigit(t.charAt(a+1)),f=yt.getDigit(t.charAt(a+2));r.appendBits(l*100+d*10+f,10),a+=3}else if(a+1<o){const d=yt.getDigit(t.charAt(a+1));r.appendBits(l*10+d,7),a+=2}else r.appendBits(l,4),a++}}static appendAlphanumericBytes(t,r){const o=t.length;let a=0;for(;a<o;){const l=yt.getAlphanumericCode(t.charCodeAt(a));if(l===-1)throw new pt;if(a+1<o){const d=yt.getAlphanumericCode(t.charCodeAt(a+1));if(d===-1)throw new pt;r.appendBits(l*45+d,11),a+=2}else r.appendBits(l,6),a++}}static append8BitBytes(t,r,o){let a;try{a=Re.encode(t,o)}catch(l){throw new pt(l)}for(let l=0,d=a.length;l!==d;l++){const f=a[l];r.appendBits(f,8)}}static appendKanjiBytes(t,r){let o;try{o=Re.encode(t,ee.SJIS)}catch(l){throw new pt(l)}const a=o.length;for(let l=0;l<a;l+=2){const d=o[l]&255,f=o[l+1]&255,m=d<<8&4294967295|f;let x=-1;if(m>=33088&&m<=40956?x=m-33088:m>=57408&&m<=60351&&(x=m-49472),x===-1)throw new pt("Invalid byte sequence");const C=(x>>8)*192+(x&255);r.appendBits(C,13)}}static appendECI(t,r){r.appendBits(Me.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}yt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),yt.DEFAULT_BYTE_MODE_ENCODING=ee.UTF8.getName();class Gr{write(t,r,o,a=null){if(t.length===0)throw new O("Found empty contents");if(r<0||o<0)throw new O("Requested dimensions are too small: "+r+"x"+o);let l=Ge.L,d=Gr.QUIET_ZONE_SIZE;a!==null&&(a.get(Dt.ERROR_CORRECTION)!==void 0&&(l=Ge.fromString(a.get(Dt.ERROR_CORRECTION).toString())),a.get(Dt.MARGIN)!==void 0&&(d=Number.parseInt(a.get(Dt.MARGIN).toString(),10)));const f=yt.encode(t,l,a);return this.renderResult(f,r,o,d)}writeToDom(t,r,o,a,l=null){typeof t=="string"&&(t=document.querySelector(t));const d=this.write(r,o,a,l);t&&t.appendChild(d)}renderResult(t,r,o,a){const l=t.getMatrix();if(l===null)throw new yn;const d=l.getWidth(),f=l.getHeight(),m=d+a*2,x=f+a*2,C=Math.max(r,m),N=Math.max(o,x),I=Math.min(Math.floor(C/m),Math.floor(N/x)),R=Math.floor((C-d*I)/2),F=Math.floor((N-f*I)/2),z=this.createSVGElement(C,N);for(let W=0,Q=F;W<f;W++,Q+=I)for(let de=0,he=R;de<d;de++,he+=I)if(l.get(de,W)===1){const ae=this.createSvgRectElement(he,Q,I,I);z.appendChild(ae)}return z}createSVGElement(t,r){const o=document.createElementNS(Gr.SVG_NS,"svg");return o.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width",r.toString()),o}createSvgRectElement(t,r,o,a){const l=document.createElementNS(Gr.SVG_NS,"rect");return l.setAttributeNS(null,"x",t.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"height",o.toString()),l.setAttributeNS(null,"width",a.toString()),l.setAttributeNS(null,"fill","#000000"),l}}Gr.QUIET_ZONE_SIZE=4,Gr.SVG_NS="http://www.w3.org/2000/svg";class Ir{encode(t,r,o,a,l){if(t.length===0)throw new O("Found empty contents");if(r!==ue.QR_CODE)throw new O("Can only encode QR_CODE, but got "+r);if(o<0||a<0)throw new O(`Requested dimensions are too small: ${o}x${a}`);let d=Ge.L,f=Ir.QUIET_ZONE_SIZE;l!==null&&(l.get(Dt.ERROR_CORRECTION)!==void 0&&(d=Ge.fromString(l.get(Dt.ERROR_CORRECTION).toString())),l.get(Dt.MARGIN)!==void 0&&(f=Number.parseInt(l.get(Dt.MARGIN).toString(),10)));const m=yt.encode(t,d,l);return Ir.renderResult(m,o,a,f)}static renderResult(t,r,o,a){const l=t.getMatrix();if(l===null)throw new yn;const d=l.getWidth(),f=l.getHeight(),m=d+a*2,x=f+a*2,C=Math.max(r,m),N=Math.max(o,x),I=Math.min(Math.floor(C/m),Math.floor(N/x)),R=Math.floor((C-d*I)/2),F=Math.floor((N-f*I)/2),z=new Le(C,N);for(let W=0,Q=F;W<f;W++,Q+=I)for(let de=0,he=R;de<d;de++,he+=I)l.get(de,W)===1&&z.setRegion(he,Q,I,I);return z}}Ir.QUIET_ZONE_SIZE=4;class ai{encode(t,r,o,a,l){let d;switch(r){case ue.QR_CODE:d=new Ir;break;default:throw new O("No encoder available for format "+r)}return d.encode(t,r,o,a,l)}}class cr extends ne{constructor(t,r,o,a,l,d,f,m){if(super(d,f),this.yuvData=t,this.dataWidth=r,this.dataHeight=o,this.left=a,this.top=l,a+d>r||l+f>o)throw new O("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(d,f)}getRow(t,r){if(t<0||t>=this.getHeight())throw new O("Requested row is outside the image: "+t);const o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));const a=(t+this.top)*this.dataWidth+this.left;return U.arraycopy(this.yuvData,a,r,0,o),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const o=t*r,a=new Uint8ClampedArray(o);let l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return U.arraycopy(this.yuvData,l,a,0,o),a;for(let d=0;d<r;d++){const f=d*t;U.arraycopy(this.yuvData,l,a,f,t),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,r,o,a){return new cr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,o,a,!1)}renderThumbnail(){const t=this.getWidth()/cr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/cr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(t*r),a=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let d=0;d<r;d++){const f=d*t;for(let m=0;m<t;m++){const x=a[l+m*cr.THUMBNAIL_SCALE_FACTOR]&255;o[f+m]=4278190080|x*65793}l+=this.dataWidth*cr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/cr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/cr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const o=this.yuvData;for(let a=0,l=this.top*this.dataWidth+this.left;a<r;a++,l+=this.dataWidth){const d=l+t/2;for(let f=l,m=l+t-1;f<d;f++,m--){const x=o[f];o[f]=o[m],o[m]=x}}}invert(){return new ke(this)}}cr.THUMBNAIL_SCALE_FACTOR=2;class li extends ne{constructor(t,r,o,a,l,d,f){if(super(r,o),this.dataWidth=a,this.dataHeight=l,this.left=d,this.top=f,t.BYTES_PER_ELEMENT===4){const m=r*o,x=new Uint8ClampedArray(m);for(let C=0;C<m;C++){const N=t[C],I=N>>16&255,R=N>>7&510,F=N&255;x[C]=(I+R+F)/4&255}this.luminances=x}else this.luminances=t;if(a===void 0&&(this.dataWidth=r),l===void 0&&(this.dataHeight=o),d===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+o>this.dataHeight)throw new O("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new O("Requested row is outside the image: "+t);const o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));const a=(t+this.top)*this.dataWidth+this.left;return U.arraycopy(this.luminances,a,r,0,o),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const o=t*r,a=new Uint8ClampedArray(o);let l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return U.arraycopy(this.luminances,l,a,0,o),a;for(let d=0;d<r;d++){const f=d*t;U.arraycopy(this.luminances,l,a,f,t),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,r,o,a){return new li(this.luminances,o,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new ke(this)}}class Mn extends ee{static forName(t){return this.getCharacterSetECIByName(t)}}class Ds{}Ds.ISO_8859_1=ee.ISO8859_1;class To{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class ja{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class Mo{constructor(t){this.previous=t}getPrevious(){return this.previous}}class Yr extends Mo{constructor(t,r,o){super(t),this.value=r,this.bitCount=o}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new Yr(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Yr(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+B.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class ko extends Yr{constructor(t,r,o){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=o}appendTo(t,r){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):o===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+o],8)}addBinaryShift(t,r){return new ko(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function wc(b,t,r){return new ko(b,t,r)}function ki(b,t,r){return new Yr(b,t,r)}const _c=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Xt=0,Tr=1,Fn=2,ur=3,dr=4,Oi=new Yr(null,0,0),Oo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function fs(b){for(let t of b)D.fill(t,-1);return b[Xt][dr]=0,b[Tr][dr]=0,b[Tr][Xt]=28,b[ur][dr]=0,b[Fn][dr]=0,b[Fn][Xt]=15,b}const Lo=fs(D.createInt32Array(6,6));class kn{constructor(t,r,o,a){this.token=t,this.mode=r,this.binaryShiftByteCount=o,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let o=this.bitCount,a=this.token;if(t!==this.mode){let d=Oo[this.mode][t];a=ki(a,d&65535,d>>16),o+=d>>16}let l=t===Fn?4:5;return a=ki(a,r,l),new kn(a,t,0,o+l)}shiftAndAppend(t,r){let o=this.token,a=this.mode===Fn?4:5;return o=ki(o,Lo[this.mode][t],a),o=ki(o,r,5),new kn(o,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(t){let r=this.token,o=this.mode,a=this.bitCount;if(this.mode===dr||this.mode===Fn){let f=Oo[o][Xt];r=ki(r,f&65535,f>>16),a+=f>>16,o=Xt}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new kn(r,o,this.binaryShiftByteCount+1,a+l);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(t+1)),d}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=wc(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new kn(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(Oo[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=kn.calculateBinaryShiftCost(t)-kn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let a=this.endBinaryShift(t.length).token;a!==null;a=a.getPrevious())r.unshift(a);let o=new X;for(const a of r)a.appendTo(o,t);return o}toString(){return me.format("%s bits=%d bytes=%d",_c[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}kn.INITIAL_STATE=new kn(Oi,Xt,0,0);function vc(b){const t=me.getCharCode(" "),r=me.getCharCode("."),o=me.getCharCode(",");b[Xt][t]=1;const a=me.getCharCode("Z"),l=me.getCharCode("A");for(let I=l;I<=a;I++)b[Xt][I]=I-l+2;b[Tr][t]=1;const d=me.getCharCode("z"),f=me.getCharCode("a");for(let I=f;I<=d;I++)b[Tr][I]=I-f+2;b[Fn][t]=1;const m=me.getCharCode("9"),x=me.getCharCode("0");for(let I=x;I<=m;I++)b[Fn][I]=I-x+2;b[Fn][o]=12,b[Fn][r]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let I=0;I<C.length;I++)b[ur][me.getCharCode(C[I])]=I;const N=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<N.length;I++)me.getCharCode(N[I])>0&&(b[dr][me.getCharCode(N[I])]=I);return b}const hr=vc(D.createInt32Array(5,256));class Xr{constructor(t){this.text=t}encode(){const t=me.getCharCode(" "),r=me.getCharCode(`
`);let o=ja.singletonList(kn.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let d,f=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case me.getCharCode("\r"):d=f===r?2:0;break;case me.getCharCode("."):d=f===t?3:0;break;case me.getCharCode(","):d=f===t?4:0;break;case me.getCharCode(":"):d=f===t?5:0;break;default:d=0}d>0?(o=Xr.updateStateListForPair(o,l,d),l++):o=this.updateStateListForChar(o,l)}return ja.min(o,(l,d)=>l.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const o=[];for(let a of t)this.updateStateForChar(a,r,o);return Xr.simplifyStates(o)}updateStateForChar(t,r,o){let a=this.text[r]&255,l=hr[t.getMode()][a]>0,d=null;for(let f=0;f<=dr;f++){let m=hr[f][a];if(m>0){if(d==null&&(d=t.endBinaryShift(r)),!l||f===t.getMode()||f===Fn){const x=d.latchAndAppend(f,m);o.push(x)}if(!l&&Lo[t.getMode()][f]>=0){const x=d.shiftAndAppend(f,m);o.push(x)}}}if(t.getBinaryShiftByteCount()>0||hr[t.getMode()][a]===0){let f=t.addBinaryShiftChar(r);o.push(f)}}static updateStateListForPair(t,r,o){const a=[];for(let l of t)this.updateStateForPair(l,r,o,a);return this.simplifyStates(a)}static updateStateForPair(t,r,o,a){let l=t.endBinaryShift(r);if(a.push(l.latchAndAppend(dr,o)),t.getMode()!==dr&&a.push(l.shiftAndAppend(dr,o)),o===3||o===4){let d=l.latchAndAppend(Fn,16-o).latchAndAppend(Fn,1);a.push(d)}if(t.getBinaryShiftByteCount()>0){let d=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(d)}}static simplifyStates(t){let r=[];for(const o of t){let a=!0;for(const l of r){if(l.isBetterThanOrEqualTo(o)){a=!1;break}o.isBetterThanOrEqualTo(l)&&(r=r.filter(d=>d!==l))}a&&r.push(o)}return r}}class nt{constructor(){}static encodeBytes(t){return nt.encode(t,nt.DEFAULT_EC_PERCENT,nt.DEFAULT_AZTEC_LAYERS)}static encode(t,r,o){let a=new Xr(t).encode(),l=B.truncDivision(a.getSize()*r,100)+11,d=a.getSize()+l,f,m,x,C,N;if(o!==nt.DEFAULT_AZTEC_LAYERS){if(f=o<0,m=Math.abs(o),m>(f?nt.MAX_NB_BITS_COMPACT:nt.MAX_NB_BITS))throw new O(me.format("Illegal value %s for layers",o));x=nt.totalBitsInLayer(m,f),C=nt.WORD_SIZE[m];let ae=x-x%C;if(N=nt.stuffBits(a,C),N.getSize()+l>ae)throw new O("Data to large for user specified layer");if(f&&N.getSize()>C*64)throw new O("Data to large for user specified layer")}else{C=0,N=null;for(let ae=0;;ae++){if(ae>nt.MAX_NB_BITS)throw new O("Data too large for an Aztec code");if(f=ae<=3,m=f?ae+1:ae,x=nt.totalBitsInLayer(m,f),d>x)continue;(N==null||C!==nt.WORD_SIZE[m])&&(C=nt.WORD_SIZE[m],N=nt.stuffBits(a,C));let Ye=x-x%C;if(!(f&&N.getSize()>C*64)&&N.getSize()+l<=Ye)break}}let I=nt.generateCheckWords(N,x,C),R=N.getSize()/C,F=nt.generateModeMessage(f,m,R),z=(f?11:14)+m*4,W=new Int32Array(z),Q;if(f){Q=z;for(let ae=0;ae<W.length;ae++)W[ae]=ae}else{Q=z+1+2*B.truncDivision(B.truncDivision(z,2)-1,15);let ae=B.truncDivision(z,2),Ye=B.truncDivision(Q,2);for(let Ue=0;Ue<ae;Ue++){let Tt=Ue+B.truncDivision(Ue,15);W[ae-Ue-1]=Ye-Tt-1,W[ae+Ue]=Ye+Tt+1}}let de=new Le(Q);for(let ae=0,Ye=0;ae<m;ae++){let Ue=(m-ae)*4+(f?9:12);for(let Tt=0;Tt<Ue;Tt++){let _n=Tt*2;for(let vn=0;vn<2;vn++)I.get(Ye+_n+vn)&&de.set(W[ae*2+vn],W[ae*2+Tt]),I.get(Ye+Ue*2+_n+vn)&&de.set(W[ae*2+Tt],W[z-1-ae*2-vn]),I.get(Ye+Ue*4+_n+vn)&&de.set(W[z-1-ae*2-vn],W[z-1-ae*2-Tt]),I.get(Ye+Ue*6+_n+vn)&&de.set(W[z-1-ae*2-Tt],W[ae*2+vn])}Ye+=Ue*8}if(nt.drawModeMessage(de,f,Q,F),f)nt.drawBullsEye(de,B.truncDivision(Q,2),5);else{nt.drawBullsEye(de,B.truncDivision(Q,2),7);for(let ae=0,Ye=0;ae<B.truncDivision(z,2)-1;ae+=15,Ye+=16)for(let Ue=B.truncDivision(Q,2)&1;Ue<Q;Ue+=2)de.set(B.truncDivision(Q,2)-Ye,Ue),de.set(B.truncDivision(Q,2)+Ye,Ue),de.set(Ue,B.truncDivision(Q,2)-Ye),de.set(Ue,B.truncDivision(Q,2)+Ye)}let he=new To;return he.setCompact(f),he.setSize(Q),he.setLayers(m),he.setCodeWords(R),he.setMatrix(de),he}static drawBullsEye(t,r,o){for(let a=0;a<o;a+=2)for(let l=r-a;l<=r+a;l++)t.set(l,r-a),t.set(l,r+a),t.set(r-a,l),t.set(r+a,l);t.set(r-o,r-o),t.set(r-o+1,r-o),t.set(r-o,r-o+1),t.set(r+o,r-o),t.set(r+o,r-o+1),t.set(r+o,r+o-1)}static generateModeMessage(t,r,o){let a=new X;return t?(a.appendBits(r-1,2),a.appendBits(o-1,6),a=nt.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(o-1,11),a=nt.generateCheckWords(a,40,4)),a}static drawModeMessage(t,r,o,a){let l=B.truncDivision(o,2);if(r)for(let d=0;d<7;d++){let f=l-3+d;a.get(d)&&t.set(f,l-5),a.get(d+7)&&t.set(l+5,f),a.get(20-d)&&t.set(f,l+5),a.get(27-d)&&t.set(l-5,f)}else for(let d=0;d<10;d++){let f=l-5+d+B.truncDivision(d,5);a.get(d)&&t.set(f,l-7),a.get(d+10)&&t.set(l+7,f),a.get(29-d)&&t.set(f,l+7),a.get(39-d)&&t.set(l-7,f)}}static generateCheckWords(t,r,o){let a=t.getSize()/o,l=new Io(nt.getGF(o)),d=B.truncDivision(r,o),f=nt.bitsToWords(t,o,d);l.encode(f,d-a);let m=r%o,x=new X;x.appendBits(0,m);for(const C of Array.from(f))x.appendBits(C,o);return x}static bitsToWords(t,r,o){let a=new Int32Array(o),l,d;for(l=0,d=t.getSize()/r;l<d;l++){let f=0;for(let m=0;m<r;m++)f|=t.get(l*r+m)?1<<r-m-1:0;a[l]=f}return a}static getGF(t){switch(t){case 4:return Qe.AZTEC_PARAM;case 6:return Qe.AZTEC_DATA_6;case 8:return Qe.AZTEC_DATA_8;case 10:return Qe.AZTEC_DATA_10;case 12:return Qe.AZTEC_DATA_12;default:throw new O("Unsupported word size "+t)}}static stuffBits(t,r){let o=new X,a=t.getSize(),l=(1<<r)-2;for(let d=0;d<a;d+=r){let f=0;for(let m=0;m<r;m++)(d+m>=a||t.get(d+m))&&(f|=1<<r-1-m);(f&l)===l?(o.appendBits(f&l,r),d--):f&l?o.appendBits(f,r):(o.appendBits(f|1,r),d--)}return o}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}nt.DEFAULT_EC_PERCENT=33,nt.DEFAULT_AZTEC_LAYERS=0,nt.MAX_NB_BITS=32,nt.MAX_NB_BITS_COMPACT=4,nt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Li{encode(t,r,o,a){return this.encodeWithHints(t,r,o,a,null)}encodeWithHints(t,r,o,a,l){let d=Ds.ISO_8859_1,f=nt.DEFAULT_EC_PERCENT,m=nt.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(Dt.CHARACTER_SET)&&(d=Mn.forName(l.get(Dt.CHARACTER_SET).toString())),l.has(Dt.ERROR_CORRECTION)&&(f=B.parseInt(l.get(Dt.ERROR_CORRECTION).toString())),l.has(Dt.AZTEC_LAYERS)&&(m=B.parseInt(l.get(Dt.AZTEC_LAYERS).toString()))),Li.encodeLayers(t,r,o,a,d,f,m)}static encodeLayers(t,r,o,a,l,d,f){if(r!==ue.AZTEC)throw new O("Can only encode AZTEC, but got "+r);let m=nt.encode(me.getBytes(t,l),d,f);return Li.renderResult(m,o,a)}static renderResult(t,r,o){let a=t.getMatrix();if(a==null)throw new yn;let l=a.getWidth(),d=a.getHeight(),f=Math.max(r,l),m=Math.max(o,d),x=Math.min(f/l,m/d),C=(f-l*x)/2,N=(m-d*x)/2,I=new Le(f,m);for(let R=0,F=N;R<d;R++,F+=x)for(let z=0,W=C;z<l;z++,W+=x)a.get(z,R)&&I.setRegion(W,F,x,x);return I}}s.AbstractExpandedDecoder=Ts,s.ArgumentException=k,s.ArithmeticException=sr,s.AztecCode=To,s.AztecCodeReader=Ur,s.AztecCodeWriter=Li,s.AztecDecoder=rt,s.AztecDetector=Ai,s.AztecDetectorResult=vi,s.AztecEncoder=nt,s.AztecHighLevelEncoder=Xr,s.AztecPoint=Gt,s.BarcodeFormat=ue,s.Binarizer=J,s.BinaryBitmap=H,s.BitArray=X,s.BitMatrix=Le,s.BitSource=Ni,s.BrowserAztecCodeReader=Is,s.BrowserBarcodeReader=os,s.BrowserCodeReader=dt,s.BrowserDatamatrixCodeReader=Eo,s.BrowserMultiFormatReader=Pa,s.BrowserPDF417Reader=Wr,s.BrowserQRCodeReader=Ba,s.BrowserQRCodeSvgWriter=Gr,s.CharacterSetECI=ee,s.ChecksumException=V,s.Code128Reader=pe,s.Code39Reader=bt,s.DataMatrixDecodedBitStreamParser=In,s.DataMatrixReader=ht,s.DecodeHintType=re,s.DecoderResult=jr,s.DefaultGridSampler=Ei,s.DetectorResult=zr,s.EAN13Reader=Hr,s.EncodeHintType=Dt,s.Exception=v,s.FormatException=Z,s.GenericGF=Qe,s.GenericGFPoly=Wt,s.GlobalHistogramBinarizer=We,s.GridSampler=Ci,s.GridSamplerInstance=jn,s.HTMLCanvasElementLuminanceSource=ce,s.HybridBinarizer=_e,s.ITFReader=ct,s.IllegalArgumentException=O,s.IllegalStateException=yn,s.InvertedLuminanceSource=ke,s.LuminanceSource=ne,s.MathUtils=Ke,s.MultiFormatOneDReader=Zr,s.MultiFormatReader=Da,s.MultiFormatWriter=ai,s.NotFoundException=$,s.OneDReader=vt,s.PDF417DecodedBitStreamParser=K,s.PDF417DecoderErrorCorrection=ks,s.PDF417Reader=$t,s.PDF417ResultMetadata=No,s.PerspectiveTransform=rn,s.PlanarYUVLuminanceSource=cr,s.QRCodeByteMatrix=hs,s.QRCodeDataMask=cn,s.QRCodeDecodedBitStreamParser=_t,s.QRCodeDecoderErrorCorrectionLevel=Ge,s.QRCodeDecoderFormatInformation=ln,s.QRCodeEncoder=yt,s.QRCodeEncoderQRCode=oi,s.QRCodeMaskUtil=It,s.QRCodeMatrixUtil=Oe,s.QRCodeMode=Me,s.QRCodeReader=qt,s.QRCodeVersion=ye,s.QRCodeWriter=Ir,s.RGBLuminanceSource=li,s.RSS14Reader=Lt,s.RSSExpandedReader=ie,s.ReaderException=Tn,s.ReedSolomonDecoder=Er,s.ReedSolomonEncoder=Io,s.ReedSolomonException=Cr,s.Result=Fe,s.ResultMetadataType=gt,s.ResultPoint=Ee,s.StringUtils=me,s.UnsupportedOperationException=Se,s.VideoInputDevice=Pe,s.WhiteRectangleDetector=Bn,s.WriterException=pt,s.ZXingArrays=D,s.ZXingCharset=Mn,s.ZXingInteger=B,s.ZXingStandardCharsets=Ds,s.ZXingStringBuilder=Ve,s.ZXingStringEncoding=Re,s.ZXingSystem=U,s.createAbstractExpandedDecoder=ss,Object.defineProperty(s,"__esModule",{value:!0})})})(Qu,Qu.exports);var Pt=Qu.exports;const Jx=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Sf=function(){function e(n,s,u){if(this.formatMap=new Map([[Ae.QR_CODE,Pt.BarcodeFormat.QR_CODE],[Ae.AZTEC,Pt.BarcodeFormat.AZTEC],[Ae.CODABAR,Pt.BarcodeFormat.CODABAR],[Ae.CODE_39,Pt.BarcodeFormat.CODE_39],[Ae.CODE_93,Pt.BarcodeFormat.CODE_93],[Ae.CODE_128,Pt.BarcodeFormat.CODE_128],[Ae.DATA_MATRIX,Pt.BarcodeFormat.DATA_MATRIX],[Ae.MAXICODE,Pt.BarcodeFormat.MAXICODE],[Ae.ITF,Pt.BarcodeFormat.ITF],[Ae.EAN_13,Pt.BarcodeFormat.EAN_13],[Ae.EAN_8,Pt.BarcodeFormat.EAN_8],[Ae.PDF_417,Pt.BarcodeFormat.PDF_417],[Ae.RSS_14,Pt.BarcodeFormat.RSS_14],[Ae.RSS_EXPANDED,Pt.BarcodeFormat.RSS_EXPANDED],[Ae.UPC_A,Pt.BarcodeFormat.UPC_A],[Ae.UPC_E,Pt.BarcodeFormat.UPC_E],[Ae.UPC_EAN_EXTENSION,Pt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Jx)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=u;var h=this.createZXingFormats(n),g=new Map;g.set(Pt.DecodeHintType.POSSIBLE_FORMATS,h),g.set(Pt.DecodeHintType.TRY_HARDER,!1),this.hints=g}return e.prototype.decodeAsync=function(n){var s=this;return new Promise(function(u,h){try{u(s.decode(n))}catch(g){h(g)}})},e.prototype.decode=function(n){var s=new Pt.MultiFormatReader(this.verbose,this.hints),u=new Pt.HTMLCanvasElementLuminanceSource(n),h=new Pt.BinaryBitmap(new Pt.HybridBinarizer(u)),g=s.decode(h);return{text:g.text,format:lg.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,u,h){n.set(s,u)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var s=[],u=0,h=n;u<h.length;u++){var g=h[u];this.formatMap.has(g)?s.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return s},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),$x=function(e,n,s,u){function h(g){return g instanceof s?g:new s(function(w){w(g)})}return new(s||(s=Promise))(function(g,w){function A(k){try{v(u.next(k))}catch(O){w(O)}}function S(k){try{v(u.throw(k))}catch(O){w(O)}}function v(k){k.done?g(k.value):h(k.value).then(A,S)}v((u=u.apply(e,n||[])).next())})},e2=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},u,h,g,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(k){return S([v,k])}}function S(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(k){v=[6,k],h=0}finally{u=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},bf=function(){function e(n,s,u){if(this.formatMap=new Map([[Ae.QR_CODE,"qr_code"],[Ae.AZTEC,"aztec"],[Ae.CODABAR,"codabar"],[Ae.CODE_39,"code_39"],[Ae.CODE_93,"code_93"],[Ae.CODE_128,"code_128"],[Ae.DATA_MATRIX,"data_matrix"],[Ae.ITF,"itf"],[Ae.EAN_13,"ean_13"],[Ae.EAN_8,"ean_8"],[Ae.PDF_417,"pdf417"],[Ae.UPC_A,"upc_a"],[Ae.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=u;var h=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return $x(this,void 0,void 0,function(){var s,u;return e2(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(n)];case 1:if(s=h.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return u=this.selectLargestBarcode(s),[2,{text:u.rawValue,format:lg.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var s=null,u=0,h=0,g=n;h<g.length;h++){var w=g[h],A=w.boundingBox.width*w.boundingBox.height;A>u&&(u=A,s=w)}if(!s)throw"No largest barcode found";return s},e.prototype.createBarcodeDetectorFormats=function(n){for(var s=[],u=0,h=n;u<h.length;u++){var g=h[u];this.formatMap.has(g)?s.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,u,h){n.set(s,u)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Nf=function(e,n,s,u){function h(g){return g instanceof s?g:new s(function(w){w(g)})}return new(s||(s=Promise))(function(g,w){function A(k){try{v(u.next(k))}catch(O){w(O)}}function S(k){try{v(u.throw(k))}catch(O){w(O)}}function v(k){k.done?g(k.value):h(k.value).then(A,S)}v((u=u.apply(e,n||[])).next())})},If=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},u,h,g,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(k){return S([v,k])}}function S(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(k){v=[6,k],h=0}finally{u=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},t2=function(){function e(n,s,u,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=u,s&&bf.isSupported()?(this.primaryDecoder=new bf(n,u,h),this.secondaryDecoder=new Sf(n,u,h)):this.primaryDecoder=new Sf(n,u,h)}return e.prototype.decodeAsync=function(n){return Nf(this,void 0,void 0,function(){var s;return If(this,function(u){switch(u.label){case 0:s=performance.now(),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,u.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return Nf(this,void 0,void 0,function(){var s,u;return If(this,function(h){switch(h.label){case 0:s=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,h.sent()];case 3:if(u=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw u;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var s=performance.now()-n;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,s=0,u=this.executionResults;s<u.length;s++){var h=u[s];n+=h}var g=n/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Wd=function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(u[g]=h[g])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function u(){this.constructor=n}n.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),Zl=function(e,n,s,u){function h(g){return g instanceof s?g:new s(function(w){w(g)})}return new(s||(s=Promise))(function(g,w){function A(k){try{v(u.next(k))}catch(O){w(O)}}function S(k){try{v(u.throw(k))}catch(O){w(O)}}function v(k){k.done?g(k.value):h(k.value).then(A,S)}v((u=u.apply(e,n||[])).next())})},Wl=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},u,h,g,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(k){return S([v,k])}}function S(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(k){v=[6,k],h=0}finally{u=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},hg=function(){function e(n,s){this.name=n,this.track=s}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var s={};s[this.name]=n;var u={advanced:[s]};return this.track.applyConstraints(u)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var s=n[this.name];return s}return null},e}(),n2=function(e){Wd(n,e);function n(s,u){return e.call(this,s,u)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(s){var u={};u[this.name]=s;var h={advanced:[u]};return this.track.applyConstraints(h)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),u=s[this.name];return{min:u.min,max:u.max,step:u.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(hg),r2=function(e){Wd(n,e);function n(s){return e.call(this,"zoom",s)||this}return n}(n2),i2=function(e){Wd(n,e);function n(s){return e.call(this,"torch",s)||this}return n}(hg),s2=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new r2(this.track)},e.prototype.torchFeature=function(){return new i2(this.track)},e}(),o2=function(){function e(n,s,u){this.isClosed=!1,this.parentElement=n,this.mediaStream=s,this.callbacks=u,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var s=document.createElement("video");return s.style.width="".concat(n,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var u=n.surface.clientWidth,h=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(u,h),n.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,s,u,h){return Zl(this,void 0,void 0,function(){var g,w;return Wl(this,function(A){switch(A.label){case 0:return g=new e(n,s,h),u.aspectRatio?(w={aspectRatio:u.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(w)]):[3,2];case 1:A.sent(),A.label=2;case 2:return g.setupSurface(),[2,g]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var s=this,u=function(){setTimeout(n,200),s.surface.removeEventListener("playing",u)};this.surface.addEventListener("playing",u),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return Zl(this,void 0,void 0,function(){return Wl(this,function(s){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(s,u){var h=n.mediaStream.getVideoTracks(),g=h.length,w=0;n.mediaStream.getVideoTracks().forEach(function(A){n.mediaStream.removeTrack(A),A.stop(),++w,w>=g&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),s())})})},e.prototype.getCapabilities=function(){return new s2(this.getFirstTrackOrFail())},e}(),a2=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,s,u){return Zl(this,void 0,void 0,function(){return Wl(this,function(h){return[2,o2.create(n,this.mediaStream,s,u)]})})},e.create=function(n){return Zl(this,void 0,void 0,function(){var s,u;return Wl(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return u=h.sent(),[2,new e(u)]}})})},e}(),Tf=function(e,n,s,u){function h(g){return g instanceof s?g:new s(function(w){w(g)})}return new(s||(s=Promise))(function(g,w){function A(k){try{v(u.next(k))}catch(O){w(O)}}function S(k){try{v(u.throw(k))}catch(O){w(O)}}function v(k){k.done?g(k.value):h(k.value).then(A,S)}v((u=u.apply(e,n||[])).next())})},Mf=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},u,h,g,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(k){return S([v,k])}}function S(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(k){v=[6,k],h=0}finally{u=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},l2=function(){function e(){}return e.failIfNotSupported=function(){return Tf(this,void 0,void 0,function(){return Mf(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return Tf(this,void 0,void 0,function(){return Mf(this,function(s){return[2,a2.create(n)]})})},e}(),c2=function(e,n,s,u){function h(g){return g instanceof s?g:new s(function(w){w(g)})}return new(s||(s=Promise))(function(g,w){function A(k){try{v(u.next(k))}catch(O){w(O)}}function S(k){try{v(u.throw(k))}catch(O){w(O)}}function v(k){k.done?g(k.value):h(k.value).then(A,S)}v((u=u.apply(e,n||[])).next())})},u2=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},u,h,g,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(k){return S([v,k])}}function S(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(k){v=[6,k],h=0}finally{u=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},d2=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=qs.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=qs.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return c2(this,void 0,void 0,function(){var n,s,u,h,g,w,A;return u2(this,function(S){switch(S.label){case 0:return n=function(v){for(var k=v.getVideoTracks(),O=0,H=k;O<H.length;O++){var V=H[O];V.enabled=!1,V.stop(),v.removeTrack(V)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=S.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(u=S.sent(),h=[],g=0,w=u;g<w.length;g++)A=w[g],A.kind==="videoinput"&&h.push({id:A.deviceId,label:A.label});return n(s),[2,h]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,s){var u=function(g){for(var w=[],A=0,S=g;A<S.length;A++){var v=S[A];v.kind==="video"&&w.push({id:v.id,label:v.label})}n(w)},h=MediaStreamTrack;h.getSources(u)})},e}(),zt;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(zt||(zt={}));var h2=function(){function e(){this.state=zt.NOT_STARTED,this.onGoingTransactionNewState=zt.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===zt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=zt.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===zt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=zt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==zt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case zt.UNKNOWN:throw"Transition from unknown is not allowed";case zt.NOT_STARTED:this.failIfNewStateIs(n,[zt.PAUSED]);break;case zt.SCANNING:break;case zt.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,s){for(var u=0,h=s;u<h.length;u++){var g=h[u];if(n===g)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),f2=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===zt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==zt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===zt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===zt.PAUSED},e}(),g2=function(){function e(){}return e.create=function(){return new f2(new h2)},e}(),p2=function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(u[g]=h[g])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function u(){this.constructor=n}n.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}(),Kn=function(e){p2(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(Lr),m2=function(){function e(n,s){this.logger=s,this.fps=Kn.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=Kn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?dg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!qr(this.qrbox)},e.create=function(n,s){return new e(n,s)},e}(),kf=function(){function e(n,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var u;typeof s=="boolean"?this.verbose=s===!0:s&&(u=s,this.verbose=u.verbose===!0,u.experimentalFeatures),this.logger=new ug(this.verbose),this.qrcode=new t2(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(u),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=g2.create()}return e.prototype.start=function(n,s,u,h){var g=this;if(!n)throw"cameraIdOrConfig is required";if(!u||typeof u!="function")throw"qrCodeSuccessCallback is required and should be a function.";var w;h?w=h:w=this.verbose?this.logger.log:function(){};var A=m2.create(s,this.logger);this.clearElement();var S=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?S=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=S,k=document.getElementById(this.elementId);k.clientWidth?k.clientWidth:Kn.DEFAULT_WIDTH,k.style.position="relative",this.shouldScan=!0,this.element=k;var O=this,H=this.stateManagerProxy.startTransition(zt.SCANNING);return new Promise(function(V,J){var U=v?A.videoConstraints:O.createVideoConstraints(n);if(!U){H.cancel(),J("videoConstraints should be defined");return}var xe={};(!v||A.aspectRatio)&&(xe.aspectRatio=A.aspectRatio);var P={onRenderSurfaceReady:function(D,B){O.setupUi(D,B,A),O.isScanning=!0,O.foreverScan(A,u,w)}};l2.failIfNotSupported().then(function(D){D.create(U).then(function(B){return B.render(g.element,xe,P).then(function(X){O.renderedCamera=X,H.execute(),V(null)}).catch(function(X){H.cancel(),J(X)})}).catch(function(B){H.cancel(),J(qs.errorGettingUserMedia(B))})}).catch(function(D){H.cancel(),J(qs.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(zt.PAUSED),this.showPausedState(),(qr(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,s=function(){n.stateManagerProxy.directTransition(zt.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(zt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var u=function(){if(n.element){var g=document.getElementById(Kn.SHADED_REGION_ELEMENT_ID);g&&n.element.removeChild(g)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),u(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),s.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,s){return this.scanFileV2(n,s).then(function(u){return u.decodedText})},e.prototype.scanFileV2=function(n,s){var u=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(qr(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,g){u.possiblyCloseLastScanImageFile(),u.clearElement(),u.lastScanImageFile=URL.createObjectURL(n);var w=new Image;w.onload=function(){var A=w.width,S=w.height,v=document.getElementById(u.elementId),k=v.clientWidth?v.clientWidth:Kn.DEFAULT_WIDTH,O=Math.max(v.clientHeight?v.clientHeight:S,Kn.FILE_SCAN_MIN_HEIGHT),H=u.computeCanvasDrawConfig(A,S,k,O);if(s){var V=u.createCanvasElement(k,O,"qr-canvas-visible");V.style.display="inline-block",v.appendChild(V);var J=V.getContext("2d");if(!J)throw"Unable to get 2d context from canvas";J.canvas.width=k,J.canvas.height=O,J.drawImage(w,0,0,A,S,H.x,H.y,H.width,H.height)}var U=Kn.FILE_SCAN_HIDDEN_CANVAS_PADDING,xe=Math.max(w.width,H.width),P=Math.max(w.height,H.height),D=xe+2*U,B=P+2*U,X=u.createCanvasElement(D,B);v.appendChild(X);var ge=X.getContext("2d");if(!ge)throw"Unable to get 2d context from canvas";ge.canvas.width=D,ge.canvas.height=B,ge.drawImage(w,0,0,A,S,U,U,xe,P);try{u.qrcode.decodeRobustlyAsync(X).then(function(re){h(Ef.createFromQrcodeResult(re))}).catch(g)}catch(re){g("QR code parse error, error = ".concat(re))}},w.onerror=g,w.onabort=g,w.onstalled=g,w.onsuspend=g,w.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return d2.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!dg.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var s=[Ae.QR_CODE,Ae.AZTEC,Ae.CODABAR,Ae.CODE_39,Ae.CODE_93,Ae.CODE_128,Ae.DATA_MATRIX,Ae.MAXICODE,Ae.ITF,Ae.EAN_13,Ae.EAN_8,Ae.PDF_417,Ae.RSS_14,Ae.RSS_EXPANDED,Ae.UPC_A,Ae.UPC_E,Ae.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return s;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var u=[],h=0,g=n.formatsToSupport;h<g.length;h++){var w=g[h];Kx(w)?u.push(w):this.logger.warn("Invalid format: ".concat(w," passed in config, ignoring."))}if(u.length===0)throw"None of formatsToSupport match supported values.";return u},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(qr(n))return!0;if(!qr(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(qr(n.experimentalFeatures))return!0;var s=n.experimentalFeatures;return qr(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,s,u){var h=this,g=u.qrbox;this.validateQrboxConfig(g);var w=this.toQrdimensions(n,s,g),A=function(v){if(v<Kn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Kn.MIN_QR_BOX_SIZE,"px.")},S=function(v){return v>n&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=n),v};A(w.width),A(w.height),w.width=S(w.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,s,u){if(typeof u=="number")return{width:u,height:u};if(typeof u=="function")try{return u(n,s)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return u},e.prototype.setupUi=function(n,s,u){u.isShadedBoxEnabled()&&this.validateQrboxSize(n,s,u);var h=qr(u.qrbox)?{width:n,height:s}:u.qrbox;this.validateQrboxConfig(h);var g=this.toQrdimensions(n,s,h);g.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var w=u.isShadedBoxEnabled()&&g.height<=s,A={x:0,y:0,width:n,height:s},S=w?this.getShadedRegionBounds(n,s,g):A,v=this.createCanvasElement(S.width,S.height),k={willReadFrequently:!0},O=v.getContext("2d",k);O.canvas.width=S.width,O.canvas.height=S.height,this.element.append(v),w&&this.possiblyInsertShadingElement(this.element,n,s,g),this.createScannerPausedUiElement(this.element),this.qrRegion=S,this.context=O,this.canvasElement=v},e.prototype.createScannerPausedUiElement=function(n){var s=document.createElement("div");s.innerText=qs.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",n.appendChild(s),this.scannerPausedUiElement=s},e.prototype.scanContext=function(n,s){var u=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return n(h.text,Ef.createFromQrcodeResult(h)),u.possiblyUpdateShaders(!0),!0}).catch(function(h){u.possiblyUpdateShaders(!1);var g=qs.codeParseError(h);return s(g,cg.createFrom(g)),!1})},e.prototype.foreverScan=function(n,s,u){var h=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),w=g.videoWidth/g.clientWidth,A=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var S=this.qrRegion.width*w,v=this.qrRegion.height*A,k=this.qrRegion.x*w,O=this.qrRegion.y*A;this.context.drawImage(g,k,O,S,v,0,0,this.qrRegion.width,this.qrRegion.height);var H=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(n,s,u)},h.getTimeoutFps(n.fps))};this.scanContext(s,u).then(function(V){!V&&n.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(s,u).finally(function(){H()})):H()}).catch(function(V){h.logger.logError("Error happend while scanning context",V),H()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var s="facingMode",u="deviceId",h={user:!0,environment:!0},g="exact",w=function(J){if(J in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(J,"'")},A=Object.keys(n);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var S=Object.keys(n)[0];if(S!==s&&S!==u)throw"Only '".concat(s,"' and '").concat(u,"' ")+" are supported for 'cameraIdOrConfig'";if(S===s){var v=n.facingMode;if(typeof v=="string"){if(w(v))return{facingMode:v}}else if(typeof v=="object")if(g in v){if(w(v["".concat(g)]))return{facingMode:{exact:v["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var k=typeof v;throw"Invalid type of 'facingMode' = ".concat(k)}}else{var O=n.deviceId;if(typeof O=="string")return{deviceId:O};if(typeof O=="object"){if(g in O)return{deviceId:{exact:O["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var H=typeof O;throw"Invalid type of 'deviceId' = ".concat(H)}}}var V=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(V)},e.prototype.computeCanvasDrawConfig=function(n,s,u,h){if(n<=u&&s<=h){var g=(u-n)/2,w=(h-s)/2;return{x:g,y:w,width:n,height:s}}else{var A=n,S=s;return n>u&&(s=u/n*s,n=u),s>h&&(n=h/s*n,s=h),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(S)+" to ".concat(n,"X").concat(s,".")),this.computeCanvasDrawConfig(n,s,u,h)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=n?Kn.BORDER_SHADER_MATCH_COLOR:Kn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,s,u){var h=n,g=s,w=document.createElement("canvas");return w.style.width="".concat(h,"px"),w.style.height="".concat(g,"px"),w.style.display="none",w.id=qr(u)?"qr-canvas":u,w},e.prototype.getShadedRegionBounds=function(n,s,u){if(u.width>n||u.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-u.width)/2,y:(s-u.height)/2,width:u.width,height:u.height}},e.prototype.possiblyInsertShadingElement=function(n,s,u,h){if(!(s-h.width<1||u-h.height<1)){var g=document.createElement("div");g.style.position="absolute";var w=(s-h.width)/2,A=(u-h.height)/2;if(g.style.borderLeft="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(Kn.SHADED_REGION_ELEMENT_ID),s-h.width<11||u-h.height<11)this.hasBorderShaders=!1;else{var S=5,v=40;this.insertShaderBorders(g,v,S,-S,null,0,!0),this.insertShaderBorders(g,v,S,-S,null,0,!1),this.insertShaderBorders(g,v,S,null,-S,0,!0),this.insertShaderBorders(g,v,S,null,-S,0,!1),this.insertShaderBorders(g,S,v+S,-S,null,-S,!0),this.insertShaderBorders(g,S,v+S,null,-S,-S,!0),this.insertShaderBorders(g,S,v+S,-S,null,-S,!1),this.insertShaderBorders(g,S,v+S,null,-S,-S,!1),this.hasBorderShaders=!0}n.append(g)}},e.prototype.insertShaderBorders=function(n,s,u,h,g,w,A){var S=document.createElement("div");S.style.position="absolute",S.style.backgroundColor=Kn.BORDER_SHADER_DEFAULT_COLOR,S.style.width="".concat(s,"px"),S.style.height="".concat(u,"px"),h!==null&&(S.style.top="".concat(h,"px")),g!==null&&(S.style.bottom="".concat(g,"px")),A?S.style.left="".concat(w,"px"):S.style.right="".concat(w,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(S),n.appendChild(S)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}(),Gd="data:image/svg+xml;base64,",x2=Gd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",y2=Gd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Of=Gd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",w2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Lf=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),_2=function(){function e(){this.data=Lf.createDefault();var n=localStorage.getItem(e.LOCAL_STORAGE_KEY);n?this.data=JSON.parse(n):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(n){this.data.hasPermission=n,this.flush()},e.prototype.setLastUsedCameraId=function(n){this.data.lastUsedCameraId=n,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Lf.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),v2=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(n){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Af.poweredBy();var s=document.createElement("a");s.innerText="ScanApp",s.href="https://scanapp.org",s.target="new",s.style.color="white",this.infoDiv.appendChild(s);var u=document.createElement("br"),h=document.createElement("br");this.infoDiv.appendChild(u),this.infoDiv.appendChild(h);var g=document.createElement("a");g.innerText=Af.reportIssues(),g.href="https://github.com/mebjas/html5-qrcode/issues",g.target="new",g.style.color="white",this.infoDiv.appendChild(g),n.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),C2=function(){function e(n,s){this.isShowingInfoIcon=!0,this.onTapIn=n,this.onTapOut=s,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(n){var s=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Of,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(u){return s.onHoverIn()},this.infoIcon.onmouseout=function(u){return s.onHoverOut()},this.infoIcon.onclick=function(u){return s.onClick()},n.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=w2,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Of,this.infoIcon.style.opacity="0.6")},e}(),E2=function(){function e(){var n=this;this.infoDiv=new v2,this.infoIcon=new C2(function(){n.infoDiv.show()},function(){n.infoDiv.hide()})}return e.prototype.renderInto=function(n){this.infoDiv.renderInto(n),this.infoIcon.renderInto(n)},e}(),A2=function(e,n,s,u){function h(g){return g instanceof s?g:new s(function(w){w(g)})}return new(s||(s=Promise))(function(g,w){function A(k){try{v(u.next(k))}catch(O){w(O)}}function S(k){try{v(u.throw(k))}catch(O){w(O)}}function v(k){k.done?g(k.value):h(k.value).then(A,S)}v((u=u.apply(e,n||[])).next())})},S2=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},u,h,g,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(k){return S([v,k])}}function S(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(k){v=[6,k],h=0}finally{u=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Rf=function(){function e(){}return e.hasPermissions=function(){return A2(this,void 0,void 0,function(){var n,s,u,h;return S2(this,function(g){switch(g.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(n=g.sent(),s=0,u=n;s<u.length;s++)if(h=u[s],h.kind==="videoinput"&&h.label)return[2,!0];return[2,!1]}})})},e}(),Bi=function(){function e(n){this.supportedScanTypes=this.validateAndReturnScanTypes(n)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var n=0,s=this.supportedScanTypes;n<s.length;n++){var u=s[n];if(e.isCameraScanType(u))return!0}return!1},e.isCameraScanType=function(n){return n===es.SCAN_TYPE_CAMERA},e.isFileScanType=function(n){return n===es.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(n){if(!n||n.length===0)return Lr.DEFAULT_SUPPORTED_SCAN_TYPE;var s=Lr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(n.length>s)throw"Max ".concat(s," values expected for ")+"supportedScanTypes";for(var u=0,h=n;u<h.length;u++){var g=h[u];if(!Lr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(g))throw"Unsupported scan type ".concat(g)}return n},e}(),$n=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),gi=function(){function e(){}return e.createElement=function(n,s){var u=document.createElement(n);return u.id=s,u.classList.add($n.ALL_ELEMENT_CLASS),n==="button"&&u.setAttribute("type","button"),u},e}(),fg=function(e,n,s,u){function h(g){return g instanceof s?g:new s(function(w){w(g)})}return new(s||(s=Promise))(function(g,w){function A(k){try{v(u.next(k))}catch(O){w(O)}}function S(k){try{v(u.throw(k))}catch(O){w(O)}}function v(k){k.done?g(k.value):h(k.value).then(A,S)}v((u=u.apply(e,n||[])).next())})},gg=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},u,h,g,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(v){return function(k){return S([v,k])}}function S(v){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,v[0]&&(s=0)),s;)try{if(u=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(k){v=[6,k],h=0}finally{u=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Df=function(){function e(n,s,u){this.isTorchOn=!1,this.torchCapability=n,this.buttonController=s,this.onTorchActionFailureCallback=u}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return fg(this,void 0,void 0,function(){var n,s;return gg(this,function(u){switch(u.label){case 0:this.buttonController.disable(),n=!this.isTorchOn,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.torchCapability.apply(n)];case 2:return u.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),n),[3,4];case 3:return s=u.sent(),this.propagateFailure(n,s),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(n,s){n===s?(this.buttonController.setText(s?mt.torchOffButton():mt.torchOnButton()),this.isTorchOn=s):this.propagateFailure(s),this.buttonController.enable()},e.prototype.propagateFailure=function(n,s){var u=n?mt.torchOnFailedMessage():mt.torchOffFailedMessage();s&&(u+="; Error = "+s),this.onTorchActionFailureCallback(u)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),b2=function(){function e(n,s){this.onTorchActionFailureCallback=s,this.torchButton=gi.createElement("button",$n.TORCH_BUTTON_ID),this.torchController=new Df(n,this,s)}return e.prototype.render=function(n,s){var u=this;this.torchButton.innerText=mt.torchOnButton(),this.torchButton.style.display=s.display,this.torchButton.style.marginLeft=s.marginLeft;var h=this;this.torchButton.addEventListener("click",function(g){return fg(u,void 0,void 0,function(){return gg(this,function(w){switch(w.label){case 0:return[4,h.torchController.flipState()];case 1:return w.sent(),h.torchController.isTorchEnabled()?(h.torchButton.classList.remove($n.TORCH_BUTTON_CLASS_TORCH_OFF),h.torchButton.classList.add($n.TORCH_BUTTON_CLASS_TORCH_ON)):(h.torchButton.classList.remove($n.TORCH_BUTTON_CLASS_TORCH_ON),h.torchButton.classList.add($n.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),n.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(n){this.torchController=new Df(n,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(n){this.torchButton.innerText=n},e.prototype.reset=function(){this.torchButton.innerText=mt.torchOnButton(),this.torchController.reset()},e.create=function(n,s,u,h){var g=new e(s,h);return g.render(n,u),g},e}(),N2=function(){function e(n,s,u){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=s?"block":"none",n.appendChild(this.fileBasedScanRegion);var h=document.createElement("label");h.setAttribute("for",this.getFileScanInputId()),h.style.display="inline-block",this.fileBasedScanRegion.appendChild(h),this.fileSelectionButton=gi.createElement("button",$n.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(A){h.click()}),h.append(this.fileSelectionButton),this.fileScanInput=gi.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",h.appendChild(this.fileScanInput);var g=this;this.fileScanInput.addEventListener("change",function(A){if(!(A==null||A.target==null)){var S=A.target;if(!(S.files&&S.files.length===0)){var v=S.files,k=v[0],O=k.name;g.setImageNameToButton(O),u(k)}}});var w=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(w),this.fileBasedScanRegion.addEventListener("dragenter",function(A){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(A){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(A){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(A){A.stopPropagation(),A.preventDefault(),g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder();var S=A.dataTransfer;if(S){var v=S.files;if(!v||v.length===0)return;for(var k=!1,O=0;O<v.length;++O){var H=v.item(O);if(H){var V=/image.*/;if(H.type.match(V)){k=!0;var J=H.name;g.setImageNameToButton(J),u(H),w.innerText=mt.dragAndDropMessage();break}}}k||(w.innerText=mt.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var n=document.createElement("div");return n.style.textAlign="center",n.style.margin="auto",n.style.width="80%",n.style.maxWidth="600px",n.style.border=this.fileBasedScanRegionDefaultBorder(),n.style.padding="10px",n.style.marginBottom="10px",n},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var n=document.createElement("div");return n.innerText=mt.dragAndDropMessage(),n.style.fontWeight="400",n},e.prototype.setImageNameToButton=function(n){var s=20;if(n.length>s){var u=n.substring(0,8),h=n.length,g=n.substring(h-8,h);n="".concat(u,"....").concat(g)}var w=mt.fileSelectionChooseAnother()+" - "+n;this.fileSelectionButton.innerText=w},e.prototype.setInitialValueToButton=function(){var n=mt.fileSelectionChooseImage()+" - "+mt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=n},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(n,s,u){var h=new e(n,s,u);return h},e}(),I2=function(){function e(n){this.selectElement=gi.createElement("select",$n.CAMERA_SELECTION_SELECT_ID),this.cameras=n,this.options=[]}return e.prototype.render=function(n){var s=document.createElement("span");s.style.marginRight="10px";var u=this.cameras.length;if(u===0)throw new Error("No cameras found");if(u===1)s.style.display="none";else{var h=mt.selectCamera();s.innerText="".concat(h," (").concat(this.cameras.length,")  ")}for(var g=1,w=0,A=this.cameras;w<A.length;w++){var S=A[w],v=S.id,k=S.label==null?v:S.label;(!k||k==="")&&(k=[mt.anonymousCameraPrefix(),g++].join(" "));var O=document.createElement("option");O.value=v,O.innerText=k,this.options.push(O),this.selectElement.appendChild(O)}s.appendChild(this.selectElement),n.appendChild(s)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(n){for(var s=0,u=this.options;s<u.length;s++){var h=u[s];if(h.value===n)return!0}return!1},e.prototype.setValue=function(n){if(!this.hasValue(n))throw new Error("".concat(n," is not present in the camera list."));this.selectElement.value=n},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(n,s){var u=new e(s);return u.render(n),u},e}(),T2=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=gi.createElement("input",$n.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(n,s){this.zoomElementContainer.style.display=s?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",n.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var u=mt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(u),this.rangeText.style.marginRight="10px";var h=this;this.rangeInput.addEventListener("input",function(){return h.onValueChange()}),this.rangeInput.addEventListener("change",function(){return h.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var n=mt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(n,s,u,h){this.rangeInput.min=n.toString(),this.rangeInput.max=s.toString(),this.rangeInput.step=h.toString(),this.rangeInput.value=u.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(n){this.onChangeCallback=n},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(n,s){var u=new e;return u.render(n,s),u},e}(),qn;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(qn||(qn={}));function M2(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function k2(e,n){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:n}}var O2=function(){function e(n,s,u){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=n,this.config=this.createConfig(s),this.verbose=u===!0,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.scanTypeSelector=new Bi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ug(this.verbose),this.persistedDataManager=new _2,s.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(n,s){var u=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(g,w){if(n)n(g,w);else{if(u.lastMatchFound===g)return;u.lastMatchFound=g,u.setHeaderMessage(mt.lastMatch(g),qn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(g,w){s&&s(g,w)};var h=document.getElementById(this.elementId);if(!h)throw"HTML Element with id=".concat(this.elementId," not found");h.innerHTML="",this.createBasicLayout(h),this.html5Qrcode=new kf(this.getScanRegionId(),k2(this.config,this.verbose))},e.prototype.pause=function(n){(qr(n)||n!==!0)&&(n=!1),this.getHtml5QrcodeOrFail().pause(n)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var n=this,s=function(){var u=document.getElementById(n.elementId);u&&(u.innerHTML="",n.resetBasicLayout(u))};return this.html5Qrcode?new Promise(function(u,h){if(!n.html5Qrcode){u();return}n.html5Qrcode.isScanning?n.html5Qrcode.stop().then(function(g){if(!n.html5Qrcode){u();return}n.html5Qrcode.clear(),s(),u()}).catch(function(g){n.verbose&&n.logger.logError("Unable to stop qrcode scanner",g),h(g)}):(n.html5Qrcode.clear(),s(),u())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(n){return this.getHtml5QrcodeOrFail().applyVideoConstraints(n)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(n){return n?(n.fps||(n.fps=Lr.SCAN_DEFAULT_FPS),n.rememberLastUsedCamera!==!Lr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(n.rememberLastUsedCamera=Lr.DEFAULT_REMEMBER_LAST_CAMERA_USED),n.supportedScanTypes||(n.supportedScanTypes=Lr.DEFAULT_SUPPORTED_SCAN_TYPE),n):{fps:Lr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Lr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Lr.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(n){n.style.position="relative",n.style.padding="0px",n.style.border="1px solid silver",this.createHeader(n);var s=document.createElement("div"),u=this.getScanRegionId();s.id=u,s.style.width="100%",s.style.minHeight="100px",s.style.textAlign="center",n.appendChild(s),Bi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var h=document.createElement("div"),g=this.getDashboardId();h.id=g,h.style.width="100%",n.appendChild(h),this.setupInitialDashboard(h)},e.prototype.resetBasicLayout=function(n){n.style.border="none"},e.prototype.setupInitialDashboard=function(n){this.createSection(n),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(n){var s=document.createElement("div");s.style.textAlign="left",s.style.margin="0px",n.appendChild(s);var u=new E2;u.renderInto(s);var h=document.createElement("div");h.id=this.getHeaderMessageContainerId(),h.style.display="none",h.style.textAlign="center",h.style.fontSize="14px",h.style.padding="2px 10px",h.style.margin="4px",h.style.borderTop="1px solid #f6f6f6",s.appendChild(h)},e.prototype.createSection=function(n){var s=document.createElement("div");s.id=this.getDashboardSectionId(),s.style.width="100%",s.style.padding="10px 0px 10px 0px",s.style.textAlign="left",n.appendChild(s)},e.prototype.createCameraListUi=function(n,s,u){var h=this;h.showHideScanTypeSwapLink(!1),h.setHeaderMessage(mt.cameraPermissionRequesting());var g=function(){u||h.createPermissionButton(n,s)};kf.getCameras().then(function(w){h.persistedDataManager.setHasPermission(!0),h.showHideScanTypeSwapLink(!0),h.resetHeaderMessage(),w&&w.length>0?(n.removeChild(s),h.renderCameraSelection(w)):(h.setHeaderMessage(mt.noCameraFound(),qn.STATUS_WARNING),g())}).catch(function(w){h.persistedDataManager.setHasPermission(!1),u?u.disabled=!1:g(),h.setHeaderMessage(w,qn.STATUS_WARNING),h.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(n,s){var u=this,h=gi.createElement("button",this.getCameraPermissionButtonId());h.innerText=mt.cameraPermissionTitle(),h.addEventListener("click",function(){h.disabled=!0,u.createCameraListUi(n,s,h)}),s.appendChild(h)},e.prototype.createPermissionsUi=function(n,s){var u=this;if(Bi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Rf.hasPermissions().then(function(h){h?u.createCameraListUi(n,s):(u.persistedDataManager.setHasPermission(!1),u.createPermissionButton(n,s))}).catch(function(h){u.persistedDataManager.setHasPermission(!1),u.createPermissionButton(n,s)});return}this.createPermissionButton(n,s)},e.prototype.createSectionControlPanel=function(){var n=document.getElementById(this.getDashboardSectionId()),s=document.createElement("div");n.appendChild(s);var u=document.createElement("div");u.id=this.getDashboardSectionCameraScanRegionId(),u.style.display=Bi.isCameraScanType(this.currentScanType)?"block":"none",s.appendChild(u);var h=document.createElement("div");h.style.textAlign="center",u.appendChild(h),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(u,h),this.renderFileScanUi(s)},e.prototype.renderFileScanUi=function(n){var s=Bi.isFileScanType(this.currentScanType),u=this,h=function(g){if(!u.html5Qrcode)throw"html5Qrcode not defined";Bi.isFileScanType(u.currentScanType)&&(u.setHeaderMessage(mt.loadingImage()),u.html5Qrcode.scanFileV2(g,!0).then(function(w){u.resetHeaderMessage(),u.qrCodeSuccessCallback(w.decodedText,w)}).catch(function(w){u.setHeaderMessage(w,qn.STATUS_WARNING),u.qrCodeErrorCallback(w,cg.createFrom(w))}))};this.fileSelectionUi=N2.create(n,s,h)},e.prototype.renderCameraSelection=function(n){var s=this,u=this,h=document.getElementById(this.getDashboardSectionCameraScanRegionId());h.style.textAlign="center";var g=T2.create(h,!1),w=function(U){var xe=U.zoomFeature();if(xe.isSupported()){g.setOnCameraZoomValueChangeCallback(function(D){xe.apply(D)});var P=1;s.config.defaultZoomValueIfSupported&&(P=s.config.defaultZoomValueIfSupported),P=qx(P,xe.min(),xe.max()),g.setValues(xe.min(),xe.max(),P,xe.step()),g.show()}},A=I2.create(h,n),S=document.createElement("span"),v=gi.createElement("button",$n.CAMERA_START_BUTTON_ID);v.innerText=mt.scanButtonStartScanningText(),S.appendChild(v);var k=gi.createElement("button",$n.CAMERA_STOP_BUTTON_ID);k.innerText=mt.scanButtonStopScanningText(),k.style.display="none",k.disabled=!0,S.appendChild(k);var O,H=function(U){if(!U.torchFeature().isSupported()){O&&O.hide();return}O?O.updateTorchCapability(U.torchFeature()):O=b2.create(S,U.torchFeature(),{display:"none",marginLeft:"5px"},function(xe){u.setHeaderMessage(xe,qn.STATUS_WARNING)}),O.show()};h.appendChild(S);var V=function(U){U||(v.style.display="none"),v.innerText=mt.scanButtonStartScanningText(),v.style.opacity="1",v.disabled=!1,U&&(v.style.display="inline-block")};if(v.addEventListener("click",function(U){v.innerText=mt.scanButtonScanningStarting(),A.disable(),v.disabled=!0,v.style.opacity="0.5",s.scanTypeSelector.hasMoreThanOneScanType()&&u.showHideScanTypeSwapLink(!1),u.resetHeaderMessage();var xe=A.getValue();u.persistedDataManager.setLastUsedCameraId(xe),u.html5Qrcode.start(xe,M2(u.config),u.qrCodeSuccessCallback,u.qrCodeErrorCallback).then(function(P){k.disabled=!1,k.style.display="inline-block",V(!1);var D=u.html5Qrcode.getRunningTrackCameraCapabilities();s.config.showTorchButtonIfSupported===!0&&H(D),s.config.showZoomSliderIfSupported===!0&&w(D)}).catch(function(P){u.showHideScanTypeSwapLink(!0),A.enable(),V(!0),u.setHeaderMessage(P,qn.STATUS_WARNING)})}),A.hasSingleItem()&&v.click(),k.addEventListener("click",function(U){if(!u.html5Qrcode)throw"html5Qrcode not defined";k.disabled=!0,u.html5Qrcode.stop().then(function(xe){s.scanTypeSelector.hasMoreThanOneScanType()&&u.showHideScanTypeSwapLink(!0),A.enable(),v.disabled=!1,k.style.display="none",v.style.display="inline-block",O&&(O.reset(),O.hide()),g.removeOnCameraZoomValueChangeCallback(),g.hide(),u.insertCameraScanImageToScanRegion()}).catch(function(xe){k.disabled=!1,u.setHeaderMessage(xe,qn.STATUS_WARNING)})}),u.persistedDataManager.getLastUsedCameraId()){var J=u.persistedDataManager.getLastUsedCameraId();A.hasValue(J)?(A.setValue(J),v.click()):u.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var n=this,s=mt.textIfCameraScanSelected(),u=mt.textIfFileScanSelected(),h=document.getElementById(this.getDashboardSectionId()),g=document.createElement("div");g.style.textAlign="center";var w=gi.createElement("span",this.getDashboardSectionSwapLinkId());w.style.textDecoration="underline",w.style.cursor="pointer",w.innerText=Bi.isCameraScanType(this.currentScanType)?s:u,w.addEventListener("click",function(){if(!n.sectionSwapAllowed){n.verbose&&n.logger.logError("Section swap called when not allowed");return}n.resetHeaderMessage(),n.fileSelectionUi.resetValue(),n.sectionSwapAllowed=!1,Bi.isCameraScanType(n.currentScanType)?(n.clearScanRegion(),n.getCameraScanRegion().style.display="none",n.fileSelectionUi.show(),w.innerText=u,n.currentScanType=es.SCAN_TYPE_FILE,n.insertFileScanImageToScanRegion()):(n.clearScanRegion(),n.getCameraScanRegion().style.display="block",n.fileSelectionUi.hide(),w.innerText=s,n.currentScanType=es.SCAN_TYPE_CAMERA,n.insertCameraScanImageToScanRegion(),n.startCameraScanIfPermissionExistsOnSwap()),n.sectionSwapAllowed=!0}),g.appendChild(w),h.appendChild(g)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var n=this,s=this;if(this.persistedDataManager.hasCameraPermissions()){Rf.hasPermissions().then(function(u){if(u){var h=document.getElementById(s.getCameraPermissionButtonId());if(!h)throw n.logger.logError("Permission button not found, fail;"),"Permission button not found";h.click()}else s.persistedDataManager.setHasPermission(!1)}).catch(function(u){s.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var n=document.getElementById(this.getHeaderMessageContainerId());n.style.display="none"},e.prototype.setHeaderMessage=function(n,s){s||(s=qn.STATUS_DEFAULT);var u=this.getHeaderMessageDiv();switch(u.innerText=n,u.style.display="block",s){case qn.STATUS_SUCCESS:u.style.background="rgba(106, 175, 80, 0.26)",u.style.color="#477735";break;case qn.STATUS_WARNING:u.style.background="rgba(203, 36, 49, 0.14)",u.style.color="#cb2431";break;case qn.STATUS_DEFAULT:default:u.style.background="rgba(0, 0, 0, 0)",u.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(n){this.scanTypeSelector.hasMoreThanOneScanType()&&(n!==!0&&(n=!1),this.sectionSwapAllowed=n,this.getDashboardSectionSwapLink().style.display=n?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var n=this,s=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){s.innerHTML="<br>",s.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(u){s.innerHTML="<br>",s.appendChild(n.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=x2,this.cameraScanImage.alt=mt.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var n=this,s=document.getElementById(this.getScanRegionId());if(this.fileScanImage){s.innerHTML="<br>",s.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(u){s.innerHTML="<br>",s.appendChild(n.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=y2,this.fileScanImage.alt=mt.fileScanAltText()},e.prototype.clearScanRegion=function(){var n=document.getElementById(this.getScanRegionId());n.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return $n.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return $n.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function L2(){const[e,n]=se.useState("barcode"),[s,u]=se.useState(""),[h,g]=se.useState(null),[w,A]=se.useState(!1),[S,v]=se.useState(""),[k,O]=se.useState(null),[H,V]=se.useState(null),J=se.useRef(null),U=se.useRef(null);se.useEffect(()=>{xe()},[]),se.useEffect(()=>{e==="barcode"&&J.current&&J.current.focus()},[e,H]),se.useEffect(()=>{if(e==="camera"&&!U.current){const Z=new O2("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1});Z.render(te=>{P(te),Z.pause(!0),setTimeout(()=>Z.resume(),2e3)},te=>{console.warn("Erro scanner:",te)}),U.current=Z}return()=>{U.current&&(U.current.clear(),U.current=null)}},[e]);const xe=async()=>{try{const Z=await fetch("/api/separation/start",{method:"POST"}),te=await Z.json();if(!Z.ok)throw new Error(te.detail);O(te.session),g(te)}catch(Z){v(Z.message)}},P=async Z=>{if(Z.trim()){A(!0),v("");try{const te=await fetch("/api/separation/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({barcode:Z.trim()})}),ee=await te.json();if(!te.ok)throw new Error(ee.detail);V(ee),ee.progress&&O(Se=>({...Se,scanned_packages:ee.progress.scanned,progress:ee.progress.percentage})),u(""),X("success")}catch(te){v(te.message),X("error")}finally{A(!1)}}},D=Z=>{Z.preventDefault(),P(s)},B=async()=>{try{const Z=await fetch("/api/separation/complete",{method:"POST"}),te=await Z.json();if(!Z.ok)throw new Error(te.detail);alert("Separao concluda! Agora voc pode enviar as rotas aos entregadores."),window.location.href="/route-analysis"}catch(Z){alert(Z.message)}},X=Z=>{const te=new(window.AudioContext||window.webkitAudioContext),ee=te.createOscillator(),Se=te.createGain();ee.connect(Se),Se.connect(te.destination),Z==="success"?(ee.frequency.value=800,Se.gain.value=.3):(ee.frequency.value=300,Se.gain.value=.5),ee.start(),ee.stop(te.currentTime+.1)},ge=(k==null?void 0:k.progress)||0,re=(k==null?void 0:k.scanned_packages)>=(k==null?void 0:k.total_packages);return y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 p-8",children:y.jsxs("div",{className:"max-w-4xl mx-auto",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:" Modo Separao"}),y.jsx("p",{className:"text-indigo-200",children:"Bipe cada pacote para identificar rota e entregador"})]}),y.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-6 mb-6",children:[y.jsx("label",{className:"text-white font-semibold block mb-3",children:"Mtodo de Bipagem:"}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("button",{onClick:()=>n("barcode"),className:`flex-1 py-3 px-6 rounded-lg font-semibold transition ${e==="barcode"?"bg-green-500 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:" Bipadora"}),y.jsx("button",{onClick:()=>n("camera"),className:`flex-1 py-3 px-6 rounded-lg font-semibold transition ${e==="camera"?"bg-green-500 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:" Cmera"})]})]}),k&&y.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-6 mb-6",children:[y.jsxs("div",{className:"flex justify-between mb-2",children:[y.jsx("span",{className:"text-white font-semibold",children:"Progresso"}),y.jsxs("span",{className:"text-white",children:[k.scanned_packages," / ",k.total_packages," pacotes"]})]}),y.jsx("div",{className:"w-full bg-white/20 rounded-full h-4 overflow-hidden",children:y.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-500 h-full transition-all duration-500",style:{width:`${ge}%`}})}),y.jsxs("p",{className:"text-indigo-200 text-sm mt-2",children:[ge.toFixed(1),"% completo"]})]}),y.jsx("div",{className:"bg-white/10 backdrop-blur rounded-xl p-6 mb-6",children:e==="barcode"?y.jsxs("form",{onSubmit:D,children:[y.jsx("label",{className:"text-white font-semibold block mb-3",children:"Escaneie o cdigo de barras:"}),y.jsx("input",{ref:J,type:"text",value:s,onChange:Z=>u(Z.target.value),placeholder:"Posicione o cursor aqui e bipe...",className:"w-full px-4 py-3 rounded-lg bg-white/90 text-gray-900 font-mono text-lg focus:outline-none focus:ring-4 focus:ring-green-400",disabled:w||re,autoFocus:!0}),y.jsx("button",{type:"submit",className:"w-full mt-4 py-3 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg transition",disabled:w||!s.trim()||re,children:w?"Processando...":"Confirmar Bipagem"})]}):y.jsxs("div",{children:[y.jsx("label",{className:"text-white font-semibold block mb-3",children:"Aponte a cmera para o cdigo:"}),y.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden"})]})}),H&&y.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-6 mb-6 border-4 animate-pulse",style:{borderColor:H.route_color||"#fff"},children:[y.jsx("h3",{className:"text-white font-bold text-xl mb-4",children:" Pacote Identificado!"}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 text-white",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-indigo-200 text-sm",children:"Entregador:"}),y.jsx("p",{className:"font-bold text-lg",children:H.deliverer_name})]}),y.jsxs("div",{children:[y.jsx("span",{className:"text-indigo-200 text-sm",children:"Cor da Rota:"}),y.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[y.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white",style:{backgroundColor:H.route_color}}),y.jsx("span",{className:"font-bold",children:H.route_color})]})]}),y.jsxs("div",{children:[y.jsx("span",{className:"text-indigo-200 text-sm",children:"Sequncia:"}),y.jsxs("p",{className:"font-bold text-lg",children:["#",H.sequence," de ",H.total_in_route]})]}),y.jsxs("div",{children:[y.jsx("span",{className:"text-indigo-200 text-sm",children:"Endereo:"}),y.jsx("p",{className:"text-sm",children:H.address})]})]})]}),S&&y.jsx("div",{className:"bg-red-500/20 border-2 border-red-500 rounded-xl p-4 mb-6",children:y.jsxs("p",{className:"text-white font-semibold",children:[" ",S]})}),re&&y.jsx("button",{onClick:B,className:"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold text-xl rounded-xl shadow-2xl transition transform hover:scale-105",children:" Finalizar Separao e Enviar Rotas"})]})})}const R2=()=>{const[e,n]=se.useState([]),[s,u]=se.useState(!0),[h,g]=se.useState(null),[w,A]=se.useState("all");se.useEffect(()=>{(async()=>{try{const U=await(await fetch("/api/history/sessions?limit=100")).json();n(U.sessions||[]),u(!1)}catch(J){console.error("Erro ao carregar histrico:",J),u(!1)}})()},[]);const S=V=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(V||0),v=V=>V?new Date(V).toLocaleString("pt-BR"):"-",k=(V,J)=>{if(!V||!J)return"-";const U=new Date(V),xe=new Date(J),P=Math.round((xe-U)/6e4);return`${Math.floor(P/60)}h ${P%60}m`},O=async V=>{try{window.open(`/api/session/${V}/export`,"_blank")}catch(J){console.error("Erro ao baixar relatrio:",J)}},H=w==="all"?e:e.filter(V=>V.status===w);return s?y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:y.jsxs("div",{className:"text-center",children:[y.jsx(xl,{className:"w-12 h-12 mx-auto text-gray-400 animate-pulse mb-4"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando histrico..."})]})}):y.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:y.jsxs("div",{className:"max-w-6xl mx-auto",children:[y.jsxs("div",{className:"mb-8",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx(xl,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),y.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:" Histrico de Sesses"})]}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[H.length," sesso(es) finalizada(s)"]})]}),y.jsx("div",{className:"mb-6 flex gap-2 flex-wrap",children:["all","read_only","completed"].map(V=>y.jsx("button",{onClick:()=>A(V),className:`px-4 py-2 rounded-lg font-medium transition ${w===V?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:V==="all"?"Todas":V==="read_only"?"Histrico":"Completas"},V))}),H.length===0?y.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg",children:[y.jsx(xl,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Nenhuma sesso finalizada ainda."})]}):y.jsx("div",{className:"space-y-4",children:H.map(V=>y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition overflow-hidden",children:[y.jsxs("button",{onClick:()=>g(h===V.id?null:V.id),className:"w-full p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition flex items-center justify-between",children:[y.jsx("div",{className:"flex items-center gap-4 flex-1 text-left",children:y.jsxs("div",{className:"flex-1",children:[y.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:["Sesso #",V.id.slice(0,8)]}),y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Criada"}),y.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:v(V.created_at)})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Endereos"}),y.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:V.addresses_count||0})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Entregadores"}),y.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:V.deliverers_count||0})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Durao"}),y.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:k(V.created_at,V.completed_at)})]})]})]})}),y.jsx(ax,{className:`w-6 h-6 text-gray-400 transition-transform ${h===V.id?"transform rotate-180":""}`})]}),h===V.id&&y.jsxs("div",{className:"border-t dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-700/30",children:[V.financials&&y.jsxs("div",{className:"mb-6",children:[y.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[y.jsx(io,{className:"w-5 h-5"}),"Resumo Financeiro"]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[y.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Lucro Total"}),y.jsx("p",{className:"text-2xl font-bold text-green-600",children:S(V.financials.total_profit)})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[y.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Custos"}),y.jsx("p",{className:"text-2xl font-bold text-red-600",children:S(V.financials.total_cost)})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[y.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Salrios"}),y.jsx("p",{className:"text-2xl font-bold text-blue-600",children:S(V.financials.total_salary)})]})]})]}),V.statistics&&Object.keys(V.statistics).length>0&&y.jsxs("div",{className:"mb-6",children:[y.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4",children:" Estatsticas"}),y.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg text-sm space-y-2",children:Object.entries(V.statistics).map(([J,U])=>y.jsxs("div",{className:"flex justify-between",children:[y.jsxs("span",{className:"text-gray-600 dark:text-gray-400 capitalize",children:[J.replace(/_/g," "),":"]}),y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:typeof U=="number"?U.toFixed(2):U})]},J))})]}),y.jsxs("div",{className:"mb-6",children:[y.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4",children:" Informaes"}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg text-sm space-y-2",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ID"}),y.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:V.id})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),y.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded text-xs font-medium",children:V.status})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Atualizado"}),y.jsx("span",{className:"text-gray-900 dark:text-white",children:v(V.last_updated)})]})]})]}),y.jsx("div",{className:"flex gap-2",children:y.jsxs("button",{onClick:()=>O(V.id),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-medium flex items-center justify-center gap-2",children:[y.jsx(cx,{className:"w-4 h-4"}),"Exportar Relatrio"]})})]})]},V.id))})]})})};function D2({visible:e=!0,percentage:n=30}){const[s,u]=se.useState(e);return se.useEffect(()=>{u(e)},[e]),s?y.jsx("div",{className:"fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary-500 via-purple-500 to-accent-500 shadow-lg shadow-primary-500/50 z-50 transition-all duration-300",style:{width:`${n}%`,opacity:n===100?0:1}}):null}function P2(){const[e,n]=se.useState("dashboard"),[s,u]=se.useState(null),[h,g]=se.useState({role:"loading"}),[w,A]=se.useState(null),[S,v]=se.useState(null),[k,O]=se.useState(null),[H,V]=se.useState(!1),[J,U]=se.useState(!1),[xe,P]=se.useState(0);se.useEffect(()=>{var Ve;let te=null;const ee=window.matchMedia("(prefers-color-scheme: dark)").matches;U(ee),ee&&document.documentElement.classList.add("dark");const Se=window.matchMedia("(prefers-color-scheme: dark)"),Re=Le=>{U(Le.matches),Le.matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};Se.addEventListener("change",Re);const me=new URLSearchParams(window.location.search);if(me.get("tab")&&n(me.get("tab")),window.Telegram&&window.Telegram.WebApp){const Le=window.Telegram.WebApp;Le.ready(),Le.expand(),(Ve=Le.initDataUnsafe)!=null&&Ve.user&&(u(Le.initDataUnsafe.user),te=Le.initDataUnsafe.user.id)}if(!te){const Le=new URLSearchParams(window.location.search);Le.get("user_id")&&(te=parseInt(Le.get("user_id")),u({id:te,first_name:"Dev User"}))}return te?D(te):g({role:"guest"}),()=>Se.removeEventListener("change",Re)},[]);const D=async te=>{V(!0);try{const Se=await(await fetch(`/api/auth/me?user_id=${te}`)).json();g(Se);const Re=[];Re.push(fetch(`/api/financial/balance?user_id=${te}`).then(me=>me.json()).then(me=>O(me)).catch(me=>console.error("Erro Finanas",me))),Se.role==="admin"?Re.push(fetch("/api/admin/stats").then(me=>me.json()).then(me=>v(me))):Se.role==="deliverer"&&Re.push(fetch(`/api/deliverer/route?user_id=${te}`).then(me=>me.json()).then(me=>A(me))),await Promise.all(Re)}catch(ee){console.error("Erro fetching data",ee)}finally{V(!1)}},B=()=>{if(s!=null&&s.id){P(0),V(!0);const te=setInterval(()=>{P(ee=>ee>=80?(clearInterval(te),ee):ee+Math.random()*40)},300);D(s.id).finally(()=>{P(100),setTimeout(()=>P(0),500)})}},X=()=>{const te=!J;U(te),te?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},ge=()=>y.jsxs("div",{className:"space-y-5 animate-fade-in",children:[y.jsxs("div",{className:"relative overflow-hidden gradient-primary rounded-3xl p-6 text-white shadow-glass",children:[y.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -mr-20 -mt-20"}),y.jsxs("div",{className:"relative z-10",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-sm font-medium text-white/80 mb-1",children:"Painel Administrativo"}),y.jsx("p",{className:"text-2xl font-bold",children:"Viso Geral "})]}),y.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:y.jsx(sa,{className:"w-6 h-6"})})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[y.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[y.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-xs mb-2",children:[y.jsx(so,{className:"w-3.5 h-3.5"}),y.jsx("span",{children:"Pacotes Hoje"})]}),y.jsx("p",{className:"text-3xl font-black",children:(S==null?void 0:S.packages_total)||0})]}),y.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[y.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-xs mb-2",children:[y.jsx(yl,{className:"w-3.5 h-3.5"}),y.jsx("span",{children:"Entregues"})]}),y.jsx("p",{className:"text-3xl font-black text-green-300",children:(S==null?void 0:S.delivered)||0})]})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsx(Pf,{icon:y.jsx(io,{className:"w-5 h-5"}),label:"Financeiro",sublabel:"Ver receitas",color:"green",onClick:()=>n("financial")}),y.jsx(Pf,{icon:y.jsx(oo,{className:"w-5 h-5"}),label:"Equipe",sublabel:"Gerenciar",color:"blue",onClick:()=>n("team")})]}),y.jsxs("button",{onClick:()=>n("analysis"),className:"w-full group relative overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 rounded-2xl"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/0 via-white/20 to-purple-600/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),y.jsxs("div",{className:"relative p-5 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:y.jsx(sa,{className:"w-6 h-6 text-white"})}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"text-white font-bold text-lg",children:"Anlise Inteligente"}),y.jsx("p",{className:"text-purple-100 text-xs font-medium",children:"Upload & Otimizao IA"})]})]}),y.jsx("div",{className:"text-white/70 group-hover:text-white group-hover:translate-x-1 transition-all",children:y.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),y.jsxs("div",{className:"card-premium p-5",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx("div",{className:"w-10 h-10 rounded-full gradient-primary flex items-center justify-center",children:y.jsx(wf,{className:`w-5 h-5 text-white ${H?"animate-spin":""}`})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Status da Sesso"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Monitoramento em tempo real"})]})]}),S!=null&&S.active_session?y.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[y.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse-soft"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"font-semibold text-green-700 dark:text-green-400 text-sm",children:"Sesso Ativa"}),y.jsx("p",{className:"text-xs text-green-600 dark:text-green-500",children:S.session_name})]})]}):y.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl",children:[y.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Nenhuma sesso ativa"})]})]})]}),re=()=>{var te;return y.jsxs("div",{className:"space-y-5 animate-fade-in",children:[y.jsxs("div",{className:"relative overflow-hidden gradient-success rounded-3xl p-6 text-white shadow-glass",children:[y.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),y.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full blur-2xl"}),y.jsx("div",{className:"relative z-10",children:y.jsxs("div",{className:"flex justify-between items-start mb-3",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-white/80 mb-1",children:"Bem-vindo de volta "}),y.jsx("h2",{className:"text-2xl font-black",children:(te=h.name)==null?void 0:te.split(" ")[0]})]}),y.jsxs("div",{className:"flex flex-col items-end gap-2",children:[y.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:y.jsx(so,{className:"w-6 h-6"})}),h.is_partner&&y.jsxs("span",{className:"badge bg-yellow-400/30 text-yellow-100 border-yellow-400/50 text-[10px] px-2 py-0.5",children:[y.jsx(rx,{className:"w-3 h-3"})," SCIO"]})]})]})})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsx(Bf,{icon:y.jsx(io,{className:"w-5 h-5"}),label:"Saldo Semana",value:`R$ ${k!=null&&k.balance?k.balance.toFixed(0):"..."}`,color:"green",onClick:()=>n("financial")}),y.jsx(Bf,{icon:y.jsx(Qo,{className:"w-5 h-5"}),label:"Rota Atual",value:w!=null&&w.has_route?"Ativa":"Sem rota",color:"blue",isDisabled:!(w!=null&&w.has_route),onClick:()=>n("routes")})]}),(w==null?void 0:w.has_route)&&y.jsxs("div",{className:"card-premium overflow-hidden animate-slide-up",children:[y.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 px-5 py-3 border-b border-gray-100 dark:border-gray-700/50",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Rota em Andamento"}),y.jsxs("span",{className:"badge badge-info",children:[y.jsx(so,{className:"w-3 h-3"}),w.summary.total_packages," volumes"]})]})}),y.jsxs("div",{className:"grid grid-cols-3 divide-x divide-gray-100 dark:divide-gray-700/50",children:[y.jsx(qc,{icon:y.jsx(Wu,{className:"w-4 h-4"}),value:w.summary.total_stops,label:"Paradas"}),y.jsx(qc,{icon:y.jsx(lc,{className:"w-4 h-4"}),value:`${w.summary.distance_km} km`,label:"Distncia"}),y.jsx(qc,{icon:y.jsx(yl,{className:"w-4 h-4"}),value:`${w.summary.estimated_time_min}m`,label:"Tempo"})]}),y.jsx("div",{className:"p-4",children:y.jsxs("button",{onClick:()=>n("routes"),className:"btn-primary w-full flex items-center justify-center gap-2",children:[y.jsx(Wu,{className:"w-5 h-5"}),y.jsx("span",{children:"Abrir Navegao"})]})})]}),!(w!=null&&w.has_route)&&y.jsxs("div",{className:"card-premium p-8 text-center",children:[y.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:y.jsx(Qo,{className:"w-8 h-8 text-gray-400"})}),y.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Nenhuma rota ativa"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Aguardando designao de entregas"})]})]})},Z=()=>h.role==="loading"?y.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950",children:[y.jsx("div",{className:"mb-8 animate-fade-in",children:y.jsx("div",{className:"w-24 h-24 rounded-2xl shadow-2xl shadow-primary-500/30 overflow-hidden border-4 border-white dark:border-gray-800 mx-auto",children:y.jsx("img",{src:"/logoMiniApp.jpg",alt:"Bot Entregador",className:"w-full h-full object-cover"})})}),y.jsxs("div",{className:"text-center mb-12 animate-slide-up",children:[y.jsx("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-2",children:"Bot Entregador"}),y.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sistema de Rotas Inteligente"})]}),y.jsx("div",{className:"mb-12 animate-fade-in",children:y.jsxs("div",{className:"relative w-16 h-16",children:[y.jsx("div",{className:"absolute inset-0 border-4 border-primary-200 dark:border-primary-900 rounded-full"}),y.jsx("div",{className:"absolute inset-0 border-4 border-transparent border-t-primary-600 border-r-primary-500 rounded-full animate-spin"})]})}),y.jsxs("div",{className:"text-center mb-8 space-y-2",children:[y.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Preparando seu ambiente"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Carregando dados e sincronizando rotas..."})]}),y.jsx("div",{className:"w-48 h-2 bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden shadow-inner",children:y.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 via-purple-500 to-primary-500 animate-shimmer",style:{backgroundSize:"200% 100%",animation:"shimmer 2s infinite"}})}),y.jsx("div",{className:"absolute bottom-8 text-center",children:y.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-600",children:"Verso 3.0  Sistema Hybrid"})})]}):e==="dashboard"?h.role==="admin"?ge():h.role==="deliverer"?re():y.jsxs("div",{className:"card-premium p-8 text-center",children:[y.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:y.jsx(oo,{className:"w-8 h-8 text-gray-400"})}),y.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Acesso Restrito"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Voc no tem permisso para acessar"})]}):e==="analysis"?y.jsx("div",{className:"h-full overflow-y-auto",children:y.jsx(Qx,{})}):e==="separation"?y.jsx("div",{className:"h-full overflow-y-auto",children:y.jsx(L2,{})}):e==="routes"?h.role==="deliverer"&&(w!=null&&w.has_route)?y.jsxs("div",{className:"h-[calc(100vh-140px)] w-full rounded-2xl overflow-hidden shadow-glass border border-gray-200 dark:border-gray-700 relative",children:[y.jsx(Hx,{stops:w.stops}),y.jsxs("div",{className:"absolute top-3 left-3 right-3 glass-strong p-3 rounded-xl shadow-lg z-[1000] flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse-soft"}),y.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Modo Navegao"})]}),y.jsxs("span",{className:"badge badge-info text-[10px]",children:[w.stops.length," pontos"]})]})]}):y.jsxs("div",{className:"card-premium p-10 text-center",children:[y.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:y.jsx(Qo,{className:"w-10 h-10 text-gray-400"})}),y.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Nenhuma rota disponvel"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No h rotas para exibir no mapa"})]}):e==="financial"?y.jsx(Zx,{data:k,adminStats:S}):e==="team"?y.jsx(Yx,{}):e==="history"?y.jsx(R2,{}):y.jsxs("div",{className:"card-premium p-10 text-center",children:[y.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:y.jsx(yl,{className:"w-8 h-8 text-gray-400"})}),y.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Em Desenvolvimento"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Esta funcionalidade estar disponvel em breve "})]});return y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 text-gray-900 dark:text-gray-100 flex flex-col font-sans",children:[y.jsxs("header",{className:"glass-strong sticky top-0 z-20 border-b border-gray-200/50 dark:border-gray-700/50 pt-safe",children:[y.jsxs("div",{className:"max-w-lg mx-auto px-5 py-4 flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"w-12 h-12 rounded-xl shadow-lg shadow-primary-500/30 overflow-hidden flex-shrink-0 border-2 border-white dark:border-gray-700",children:y.jsx("img",{src:"/logoMiniApp.jpg",alt:"Bot Entregador",className:"w-full h-full object-cover"})}),y.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900 animate-pulse-soft"})]}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-black text-gray-900 dark:text-white leading-none",children:"Bot Entregador"}),y.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-medium",children:"Sistema de Rotas"})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:X,className:"relative w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-all active:scale-90 group",children:J?y.jsx(fx,{size:18,className:"text-gray-500 dark:text-gray-400 group-hover:text-primary-600"}):y.jsx(dx,{size:18,className:"text-gray-500 dark:text-gray-400 group-hover:text-primary-600"})}),y.jsx("button",{onClick:B,className:"relative w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-all active:scale-90 group",children:y.jsx(wf,{size:18,className:`${H?"animate-spin text-primary-600":"text-gray-500 dark:text-gray-400 group-hover:text-primary-600"} transition-colors`})})]})]}),y.jsx(D2,{visible:xe>0,percentage:xe})]}),y.jsx("main",{className:"flex-1 overflow-auto pb-24 pt-5 scrollbar-premium",children:y.jsx("div",{className:"max-w-lg mx-auto px-4",children:Z()})}),y.jsx("nav",{className:"fixed bottom-0 left-0 right-0 glass-strong border-t border-gray-200/50 dark:border-gray-700/50 pb-safe z-30 shadow-glass",children:y.jsx("div",{className:"max-w-lg mx-auto",children:y.jsxs("div",{className:"flex justify-around items-center h-16 px-2",children:[y.jsx(Zo,{icon:y.jsx(ux,{size:22}),label:"Incio",isActive:e==="dashboard",onClick:()=>n("dashboard")}),y.jsx(Zo,{icon:y.jsx(Qo,{size:22}),label:"Mapa",isActive:e==="routes",onClick:()=>n("routes")}),y.jsx(Zo,{icon:y.jsx(io,{size:22}),label:"Ganhos",isActive:e==="financial",onClick:()=>n("financial")}),y.jsx(Zo,{icon:y.jsx(oo,{size:22}),label:"Perfil",isActive:e==="profile",onClick:()=>n("dashboard")}),y.jsx(Zo,{icon:y.jsx(xl,{size:22}),label:"Histrico",isActive:e==="history",onClick:()=>n("history")})]})})})]})}function Zo({icon:e,label:n,isActive:s,onClick:u}){return y.jsxs("button",{onClick:u,className:`relative flex flex-col items-center justify-center w-full h-full transition-all duration-300 ${s?"text-primary-600 dark:text-primary-400":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"}`,children:[s&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"absolute -top-[1px] left-1/2 -translate-x-1/2 w-12 h-1 gradient-primary rounded-b-full shadow-lg shadow-primary-500/30"}),y.jsx("div",{className:"absolute inset-0 bg-primary-50/50 dark:bg-primary-900/10 rounded-2xl mx-2"})]}),y.jsx("div",{className:`relative z-10 transition-all duration-300 ${s?"scale-110 -translate-y-0.5":""}`,children:y.jsx("div",{className:`p-1.5 rounded-xl transition-all ${s?"bg-primary-100 dark:bg-primary-900/30":""}`,children:e})}),y.jsx("span",{className:`relative z-10 text-[10px] font-semibold mt-1 transition-all ${s?"font-bold":""}`,children:n})]})}function Pf({icon:e,label:n,sublabel:s,color:u,onClick:h}){const g={green:"from-green-500 to-emerald-600 shadow-green-500/30",blue:"from-blue-500 to-indigo-600 shadow-blue-500/30",purple:"from-purple-500 to-indigo-600 shadow-purple-500/30"};return y.jsxs("button",{onClick:h,className:"group relative overflow-hidden",children:[y.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${g[u]} rounded-2xl shadow-lg transition-all group-hover:shadow-xl group-active:scale-95`}),y.jsxs("div",{className:"relative p-4 flex flex-col items-center text-center text-white",children:[y.jsx("div",{className:"w-10 h-10 mb-2 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:e}),y.jsx("p",{className:"font-bold text-sm",children:n}),y.jsx("p",{className:"text-[10px] text-white/70 font-medium",children:s})]})]})}function Bf({icon:e,label:n,value:s,color:u,isDisabled:h,onClick:g}){const w={green:"from-green-500 to-emerald-600 text-green-700 dark:text-green-400 bg-green-100 dark:bg-green-900/30",blue:"from-blue-500 to-indigo-600 text-blue-700 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30"};return y.jsxs("button",{onClick:g,disabled:h,className:`card-premium p-4 flex items-center gap-3 text-left transition-all active:scale-95 ${h?"opacity-50 cursor-not-allowed":""}`,children:[y.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${w[u].split("text-")[1]}`,children:e}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium mb-0.5",children:n}),y.jsx("p",{className:"font-bold text-lg text-gray-900 dark:text-white truncate",children:s})]})]})}function qc({icon:e,value:n,label:s}){return y.jsxs("div",{className:"py-4 text-center",children:[y.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-400 dark:text-gray-500 mb-2",children:[e,y.jsx("span",{className:"text-xs font-medium",children:s})]}),y.jsx("p",{className:"text-xl font-black text-gray-900 dark:text-white",children:n})]})}Jc.createRoot(document.getElementById("root")).render(y.jsx(wl.StrictMode,{children:y.jsx(P2,{})}));
