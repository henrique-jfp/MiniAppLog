(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const _ of g.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&c(_)}).observe(document,{childList:!0,subtree:!0});function s(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function c(h){if(h.ep)return;h.ep=!0;const g=s(h);fetch(h.href,g)}})();var Vs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vf={exports:{}},Xl={},Zf={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ta=Symbol.for("react.element"),Lg=Symbol.for("react.portal"),Dg=Symbol.for("react.fragment"),Rg=Symbol.for("react.strict_mode"),Pg=Symbol.for("react.profiler"),Bg=Symbol.for("react.provider"),jg=Symbol.for("react.context"),Fg=Symbol.for("react.forward_ref"),zg=Symbol.for("react.suspense"),Ug=Symbol.for("react.memo"),Hg=Symbol.for("react.lazy"),hh=Symbol.iterator;function Vg(e){return e===null||typeof e!="object"?null:(e=hh&&e[hh]||e["@@iterator"],typeof e=="function"?e:null)}var Wf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gf=Object.assign,Yf={};function _o(e,n,s){this.props=e,this.context=n,this.refs=Yf,this.updater=s||Wf}_o.prototype.isReactComponent={};_o.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};_o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xf(){}Xf.prototype=_o.prototype;function $u(e,n,s){this.props=e,this.context=n,this.refs=Yf,this.updater=s||Wf}var ed=$u.prototype=new Xf;ed.constructor=$u;Gf(ed,_o.prototype);ed.isPureReactComponent=!0;var fh=Array.isArray,Qf=Object.prototype.hasOwnProperty,td={current:null},Kf={key:!0,ref:!0,__self:!0,__source:!0};function qf(e,n,s){var c,h={},g=null,_=null;if(n!=null)for(c in n.ref!==void 0&&(_=n.ref),n.key!==void 0&&(g=""+n.key),n)Qf.call(n,c)&&!Kf.hasOwnProperty(c)&&(h[c]=n[c]);var A=arguments.length-2;if(A===1)h.children=s;else if(1<A){for(var b=Array(A),v=0;v<A;v++)b[v]=arguments[v+2];h.children=b}if(e&&e.defaultProps)for(c in A=e.defaultProps,A)h[c]===void 0&&(h[c]=A[c]);return{$$typeof:Ta,type:e,key:g,ref:_,props:h,_owner:td.current}}function Zg(e,n){return{$$typeof:Ta,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function nd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ta}function Wg(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return n[s]})}var gh=/\/+/g;function bc(e,n){return typeof e=="object"&&e!==null&&e.key!=null?Wg(""+e.key):n.toString(36)}function cl(e,n,s,c,h){var g=typeof e;(g==="undefined"||g==="boolean")&&(e=null);var _=!1;if(e===null)_=!0;else switch(g){case"string":case"number":_=!0;break;case"object":switch(e.$$typeof){case Ta:case Lg:_=!0}}if(_)return _=e,h=h(_),e=c===""?"."+bc(_,0):c,fh(h)?(s="",e!=null&&(s=e.replace(gh,"$&/")+"/"),cl(h,n,s,"",function(v){return v})):h!=null&&(nd(h)&&(h=Zg(h,s+(!h.key||_&&_.key===h.key?"":(""+h.key).replace(gh,"$&/")+"/")+e)),n.push(h)),1;if(_=0,c=c===""?".":c+":",fh(e))for(var A=0;A<e.length;A++){g=e[A];var b=c+bc(g,A);_+=cl(g,n,s,b,h)}else if(b=Vg(e),typeof b=="function")for(e=b.call(e),A=0;!(g=e.next()).done;)g=g.value,b=c+bc(g,A++),_+=cl(g,n,s,b,h);else if(g==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return _}function Wa(e,n,s){if(e==null)return e;var c=[],h=0;return cl(e,c,"","",function(g){return n.call(s,g,h++)}),c}function Gg(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var Rn={current:null},ul={transition:null},Yg={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:ul,ReactCurrentOwner:td};function Jf(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:Wa,forEach:function(e,n,s){Wa(e,function(){n.apply(this,arguments)},s)},count:function(e){var n=0;return Wa(e,function(){n++}),n},toArray:function(e){return Wa(e,function(n){return n})||[]},only:function(e){if(!nd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};et.Component=_o;et.Fragment=Dg;et.Profiler=Pg;et.PureComponent=$u;et.StrictMode=Rg;et.Suspense=zg;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yg;et.act=Jf;et.cloneElement=function(e,n,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var c=Gf({},e.props),h=e.key,g=e.ref,_=e._owner;if(n!=null){if(n.ref!==void 0&&(g=n.ref,_=td.current),n.key!==void 0&&(h=""+n.key),e.type&&e.type.defaultProps)var A=e.type.defaultProps;for(b in n)Qf.call(n,b)&&!Kf.hasOwnProperty(b)&&(c[b]=n[b]===void 0&&A!==void 0?A[b]:n[b])}var b=arguments.length-2;if(b===1)c.children=s;else if(1<b){A=Array(b);for(var v=0;v<b;v++)A[v]=arguments[v+2];c.children=A}return{$$typeof:Ta,type:e.type,key:h,ref:g,props:c,_owner:_}};et.createContext=function(e){return e={$$typeof:jg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Bg,_context:e},e.Consumer=e};et.createElement=qf;et.createFactory=function(e){var n=qf.bind(null,e);return n.type=e,n};et.createRef=function(){return{current:null}};et.forwardRef=function(e){return{$$typeof:Fg,render:e}};et.isValidElement=nd;et.lazy=function(e){return{$$typeof:Hg,_payload:{_status:-1,_result:e},_init:Gg}};et.memo=function(e,n){return{$$typeof:Ug,type:e,compare:n===void 0?null:n}};et.startTransition=function(e){var n=ul.transition;ul.transition={};try{e()}finally{ul.transition=n}};et.unstable_act=Jf;et.useCallback=function(e,n){return Rn.current.useCallback(e,n)};et.useContext=function(e){return Rn.current.useContext(e)};et.useDebugValue=function(){};et.useDeferredValue=function(e){return Rn.current.useDeferredValue(e)};et.useEffect=function(e,n){return Rn.current.useEffect(e,n)};et.useId=function(){return Rn.current.useId()};et.useImperativeHandle=function(e,n,s){return Rn.current.useImperativeHandle(e,n,s)};et.useInsertionEffect=function(e,n){return Rn.current.useInsertionEffect(e,n)};et.useLayoutEffect=function(e,n){return Rn.current.useLayoutEffect(e,n)};et.useMemo=function(e,n){return Rn.current.useMemo(e,n)};et.useReducer=function(e,n,s){return Rn.current.useReducer(e,n,s)};et.useRef=function(e){return Rn.current.useRef(e)};et.useState=function(e){return Rn.current.useState(e)};et.useSyncExternalStore=function(e,n,s){return Rn.current.useSyncExternalStore(e,n,s)};et.useTransition=function(){return Rn.current.useTransition()};et.version="18.3.1";Zf.exports=et;var re=Zf.exports;const vl=Hf(re);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg=re,Qg=Symbol.for("react.element"),Kg=Symbol.for("react.fragment"),qg=Object.prototype.hasOwnProperty,Jg=Xg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$g={key:!0,ref:!0,__self:!0,__source:!0};function $f(e,n,s){var c,h={},g=null,_=null;s!==void 0&&(g=""+s),n.key!==void 0&&(g=""+n.key),n.ref!==void 0&&(_=n.ref);for(c in n)qg.call(n,c)&&!$g.hasOwnProperty(c)&&(h[c]=n[c]);if(e&&e.defaultProps)for(c in n=e.defaultProps,n)h[c]===void 0&&(h[c]=n[c]);return{$$typeof:Qg,type:e,key:g,ref:_,props:h,_owner:Jg.current}}Xl.Fragment=Kg;Xl.jsx=$f;Xl.jsxs=$f;Vf.exports=Xl;var x=Vf.exports,nu={},e0={exports:{}},rr={},t0={exports:{}},n0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(ee,Oe){var ue=ee.length;ee.push(Oe);e:for(;0<ue;){var Le=ue-1>>>1,Pe=ee[Le];if(0<h(Pe,Oe))ee[Le]=Oe,ee[ue]=Pe,ue=Le;else break e}}function s(ee){return ee.length===0?null:ee[0]}function c(ee){if(ee.length===0)return null;var Oe=ee[0],ue=ee.pop();if(ue!==Oe){ee[0]=ue;e:for(var Le=0,Pe=ee.length,ft=Pe>>>1;Le<ft;){var ze=2*(Le+1)-1,Qe=ee[ze],ce=ze+1,Zt=ee[ce];if(0>h(Qe,ue))ce<Pe&&0>h(Zt,Qe)?(ee[Le]=Zt,ee[ce]=ue,Le=ce):(ee[Le]=Qe,ee[ze]=ue,Le=ze);else if(ce<Pe&&0>h(Zt,ue))ee[Le]=Zt,ee[ce]=ue,Le=ce;else break e}}return Oe}function h(ee,Oe){var ue=ee.sortIndex-Oe.sortIndex;return ue!==0?ue:ee.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var _=Date,A=_.now();e.unstable_now=function(){return _.now()-A}}var b=[],v=[],D=1,R=null,H=3,X=!1,te=!1,U=!1,xe=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ee){for(var Oe=s(v);Oe!==null;){if(Oe.callback===null)c(v);else if(Oe.startTime<=ee)c(v),Oe.sortIndex=Oe.expirationTime,n(b,Oe);else break;Oe=s(v)}}function Y(ee){if(U=!1,B(ee),!te)if(s(b)!==null)te=!0,Be(he);else{var Oe=s(v);Oe!==null&&Re(Y,Oe.startTime-ee)}}function he(ee,Oe){te=!1,U&&(U=!1,k(ne),ne=-1),X=!0;var ue=H;try{for(B(Oe),R=s(b);R!==null&&(!(R.expirationTime>Oe)||ee&&!Me());){var Le=R.callback;if(typeof Le=="function"){R.callback=null,H=R.priorityLevel;var Pe=Le(R.expirationTime<=Oe);Oe=e.unstable_now(),typeof Pe=="function"?R.callback=Pe:R===s(b)&&c(b),B(Oe)}else c(b);R=s(b)}if(R!==null)var ft=!0;else{var ze=s(v);ze!==null&&Re(Y,ze.startTime-Oe),ft=!1}return ft}finally{R=null,H=ue,X=!1}}var oe=!1,V=null,ne=-1,Q=5,Se=-1;function Me(){return!(e.unstable_now()-Se<Q)}function ye(){if(V!==null){var ee=e.unstable_now();Se=ee;var Oe=!0;try{Oe=V(!0,ee)}finally{Oe?Te():(oe=!1,V=null)}}else oe=!1}var Te;if(typeof M=="function")Te=function(){M(ye)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,K=Xe.port2;Xe.port1.onmessage=ye,Te=function(){K.postMessage(null)}}else Te=function(){xe(ye,0)};function Be(ee){V=ee,oe||(oe=!0,Te())}function Re(ee,Oe){ne=xe(function(){ee(e.unstable_now())},Oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_continueExecution=function(){te||X||(te=!0,Be(he))},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return H},e.unstable_getFirstCallbackNode=function(){return s(b)},e.unstable_next=function(ee){switch(H){case 1:case 2:case 3:var Oe=3;break;default:Oe=H}var ue=H;H=Oe;try{return ee()}finally{H=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ee,Oe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ue=H;H=ee;try{return Oe()}finally{H=ue}},e.unstable_scheduleCallback=function(ee,Oe,ue){var Le=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Le+ue:Le):ue=Le,ee){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ue+Pe,ee={id:D++,callback:Oe,priorityLevel:ee,startTime:ue,expirationTime:Pe,sortIndex:-1},ue>Le?(ee.sortIndex=ue,n(v,ee),s(b)===null&&ee===s(v)&&(U?(k(ne),ne=-1):U=!0,Re(Y,ue-Le))):(ee.sortIndex=Pe,n(b,ee),te||X||(te=!0,Be(he))),ee},e.unstable_shouldYield=Me,e.unstable_wrapCallback=function(ee){var Oe=H;return function(){var ue=H;H=Oe;try{return ee.apply(this,arguments)}finally{H=ue}}}})(n0);t0.exports=n0;var ep=t0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp=re,nr=ep;function pe(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r0=new Set,ha={};function Ms(e,n){ho(e,n),ho(e+"Capture",n)}function ho(e,n){for(ha[e]=n,e=0;e<n.length;e++)r0.add(n[e])}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ru=Object.prototype.hasOwnProperty,np=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ph={},mh={};function rp(e){return ru.call(mh,e)?!0:ru.call(ph,e)?!1:np.test(e)?mh[e]=!0:(ph[e]=!0,!1)}function ip(e,n,s,c){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return c?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sp(e,n,s,c){if(n===null||typeof n>"u"||ip(e,n,s,c))return!0;if(c)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Pn(e,n,s,c,h,g,_){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=g,this.removeEmptyString=_}var mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mn[e]=new Pn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];mn[n]=new Pn(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){mn[e]=new Pn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mn[e]=new Pn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mn[e]=new Pn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){mn[e]=new Pn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){mn[e]=new Pn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){mn[e]=new Pn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){mn[e]=new Pn(e,5,!1,e.toLowerCase(),null,!1,!1)});var rd=/[\-:]([a-z])/g;function id(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(rd,id);mn[n]=new Pn(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(rd,id);mn[n]=new Pn(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(rd,id);mn[n]=new Pn(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){mn[e]=new Pn(e,1,!1,e.toLowerCase(),null,!1,!1)});mn.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){mn[e]=new Pn(e,1,!1,e.toLowerCase(),null,!0,!0)});function sd(e,n,s,c){var h=mn.hasOwnProperty(n)?mn[n]:null;(h!==null?h.type!==0:c||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(sp(n,s,h,c)&&(s=null),c||h===null?rp(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):h.mustUseProperty?e[h.propertyName]=s===null?h.type===3?!1:"":s:(n=h.attributeName,c=h.attributeNamespace,s===null?e.removeAttribute(n):(h=h.type,s=h===3||h===4&&s===!0?"":""+s,c?e.setAttributeNS(c,n,s):e.setAttribute(n,s))))}var Ci=tp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ga=Symbol.for("react.element"),Zs=Symbol.for("react.portal"),Ws=Symbol.for("react.fragment"),od=Symbol.for("react.strict_mode"),iu=Symbol.for("react.profiler"),i0=Symbol.for("react.provider"),s0=Symbol.for("react.context"),ad=Symbol.for("react.forward_ref"),su=Symbol.for("react.suspense"),ou=Symbol.for("react.suspense_list"),ld=Symbol.for("react.memo"),Ui=Symbol.for("react.lazy"),o0=Symbol.for("react.offscreen"),xh=Symbol.iterator;function Uo(e){return e===null||typeof e!="object"?null:(e=xh&&e[xh]||e["@@iterator"],typeof e=="function"?e:null)}var Ft=Object.assign,Sc;function qo(e){if(Sc===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Sc=n&&n[1]||""}return`
`+Sc+e}var Nc=!1;function Ic(e,n){if(!e||Nc)return"";Nc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(v){var c=v}Reflect.construct(e,[],n)}else{try{n.call()}catch(v){c=v}e.call(n.prototype)}else{try{throw Error()}catch(v){c=v}e()}}catch(v){if(v&&c&&typeof v.stack=="string"){for(var h=v.stack.split(`
`),g=c.stack.split(`
`),_=h.length-1,A=g.length-1;1<=_&&0<=A&&h[_]!==g[A];)A--;for(;1<=_&&0<=A;_--,A--)if(h[_]!==g[A]){if(_!==1||A!==1)do if(_--,A--,0>A||h[_]!==g[A]){var b=`
`+h[_].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=_&&0<=A);break}}}finally{Nc=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?qo(e):""}function op(e){switch(e.tag){case 5:return qo(e.type);case 16:return qo("Lazy");case 13:return qo("Suspense");case 19:return qo("SuspenseList");case 0:case 2:case 15:return e=Ic(e.type,!1),e;case 11:return e=Ic(e.type.render,!1),e;case 1:return e=Ic(e.type,!0),e;default:return""}}function au(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ws:return"Fragment";case Zs:return"Portal";case iu:return"Profiler";case od:return"StrictMode";case su:return"Suspense";case ou:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case s0:return(e.displayName||"Context")+".Consumer";case i0:return(e._context.displayName||"Context")+".Provider";case ad:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ld:return n=e.displayName||null,n!==null?n:au(e.type)||"Memo";case Ui:n=e._payload,e=e._init;try{return au(e(n))}catch{}}return null}function ap(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return au(n);case 8:return n===od?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ts(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function a0(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function lp(e){var n=a0(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),c=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,g=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(_){c=""+_,g.call(this,_)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ya(e){e._valueTracker||(e._valueTracker=lp(e))}function l0(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),c="";return e&&(c=a0(e)?e.checked?"true":"false":e.value),e=c,e!==s?(n.setValue(e),!0):!1}function Cl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lu(e,n){var s=n.checked;return Ft({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function yh(e,n){var s=n.defaultValue==null?"":n.defaultValue,c=n.checked!=null?n.checked:n.defaultChecked;s=ts(n.value!=null?n.value:s),e._wrapperState={initialChecked:c,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function c0(e,n){n=n.checked,n!=null&&sd(e,"checked",n,!1)}function cu(e,n){c0(e,n);var s=ts(n.value),c=n.type;if(s!=null)c==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?uu(e,n.type,s):n.hasOwnProperty("defaultValue")&&uu(e,n.type,ts(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function wh(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var c=n.type;if(!(c!=="submit"&&c!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function uu(e,n,s){(n!=="number"||Cl(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Jo=Array.isArray;function io(e,n,s,c){if(e=e.options,n){n={};for(var h=0;h<s.length;h++)n["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=n.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&c&&(e[s].defaultSelected=!0)}else{for(s=""+ts(s),n=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,c&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function du(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(pe(91));return Ft({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _h(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(pe(92));if(Jo(s)){if(1<s.length)throw Error(pe(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:ts(s)}}function u0(e,n){var s=ts(n.value),c=ts(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),c!=null&&(e.defaultValue=""+c)}function vh(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function d0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hu(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?d0(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xa,h0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,c,h){MSApp.execUnsafeLocalFunction(function(){return e(n,s,c,h)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Xa=Xa||document.createElement("div"),Xa.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Xa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function fa(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cp=["Webkit","ms","Moz","O"];Object.keys(ta).forEach(function(e){cp.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),ta[n]=ta[e]})});function f0(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||ta.hasOwnProperty(e)&&ta[e]?(""+n).trim():n+"px"}function g0(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var c=s.indexOf("--")===0,h=f0(s,n[s],c);s==="float"&&(s="cssFloat"),c?e.setProperty(s,h):e[s]=h}}var up=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fu(e,n){if(n){if(up[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(pe(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(pe(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(pe(61))}if(n.style!=null&&typeof n.style!="object")throw Error(pe(62))}}function gu(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pu=null;function cd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mu=null,so=null,oo=null;function Ch(e){if(e=Oa(e)){if(typeof mu!="function")throw Error(pe(280));var n=e.stateNode;n&&(n=$l(n),mu(e.stateNode,e.type,n))}}function p0(e){so?oo?oo.push(e):oo=[e]:so=e}function m0(){if(so){var e=so,n=oo;if(oo=so=null,Ch(e),n)for(e=0;e<n.length;e++)Ch(n[e])}}function x0(e,n){return e(n)}function y0(){}var Tc=!1;function w0(e,n,s){if(Tc)return e(n,s);Tc=!0;try{return x0(e,n,s)}finally{Tc=!1,(so!==null||oo!==null)&&(y0(),m0())}}function ga(e,n){var s=e.stateNode;if(s===null)return null;var c=$l(s);if(c===null)return null;s=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(pe(231,n,typeof s));return s}var xu=!1;if(yi)try{var Ho={};Object.defineProperty(Ho,"passive",{get:function(){xu=!0}}),window.addEventListener("test",Ho,Ho),window.removeEventListener("test",Ho,Ho)}catch{xu=!1}function dp(e,n,s,c,h,g,_,A,b){var v=Array.prototype.slice.call(arguments,3);try{n.apply(s,v)}catch(D){this.onError(D)}}var na=!1,El=null,Al=!1,yu=null,hp={onError:function(e){na=!0,El=e}};function fp(e,n,s,c,h,g,_,A,b){na=!1,El=null,dp.apply(hp,arguments)}function gp(e,n,s,c,h,g,_,A,b){if(fp.apply(this,arguments),na){if(na){var v=El;na=!1,El=null}else throw Error(pe(198));Al||(Al=!0,yu=v)}}function Os(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function _0(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Eh(e){if(Os(e)!==e)throw Error(pe(188))}function pp(e){var n=e.alternate;if(!n){if(n=Os(e),n===null)throw Error(pe(188));return n!==e?null:e}for(var s=e,c=n;;){var h=s.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){s=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===s)return Eh(h),e;if(g===c)return Eh(h),n;g=g.sibling}throw Error(pe(188))}if(s.return!==c.return)s=h,c=g;else{for(var _=!1,A=h.child;A;){if(A===s){_=!0,s=h,c=g;break}if(A===c){_=!0,c=h,s=g;break}A=A.sibling}if(!_){for(A=g.child;A;){if(A===s){_=!0,s=g,c=h;break}if(A===c){_=!0,c=g,s=h;break}A=A.sibling}if(!_)throw Error(pe(189))}}if(s.alternate!==c)throw Error(pe(190))}if(s.tag!==3)throw Error(pe(188));return s.stateNode.current===s?e:n}function v0(e){return e=pp(e),e!==null?C0(e):null}function C0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=C0(e);if(n!==null)return n;e=e.sibling}return null}var E0=nr.unstable_scheduleCallback,Ah=nr.unstable_cancelCallback,mp=nr.unstable_shouldYield,xp=nr.unstable_requestPaint,Vt=nr.unstable_now,yp=nr.unstable_getCurrentPriorityLevel,ud=nr.unstable_ImmediatePriority,A0=nr.unstable_UserBlockingPriority,bl=nr.unstable_NormalPriority,wp=nr.unstable_LowPriority,b0=nr.unstable_IdlePriority,Ql=null,$r=null;function _p(e){if($r&&typeof $r.onCommitFiberRoot=="function")try{$r.onCommitFiberRoot(Ql,e,void 0,(e.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:Ep,vp=Math.log,Cp=Math.LN2;function Ep(e){return e>>>=0,e===0?32:31-(vp(e)/Cp|0)|0}var Qa=64,Ka=4194304;function $o(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Sl(e,n){var s=e.pendingLanes;if(s===0)return 0;var c=0,h=e.suspendedLanes,g=e.pingedLanes,_=s&268435455;if(_!==0){var A=_&~h;A!==0?c=$o(A):(g&=_,g!==0&&(c=$o(g)))}else _=s&~h,_!==0?c=$o(_):g!==0&&(c=$o(g));if(c===0)return 0;if(n!==0&&n!==c&&!(n&h)&&(h=c&-c,g=n&-n,h>=g||h===16&&(g&4194240)!==0))return n;if(c&4&&(c|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=c;0<n;)s=31-Dr(n),h=1<<s,c|=e[s],n&=~h;return c}function Ap(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bp(e,n){for(var s=e.suspendedLanes,c=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes;0<g;){var _=31-Dr(g),A=1<<_,b=h[_];b===-1?(!(A&s)||A&c)&&(h[_]=Ap(A,n)):b<=n&&(e.expiredLanes|=A),g&=~A}}function wu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function S0(){var e=Qa;return Qa<<=1,!(Qa&4194240)&&(Qa=64),e}function kc(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function ka(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Dr(n),e[n]=s}function Sp(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var c=e.eventTimes;for(e=e.expirationTimes;0<s;){var h=31-Dr(s),g=1<<h;n[h]=0,c[h]=-1,e[h]=-1,s&=~g}}function dd(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var c=31-Dr(s),h=1<<c;h&n|e[c]&n&&(e[c]|=n),s&=~h}}var xt=0;function N0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var I0,hd,T0,k0,M0,_u=!1,qa=[],Yi=null,Xi=null,Qi=null,pa=new Map,ma=new Map,Vi=[],Np="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bh(e,n){switch(e){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":pa.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(n.pointerId)}}function Vo(e,n,s,c,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:s,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},n!==null&&(n=Oa(n),n!==null&&hd(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function Ip(e,n,s,c,h){switch(n){case"focusin":return Yi=Vo(Yi,e,n,s,c,h),!0;case"dragenter":return Xi=Vo(Xi,e,n,s,c,h),!0;case"mouseover":return Qi=Vo(Qi,e,n,s,c,h),!0;case"pointerover":var g=h.pointerId;return pa.set(g,Vo(pa.get(g)||null,e,n,s,c,h)),!0;case"gotpointercapture":return g=h.pointerId,ma.set(g,Vo(ma.get(g)||null,e,n,s,c,h)),!0}return!1}function O0(e){var n=ws(e.target);if(n!==null){var s=Os(n);if(s!==null){if(n=s.tag,n===13){if(n=_0(s),n!==null){e.blockedOn=n,M0(e.priority,function(){T0(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=vu(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var c=new s.constructor(s.type,s);pu=c,s.target.dispatchEvent(c),pu=null}else return n=Oa(s),n!==null&&hd(n),e.blockedOn=s,!1;n.shift()}return!0}function Sh(e,n,s){dl(e)&&s.delete(n)}function Tp(){_u=!1,Yi!==null&&dl(Yi)&&(Yi=null),Xi!==null&&dl(Xi)&&(Xi=null),Qi!==null&&dl(Qi)&&(Qi=null),pa.forEach(Sh),ma.forEach(Sh)}function Zo(e,n){e.blockedOn===n&&(e.blockedOn=null,_u||(_u=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,Tp)))}function xa(e){function n(h){return Zo(h,e)}if(0<qa.length){Zo(qa[0],e);for(var s=1;s<qa.length;s++){var c=qa[s];c.blockedOn===e&&(c.blockedOn=null)}}for(Yi!==null&&Zo(Yi,e),Xi!==null&&Zo(Xi,e),Qi!==null&&Zo(Qi,e),pa.forEach(n),ma.forEach(n),s=0;s<Vi.length;s++)c=Vi[s],c.blockedOn===e&&(c.blockedOn=null);for(;0<Vi.length&&(s=Vi[0],s.blockedOn===null);)O0(s),s.blockedOn===null&&Vi.shift()}var ao=Ci.ReactCurrentBatchConfig,Nl=!0;function kp(e,n,s,c){var h=xt,g=ao.transition;ao.transition=null;try{xt=1,fd(e,n,s,c)}finally{xt=h,ao.transition=g}}function Mp(e,n,s,c){var h=xt,g=ao.transition;ao.transition=null;try{xt=4,fd(e,n,s,c)}finally{xt=h,ao.transition=g}}function fd(e,n,s,c){if(Nl){var h=vu(e,n,s,c);if(h===null)zc(e,n,c,Il,s),bh(e,c);else if(Ip(h,e,n,s,c))c.stopPropagation();else if(bh(e,c),n&4&&-1<Np.indexOf(e)){for(;h!==null;){var g=Oa(h);if(g!==null&&I0(g),g=vu(e,n,s,c),g===null&&zc(e,n,c,Il,s),g===h)break;h=g}h!==null&&c.stopPropagation()}else zc(e,n,c,null,s)}}var Il=null;function vu(e,n,s,c){if(Il=null,e=cd(c),e=ws(e),e!==null)if(n=Os(e),n===null)e=null;else if(s=n.tag,s===13){if(e=_0(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Il=e,null}function L0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yp()){case ud:return 1;case A0:return 4;case bl:case wp:return 16;case b0:return 536870912;default:return 16}default:return 16}}var Wi=null,gd=null,hl=null;function D0(){if(hl)return hl;var e,n=gd,s=n.length,c,h="value"in Wi?Wi.value:Wi.textContent,g=h.length;for(e=0;e<s&&n[e]===h[e];e++);var _=s-e;for(c=1;c<=_&&n[s-c]===h[g-c];c++);return hl=h.slice(e,1<c?1-c:void 0)}function fl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ja(){return!0}function Nh(){return!1}function ir(e){function n(s,c,h,g,_){this._reactName=s,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(s=e[A],this[A]=s?s(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ja:Nh,this.isPropagationStopped=Nh,this}return Ft(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja}),n}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pd=ir(vo),Ma=Ft({},vo,{view:0,detail:0}),Op=ir(Ma),Mc,Oc,Wo,Kl=Ft({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:md,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wo&&(Wo&&e.type==="mousemove"?(Mc=e.screenX-Wo.screenX,Oc=e.screenY-Wo.screenY):Oc=Mc=0,Wo=e),Mc)},movementY:function(e){return"movementY"in e?e.movementY:Oc}}),Ih=ir(Kl),Lp=Ft({},Kl,{dataTransfer:0}),Dp=ir(Lp),Rp=Ft({},Ma,{relatedTarget:0}),Lc=ir(Rp),Pp=Ft({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),Bp=ir(Pp),jp=Ft({},vo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fp=ir(jp),zp=Ft({},vo,{data:0}),Th=ir(zp),Up={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zp(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Vp[e])?!!n[e]:!1}function md(){return Zp}var Wp=Ft({},Ma,{key:function(e){if(e.key){var n=Up[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=fl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:md,charCode:function(e){return e.type==="keypress"?fl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gp=ir(Wp),Yp=Ft({},Kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kh=ir(Yp),Xp=Ft({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:md}),Qp=ir(Xp),Kp=Ft({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),qp=ir(Kp),Jp=Ft({},Kl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$p=ir(Jp),em=[9,13,27,32],xd=yi&&"CompositionEvent"in window,ra=null;yi&&"documentMode"in document&&(ra=document.documentMode);var tm=yi&&"TextEvent"in window&&!ra,R0=yi&&(!xd||ra&&8<ra&&11>=ra),Mh=" ",Oh=!1;function P0(e,n){switch(e){case"keyup":return em.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gs=!1;function nm(e,n){switch(e){case"compositionend":return B0(n);case"keypress":return n.which!==32?null:(Oh=!0,Mh);case"textInput":return e=n.data,e===Mh&&Oh?null:e;default:return null}}function rm(e,n){if(Gs)return e==="compositionend"||!xd&&P0(e,n)?(e=D0(),hl=gd=Wi=null,Gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return R0&&n.locale!=="ko"?null:n.data;default:return null}}var im={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!im[e.type]:n==="textarea"}function j0(e,n,s,c){p0(c),n=Tl(n,"onChange"),0<n.length&&(s=new pd("onChange","change",null,s,c),e.push({event:s,listeners:n}))}var ia=null,ya=null;function sm(e){Q0(e,0)}function ql(e){var n=Qs(e);if(l0(n))return e}function om(e,n){if(e==="change")return n}var F0=!1;if(yi){var Dc;if(yi){var Rc="oninput"in document;if(!Rc){var Dh=document.createElement("div");Dh.setAttribute("oninput","return;"),Rc=typeof Dh.oninput=="function"}Dc=Rc}else Dc=!1;F0=Dc&&(!document.documentMode||9<document.documentMode)}function Rh(){ia&&(ia.detachEvent("onpropertychange",z0),ya=ia=null)}function z0(e){if(e.propertyName==="value"&&ql(ya)){var n=[];j0(n,ya,e,cd(e)),w0(sm,n)}}function am(e,n,s){e==="focusin"?(Rh(),ia=n,ya=s,ia.attachEvent("onpropertychange",z0)):e==="focusout"&&Rh()}function lm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ql(ya)}function cm(e,n){if(e==="click")return ql(n)}function um(e,n){if(e==="input"||e==="change")return ql(n)}function dm(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Pr=typeof Object.is=="function"?Object.is:dm;function wa(e,n){if(Pr(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),c=Object.keys(n);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var h=s[c];if(!ru.call(n,h)||!Pr(e[h],n[h]))return!1}return!0}function Ph(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bh(e,n){var s=Ph(e);e=0;for(var c;s;){if(s.nodeType===3){if(c=e+s.textContent.length,e<=n&&c>=n)return{node:s,offset:n-e};e=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ph(s)}}function U0(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?U0(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function H0(){for(var e=window,n=Cl();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=Cl(e.document)}return n}function yd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function hm(e){var n=H0(),s=e.focusedElem,c=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&U0(s.ownerDocument.documentElement,s)){if(c!==null&&yd(s)){if(n=c.start,e=c.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var h=s.textContent.length,g=Math.min(c.start,h);c=c.end===void 0?g:Math.min(c.end,h),!e.extend&&g>c&&(h=c,c=g,g=h),h=Bh(s,g);var _=Bh(s,c);h&&_&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==_.node||e.focusOffset!==_.offset)&&(n=n.createRange(),n.setStart(h.node,h.offset),e.removeAllRanges(),g>c?(e.addRange(n),e.extend(_.node,_.offset)):(n.setEnd(_.node,_.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fm=yi&&"documentMode"in document&&11>=document.documentMode,Ys=null,Cu=null,sa=null,Eu=!1;function jh(e,n,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Eu||Ys==null||Ys!==Cl(c)||(c=Ys,"selectionStart"in c&&yd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),sa&&wa(sa,c)||(sa=c,c=Tl(Cu,"onSelect"),0<c.length&&(n=new pd("onSelect","select",null,n,s),e.push({event:n,listeners:c}),n.target=Ys)))}function $a(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var Xs={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionend:$a("Transition","TransitionEnd")},Pc={},V0={};yi&&(V0=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function Jl(e){if(Pc[e])return Pc[e];if(!Xs[e])return e;var n=Xs[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in V0)return Pc[e]=n[s];return e}var Z0=Jl("animationend"),W0=Jl("animationiteration"),G0=Jl("animationstart"),Y0=Jl("transitionend"),X0=new Map,Fh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function is(e,n){X0.set(e,n),Ms(n,[e])}for(var Bc=0;Bc<Fh.length;Bc++){var jc=Fh[Bc],gm=jc.toLowerCase(),pm=jc[0].toUpperCase()+jc.slice(1);is(gm,"on"+pm)}is(Z0,"onAnimationEnd");is(W0,"onAnimationIteration");is(G0,"onAnimationStart");is("dblclick","onDoubleClick");is("focusin","onFocus");is("focusout","onBlur");is(Y0,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mm=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function zh(e,n,s){var c=e.type||"unknown-event";e.currentTarget=s,gp(c,n,void 0,e),e.currentTarget=null}function Q0(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var c=e[s],h=c.event;c=c.listeners;e:{var g=void 0;if(n)for(var _=c.length-1;0<=_;_--){var A=c[_],b=A.instance,v=A.currentTarget;if(A=A.listener,b!==g&&h.isPropagationStopped())break e;zh(h,A,v),g=b}else for(_=0;_<c.length;_++){if(A=c[_],b=A.instance,v=A.currentTarget,A=A.listener,b!==g&&h.isPropagationStopped())break e;zh(h,A,v),g=b}}}if(Al)throw e=yu,Al=!1,yu=null,e}function kt(e,n){var s=n[Iu];s===void 0&&(s=n[Iu]=new Set);var c=e+"__bubble";s.has(c)||(K0(n,e,2,!1),s.add(c))}function Fc(e,n,s){var c=0;n&&(c|=4),K0(s,e,c,n)}var el="_reactListening"+Math.random().toString(36).slice(2);function _a(e){if(!e[el]){e[el]=!0,r0.forEach(function(s){s!=="selectionchange"&&(mm.has(s)||Fc(s,!1,e),Fc(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[el]||(n[el]=!0,Fc("selectionchange",!1,n))}}function K0(e,n,s,c){switch(L0(n)){case 1:var h=kp;break;case 4:h=Mp;break;default:h=fd}s=h.bind(null,n,s,e),h=void 0,!xu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),c?h!==void 0?e.addEventListener(n,s,{capture:!0,passive:h}):e.addEventListener(n,s,!0):h!==void 0?e.addEventListener(n,s,{passive:h}):e.addEventListener(n,s,!1)}function zc(e,n,s,c,h){var g=c;if(!(n&1)&&!(n&2)&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var A=c.stateNode.containerInfo;if(A===h||A.nodeType===8&&A.parentNode===h)break;if(_===4)for(_=c.return;_!==null;){var b=_.tag;if((b===3||b===4)&&(b=_.stateNode.containerInfo,b===h||b.nodeType===8&&b.parentNode===h))return;_=_.return}for(;A!==null;){if(_=ws(A),_===null)return;if(b=_.tag,b===5||b===6){c=g=_;continue e}A=A.parentNode}}c=c.return}w0(function(){var v=g,D=cd(s),R=[];e:{var H=X0.get(e);if(H!==void 0){var X=pd,te=e;switch(e){case"keypress":if(fl(s)===0)break e;case"keydown":case"keyup":X=Gp;break;case"focusin":te="focus",X=Lc;break;case"focusout":te="blur",X=Lc;break;case"beforeblur":case"afterblur":X=Lc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Dp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Qp;break;case Z0:case W0:case G0:X=Bp;break;case Y0:X=qp;break;case"scroll":X=Op;break;case"wheel":X=$p;break;case"copy":case"cut":case"paste":X=Fp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=kh}var U=(n&4)!==0,xe=!U&&e==="scroll",k=U?H!==null?H+"Capture":null:H;U=[];for(var M=v,B;M!==null;){B=M;var Y=B.stateNode;if(B.tag===5&&Y!==null&&(B=Y,k!==null&&(Y=ga(M,k),Y!=null&&U.push(va(M,Y,B)))),xe)break;M=M.return}0<U.length&&(H=new X(H,te,null,s,D),R.push({event:H,listeners:U}))}}if(!(n&7)){e:{if(H=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",H&&s!==pu&&(te=s.relatedTarget||s.fromElement)&&(ws(te)||te[wi]))break e;if((X||H)&&(H=D.window===D?D:(H=D.ownerDocument)?H.defaultView||H.parentWindow:window,X?(te=s.relatedTarget||s.toElement,X=v,te=te?ws(te):null,te!==null&&(xe=Os(te),te!==xe||te.tag!==5&&te.tag!==6)&&(te=null)):(X=null,te=v),X!==te)){if(U=Ih,Y="onMouseLeave",k="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(U=kh,Y="onPointerLeave",k="onPointerEnter",M="pointer"),xe=X==null?H:Qs(X),B=te==null?H:Qs(te),H=new U(Y,M+"leave",X,s,D),H.target=xe,H.relatedTarget=B,Y=null,ws(D)===v&&(U=new U(k,M+"enter",te,s,D),U.target=B,U.relatedTarget=xe,Y=U),xe=Y,X&&te)t:{for(U=X,k=te,M=0,B=U;B;B=Hs(B))M++;for(B=0,Y=k;Y;Y=Hs(Y))B++;for(;0<M-B;)U=Hs(U),M--;for(;0<B-M;)k=Hs(k),B--;for(;M--;){if(U===k||k!==null&&U===k.alternate)break t;U=Hs(U),k=Hs(k)}U=null}else U=null;X!==null&&Uh(R,H,X,U,!1),te!==null&&xe!==null&&Uh(R,xe,te,U,!0)}}e:{if(H=v?Qs(v):window,X=H.nodeName&&H.nodeName.toLowerCase(),X==="select"||X==="input"&&H.type==="file")var he=om;else if(Lh(H))if(F0)he=um;else{he=lm;var oe=am}else(X=H.nodeName)&&X.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(he=cm);if(he&&(he=he(e,v))){j0(R,he,s,D);break e}oe&&oe(e,H,v),e==="focusout"&&(oe=H._wrapperState)&&oe.controlled&&H.type==="number"&&uu(H,"number",H.value)}switch(oe=v?Qs(v):window,e){case"focusin":(Lh(oe)||oe.contentEditable==="true")&&(Ys=oe,Cu=v,sa=null);break;case"focusout":sa=Cu=Ys=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,jh(R,s,D);break;case"selectionchange":if(fm)break;case"keydown":case"keyup":jh(R,s,D)}var V;if(xd)e:{switch(e){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else Gs?P0(e,s)&&(ne="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ne="onCompositionStart");ne&&(R0&&s.locale!=="ko"&&(Gs||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&Gs&&(V=D0()):(Wi=D,gd="value"in Wi?Wi.value:Wi.textContent,Gs=!0)),oe=Tl(v,ne),0<oe.length&&(ne=new Th(ne,e,null,s,D),R.push({event:ne,listeners:oe}),V?ne.data=V:(V=B0(s),V!==null&&(ne.data=V)))),(V=tm?nm(e,s):rm(e,s))&&(v=Tl(v,"onBeforeInput"),0<v.length&&(D=new Th("onBeforeInput","beforeinput",null,s,D),R.push({event:D,listeners:v}),D.data=V))}Q0(R,n)})}function va(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Tl(e,n){for(var s=n+"Capture",c=[];e!==null;){var h=e,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=ga(e,s),g!=null&&c.unshift(va(e,g,h)),g=ga(e,n),g!=null&&c.push(va(e,g,h))),e=e.return}return c}function Hs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uh(e,n,s,c,h){for(var g=n._reactName,_=[];s!==null&&s!==c;){var A=s,b=A.alternate,v=A.stateNode;if(b!==null&&b===c)break;A.tag===5&&v!==null&&(A=v,h?(b=ga(s,g),b!=null&&_.unshift(va(s,b,A))):h||(b=ga(s,g),b!=null&&_.push(va(s,b,A)))),s=s.return}_.length!==0&&e.push({event:n,listeners:_})}var xm=/\r\n?/g,ym=/\u0000|\uFFFD/g;function Hh(e){return(typeof e=="string"?e:""+e).replace(xm,`
`).replace(ym,"")}function tl(e,n,s){if(n=Hh(n),Hh(e)!==n&&s)throw Error(pe(425))}function kl(){}var Au=null,bu=null;function Su(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Nu=typeof setTimeout=="function"?setTimeout:void 0,wm=typeof clearTimeout=="function"?clearTimeout:void 0,Vh=typeof Promise=="function"?Promise:void 0,_m=typeof queueMicrotask=="function"?queueMicrotask:typeof Vh<"u"?function(e){return Vh.resolve(null).then(e).catch(vm)}:Nu;function vm(e){setTimeout(function(){throw e})}function Uc(e,n){var s=n,c=0;do{var h=s.nextSibling;if(e.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(c===0){e.removeChild(h),xa(n);return}c--}else s!=="$"&&s!=="$?"&&s!=="$!"||c++;s=h}while(s);xa(n)}function Ki(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Zh(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Co=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Co,Ca="__reactProps$"+Co,wi="__reactContainer$"+Co,Iu="__reactEvents$"+Co,Cm="__reactListeners$"+Co,Em="__reactHandles$"+Co;function ws(e){var n=e[Jr];if(n)return n;for(var s=e.parentNode;s;){if(n=s[wi]||s[Jr]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Zh(e);e!==null;){if(s=e[Jr])return s;e=Zh(e)}return n}e=s,s=e.parentNode}return null}function Oa(e){return e=e[Jr]||e[wi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pe(33))}function $l(e){return e[Ca]||null}var Tu=[],Ks=-1;function ss(e){return{current:e}}function Mt(e){0>Ks||(e.current=Tu[Ks],Tu[Ks]=null,Ks--)}function bt(e,n){Ks++,Tu[Ks]=e.current,e.current=n}var ns={},Sn=ss(ns),Vn=ss(!1),Ss=ns;function fo(e,n){var s=e.type.contextTypes;if(!s)return ns;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===n)return c.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in s)h[g]=n[g];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=h),h}function Zn(e){return e=e.childContextTypes,e!=null}function Ml(){Mt(Vn),Mt(Sn)}function Wh(e,n,s){if(Sn.current!==ns)throw Error(pe(168));bt(Sn,n),bt(Vn,s)}function q0(e,n,s){var c=e.stateNode;if(n=n.childContextTypes,typeof c.getChildContext!="function")return s;c=c.getChildContext();for(var h in c)if(!(h in n))throw Error(pe(108,ap(e)||"Unknown",h));return Ft({},s,c)}function Ol(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ns,Ss=Sn.current,bt(Sn,e),bt(Vn,Vn.current),!0}function Gh(e,n,s){var c=e.stateNode;if(!c)throw Error(pe(169));s?(e=q0(e,n,Ss),c.__reactInternalMemoizedMergedChildContext=e,Mt(Vn),Mt(Sn),bt(Sn,e)):Mt(Vn),bt(Vn,s)}var di=null,ec=!1,Hc=!1;function J0(e){di===null?di=[e]:di.push(e)}function Am(e){ec=!0,J0(e)}function os(){if(!Hc&&di!==null){Hc=!0;var e=0,n=xt;try{var s=di;for(xt=1;e<s.length;e++){var c=s[e];do c=c(!0);while(c!==null)}di=null,ec=!1}catch(h){throw di!==null&&(di=di.slice(e+1)),E0(ud,os),h}finally{xt=n,Hc=!1}}return null}var qs=[],Js=0,Ll=null,Dl=0,pr=[],mr=0,Ns=null,fi=1,gi="";function xs(e,n){qs[Js++]=Dl,qs[Js++]=Ll,Ll=e,Dl=n}function $0(e,n,s){pr[mr++]=fi,pr[mr++]=gi,pr[mr++]=Ns,Ns=e;var c=fi;e=gi;var h=32-Dr(c)-1;c&=~(1<<h),s+=1;var g=32-Dr(n)+h;if(30<g){var _=h-h%5;g=(c&(1<<_)-1).toString(32),c>>=_,h-=_,fi=1<<32-Dr(n)+h|s<<h|c,gi=g+e}else fi=1<<g|s<<h|c,gi=e}function wd(e){e.return!==null&&(xs(e,1),$0(e,1,0))}function _d(e){for(;e===Ll;)Ll=qs[--Js],qs[Js]=null,Dl=qs[--Js],qs[Js]=null;for(;e===Ns;)Ns=pr[--mr],pr[mr]=null,gi=pr[--mr],pr[mr]=null,fi=pr[--mr],pr[mr]=null}var tr=null,er=null,Dt=!1,Lr=null;function e1(e,n){var s=xr(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Yh(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,tr=e,er=Ki(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,tr=e,er=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=Ns!==null?{id:fi,overflow:gi}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=xr(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,tr=e,er=null,!0):!1;default:return!1}}function ku(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Mu(e){if(Dt){var n=er;if(n){var s=n;if(!Yh(e,n)){if(ku(e))throw Error(pe(418));n=Ki(s.nextSibling);var c=tr;n&&Yh(e,n)?e1(c,s):(e.flags=e.flags&-4097|2,Dt=!1,tr=e)}}else{if(ku(e))throw Error(pe(418));e.flags=e.flags&-4097|2,Dt=!1,tr=e}}}function Xh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tr=e}function nl(e){if(e!==tr)return!1;if(!Dt)return Xh(e),Dt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Su(e.type,e.memoizedProps)),n&&(n=er)){if(ku(e))throw t1(),Error(pe(418));for(;n;)e1(e,n),n=Ki(n.nextSibling)}if(Xh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pe(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){er=Ki(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}er=null}}else er=tr?Ki(e.stateNode.nextSibling):null;return!0}function t1(){for(var e=er;e;)e=Ki(e.nextSibling)}function go(){er=tr=null,Dt=!1}function vd(e){Lr===null?Lr=[e]:Lr.push(e)}var bm=Ci.ReactCurrentBatchConfig;function Go(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(pe(309));var c=s.stateNode}if(!c)throw Error(pe(147,e));var h=c,g=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===g?n.ref:(n=function(_){var A=h.refs;_===null?delete A[g]:A[g]=_},n._stringRef=g,n)}if(typeof e!="string")throw Error(pe(284));if(!s._owner)throw Error(pe(290,e))}return e}function rl(e,n){throw e=Object.prototype.toString.call(n),Error(pe(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Qh(e){var n=e._init;return n(e._payload)}function n1(e){function n(k,M){if(e){var B=k.deletions;B===null?(k.deletions=[M],k.flags|=16):B.push(M)}}function s(k,M){if(!e)return null;for(;M!==null;)n(k,M),M=M.sibling;return null}function c(k,M){for(k=new Map;M!==null;)M.key!==null?k.set(M.key,M):k.set(M.index,M),M=M.sibling;return k}function h(k,M){return k=es(k,M),k.index=0,k.sibling=null,k}function g(k,M,B){return k.index=B,e?(B=k.alternate,B!==null?(B=B.index,B<M?(k.flags|=2,M):B):(k.flags|=2,M)):(k.flags|=1048576,M)}function _(k){return e&&k.alternate===null&&(k.flags|=2),k}function A(k,M,B,Y){return M===null||M.tag!==6?(M=Qc(B,k.mode,Y),M.return=k,M):(M=h(M,B),M.return=k,M)}function b(k,M,B,Y){var he=B.type;return he===Ws?D(k,M,B.props.children,Y,B.key):M!==null&&(M.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ui&&Qh(he)===M.type)?(Y=h(M,B.props),Y.ref=Go(k,M,B),Y.return=k,Y):(Y=_l(B.type,B.key,B.props,null,k.mode,Y),Y.ref=Go(k,M,B),Y.return=k,Y)}function v(k,M,B,Y){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=Kc(B,k.mode,Y),M.return=k,M):(M=h(M,B.children||[]),M.return=k,M)}function D(k,M,B,Y,he){return M===null||M.tag!==7?(M=bs(B,k.mode,Y,he),M.return=k,M):(M=h(M,B),M.return=k,M)}function R(k,M,B){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Qc(""+M,k.mode,B),M.return=k,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Ga:return B=_l(M.type,M.key,M.props,null,k.mode,B),B.ref=Go(k,null,M),B.return=k,B;case Zs:return M=Kc(M,k.mode,B),M.return=k,M;case Ui:var Y=M._init;return R(k,Y(M._payload),B)}if(Jo(M)||Uo(M))return M=bs(M,k.mode,B,null),M.return=k,M;rl(k,M)}return null}function H(k,M,B,Y){var he=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return he!==null?null:A(k,M,""+B,Y);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ga:return B.key===he?b(k,M,B,Y):null;case Zs:return B.key===he?v(k,M,B,Y):null;case Ui:return he=B._init,H(k,M,he(B._payload),Y)}if(Jo(B)||Uo(B))return he!==null?null:D(k,M,B,Y,null);rl(k,B)}return null}function X(k,M,B,Y,he){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return k=k.get(B)||null,A(M,k,""+Y,he);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Ga:return k=k.get(Y.key===null?B:Y.key)||null,b(M,k,Y,he);case Zs:return k=k.get(Y.key===null?B:Y.key)||null,v(M,k,Y,he);case Ui:var oe=Y._init;return X(k,M,B,oe(Y._payload),he)}if(Jo(Y)||Uo(Y))return k=k.get(B)||null,D(M,k,Y,he,null);rl(M,Y)}return null}function te(k,M,B,Y){for(var he=null,oe=null,V=M,ne=M=0,Q=null;V!==null&&ne<B.length;ne++){V.index>ne?(Q=V,V=null):Q=V.sibling;var Se=H(k,V,B[ne],Y);if(Se===null){V===null&&(V=Q);break}e&&V&&Se.alternate===null&&n(k,V),M=g(Se,M,ne),oe===null?he=Se:oe.sibling=Se,oe=Se,V=Q}if(ne===B.length)return s(k,V),Dt&&xs(k,ne),he;if(V===null){for(;ne<B.length;ne++)V=R(k,B[ne],Y),V!==null&&(M=g(V,M,ne),oe===null?he=V:oe.sibling=V,oe=V);return Dt&&xs(k,ne),he}for(V=c(k,V);ne<B.length;ne++)Q=X(V,k,ne,B[ne],Y),Q!==null&&(e&&Q.alternate!==null&&V.delete(Q.key===null?ne:Q.key),M=g(Q,M,ne),oe===null?he=Q:oe.sibling=Q,oe=Q);return e&&V.forEach(function(Me){return n(k,Me)}),Dt&&xs(k,ne),he}function U(k,M,B,Y){var he=Uo(B);if(typeof he!="function")throw Error(pe(150));if(B=he.call(B),B==null)throw Error(pe(151));for(var oe=he=null,V=M,ne=M=0,Q=null,Se=B.next();V!==null&&!Se.done;ne++,Se=B.next()){V.index>ne?(Q=V,V=null):Q=V.sibling;var Me=H(k,V,Se.value,Y);if(Me===null){V===null&&(V=Q);break}e&&V&&Me.alternate===null&&n(k,V),M=g(Me,M,ne),oe===null?he=Me:oe.sibling=Me,oe=Me,V=Q}if(Se.done)return s(k,V),Dt&&xs(k,ne),he;if(V===null){for(;!Se.done;ne++,Se=B.next())Se=R(k,Se.value,Y),Se!==null&&(M=g(Se,M,ne),oe===null?he=Se:oe.sibling=Se,oe=Se);return Dt&&xs(k,ne),he}for(V=c(k,V);!Se.done;ne++,Se=B.next())Se=X(V,k,ne,Se.value,Y),Se!==null&&(e&&Se.alternate!==null&&V.delete(Se.key===null?ne:Se.key),M=g(Se,M,ne),oe===null?he=Se:oe.sibling=Se,oe=Se);return e&&V.forEach(function(ye){return n(k,ye)}),Dt&&xs(k,ne),he}function xe(k,M,B,Y){if(typeof B=="object"&&B!==null&&B.type===Ws&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Ga:e:{for(var he=B.key,oe=M;oe!==null;){if(oe.key===he){if(he=B.type,he===Ws){if(oe.tag===7){s(k,oe.sibling),M=h(oe,B.props.children),M.return=k,k=M;break e}}else if(oe.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ui&&Qh(he)===oe.type){s(k,oe.sibling),M=h(oe,B.props),M.ref=Go(k,oe,B),M.return=k,k=M;break e}s(k,oe);break}else n(k,oe);oe=oe.sibling}B.type===Ws?(M=bs(B.props.children,k.mode,Y,B.key),M.return=k,k=M):(Y=_l(B.type,B.key,B.props,null,k.mode,Y),Y.ref=Go(k,M,B),Y.return=k,k=Y)}return _(k);case Zs:e:{for(oe=B.key;M!==null;){if(M.key===oe)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){s(k,M.sibling),M=h(M,B.children||[]),M.return=k,k=M;break e}else{s(k,M);break}else n(k,M);M=M.sibling}M=Kc(B,k.mode,Y),M.return=k,k=M}return _(k);case Ui:return oe=B._init,xe(k,M,oe(B._payload),Y)}if(Jo(B))return te(k,M,B,Y);if(Uo(B))return U(k,M,B,Y);rl(k,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,M!==null&&M.tag===6?(s(k,M.sibling),M=h(M,B),M.return=k,k=M):(s(k,M),M=Qc(B,k.mode,Y),M.return=k,k=M),_(k)):s(k,M)}return xe}var po=n1(!0),r1=n1(!1),Rl=ss(null),Pl=null,$s=null,Cd=null;function Ed(){Cd=$s=Pl=null}function Ad(e){var n=Rl.current;Mt(Rl),e._currentValue=n}function Ou(e,n,s){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===s)break;e=e.return}}function lo(e,n){Pl=e,Cd=$s=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(Hn=!0),e.firstContext=null)}function wr(e){var n=e._currentValue;if(Cd!==e)if(e={context:e,memoizedValue:n,next:null},$s===null){if(Pl===null)throw Error(pe(308));$s=e,Pl.dependencies={lanes:0,firstContext:e}}else $s=$s.next=e;return n}var _s=null;function bd(e){_s===null?_s=[e]:_s.push(e)}function i1(e,n,s,c){var h=n.interleaved;return h===null?(s.next=s,bd(n)):(s.next=h.next,h.next=s),n.interleaved=s,_i(e,c)}function _i(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Hi=!1;function Sd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s1(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xi(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function qi(e,n,s){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,at&2){var h=c.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),c.pending=n,_i(e,s)}return h=c.interleaved,h===null?(n.next=n,bd(c)):(n.next=h.next,h.next=n),c.interleaved=n,_i(e,s)}function gl(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var c=n.lanes;c&=e.pendingLanes,s|=c,n.lanes=s,dd(e,s)}}function Kh(e,n){var s=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var h=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var _={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?h=g=_:g=g.next=_,s=s.next}while(s!==null);g===null?h=g=n:g=g.next=n}else h=g=n;s={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,effects:c.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Bl(e,n,s,c){var h=e.updateQueue;Hi=!1;var g=h.firstBaseUpdate,_=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var b=A,v=b.next;b.next=null,_===null?g=v:_.next=v,_=b;var D=e.alternate;D!==null&&(D=D.updateQueue,A=D.lastBaseUpdate,A!==_&&(A===null?D.firstBaseUpdate=v:A.next=v,D.lastBaseUpdate=b))}if(g!==null){var R=h.baseState;_=0,D=v=b=null,A=g;do{var H=A.lane,X=A.eventTime;if((c&H)===H){D!==null&&(D=D.next={eventTime:X,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var te=e,U=A;switch(H=n,X=s,U.tag){case 1:if(te=U.payload,typeof te=="function"){R=te.call(X,R,H);break e}R=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=U.payload,H=typeof te=="function"?te.call(X,R,H):te,H==null)break e;R=Ft({},R,H);break e;case 2:Hi=!0}}A.callback!==null&&A.lane!==0&&(e.flags|=64,H=h.effects,H===null?h.effects=[A]:H.push(A))}else X={eventTime:X,lane:H,tag:A.tag,payload:A.payload,callback:A.callback,next:null},D===null?(v=D=X,b=R):D=D.next=X,_|=H;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;H=A,A=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);if(D===null&&(b=R),h.baseState=b,h.firstBaseUpdate=v,h.lastBaseUpdate=D,n=h.shared.interleaved,n!==null){h=n;do _|=h.lane,h=h.next;while(h!==n)}else g===null&&(h.shared.lanes=0);Ts|=_,e.lanes=_,e.memoizedState=R}}function qh(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var c=e[n],h=c.callback;if(h!==null){if(c.callback=null,c=s,typeof h!="function")throw Error(pe(191,h));h.call(c)}}}var La={},ei=ss(La),Ea=ss(La),Aa=ss(La);function vs(e){if(e===La)throw Error(pe(174));return e}function Nd(e,n){switch(bt(Aa,n),bt(Ea,e),bt(ei,La),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:hu(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=hu(n,e)}Mt(ei),bt(ei,n)}function mo(){Mt(ei),Mt(Ea),Mt(Aa)}function o1(e){vs(Aa.current);var n=vs(ei.current),s=hu(n,e.type);n!==s&&(bt(Ea,e),bt(ei,s))}function Id(e){Ea.current===e&&(Mt(ei),Mt(Ea))}var Bt=ss(0);function jl(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Vc=[];function Td(){for(var e=0;e<Vc.length;e++)Vc[e]._workInProgressVersionPrimary=null;Vc.length=0}var pl=Ci.ReactCurrentDispatcher,Zc=Ci.ReactCurrentBatchConfig,Is=0,jt=null,tn=null,hn=null,Fl=!1,oa=!1,ba=0,Sm=0;function En(){throw Error(pe(321))}function kd(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Pr(e[s],n[s]))return!1;return!0}function Md(e,n,s,c,h,g){if(Is=g,jt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,pl.current=e===null||e.memoizedState===null?km:Mm,e=s(c,h),oa){g=0;do{if(oa=!1,ba=0,25<=g)throw Error(pe(301));g+=1,hn=tn=null,n.updateQueue=null,pl.current=Om,e=s(c,h)}while(oa)}if(pl.current=zl,n=tn!==null&&tn.next!==null,Is=0,hn=tn=jt=null,Fl=!1,n)throw Error(pe(300));return e}function Od(){var e=ba!==0;return ba=0,e}function Kr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?jt.memoizedState=hn=e:hn=hn.next=e,hn}function _r(){if(tn===null){var e=jt.alternate;e=e!==null?e.memoizedState:null}else e=tn.next;var n=hn===null?jt.memoizedState:hn.next;if(n!==null)hn=n,tn=e;else{if(e===null)throw Error(pe(310));tn=e,e={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},hn===null?jt.memoizedState=hn=e:hn=hn.next=e}return hn}function Sa(e,n){return typeof n=="function"?n(e):n}function Wc(e){var n=_r(),s=n.queue;if(s===null)throw Error(pe(311));s.lastRenderedReducer=e;var c=tn,h=c.baseQueue,g=s.pending;if(g!==null){if(h!==null){var _=h.next;h.next=g.next,g.next=_}c.baseQueue=h=g,s.pending=null}if(h!==null){g=h.next,c=c.baseState;var A=_=null,b=null,v=g;do{var D=v.lane;if((Is&D)===D)b!==null&&(b=b.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),c=v.hasEagerState?v.eagerState:e(c,v.action);else{var R={lane:D,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};b===null?(A=b=R,_=c):b=b.next=R,jt.lanes|=D,Ts|=D}v=v.next}while(v!==null&&v!==g);b===null?_=c:b.next=A,Pr(c,n.memoizedState)||(Hn=!0),n.memoizedState=c,n.baseState=_,n.baseQueue=b,s.lastRenderedState=c}if(e=s.interleaved,e!==null){h=e;do g=h.lane,jt.lanes|=g,Ts|=g,h=h.next;while(h!==e)}else h===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function Gc(e){var n=_r(),s=n.queue;if(s===null)throw Error(pe(311));s.lastRenderedReducer=e;var c=s.dispatch,h=s.pending,g=n.memoizedState;if(h!==null){s.pending=null;var _=h=h.next;do g=e(g,_.action),_=_.next;while(_!==h);Pr(g,n.memoizedState)||(Hn=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),s.lastRenderedState=g}return[g,c]}function a1(){}function l1(e,n){var s=jt,c=_r(),h=n(),g=!Pr(c.memoizedState,h);if(g&&(c.memoizedState=h,Hn=!0),c=c.queue,Ld(d1.bind(null,s,c,e),[e]),c.getSnapshot!==n||g||hn!==null&&hn.memoizedState.tag&1){if(s.flags|=2048,Na(9,u1.bind(null,s,c,h,n),void 0,null),fn===null)throw Error(pe(349));Is&30||c1(s,n,h)}return h}function c1(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=jt.updateQueue,n===null?(n={lastEffect:null,stores:null},jt.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function u1(e,n,s,c){n.value=s,n.getSnapshot=c,h1(n)&&f1(e)}function d1(e,n,s){return s(function(){h1(n)&&f1(e)})}function h1(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Pr(e,s)}catch{return!0}}function f1(e){var n=_i(e,1);n!==null&&Rr(n,e,1,-1)}function Jh(e){var n=Kr();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:e},n.queue=e,e=e.dispatch=Tm.bind(null,jt,e),[n.memoizedState,e]}function Na(e,n,s,c){return e={tag:e,create:n,destroy:s,deps:c,next:null},n=jt.updateQueue,n===null?(n={lastEffect:null,stores:null},jt.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(c=s.next,s.next=e,e.next=c,n.lastEffect=e)),e}function g1(){return _r().memoizedState}function ml(e,n,s,c){var h=Kr();jt.flags|=e,h.memoizedState=Na(1|n,s,void 0,c===void 0?null:c)}function tc(e,n,s,c){var h=_r();c=c===void 0?null:c;var g=void 0;if(tn!==null){var _=tn.memoizedState;if(g=_.destroy,c!==null&&kd(c,_.deps)){h.memoizedState=Na(n,s,g,c);return}}jt.flags|=e,h.memoizedState=Na(1|n,s,g,c)}function $h(e,n){return ml(8390656,8,e,n)}function Ld(e,n){return tc(2048,8,e,n)}function p1(e,n){return tc(4,2,e,n)}function m1(e,n){return tc(4,4,e,n)}function x1(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function y1(e,n,s){return s=s!=null?s.concat([e]):null,tc(4,4,x1.bind(null,n,e),s)}function Dd(){}function w1(e,n){var s=_r();n=n===void 0?null:n;var c=s.memoizedState;return c!==null&&n!==null&&kd(n,c[1])?c[0]:(s.memoizedState=[e,n],e)}function _1(e,n){var s=_r();n=n===void 0?null:n;var c=s.memoizedState;return c!==null&&n!==null&&kd(n,c[1])?c[0]:(e=e(),s.memoizedState=[e,n],e)}function v1(e,n,s){return Is&21?(Pr(s,n)||(s=S0(),jt.lanes|=s,Ts|=s,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,Hn=!0),e.memoizedState=s)}function Nm(e,n){var s=xt;xt=s!==0&&4>s?s:4,e(!0);var c=Zc.transition;Zc.transition={};try{e(!1),n()}finally{xt=s,Zc.transition=c}}function C1(){return _r().memoizedState}function Im(e,n,s){var c=$i(e);if(s={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null},E1(e))A1(n,s);else if(s=i1(e,n,s,c),s!==null){var h=Dn();Rr(s,e,c,h),b1(s,n,c)}}function Tm(e,n,s){var c=$i(e),h={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null};if(E1(e))A1(n,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var _=n.lastRenderedState,A=g(_,s);if(h.hasEagerState=!0,h.eagerState=A,Pr(A,_)){var b=n.interleaved;b===null?(h.next=h,bd(n)):(h.next=b.next,b.next=h),n.interleaved=h;return}}catch{}finally{}s=i1(e,n,h,c),s!==null&&(h=Dn(),Rr(s,e,c,h),b1(s,n,c))}}function E1(e){var n=e.alternate;return e===jt||n!==null&&n===jt}function A1(e,n){oa=Fl=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function b1(e,n,s){if(s&4194240){var c=n.lanes;c&=e.pendingLanes,s|=c,n.lanes=s,dd(e,s)}}var zl={readContext:wr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},km={readContext:wr,useCallback:function(e,n){return Kr().memoizedState=[e,n===void 0?null:n],e},useContext:wr,useEffect:$h,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,ml(4194308,4,x1.bind(null,n,e),s)},useLayoutEffect:function(e,n){return ml(4194308,4,e,n)},useInsertionEffect:function(e,n){return ml(4,2,e,n)},useMemo:function(e,n){var s=Kr();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var c=Kr();return n=s!==void 0?s(n):n,c.memoizedState=c.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},c.queue=e,e=e.dispatch=Im.bind(null,jt,e),[c.memoizedState,e]},useRef:function(e){var n=Kr();return e={current:e},n.memoizedState=e},useState:Jh,useDebugValue:Dd,useDeferredValue:function(e){return Kr().memoizedState=e},useTransition:function(){var e=Jh(!1),n=e[0];return e=Nm.bind(null,e[1]),Kr().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var c=jt,h=Kr();if(Dt){if(s===void 0)throw Error(pe(407));s=s()}else{if(s=n(),fn===null)throw Error(pe(349));Is&30||c1(c,n,s)}h.memoizedState=s;var g={value:s,getSnapshot:n};return h.queue=g,$h(d1.bind(null,c,g,e),[e]),c.flags|=2048,Na(9,u1.bind(null,c,g,s,n),void 0,null),s},useId:function(){var e=Kr(),n=fn.identifierPrefix;if(Dt){var s=gi,c=fi;s=(c&~(1<<32-Dr(c)-1)).toString(32)+s,n=":"+n+"R"+s,s=ba++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=Sm++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Mm={readContext:wr,useCallback:w1,useContext:wr,useEffect:Ld,useImperativeHandle:y1,useInsertionEffect:p1,useLayoutEffect:m1,useMemo:_1,useReducer:Wc,useRef:g1,useState:function(){return Wc(Sa)},useDebugValue:Dd,useDeferredValue:function(e){var n=_r();return v1(n,tn.memoizedState,e)},useTransition:function(){var e=Wc(Sa)[0],n=_r().memoizedState;return[e,n]},useMutableSource:a1,useSyncExternalStore:l1,useId:C1,unstable_isNewReconciler:!1},Om={readContext:wr,useCallback:w1,useContext:wr,useEffect:Ld,useImperativeHandle:y1,useInsertionEffect:p1,useLayoutEffect:m1,useMemo:_1,useReducer:Gc,useRef:g1,useState:function(){return Gc(Sa)},useDebugValue:Dd,useDeferredValue:function(e){var n=_r();return tn===null?n.memoizedState=e:v1(n,tn.memoizedState,e)},useTransition:function(){var e=Gc(Sa)[0],n=_r().memoizedState;return[e,n]},useMutableSource:a1,useSyncExternalStore:l1,useId:C1,unstable_isNewReconciler:!1};function kr(e,n){if(e&&e.defaultProps){n=Ft({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function Lu(e,n,s,c){n=e.memoizedState,s=s(c,n),s=s==null?n:Ft({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var nc={isMounted:function(e){return(e=e._reactInternals)?Os(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var c=Dn(),h=$i(e),g=xi(c,h);g.payload=n,s!=null&&(g.callback=s),n=qi(e,g,h),n!==null&&(Rr(n,e,h,c),gl(n,e,h))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var c=Dn(),h=$i(e),g=xi(c,h);g.tag=1,g.payload=n,s!=null&&(g.callback=s),n=qi(e,g,h),n!==null&&(Rr(n,e,h,c),gl(n,e,h))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Dn(),c=$i(e),h=xi(s,c);h.tag=2,n!=null&&(h.callback=n),n=qi(e,h,c),n!==null&&(Rr(n,e,c,s),gl(n,e,c))}};function ef(e,n,s,c,h,g,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,g,_):n.prototype&&n.prototype.isPureReactComponent?!wa(s,c)||!wa(h,g):!0}function S1(e,n,s){var c=!1,h=ns,g=n.contextType;return typeof g=="object"&&g!==null?g=wr(g):(h=Zn(n)?Ss:Sn.current,c=n.contextTypes,g=(c=c!=null)?fo(e,h):ns),n=new n(s,g),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=nc,e.stateNode=n,n._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=g),n}function tf(e,n,s,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,c),n.state!==e&&nc.enqueueReplaceState(n,n.state,null)}function Du(e,n,s,c){var h=e.stateNode;h.props=s,h.state=e.memoizedState,h.refs={},Sd(e);var g=n.contextType;typeof g=="object"&&g!==null?h.context=wr(g):(g=Zn(n)?Ss:Sn.current,h.context=fo(e,g)),h.state=e.memoizedState,g=n.getDerivedStateFromProps,typeof g=="function"&&(Lu(e,n,g,s),h.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(n=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),n!==h.state&&nc.enqueueReplaceState(h,h.state,null),Bl(e,s,h,c),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function xo(e,n){try{var s="",c=n;do s+=op(c),c=c.return;while(c);var h=s}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:n,stack:h,digest:null}}function Yc(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function Ru(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var Lm=typeof WeakMap=="function"?WeakMap:Map;function N1(e,n,s){s=xi(-1,s),s.tag=3,s.payload={element:null};var c=n.value;return s.callback=function(){Hl||(Hl=!0,Wu=c),Ru(e,n)},s}function I1(e,n,s){s=xi(-1,s),s.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var h=n.value;s.payload=function(){return c(h)},s.callback=function(){Ru(e,n)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){Ru(e,n),typeof c!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var _=n.stack;this.componentDidCatch(n.value,{componentStack:_!==null?_:""})}),s}function nf(e,n,s){var c=e.pingCache;if(c===null){c=e.pingCache=new Lm;var h=new Set;c.set(n,h)}else h=c.get(n),h===void 0&&(h=new Set,c.set(n,h));h.has(s)||(h.add(s),e=Ym.bind(null,e,n,s),n.then(e,e))}function rf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function sf(e,n,s,c,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=xi(-1,1),n.tag=2,qi(s,n,1))),s.lanes|=1),e)}var Dm=Ci.ReactCurrentOwner,Hn=!1;function Ln(e,n,s,c){n.child=e===null?r1(n,null,s,c):po(n,e.child,s,c)}function of(e,n,s,c,h){s=s.render;var g=n.ref;return lo(n,h),c=Md(e,n,s,c,g,h),s=Od(),e!==null&&!Hn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~h,vi(e,n,h)):(Dt&&s&&wd(n),n.flags|=1,Ln(e,n,c,h),n.child)}function af(e,n,s,c,h){if(e===null){var g=s.type;return typeof g=="function"&&!Hd(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=g,T1(e,n,g,c,h)):(e=_l(s.type,null,c,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!(e.lanes&h)){var _=g.memoizedProps;if(s=s.compare,s=s!==null?s:wa,s(_,c)&&e.ref===n.ref)return vi(e,n,h)}return n.flags|=1,e=es(g,c),e.ref=n.ref,e.return=n,n.child=e}function T1(e,n,s,c,h){if(e!==null){var g=e.memoizedProps;if(wa(g,c)&&e.ref===n.ref)if(Hn=!1,n.pendingProps=c=g,(e.lanes&h)!==0)e.flags&131072&&(Hn=!0);else return n.lanes=e.lanes,vi(e,n,h)}return Pu(e,n,s,c,h)}function k1(e,n,s){var c=n.pendingProps,h=c.children,g=e!==null?e.memoizedState:null;if(c.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(to,Jn),Jn|=s;else{if(!(s&1073741824))return e=g!==null?g.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,bt(to,Jn),Jn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:s,bt(to,Jn),Jn|=c}else g!==null?(c=g.baseLanes|s,n.memoizedState=null):c=s,bt(to,Jn),Jn|=c;return Ln(e,n,h,s),n.child}function M1(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function Pu(e,n,s,c,h){var g=Zn(s)?Ss:Sn.current;return g=fo(n,g),lo(n,h),s=Md(e,n,s,c,g,h),c=Od(),e!==null&&!Hn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~h,vi(e,n,h)):(Dt&&c&&wd(n),n.flags|=1,Ln(e,n,s,h),n.child)}function lf(e,n,s,c,h){if(Zn(s)){var g=!0;Ol(n)}else g=!1;if(lo(n,h),n.stateNode===null)xl(e,n),S1(n,s,c),Du(n,s,c,h),c=!0;else if(e===null){var _=n.stateNode,A=n.memoizedProps;_.props=A;var b=_.context,v=s.contextType;typeof v=="object"&&v!==null?v=wr(v):(v=Zn(s)?Ss:Sn.current,v=fo(n,v));var D=s.getDerivedStateFromProps,R=typeof D=="function"||typeof _.getSnapshotBeforeUpdate=="function";R||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==c||b!==v)&&tf(n,_,c,v),Hi=!1;var H=n.memoizedState;_.state=H,Bl(n,c,_,h),b=n.memoizedState,A!==c||H!==b||Vn.current||Hi?(typeof D=="function"&&(Lu(n,s,D,c),b=n.memoizedState),(A=Hi||ef(n,s,A,c,H,b,v))?(R||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(n.flags|=4194308)):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=b),_.props=c,_.state=b,_.context=v,c=A):(typeof _.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{_=n.stateNode,s1(e,n),A=n.memoizedProps,v=n.type===n.elementType?A:kr(n.type,A),_.props=v,R=n.pendingProps,H=_.context,b=s.contextType,typeof b=="object"&&b!==null?b=wr(b):(b=Zn(s)?Ss:Sn.current,b=fo(n,b));var X=s.getDerivedStateFromProps;(D=typeof X=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==R||H!==b)&&tf(n,_,c,b),Hi=!1,H=n.memoizedState,_.state=H,Bl(n,c,_,h);var te=n.memoizedState;A!==R||H!==te||Vn.current||Hi?(typeof X=="function"&&(Lu(n,s,X,c),te=n.memoizedState),(v=Hi||ef(n,s,v,c,H,te,b)||!1)?(D||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,te,b),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,te,b)),typeof _.componentDidUpdate=="function"&&(n.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=te),_.props=c,_.state=te,_.context=b,c=v):(typeof _.componentDidUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),c=!1)}return Bu(e,n,s,c,g,h)}function Bu(e,n,s,c,h,g){M1(e,n);var _=(n.flags&128)!==0;if(!c&&!_)return h&&Gh(n,s,!1),vi(e,n,g);c=n.stateNode,Dm.current=n;var A=_&&typeof s.getDerivedStateFromError!="function"?null:c.render();return n.flags|=1,e!==null&&_?(n.child=po(n,e.child,null,g),n.child=po(n,null,A,g)):Ln(e,n,A,g),n.memoizedState=c.state,h&&Gh(n,s,!0),n.child}function O1(e){var n=e.stateNode;n.pendingContext?Wh(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Wh(e,n.context,!1),Nd(e,n.containerInfo)}function cf(e,n,s,c,h){return go(),vd(h),n.flags|=256,Ln(e,n,s,c),n.child}var ju={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function L1(e,n,s){var c=n.pendingProps,h=Bt.current,g=!1,_=(n.flags&128)!==0,A;if((A=_)||(A=e!==null&&e.memoizedState===null?!1:(h&2)!==0),A?(g=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),bt(Bt,h&1),e===null)return Mu(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(_=c.children,e=c.fallback,g?(c=n.mode,g=n.child,_={mode:"hidden",children:_},!(c&1)&&g!==null?(g.childLanes=0,g.pendingProps=_):g=sc(_,c,0,null),e=bs(e,c,s,null),g.return=n,e.return=n,g.sibling=e,n.child=g,n.child.memoizedState=Fu(s),n.memoizedState=ju,e):Rd(n,_));if(h=e.memoizedState,h!==null&&(A=h.dehydrated,A!==null))return Rm(e,n,_,c,A,h,s);if(g){g=c.fallback,_=n.mode,h=e.child,A=h.sibling;var b={mode:"hidden",children:c.children};return!(_&1)&&n.child!==h?(c=n.child,c.childLanes=0,c.pendingProps=b,n.deletions=null):(c=es(h,b),c.subtreeFlags=h.subtreeFlags&14680064),A!==null?g=es(A,g):(g=bs(g,_,s,null),g.flags|=2),g.return=n,c.return=n,c.sibling=g,n.child=c,c=g,g=n.child,_=e.child.memoizedState,_=_===null?Fu(s):{baseLanes:_.baseLanes|s,cachePool:null,transitions:_.transitions},g.memoizedState=_,g.childLanes=e.childLanes&~s,n.memoizedState=ju,c}return g=e.child,e=g.sibling,c=es(g,{mode:"visible",children:c.children}),!(n.mode&1)&&(c.lanes=s),c.return=n,c.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=c,n.memoizedState=null,c}function Rd(e,n){return n=sc({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function il(e,n,s,c){return c!==null&&vd(c),po(n,e.child,null,s),e=Rd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Rm(e,n,s,c,h,g,_){if(s)return n.flags&256?(n.flags&=-257,c=Yc(Error(pe(422))),il(e,n,_,c)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(g=c.fallback,h=n.mode,c=sc({mode:"visible",children:c.children},h,0,null),g=bs(g,h,_,null),g.flags|=2,c.return=n,g.return=n,c.sibling=g,n.child=c,n.mode&1&&po(n,e.child,null,_),n.child.memoizedState=Fu(_),n.memoizedState=ju,g);if(!(n.mode&1))return il(e,n,_,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var A=c.dgst;return c=A,g=Error(pe(419)),c=Yc(g,c,void 0),il(e,n,_,c)}if(A=(_&e.childLanes)!==0,Hn||A){if(c=fn,c!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(c.suspendedLanes|_)?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,_i(e,h),Rr(c,e,h,-1))}return Ud(),c=Yc(Error(pe(421))),il(e,n,_,c)}return h.data==="$?"?(n.flags|=128,n.child=e.child,n=Xm.bind(null,e),h._reactRetry=n,null):(e=g.treeContext,er=Ki(h.nextSibling),tr=n,Dt=!0,Lr=null,e!==null&&(pr[mr++]=fi,pr[mr++]=gi,pr[mr++]=Ns,fi=e.id,gi=e.overflow,Ns=n),n=Rd(n,c.children),n.flags|=4096,n)}function uf(e,n,s){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),Ou(e.return,n,s)}function Xc(e,n,s,c,h){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:h}:(g.isBackwards=n,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=s,g.tailMode=h)}function D1(e,n,s){var c=n.pendingProps,h=c.revealOrder,g=c.tail;if(Ln(e,n,c.children,s),c=Bt.current,c&2)c=c&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uf(e,s,n);else if(e.tag===19)uf(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(bt(Bt,c),!(n.mode&1))n.memoizedState=null;else switch(h){case"forwards":for(s=n.child,h=null;s!==null;)e=s.alternate,e!==null&&jl(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=n.child,n.child=null):(h=s.sibling,s.sibling=null),Xc(n,!1,h,s,g);break;case"backwards":for(s=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&jl(e)===null){n.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}Xc(n,!0,s,null,g);break;case"together":Xc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function xl(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function vi(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Ts|=n.lanes,!(s&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(pe(153));if(n.child!==null){for(e=n.child,s=es(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=es(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Pm(e,n,s){switch(n.tag){case 3:O1(n),go();break;case 5:o1(n);break;case 1:Zn(n.type)&&Ol(n);break;case 4:Nd(n,n.stateNode.containerInfo);break;case 10:var c=n.type._context,h=n.memoizedProps.value;bt(Rl,c._currentValue),c._currentValue=h;break;case 13:if(c=n.memoizedState,c!==null)return c.dehydrated!==null?(bt(Bt,Bt.current&1),n.flags|=128,null):s&n.child.childLanes?L1(e,n,s):(bt(Bt,Bt.current&1),e=vi(e,n,s),e!==null?e.sibling:null);bt(Bt,Bt.current&1);break;case 19:if(c=(s&n.childLanes)!==0,e.flags&128){if(c)return D1(e,n,s);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),bt(Bt,Bt.current),c)break;return null;case 22:case 23:return n.lanes=0,k1(e,n,s)}return vi(e,n,s)}var R1,zu,P1,B1;R1=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};zu=function(){};P1=function(e,n,s,c){var h=e.memoizedProps;if(h!==c){e=n.stateNode,vs(ei.current);var g=null;switch(s){case"input":h=lu(e,h),c=lu(e,c),g=[];break;case"select":h=Ft({},h,{value:void 0}),c=Ft({},c,{value:void 0}),g=[];break;case"textarea":h=du(e,h),c=du(e,c),g=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=kl)}fu(s,c);var _;s=null;for(v in h)if(!c.hasOwnProperty(v)&&h.hasOwnProperty(v)&&h[v]!=null)if(v==="style"){var A=h[v];for(_ in A)A.hasOwnProperty(_)&&(s||(s={}),s[_]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(ha.hasOwnProperty(v)?g||(g=[]):(g=g||[]).push(v,null));for(v in c){var b=c[v];if(A=h!=null?h[v]:void 0,c.hasOwnProperty(v)&&b!==A&&(b!=null||A!=null))if(v==="style")if(A){for(_ in A)!A.hasOwnProperty(_)||b&&b.hasOwnProperty(_)||(s||(s={}),s[_]="");for(_ in b)b.hasOwnProperty(_)&&A[_]!==b[_]&&(s||(s={}),s[_]=b[_])}else s||(g||(g=[]),g.push(v,s)),s=b;else v==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,A=A?A.__html:void 0,b!=null&&A!==b&&(g=g||[]).push(v,b)):v==="children"?typeof b!="string"&&typeof b!="number"||(g=g||[]).push(v,""+b):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(ha.hasOwnProperty(v)?(b!=null&&v==="onScroll"&&kt("scroll",e),g||A===b||(g=[])):(g=g||[]).push(v,b))}s&&(g=g||[]).push("style",s);var v=g;(n.updateQueue=v)&&(n.flags|=4)}};B1=function(e,n,s,c){s!==c&&(n.flags|=4)};function Yo(e,n){if(!Dt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function An(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,c=0;if(n)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=c,e.childLanes=s,n}function Bm(e,n,s){var c=n.pendingProps;switch(_d(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(n),null;case 1:return Zn(n.type)&&Ml(),An(n),null;case 3:return c=n.stateNode,mo(),Mt(Vn),Mt(Sn),Td(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(nl(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Lr!==null&&(Xu(Lr),Lr=null))),zu(e,n),An(n),null;case 5:Id(n);var h=vs(Aa.current);if(s=n.type,e!==null&&n.stateNode!=null)P1(e,n,s,c,h),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!c){if(n.stateNode===null)throw Error(pe(166));return An(n),null}if(e=vs(ei.current),nl(n)){c=n.stateNode,s=n.type;var g=n.memoizedProps;switch(c[Jr]=n,c[Ca]=g,e=(n.mode&1)!==0,s){case"dialog":kt("cancel",c),kt("close",c);break;case"iframe":case"object":case"embed":kt("load",c);break;case"video":case"audio":for(h=0;h<ea.length;h++)kt(ea[h],c);break;case"source":kt("error",c);break;case"img":case"image":case"link":kt("error",c),kt("load",c);break;case"details":kt("toggle",c);break;case"input":yh(c,g),kt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},kt("invalid",c);break;case"textarea":_h(c,g),kt("invalid",c)}fu(s,g),h=null;for(var _ in g)if(g.hasOwnProperty(_)){var A=g[_];_==="children"?typeof A=="string"?c.textContent!==A&&(g.suppressHydrationWarning!==!0&&tl(c.textContent,A,e),h=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&tl(c.textContent,A,e),h=["children",""+A]):ha.hasOwnProperty(_)&&A!=null&&_==="onScroll"&&kt("scroll",c)}switch(s){case"input":Ya(c),wh(c,g,!0);break;case"textarea":Ya(c),vh(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=kl)}c=h,n.updateQueue=c,c!==null&&(n.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=d0(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=_.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=_.createElement(s,{is:c.is}):(e=_.createElement(s),s==="select"&&(_=e,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):e=_.createElementNS(e,s),e[Jr]=n,e[Ca]=c,R1(e,n,!1,!1),n.stateNode=e;e:{switch(_=gu(s,c),s){case"dialog":kt("cancel",e),kt("close",e),h=c;break;case"iframe":case"object":case"embed":kt("load",e),h=c;break;case"video":case"audio":for(h=0;h<ea.length;h++)kt(ea[h],e);h=c;break;case"source":kt("error",e),h=c;break;case"img":case"image":case"link":kt("error",e),kt("load",e),h=c;break;case"details":kt("toggle",e),h=c;break;case"input":yh(e,c),h=lu(e,c),kt("invalid",e);break;case"option":h=c;break;case"select":e._wrapperState={wasMultiple:!!c.multiple},h=Ft({},c,{value:void 0}),kt("invalid",e);break;case"textarea":_h(e,c),h=du(e,c),kt("invalid",e);break;default:h=c}fu(s,h),A=h;for(g in A)if(A.hasOwnProperty(g)){var b=A[g];g==="style"?g0(e,b):g==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&h0(e,b)):g==="children"?typeof b=="string"?(s!=="textarea"||b!=="")&&fa(e,b):typeof b=="number"&&fa(e,""+b):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(ha.hasOwnProperty(g)?b!=null&&g==="onScroll"&&kt("scroll",e):b!=null&&sd(e,g,b,_))}switch(s){case"input":Ya(e),wh(e,c,!1);break;case"textarea":Ya(e),vh(e);break;case"option":c.value!=null&&e.setAttribute("value",""+ts(c.value));break;case"select":e.multiple=!!c.multiple,g=c.value,g!=null?io(e,!!c.multiple,g,!1):c.defaultValue!=null&&io(e,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=kl)}switch(s){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return An(n),null;case 6:if(e&&n.stateNode!=null)B1(e,n,e.memoizedProps,c);else{if(typeof c!="string"&&n.stateNode===null)throw Error(pe(166));if(s=vs(Aa.current),vs(ei.current),nl(n)){if(c=n.stateNode,s=n.memoizedProps,c[Jr]=n,(g=c.nodeValue!==s)&&(e=tr,e!==null))switch(e.tag){case 3:tl(c.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tl(c.nodeValue,s,(e.mode&1)!==0)}g&&(n.flags|=4)}else c=(s.nodeType===9?s:s.ownerDocument).createTextNode(c),c[Jr]=n,n.stateNode=c}return An(n),null;case 13:if(Mt(Bt),c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Dt&&er!==null&&n.mode&1&&!(n.flags&128))t1(),go(),n.flags|=98560,g=!1;else if(g=nl(n),c!==null&&c.dehydrated!==null){if(e===null){if(!g)throw Error(pe(318));if(g=n.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(pe(317));g[Jr]=n}else go(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;An(n),g=!1}else Lr!==null&&(Xu(Lr),Lr=null),g=!0;if(!g)return n.flags&65536?n:null}return n.flags&128?(n.lanes=s,n):(c=c!==null,c!==(e!==null&&e.memoizedState!==null)&&c&&(n.child.flags|=8192,n.mode&1&&(e===null||Bt.current&1?nn===0&&(nn=3):Ud())),n.updateQueue!==null&&(n.flags|=4),An(n),null);case 4:return mo(),zu(e,n),e===null&&_a(n.stateNode.containerInfo),An(n),null;case 10:return Ad(n.type._context),An(n),null;case 17:return Zn(n.type)&&Ml(),An(n),null;case 19:if(Mt(Bt),g=n.memoizedState,g===null)return An(n),null;if(c=(n.flags&128)!==0,_=g.rendering,_===null)if(c)Yo(g,!1);else{if(nn!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(_=jl(e),_!==null){for(n.flags|=128,Yo(g,!1),c=_.updateQueue,c!==null&&(n.updateQueue=c,n.flags|=4),n.subtreeFlags=0,c=s,s=n.child;s!==null;)g=s,e=c,g.flags&=14680066,_=g.alternate,_===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=_.childLanes,g.lanes=_.lanes,g.child=_.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=_.memoizedProps,g.memoizedState=_.memoizedState,g.updateQueue=_.updateQueue,g.type=_.type,e=_.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return bt(Bt,Bt.current&1|2),n.child}e=e.sibling}g.tail!==null&&Vt()>yo&&(n.flags|=128,c=!0,Yo(g,!1),n.lanes=4194304)}else{if(!c)if(e=jl(_),e!==null){if(n.flags|=128,c=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Yo(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Dt)return An(n),null}else 2*Vt()-g.renderingStartTime>yo&&s!==1073741824&&(n.flags|=128,c=!0,Yo(g,!1),n.lanes=4194304);g.isBackwards?(_.sibling=n.child,n.child=_):(s=g.last,s!==null?s.sibling=_:n.child=_,g.last=_)}return g.tail!==null?(n=g.tail,g.rendering=n,g.tail=n.sibling,g.renderingStartTime=Vt(),n.sibling=null,s=Bt.current,bt(Bt,c?s&1|2:s&1),n):(An(n),null);case 22:case 23:return zd(),c=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==c&&(n.flags|=8192),c&&n.mode&1?Jn&1073741824&&(An(n),n.subtreeFlags&6&&(n.flags|=8192)):An(n),null;case 24:return null;case 25:return null}throw Error(pe(156,n.tag))}function jm(e,n){switch(_d(n),n.tag){case 1:return Zn(n.type)&&Ml(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return mo(),Mt(Vn),Mt(Sn),Td(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Id(n),null;case 13:if(Mt(Bt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(pe(340));go()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Mt(Bt),null;case 4:return mo(),null;case 10:return Ad(n.type._context),null;case 22:case 23:return zd(),null;case 24:return null;default:return null}}var sl=!1,bn=!1,Fm=typeof WeakSet=="function"?WeakSet:Set,be=null;function eo(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(c){Ut(e,n,c)}else s.current=null}function Uu(e,n,s){try{s()}catch(c){Ut(e,n,c)}}var df=!1;function zm(e,n){if(Au=Nl,e=H0(),yd(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var _=0,A=-1,b=-1,v=0,D=0,R=e,H=null;t:for(;;){for(var X;R!==s||h!==0&&R.nodeType!==3||(A=_+h),R!==g||c!==0&&R.nodeType!==3||(b=_+c),R.nodeType===3&&(_+=R.nodeValue.length),(X=R.firstChild)!==null;)H=R,R=X;for(;;){if(R===e)break t;if(H===s&&++v===h&&(A=_),H===g&&++D===c&&(b=_),(X=R.nextSibling)!==null)break;R=H,H=R.parentNode}R=X}s=A===-1||b===-1?null:{start:A,end:b}}else s=null}s=s||{start:0,end:0}}else s=null;for(bu={focusedElem:e,selectionRange:s},Nl=!1,be=n;be!==null;)if(n=be,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,be=e;else for(;be!==null;){n=be;try{var te=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var U=te.memoizedProps,xe=te.memoizedState,k=n.stateNode,M=k.getSnapshotBeforeUpdate(n.elementType===n.type?U:kr(n.type,U),xe);k.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var B=n.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(Y){Ut(n,n.return,Y)}if(e=n.sibling,e!==null){e.return=n.return,be=e;break}be=n.return}return te=df,df=!1,te}function aa(e,n,s){var c=n.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&e)===e){var g=h.destroy;h.destroy=void 0,g!==void 0&&Uu(n,s,g)}h=h.next}while(h!==c)}}function rc(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var c=s.create;s.destroy=c()}s=s.next}while(s!==n)}}function Hu(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function j1(e){var n=e.alternate;n!==null&&(e.alternate=null,j1(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Jr],delete n[Ca],delete n[Iu],delete n[Cm],delete n[Em])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function F1(e){return e.tag===5||e.tag===3||e.tag===4}function hf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||F1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vu(e,n,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=kl));else if(c!==4&&(e=e.child,e!==null))for(Vu(e,n,s),e=e.sibling;e!==null;)Vu(e,n,s),e=e.sibling}function Zu(e,n,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(Zu(e,n,s),e=e.sibling;e!==null;)Zu(e,n,s),e=e.sibling}var gn=null,Mr=!1;function Fi(e,n,s){for(s=s.child;s!==null;)z1(e,n,s),s=s.sibling}function z1(e,n,s){if($r&&typeof $r.onCommitFiberUnmount=="function")try{$r.onCommitFiberUnmount(Ql,s)}catch{}switch(s.tag){case 5:bn||eo(s,n);case 6:var c=gn,h=Mr;gn=null,Fi(e,n,s),gn=c,Mr=h,gn!==null&&(Mr?(e=gn,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):gn.removeChild(s.stateNode));break;case 18:gn!==null&&(Mr?(e=gn,s=s.stateNode,e.nodeType===8?Uc(e.parentNode,s):e.nodeType===1&&Uc(e,s),xa(e)):Uc(gn,s.stateNode));break;case 4:c=gn,h=Mr,gn=s.stateNode.containerInfo,Mr=!0,Fi(e,n,s),gn=c,Mr=h;break;case 0:case 11:case 14:case 15:if(!bn&&(c=s.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var g=h,_=g.destroy;g=g.tag,_!==void 0&&(g&2||g&4)&&Uu(s,n,_),h=h.next}while(h!==c)}Fi(e,n,s);break;case 1:if(!bn&&(eo(s,n),c=s.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=s.memoizedProps,c.state=s.memoizedState,c.componentWillUnmount()}catch(A){Ut(s,n,A)}Fi(e,n,s);break;case 21:Fi(e,n,s);break;case 22:s.mode&1?(bn=(c=bn)||s.memoizedState!==null,Fi(e,n,s),bn=c):Fi(e,n,s);break;default:Fi(e,n,s)}}function ff(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Fm),n.forEach(function(c){var h=Qm.bind(null,e,c);s.has(c)||(s.add(c),c.then(h,h))})}}function Tr(e,n){var s=n.deletions;if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];try{var g=e,_=n,A=_;e:for(;A!==null;){switch(A.tag){case 5:gn=A.stateNode,Mr=!1;break e;case 3:gn=A.stateNode.containerInfo,Mr=!0;break e;case 4:gn=A.stateNode.containerInfo,Mr=!0;break e}A=A.return}if(gn===null)throw Error(pe(160));z1(g,_,h),gn=null,Mr=!1;var b=h.alternate;b!==null&&(b.return=null),h.return=null}catch(v){Ut(h,n,v)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)U1(n,e),n=n.sibling}function U1(e,n){var s=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tr(n,e),Qr(e),c&4){try{aa(3,e,e.return),rc(3,e)}catch(U){Ut(e,e.return,U)}try{aa(5,e,e.return)}catch(U){Ut(e,e.return,U)}}break;case 1:Tr(n,e),Qr(e),c&512&&s!==null&&eo(s,s.return);break;case 5:if(Tr(n,e),Qr(e),c&512&&s!==null&&eo(s,s.return),e.flags&32){var h=e.stateNode;try{fa(h,"")}catch(U){Ut(e,e.return,U)}}if(c&4&&(h=e.stateNode,h!=null)){var g=e.memoizedProps,_=s!==null?s.memoizedProps:g,A=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&c0(h,g),gu(A,_);var v=gu(A,g);for(_=0;_<b.length;_+=2){var D=b[_],R=b[_+1];D==="style"?g0(h,R):D==="dangerouslySetInnerHTML"?h0(h,R):D==="children"?fa(h,R):sd(h,D,R,v)}switch(A){case"input":cu(h,g);break;case"textarea":u0(h,g);break;case"select":var H=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var X=g.value;X!=null?io(h,!!g.multiple,X,!1):H!==!!g.multiple&&(g.defaultValue!=null?io(h,!!g.multiple,g.defaultValue,!0):io(h,!!g.multiple,g.multiple?[]:"",!1))}h[Ca]=g}catch(U){Ut(e,e.return,U)}}break;case 6:if(Tr(n,e),Qr(e),c&4){if(e.stateNode===null)throw Error(pe(162));h=e.stateNode,g=e.memoizedProps;try{h.nodeValue=g}catch(U){Ut(e,e.return,U)}}break;case 3:if(Tr(n,e),Qr(e),c&4&&s!==null&&s.memoizedState.isDehydrated)try{xa(n.containerInfo)}catch(U){Ut(e,e.return,U)}break;case 4:Tr(n,e),Qr(e);break;case 13:Tr(n,e),Qr(e),h=e.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(jd=Vt())),c&4&&ff(e);break;case 22:if(D=s!==null&&s.memoizedState!==null,e.mode&1?(bn=(v=bn)||D,Tr(n,e),bn=v):Tr(n,e),Qr(e),c&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!D&&e.mode&1)for(be=e,D=e.child;D!==null;){for(R=be=D;be!==null;){switch(H=be,X=H.child,H.tag){case 0:case 11:case 14:case 15:aa(4,H,H.return);break;case 1:eo(H,H.return);var te=H.stateNode;if(typeof te.componentWillUnmount=="function"){c=H,s=H.return;try{n=c,te.props=n.memoizedProps,te.state=n.memoizedState,te.componentWillUnmount()}catch(U){Ut(c,s,U)}}break;case 5:eo(H,H.return);break;case 22:if(H.memoizedState!==null){pf(R);continue}}X!==null?(X.return=H,be=X):pf(R)}D=D.sibling}e:for(D=null,R=e;;){if(R.tag===5){if(D===null){D=R;try{h=R.stateNode,v?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=R.stateNode,b=R.memoizedProps.style,_=b!=null&&b.hasOwnProperty("display")?b.display:null,A.style.display=f0("display",_))}catch(U){Ut(e,e.return,U)}}}else if(R.tag===6){if(D===null)try{R.stateNode.nodeValue=v?"":R.memoizedProps}catch(U){Ut(e,e.return,U)}}else if((R.tag!==22&&R.tag!==23||R.memoizedState===null||R===e)&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===e)break e;for(;R.sibling===null;){if(R.return===null||R.return===e)break e;D===R&&(D=null),R=R.return}D===R&&(D=null),R.sibling.return=R.return,R=R.sibling}}break;case 19:Tr(n,e),Qr(e),c&4&&ff(e);break;case 21:break;default:Tr(n,e),Qr(e)}}function Qr(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(F1(s)){var c=s;break e}s=s.return}throw Error(pe(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(fa(h,""),c.flags&=-33);var g=hf(e);Zu(e,g,h);break;case 3:case 4:var _=c.stateNode.containerInfo,A=hf(e);Vu(e,A,_);break;default:throw Error(pe(161))}}catch(b){Ut(e,e.return,b)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Um(e,n,s){be=e,H1(e)}function H1(e,n,s){for(var c=(e.mode&1)!==0;be!==null;){var h=be,g=h.child;if(h.tag===22&&c){var _=h.memoizedState!==null||sl;if(!_){var A=h.alternate,b=A!==null&&A.memoizedState!==null||bn;A=sl;var v=bn;if(sl=_,(bn=b)&&!v)for(be=h;be!==null;)_=be,b=_.child,_.tag===22&&_.memoizedState!==null?mf(h):b!==null?(b.return=_,be=b):mf(h);for(;g!==null;)be=g,H1(g),g=g.sibling;be=h,sl=A,bn=v}gf(e)}else h.subtreeFlags&8772&&g!==null?(g.return=h,be=g):gf(e)}}function gf(e){for(;be!==null;){var n=be;if(n.flags&8772){var s=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:bn||rc(5,n);break;case 1:var c=n.stateNode;if(n.flags&4&&!bn)if(s===null)c.componentDidMount();else{var h=n.elementType===n.type?s.memoizedProps:kr(n.type,s.memoizedProps);c.componentDidUpdate(h,s.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=n.updateQueue;g!==null&&qh(n,g,c);break;case 3:var _=n.updateQueue;if(_!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}qh(n,_,s)}break;case 5:var A=n.stateNode;if(s===null&&n.flags&4){s=A;var b=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&s.focus();break;case"img":b.src&&(s.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var v=n.alternate;if(v!==null){var D=v.memoizedState;if(D!==null){var R=D.dehydrated;R!==null&&xa(R)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}bn||n.flags&512&&Hu(n)}catch(H){Ut(n,n.return,H)}}if(n===e){be=null;break}if(s=n.sibling,s!==null){s.return=n.return,be=s;break}be=n.return}}function pf(e){for(;be!==null;){var n=be;if(n===e){be=null;break}var s=n.sibling;if(s!==null){s.return=n.return,be=s;break}be=n.return}}function mf(e){for(;be!==null;){var n=be;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{rc(4,n)}catch(b){Ut(n,s,b)}break;case 1:var c=n.stateNode;if(typeof c.componentDidMount=="function"){var h=n.return;try{c.componentDidMount()}catch(b){Ut(n,h,b)}}var g=n.return;try{Hu(n)}catch(b){Ut(n,g,b)}break;case 5:var _=n.return;try{Hu(n)}catch(b){Ut(n,_,b)}}}catch(b){Ut(n,n.return,b)}if(n===e){be=null;break}var A=n.sibling;if(A!==null){A.return=n.return,be=A;break}be=n.return}}var Hm=Math.ceil,Ul=Ci.ReactCurrentDispatcher,Pd=Ci.ReactCurrentOwner,yr=Ci.ReactCurrentBatchConfig,at=0,fn=null,Kt=null,pn=0,Jn=0,to=ss(0),nn=0,Ia=null,Ts=0,ic=0,Bd=0,la=null,Un=null,jd=0,yo=1/0,ui=null,Hl=!1,Wu=null,Ji=null,ol=!1,Gi=null,Vl=0,ca=0,Gu=null,yl=-1,wl=0;function Dn(){return at&6?Vt():yl!==-1?yl:yl=Vt()}function $i(e){return e.mode&1?at&2&&pn!==0?pn&-pn:bm.transition!==null?(wl===0&&(wl=S0()),wl):(e=xt,e!==0||(e=window.event,e=e===void 0?16:L0(e.type)),e):1}function Rr(e,n,s,c){if(50<ca)throw ca=0,Gu=null,Error(pe(185));ka(e,s,c),(!(at&2)||e!==fn)&&(e===fn&&(!(at&2)&&(ic|=s),nn===4&&Zi(e,pn)),Wn(e,c),s===1&&at===0&&!(n.mode&1)&&(yo=Vt()+500,ec&&os()))}function Wn(e,n){var s=e.callbackNode;bp(e,n);var c=Sl(e,e===fn?pn:0);if(c===0)s!==null&&Ah(s),e.callbackNode=null,e.callbackPriority=0;else if(n=c&-c,e.callbackPriority!==n){if(s!=null&&Ah(s),n===1)e.tag===0?Am(xf.bind(null,e)):J0(xf.bind(null,e)),_m(function(){!(at&6)&&os()}),s=null;else{switch(N0(c)){case 1:s=ud;break;case 4:s=A0;break;case 16:s=bl;break;case 536870912:s=b0;break;default:s=bl}s=K1(s,V1.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function V1(e,n){if(yl=-1,wl=0,at&6)throw Error(pe(327));var s=e.callbackNode;if(co()&&e.callbackNode!==s)return null;var c=Sl(e,e===fn?pn:0);if(c===0)return null;if(c&30||c&e.expiredLanes||n)n=Zl(e,c);else{n=c;var h=at;at|=2;var g=W1();(fn!==e||pn!==n)&&(ui=null,yo=Vt()+500,As(e,n));do try{Wm();break}catch(A){Z1(e,A)}while(!0);Ed(),Ul.current=g,at=h,Kt!==null?n=0:(fn=null,pn=0,n=nn)}if(n!==0){if(n===2&&(h=wu(e),h!==0&&(c=h,n=Yu(e,h))),n===1)throw s=Ia,As(e,0),Zi(e,c),Wn(e,Vt()),s;if(n===6)Zi(e,c);else{if(h=e.current.alternate,!(c&30)&&!Vm(h)&&(n=Zl(e,c),n===2&&(g=wu(e),g!==0&&(c=g,n=Yu(e,g))),n===1))throw s=Ia,As(e,0),Zi(e,c),Wn(e,Vt()),s;switch(e.finishedWork=h,e.finishedLanes=c,n){case 0:case 1:throw Error(pe(345));case 2:ys(e,Un,ui);break;case 3:if(Zi(e,c),(c&130023424)===c&&(n=jd+500-Vt(),10<n)){if(Sl(e,0)!==0)break;if(h=e.suspendedLanes,(h&c)!==c){Dn(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=Nu(ys.bind(null,e,Un,ui),n);break}ys(e,Un,ui);break;case 4:if(Zi(e,c),(c&4194240)===c)break;for(n=e.eventTimes,h=-1;0<c;){var _=31-Dr(c);g=1<<_,_=n[_],_>h&&(h=_),c&=~g}if(c=h,c=Vt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Hm(c/1960))-c,10<c){e.timeoutHandle=Nu(ys.bind(null,e,Un,ui),c);break}ys(e,Un,ui);break;case 5:ys(e,Un,ui);break;default:throw Error(pe(329))}}}return Wn(e,Vt()),e.callbackNode===s?V1.bind(null,e):null}function Yu(e,n){var s=la;return e.current.memoizedState.isDehydrated&&(As(e,n).flags|=256),e=Zl(e,n),e!==2&&(n=Un,Un=s,n!==null&&Xu(n)),e}function Xu(e){Un===null?Un=e:Un.push.apply(Un,e)}function Vm(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var c=0;c<s.length;c++){var h=s[c],g=h.getSnapshot;h=h.value;try{if(!Pr(g(),h))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Zi(e,n){for(n&=~Bd,n&=~ic,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-Dr(n),c=1<<s;e[s]=-1,n&=~c}}function xf(e){if(at&6)throw Error(pe(327));co();var n=Sl(e,0);if(!(n&1))return Wn(e,Vt()),null;var s=Zl(e,n);if(e.tag!==0&&s===2){var c=wu(e);c!==0&&(n=c,s=Yu(e,c))}if(s===1)throw s=Ia,As(e,0),Zi(e,n),Wn(e,Vt()),s;if(s===6)throw Error(pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,ys(e,Un,ui),Wn(e,Vt()),null}function Fd(e,n){var s=at;at|=1;try{return e(n)}finally{at=s,at===0&&(yo=Vt()+500,ec&&os())}}function ks(e){Gi!==null&&Gi.tag===0&&!(at&6)&&co();var n=at;at|=1;var s=yr.transition,c=xt;try{if(yr.transition=null,xt=1,e)return e()}finally{xt=c,yr.transition=s,at=n,!(at&6)&&os()}}function zd(){Jn=to.current,Mt(to)}function As(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,wm(s)),Kt!==null)for(s=Kt.return;s!==null;){var c=s;switch(_d(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ml();break;case 3:mo(),Mt(Vn),Mt(Sn),Td();break;case 5:Id(c);break;case 4:mo();break;case 13:Mt(Bt);break;case 19:Mt(Bt);break;case 10:Ad(c.type._context);break;case 22:case 23:zd()}s=s.return}if(fn=e,Kt=e=es(e.current,null),pn=Jn=n,nn=0,Ia=null,Bd=ic=Ts=0,Un=la=null,_s!==null){for(n=0;n<_s.length;n++)if(s=_s[n],c=s.interleaved,c!==null){s.interleaved=null;var h=c.next,g=s.pending;if(g!==null){var _=g.next;g.next=h,c.next=_}s.pending=c}_s=null}return e}function Z1(e,n){do{var s=Kt;try{if(Ed(),pl.current=zl,Fl){for(var c=jt.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Fl=!1}if(Is=0,hn=tn=jt=null,oa=!1,ba=0,Pd.current=null,s===null||s.return===null){nn=1,Ia=n,Kt=null;break}e:{var g=e,_=s.return,A=s,b=n;if(n=pn,A.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var v=b,D=A,R=D.tag;if(!(D.mode&1)&&(R===0||R===11||R===15)){var H=D.alternate;H?(D.updateQueue=H.updateQueue,D.memoizedState=H.memoizedState,D.lanes=H.lanes):(D.updateQueue=null,D.memoizedState=null)}var X=rf(_);if(X!==null){X.flags&=-257,sf(X,_,A,g,n),X.mode&1&&nf(g,v,n),n=X,b=v;var te=n.updateQueue;if(te===null){var U=new Set;U.add(b),n.updateQueue=U}else te.add(b);break e}else{if(!(n&1)){nf(g,v,n),Ud();break e}b=Error(pe(426))}}else if(Dt&&A.mode&1){var xe=rf(_);if(xe!==null){!(xe.flags&65536)&&(xe.flags|=256),sf(xe,_,A,g,n),vd(xo(b,A));break e}}g=b=xo(b,A),nn!==4&&(nn=2),la===null?la=[g]:la.push(g),g=_;do{switch(g.tag){case 3:g.flags|=65536,n&=-n,g.lanes|=n;var k=N1(g,b,n);Kh(g,k);break e;case 1:A=b;var M=g.type,B=g.stateNode;if(!(g.flags&128)&&(typeof M.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Ji===null||!Ji.has(B)))){g.flags|=65536,n&=-n,g.lanes|=n;var Y=I1(g,A,n);Kh(g,Y);break e}}g=g.return}while(g!==null)}Y1(s)}catch(he){n=he,Kt===s&&s!==null&&(Kt=s=s.return);continue}break}while(!0)}function W1(){var e=Ul.current;return Ul.current=zl,e===null?zl:e}function Ud(){(nn===0||nn===3||nn===2)&&(nn=4),fn===null||!(Ts&268435455)&&!(ic&268435455)||Zi(fn,pn)}function Zl(e,n){var s=at;at|=2;var c=W1();(fn!==e||pn!==n)&&(ui=null,As(e,n));do try{Zm();break}catch(h){Z1(e,h)}while(!0);if(Ed(),at=s,Ul.current=c,Kt!==null)throw Error(pe(261));return fn=null,pn=0,nn}function Zm(){for(;Kt!==null;)G1(Kt)}function Wm(){for(;Kt!==null&&!mp();)G1(Kt)}function G1(e){var n=Q1(e.alternate,e,Jn);e.memoizedProps=e.pendingProps,n===null?Y1(e):Kt=n,Pd.current=null}function Y1(e){var n=e;do{var s=n.alternate;if(e=n.return,n.flags&32768){if(s=jm(s,n),s!==null){s.flags&=32767,Kt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nn=6,Kt=null;return}}else if(s=Bm(s,n,Jn),s!==null){Kt=s;return}if(n=n.sibling,n!==null){Kt=n;return}Kt=n=e}while(n!==null);nn===0&&(nn=5)}function ys(e,n,s){var c=xt,h=yr.transition;try{yr.transition=null,xt=1,Gm(e,n,s,c)}finally{yr.transition=h,xt=c}return null}function Gm(e,n,s,c){do co();while(Gi!==null);if(at&6)throw Error(pe(327));s=e.finishedWork;var h=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(pe(177));e.callbackNode=null,e.callbackPriority=0;var g=s.lanes|s.childLanes;if(Sp(e,g),e===fn&&(Kt=fn=null,pn=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ol||(ol=!0,K1(bl,function(){return co(),null})),g=(s.flags&15990)!==0,s.subtreeFlags&15990||g){g=yr.transition,yr.transition=null;var _=xt;xt=1;var A=at;at|=4,Pd.current=null,zm(e,s),U1(s,e),hm(bu),Nl=!!Au,bu=Au=null,e.current=s,Um(s),xp(),at=A,xt=_,yr.transition=g}else e.current=s;if(ol&&(ol=!1,Gi=e,Vl=h),g=e.pendingLanes,g===0&&(Ji=null),_p(s.stateNode),Wn(e,Vt()),n!==null)for(c=e.onRecoverableError,s=0;s<n.length;s++)h=n[s],c(h.value,{componentStack:h.stack,digest:h.digest});if(Hl)throw Hl=!1,e=Wu,Wu=null,e;return Vl&1&&e.tag!==0&&co(),g=e.pendingLanes,g&1?e===Gu?ca++:(ca=0,Gu=e):ca=0,os(),null}function co(){if(Gi!==null){var e=N0(Vl),n=yr.transition,s=xt;try{if(yr.transition=null,xt=16>e?16:e,Gi===null)var c=!1;else{if(e=Gi,Gi=null,Vl=0,at&6)throw Error(pe(331));var h=at;for(at|=4,be=e.current;be!==null;){var g=be,_=g.child;if(be.flags&16){var A=g.deletions;if(A!==null){for(var b=0;b<A.length;b++){var v=A[b];for(be=v;be!==null;){var D=be;switch(D.tag){case 0:case 11:case 15:aa(8,D,g)}var R=D.child;if(R!==null)R.return=D,be=R;else for(;be!==null;){D=be;var H=D.sibling,X=D.return;if(j1(D),D===v){be=null;break}if(H!==null){H.return=X,be=H;break}be=X}}}var te=g.alternate;if(te!==null){var U=te.child;if(U!==null){te.child=null;do{var xe=U.sibling;U.sibling=null,U=xe}while(U!==null)}}be=g}}if(g.subtreeFlags&2064&&_!==null)_.return=g,be=_;else e:for(;be!==null;){if(g=be,g.flags&2048)switch(g.tag){case 0:case 11:case 15:aa(9,g,g.return)}var k=g.sibling;if(k!==null){k.return=g.return,be=k;break e}be=g.return}}var M=e.current;for(be=M;be!==null;){_=be;var B=_.child;if(_.subtreeFlags&2064&&B!==null)B.return=_,be=B;else e:for(_=M;be!==null;){if(A=be,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:rc(9,A)}}catch(he){Ut(A,A.return,he)}if(A===_){be=null;break e}var Y=A.sibling;if(Y!==null){Y.return=A.return,be=Y;break e}be=A.return}}if(at=h,os(),$r&&typeof $r.onPostCommitFiberRoot=="function")try{$r.onPostCommitFiberRoot(Ql,e)}catch{}c=!0}return c}finally{xt=s,yr.transition=n}}return!1}function yf(e,n,s){n=xo(s,n),n=N1(e,n,1),e=qi(e,n,1),n=Dn(),e!==null&&(ka(e,1,n),Wn(e,n))}function Ut(e,n,s){if(e.tag===3)yf(e,e,s);else for(;n!==null;){if(n.tag===3){yf(n,e,s);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ji===null||!Ji.has(c))){e=xo(s,e),e=I1(n,e,1),n=qi(n,e,1),e=Dn(),n!==null&&(ka(n,1,e),Wn(n,e));break}}n=n.return}}function Ym(e,n,s){var c=e.pingCache;c!==null&&c.delete(n),n=Dn(),e.pingedLanes|=e.suspendedLanes&s,fn===e&&(pn&s)===s&&(nn===4||nn===3&&(pn&130023424)===pn&&500>Vt()-jd?As(e,0):Bd|=s),Wn(e,n)}function X1(e,n){n===0&&(e.mode&1?(n=Ka,Ka<<=1,!(Ka&130023424)&&(Ka=4194304)):n=1);var s=Dn();e=_i(e,n),e!==null&&(ka(e,n,s),Wn(e,s))}function Xm(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),X1(e,s)}function Qm(e,n){var s=0;switch(e.tag){case 13:var c=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:c=e.stateNode;break;default:throw Error(pe(314))}c!==null&&c.delete(n),X1(e,s)}var Q1;Q1=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||Vn.current)Hn=!0;else{if(!(e.lanes&s)&&!(n.flags&128))return Hn=!1,Pm(e,n,s);Hn=!!(e.flags&131072)}else Hn=!1,Dt&&n.flags&1048576&&$0(n,Dl,n.index);switch(n.lanes=0,n.tag){case 2:var c=n.type;xl(e,n),e=n.pendingProps;var h=fo(n,Sn.current);lo(n,s),h=Md(null,n,c,e,h,s);var g=Od();return n.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Zn(c)?(g=!0,Ol(n)):g=!1,n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Sd(n),h.updater=nc,n.stateNode=h,h._reactInternals=n,Du(n,c,e,s),n=Bu(null,n,c,!0,g,s)):(n.tag=0,Dt&&g&&wd(n),Ln(null,n,h,s),n=n.child),n;case 16:c=n.elementType;e:{switch(xl(e,n),e=n.pendingProps,h=c._init,c=h(c._payload),n.type=c,h=n.tag=qm(c),e=kr(c,e),h){case 0:n=Pu(null,n,c,e,s);break e;case 1:n=lf(null,n,c,e,s);break e;case 11:n=of(null,n,c,e,s);break e;case 14:n=af(null,n,c,kr(c.type,e),s);break e}throw Error(pe(306,c,""))}return n;case 0:return c=n.type,h=n.pendingProps,h=n.elementType===c?h:kr(c,h),Pu(e,n,c,h,s);case 1:return c=n.type,h=n.pendingProps,h=n.elementType===c?h:kr(c,h),lf(e,n,c,h,s);case 3:e:{if(O1(n),e===null)throw Error(pe(387));c=n.pendingProps,g=n.memoizedState,h=g.element,s1(e,n),Bl(n,c,null,s);var _=n.memoizedState;if(c=_.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){h=xo(Error(pe(423)),n),n=cf(e,n,c,s,h);break e}else if(c!==h){h=xo(Error(pe(424)),n),n=cf(e,n,c,s,h);break e}else for(er=Ki(n.stateNode.containerInfo.firstChild),tr=n,Dt=!0,Lr=null,s=r1(n,null,c,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(go(),c===h){n=vi(e,n,s);break e}Ln(e,n,c,s)}n=n.child}return n;case 5:return o1(n),e===null&&Mu(n),c=n.type,h=n.pendingProps,g=e!==null?e.memoizedProps:null,_=h.children,Su(c,h)?_=null:g!==null&&Su(c,g)&&(n.flags|=32),M1(e,n),Ln(e,n,_,s),n.child;case 6:return e===null&&Mu(n),null;case 13:return L1(e,n,s);case 4:return Nd(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=po(n,null,c,s):Ln(e,n,c,s),n.child;case 11:return c=n.type,h=n.pendingProps,h=n.elementType===c?h:kr(c,h),of(e,n,c,h,s);case 7:return Ln(e,n,n.pendingProps,s),n.child;case 8:return Ln(e,n,n.pendingProps.children,s),n.child;case 12:return Ln(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(c=n.type._context,h=n.pendingProps,g=n.memoizedProps,_=h.value,bt(Rl,c._currentValue),c._currentValue=_,g!==null)if(Pr(g.value,_)){if(g.children===h.children&&!Vn.current){n=vi(e,n,s);break e}}else for(g=n.child,g!==null&&(g.return=n);g!==null;){var A=g.dependencies;if(A!==null){_=g.child;for(var b=A.firstContext;b!==null;){if(b.context===c){if(g.tag===1){b=xi(-1,s&-s),b.tag=2;var v=g.updateQueue;if(v!==null){v=v.shared;var D=v.pending;D===null?b.next=b:(b.next=D.next,D.next=b),v.pending=b}}g.lanes|=s,b=g.alternate,b!==null&&(b.lanes|=s),Ou(g.return,s,n),A.lanes|=s;break}b=b.next}}else if(g.tag===10)_=g.type===n.type?null:g.child;else if(g.tag===18){if(_=g.return,_===null)throw Error(pe(341));_.lanes|=s,A=_.alternate,A!==null&&(A.lanes|=s),Ou(_,s,n),_=g.sibling}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===n){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}Ln(e,n,h.children,s),n=n.child}return n;case 9:return h=n.type,c=n.pendingProps.children,lo(n,s),h=wr(h),c=c(h),n.flags|=1,Ln(e,n,c,s),n.child;case 14:return c=n.type,h=kr(c,n.pendingProps),h=kr(c.type,h),af(e,n,c,h,s);case 15:return T1(e,n,n.type,n.pendingProps,s);case 17:return c=n.type,h=n.pendingProps,h=n.elementType===c?h:kr(c,h),xl(e,n),n.tag=1,Zn(c)?(e=!0,Ol(n)):e=!1,lo(n,s),S1(n,c,h),Du(n,c,h,s),Bu(null,n,c,!0,e,s);case 19:return D1(e,n,s);case 22:return k1(e,n,s)}throw Error(pe(156,n.tag))};function K1(e,n){return E0(e,n)}function Km(e,n,s,c){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(e,n,s,c){return new Km(e,n,s,c)}function Hd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qm(e){if(typeof e=="function")return Hd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ad)return 11;if(e===ld)return 14}return 2}function es(e,n){var s=e.alternate;return s===null?(s=xr(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function _l(e,n,s,c,h,g){var _=2;if(c=e,typeof e=="function")Hd(e)&&(_=1);else if(typeof e=="string")_=5;else e:switch(e){case Ws:return bs(s.children,h,g,n);case od:_=8,h|=8;break;case iu:return e=xr(12,s,n,h|2),e.elementType=iu,e.lanes=g,e;case su:return e=xr(13,s,n,h),e.elementType=su,e.lanes=g,e;case ou:return e=xr(19,s,n,h),e.elementType=ou,e.lanes=g,e;case o0:return sc(s,h,g,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case i0:_=10;break e;case s0:_=9;break e;case ad:_=11;break e;case ld:_=14;break e;case Ui:_=16,c=null;break e}throw Error(pe(130,e==null?e:typeof e,""))}return n=xr(_,s,n,h),n.elementType=e,n.type=c,n.lanes=g,n}function bs(e,n,s,c){return e=xr(7,e,c,n),e.lanes=s,e}function sc(e,n,s,c){return e=xr(22,e,c,n),e.elementType=o0,e.lanes=s,e.stateNode={isHidden:!1},e}function Qc(e,n,s){return e=xr(6,e,null,n),e.lanes=s,e}function Kc(e,n,s){return n=xr(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Jm(e,n,s,c,h){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kc(0),this.expirationTimes=kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kc(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Vd(e,n,s,c,h,g,_,A,b){return e=new Jm(e,n,s,A,b),n===1?(n=1,g===!0&&(n|=8)):n=0,g=xr(3,null,null,n),e.current=g,g.stateNode=e,g.memoizedState={element:c,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(g),e}function $m(e,n,s){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zs,key:c==null?null:""+c,children:e,containerInfo:n,implementation:s}}function q1(e){if(!e)return ns;e=e._reactInternals;e:{if(Os(e)!==e||e.tag!==1)throw Error(pe(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Zn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(pe(171))}if(e.tag===1){var s=e.type;if(Zn(s))return q0(e,s,n)}return n}function J1(e,n,s,c,h,g,_,A,b){return e=Vd(s,c,!0,e,h,g,_,A,b),e.context=q1(null),s=e.current,c=Dn(),h=$i(s),g=xi(c,h),g.callback=n??null,qi(s,g,h),e.current.lanes=h,ka(e,h,c),Wn(e,c),e}function oc(e,n,s,c){var h=n.current,g=Dn(),_=$i(h);return s=q1(s),n.context===null?n.context=s:n.pendingContext=s,n=xi(g,_),n.payload={element:e},c=c===void 0?null:c,c!==null&&(n.callback=c),e=qi(h,n,_),e!==null&&(Rr(e,h,_,g),gl(e,h,_)),_}function Wl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wf(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Zd(e,n){wf(e,n),(e=e.alternate)&&wf(e,n)}function ex(){return null}var $1=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wd(e){this._internalRoot=e}ac.prototype.render=Wd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(pe(409));oc(e,n,null,null)};ac.prototype.unmount=Wd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;ks(function(){oc(null,e,null,null)}),n[wi]=null}};function ac(e){this._internalRoot=e}ac.prototype.unstable_scheduleHydration=function(e){if(e){var n=k0();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Vi.length&&n!==0&&n<Vi[s].priority;s++);Vi.splice(s,0,e),s===0&&O0(e)}};function Gd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function lc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _f(){}function tx(e,n,s,c,h){if(h){if(typeof c=="function"){var g=c;c=function(){var v=Wl(_);g.call(v)}}var _=J1(n,c,e,0,null,!1,!1,"",_f);return e._reactRootContainer=_,e[wi]=_.current,_a(e.nodeType===8?e.parentNode:e),ks(),_}for(;h=e.lastChild;)e.removeChild(h);if(typeof c=="function"){var A=c;c=function(){var v=Wl(b);A.call(v)}}var b=Vd(e,0,!1,null,null,!1,!1,"",_f);return e._reactRootContainer=b,e[wi]=b.current,_a(e.nodeType===8?e.parentNode:e),ks(function(){oc(n,b,s,c)}),b}function cc(e,n,s,c,h){var g=s._reactRootContainer;if(g){var _=g;if(typeof h=="function"){var A=h;h=function(){var b=Wl(_);A.call(b)}}oc(n,_,e,h)}else _=tx(s,n,e,h,c);return Wl(_)}I0=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=$o(n.pendingLanes);s!==0&&(dd(n,s|1),Wn(n,Vt()),!(at&6)&&(yo=Vt()+500,os()))}break;case 13:ks(function(){var c=_i(e,1);if(c!==null){var h=Dn();Rr(c,e,1,h)}}),Zd(e,1)}};hd=function(e){if(e.tag===13){var n=_i(e,134217728);if(n!==null){var s=Dn();Rr(n,e,134217728,s)}Zd(e,134217728)}};T0=function(e){if(e.tag===13){var n=$i(e),s=_i(e,n);if(s!==null){var c=Dn();Rr(s,e,n,c)}Zd(e,n)}};k0=function(){return xt};M0=function(e,n){var s=xt;try{return xt=e,n()}finally{xt=s}};mu=function(e,n,s){switch(n){case"input":if(cu(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var c=s[n];if(c!==e&&c.form===e.form){var h=$l(c);if(!h)throw Error(pe(90));l0(c),cu(c,h)}}}break;case"textarea":u0(e,s);break;case"select":n=s.value,n!=null&&io(e,!!s.multiple,n,!1)}};x0=Fd;y0=ks;var nx={usingClientEntryPoint:!1,Events:[Oa,Qs,$l,p0,m0,Fd]},Xo={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rx={bundleType:Xo.bundleType,version:Xo.version,rendererPackageName:Xo.rendererPackageName,rendererConfig:Xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=v0(e),e===null?null:e.stateNode},findFiberByHostInstance:Xo.findFiberByHostInstance||ex,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{Ql=al.inject(rx),$r=al}catch{}}rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nx;rr.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gd(n))throw Error(pe(200));return $m(e,n,null,s)};rr.createRoot=function(e,n){if(!Gd(e))throw Error(pe(299));var s=!1,c="",h=$1;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),n=Vd(e,1,!1,null,null,s,!1,c,h),e[wi]=n.current,_a(e.nodeType===8?e.parentNode:e),new Wd(n)};rr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(pe(188)):(e=Object.keys(e).join(","),Error(pe(268,e)));return e=v0(n),e=e===null?null:e.stateNode,e};rr.flushSync=function(e){return ks(e)};rr.hydrate=function(e,n,s){if(!lc(n))throw Error(pe(200));return cc(null,e,n,!0,s)};rr.hydrateRoot=function(e,n,s){if(!Gd(e))throw Error(pe(405));var c=s!=null&&s.hydratedSources||null,h=!1,g="",_=$1;if(s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),n=J1(n,null,e,1,s??null,h,!1,g,_),e[wi]=n.current,_a(e),c)for(e=0;e<c.length;e++)s=c[e],h=s._getVersion,h=h(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,h]:n.mutableSourceEagerHydrationData.push(s,h);return new ac(n)};rr.render=function(e,n,s){if(!lc(n))throw Error(pe(200));return cc(null,e,n,!1,s)};rr.unmountComponentAtNode=function(e){if(!lc(e))throw Error(pe(40));return e._reactRootContainer?(ks(function(){cc(null,null,e,!1,function(){e._reactRootContainer=null,e[wi]=null})}),!0):!1};rr.unstable_batchedUpdates=Fd;rr.unstable_renderSubtreeIntoContainer=function(e,n,s,c){if(!lc(s))throw Error(pe(200));if(e==null||e._reactInternals===void 0)throw Error(pe(38));return cc(e,n,s,!1,c)};rr.version="18.3.1-next-f1338f8080-20240426";function eg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eg)}catch(e){console.error(e)}}eg(),e0.exports=rr;var tg=e0.exports,vf=tg;nu.createRoot=vf.createRoot,nu.hydrateRoot=vf.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ix={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),st=(e,n)=>{const s=re.forwardRef(({color:c="currentColor",size:h=24,strokeWidth:g=2,absoluteStrokeWidth:_,className:A="",children:b,...v},D)=>re.createElement("svg",{ref:D,...ix,width:h,height:h,stroke:c,strokeWidth:_?Number(g)*24/Number(h):g,className:["lucide",`lucide-${sx(e)}`,A].join(" "),...v},[...n.map(([R,H])=>re.createElement(R,H)),...Array.isArray(b)?b:[b]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=st("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=st("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=st("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=st("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=st("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=st("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=st("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=st("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=st("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=st("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=st("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=st("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=st("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=st("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=st("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=st("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=st("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=st("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=st("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=st("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=st("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=st("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=st("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=st("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=st("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=st("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=st("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=st("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=st("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=st("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=st("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=st("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=st("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=st("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function sg(e,n){const s=re.useRef(n);re.useEffect(function(){n!==s.current&&e.attributionControl!=null&&(s.current!=null&&e.attributionControl.removeAttribution(s.current),n!=null&&e.attributionControl.addAttribution(n)),s.current=n},[e,n])}const Ex=1;function Ax(e){return Object.freeze({__version:Ex,map:e})}function og(e,n){return Object.freeze({...e,...n})}const ag=re.createContext(null),lg=ag.Provider;function uc(){const e=re.useContext(ag);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function cg(e){function n(s,c){const{instance:h,context:g}=e(s).current;return re.useImperativeHandle(c,()=>h),s.children==null?null:vl.createElement(lg,{value:g},s.children)}return re.forwardRef(n)}function bx(e){function n(s,c){const[h,g]=re.useState(!1),{instance:_}=e(s,g).current;re.useImperativeHandle(c,()=>_),re.useEffect(function(){h&&_.update()},[_,h,s.children]);const A=_._contentNode;return A?tg.createPortal(s.children,A):null}return re.forwardRef(n)}function Sx(e){function n(s,c){const{instance:h}=e(s).current;return re.useImperativeHandle(c,()=>h),null}return re.forwardRef(n)}function Yd(e,n){const s=re.useRef();re.useEffect(function(){return n!=null&&e.instance.on(n),s.current=n,function(){s.current!=null&&e.instance.off(s.current),s.current=null}},[e,n])}function dc(e,n){const s=e.pane??n.pane;return s?{...e,pane:s}:e}function Nx(e,n){return function(c,h){const g=uc(),_=e(dc(c,g),g);return sg(g.map,c.attribution),Yd(_.current,c.eventHandlers),n(_.current,g,c,h),_}}var Qu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(s,c){c(n)})(Vs,function(s){var c="1.9.4";function h(i){var u,p,w,E;for(p=1,w=arguments.length;p<w;p++){E=arguments[p];for(u in E)i[u]=E[u]}return i}var g=Object.create||function(){function i(){}return function(u){return i.prototype=u,new i}}();function _(i,u){var p=Array.prototype.slice;if(i.bind)return i.bind.apply(i,p.call(arguments,1));var w=p.call(arguments,2);return function(){return i.apply(u,w.length?w.concat(p.call(arguments)):arguments)}}var A=0;function b(i){return"_leaflet_id"in i||(i._leaflet_id=++A),i._leaflet_id}function v(i,u,p){var w,E,T,j;return j=function(){w=!1,E&&(T.apply(p,E),E=!1)},T=function(){w?E=arguments:(i.apply(p,arguments),setTimeout(j,u),w=!0)},T}function D(i,u,p){var w=u[1],E=u[0],T=w-E;return i===w&&p?i:((i-E)%T+T)%T+E}function R(){return!1}function H(i,u){if(u===!1)return i;var p=Math.pow(10,u===void 0?6:u);return Math.round(i*p)/p}function X(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function te(i){return X(i).split(/\s+/)}function U(i,u){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?g(i.options):{});for(var p in u)i.options[p]=u[p];return i.options}function xe(i,u,p){var w=[];for(var E in i)w.push(encodeURIComponent(p?E.toUpperCase():E)+"="+encodeURIComponent(i[E]));return(!u||u.indexOf("?")===-1?"?":"&")+w.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function M(i,u){return i.replace(k,function(p,w){var E=u[w];if(E===void 0)throw new Error("No value provided for variable "+p);return typeof E=="function"&&(E=E(u)),E})}var B=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Y(i,u){for(var p=0;p<i.length;p++)if(i[p]===u)return p;return-1}var he="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function oe(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var V=0;function ne(i){var u=+new Date,p=Math.max(0,16-(u-V));return V=u+p,window.setTimeout(i,p)}var Q=window.requestAnimationFrame||oe("RequestAnimationFrame")||ne,Se=window.cancelAnimationFrame||oe("CancelAnimationFrame")||oe("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function Me(i,u,p){if(p&&Q===ne)i.call(u);else return Q.call(window,_(i,u))}function ye(i){i&&Se.call(window,i)}var Te={__proto__:null,extend:h,create:g,bind:_,get lastId(){return A},stamp:b,throttle:v,wrapNum:D,falseFn:R,formatNum:H,trim:X,splitWords:te,setOptions:U,getParamString:xe,template:M,isArray:B,indexOf:Y,emptyImageUrl:he,requestFn:Q,cancelFn:Se,requestAnimFrame:Me,cancelAnimFrame:ye};function Xe(){}Xe.extend=function(i){var u=function(){U(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=u.__super__=this.prototype,w=g(p);w.constructor=u,u.prototype=w;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(u[E]=this[E]);return i.statics&&h(u,i.statics),i.includes&&(K(i.includes),h.apply(null,[w].concat(i.includes))),h(w,i),delete w.statics,delete w.includes,w.options&&(w.options=p.options?g(p.options):{},h(w.options,i.options)),w._initHooks=[],w.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,j=w._initHooks.length;T<j;T++)w._initHooks[T].call(this)}},u},Xe.include=function(i){var u=this.prototype.options;return h(this.prototype,i),i.options&&(this.prototype.options=u,this.mergeOptions(i.options)),this},Xe.mergeOptions=function(i){return h(this.prototype.options,i),this},Xe.addInitHook=function(i){var u=Array.prototype.slice.call(arguments,1),p=typeof i=="function"?i:function(){this[i].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function K(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=B(i)?i:[i];for(var u=0;u<i.length;u++)i[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Be={on:function(i,u,p){if(typeof i=="object")for(var w in i)this._on(w,i[w],u);else{i=te(i);for(var E=0,T=i.length;E<T;E++)this._on(i[E],u,p)}return this},off:function(i,u,p){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var w in i)this._off(w,i[w],u);else{i=te(i);for(var E=arguments.length===1,T=0,j=i.length;T<j;T++)E?this._off(i[T]):this._off(i[T],u,p)}return this},_on:function(i,u,p,w){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(i,u,p)===!1){p===this&&(p=void 0);var E={fn:u,ctx:p};w&&(E.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(E)}},_off:function(i,u,p){var w,E,T;if(this._events&&(w=this._events[i],!!w)){if(arguments.length===1){if(this._firingCount)for(E=0,T=w.length;E<T;E++)w[E].fn=R;delete this._events[i];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var j=this._listens(i,u,p);if(j!==!1){var G=w[j];this._firingCount&&(G.fn=R,this._events[i]=w=w.slice()),w.splice(j,1)}}},fire:function(i,u,p){if(!this.listens(i,p))return this;var w=h({},u,{type:i,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var E=this._events[i];if(E){this._firingCount=this._firingCount+1||1;for(var T=0,j=E.length;T<j;T++){var G=E[T],$=G.fn;G.once&&this.off(i,$,G.ctx),$.call(G.ctx||this,w)}this._firingCount--}}return p&&this._propagateEvent(w),this},listens:function(i,u,p,w){typeof i!="string"&&console.warn('"string" type argument expected');var E=u;typeof u!="function"&&(w=!!u,E=void 0,p=void 0);var T=this._events&&this._events[i];if(T&&T.length&&this._listens(i,E,p)!==!1)return!0;if(w){for(var j in this._eventParents)if(this._eventParents[j].listens(i,u,p,w))return!0}return!1},_listens:function(i,u,p){if(!this._events)return!1;var w=this._events[i]||[];if(!u)return!!w.length;p===this&&(p=void 0);for(var E=0,T=w.length;E<T;E++)if(w[E].fn===u&&w[E].ctx===p)return E;return!1},once:function(i,u,p){if(typeof i=="object")for(var w in i)this._on(w,i[w],u,!0);else{i=te(i);for(var E=0,T=i.length;E<T;E++)this._on(i[E],u,p,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[b(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[b(i)],this},_propagateEvent:function(i){for(var u in this._eventParents)this._eventParents[u].fire(i.type,h({layer:i.target,propagatedFrom:i.target},i),!0)}};Be.addEventListener=Be.on,Be.removeEventListener=Be.clearAllEventListeners=Be.off,Be.addOneTimeEventListener=Be.once,Be.fireEvent=Be.fire,Be.hasEventListeners=Be.listens;var Re=Xe.extend(Be);function ee(i,u,p){this.x=p?Math.round(i):i,this.y=p?Math.round(u):u}var Oe=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(i){return this.clone()._add(ue(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(ue(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new ee(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new ee(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Oe(this.x),this.y=Oe(this.y),this},distanceTo:function(i){i=ue(i);var u=i.x-this.x,p=i.y-this.y;return Math.sqrt(u*u+p*p)},equals:function(i){return i=ue(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=ue(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+H(this.x)+", "+H(this.y)+")"}};function ue(i,u,p){return i instanceof ee?i:B(i)?new ee(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new ee(i.x,i.y):new ee(i,u,p)}function Le(i,u){if(i)for(var p=u?[i,u]:i,w=0,E=p.length;w<E;w++)this.extend(p[w])}Le.prototype={extend:function(i){var u,p;if(!i)return this;if(i instanceof ee||typeof i[0]=="number"||"x"in i)u=p=ue(i);else if(i=Pe(i),u=i.min,p=i.max,!u||!p)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=p.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(i){return ue((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return ue(this.min.x,this.max.y)},getTopRight:function(){return ue(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var u,p;return typeof i[0]=="number"||i instanceof ee?i=ue(i):i=Pe(i),i instanceof Le?(u=i.min,p=i.max):u=p=i,u.x>=this.min.x&&p.x<=this.max.x&&u.y>=this.min.y&&p.y<=this.max.y},intersects:function(i){i=Pe(i);var u=this.min,p=this.max,w=i.min,E=i.max,T=E.x>=u.x&&w.x<=p.x,j=E.y>=u.y&&w.y<=p.y;return T&&j},overlaps:function(i){i=Pe(i);var u=this.min,p=this.max,w=i.min,E=i.max,T=E.x>u.x&&w.x<p.x,j=E.y>u.y&&w.y<p.y;return T&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var u=this.min,p=this.max,w=Math.abs(u.x-p.x)*i,E=Math.abs(u.y-p.y)*i;return Pe(ue(u.x-w,u.y-E),ue(p.x+w,p.y+E))},equals:function(i){return i?(i=Pe(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function Pe(i,u){return!i||i instanceof Le?i:new Le(i,u)}function ft(i,u){if(i)for(var p=u?[i,u]:i,w=0,E=p.length;w<E;w++)this.extend(p[w])}ft.prototype={extend:function(i){var u=this._southWest,p=this._northEast,w,E;if(i instanceof Qe)w=i,E=i;else if(i instanceof ft){if(w=i._southWest,E=i._northEast,!w||!E)return this}else return i?this.extend(ce(i)||ze(i)):this;return!u&&!p?(this._southWest=new Qe(w.lat,w.lng),this._northEast=new Qe(E.lat,E.lng)):(u.lat=Math.min(w.lat,u.lat),u.lng=Math.min(w.lng,u.lng),p.lat=Math.max(E.lat,p.lat),p.lng=Math.max(E.lng,p.lng)),this},pad:function(i){var u=this._southWest,p=this._northEast,w=Math.abs(u.lat-p.lat)*i,E=Math.abs(u.lng-p.lng)*i;return new ft(new Qe(u.lat-w,u.lng-E),new Qe(p.lat+w,p.lng+E))},getCenter:function(){return new Qe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Qe(this.getNorth(),this.getWest())},getSouthEast:function(){return new Qe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Qe||"lat"in i?i=ce(i):i=ze(i);var u=this._southWest,p=this._northEast,w,E;return i instanceof ft?(w=i.getSouthWest(),E=i.getNorthEast()):w=E=i,w.lat>=u.lat&&E.lat<=p.lat&&w.lng>=u.lng&&E.lng<=p.lng},intersects:function(i){i=ze(i);var u=this._southWest,p=this._northEast,w=i.getSouthWest(),E=i.getNorthEast(),T=E.lat>=u.lat&&w.lat<=p.lat,j=E.lng>=u.lng&&w.lng<=p.lng;return T&&j},overlaps:function(i){i=ze(i);var u=this._southWest,p=this._northEast,w=i.getSouthWest(),E=i.getNorthEast(),T=E.lat>u.lat&&w.lat<p.lat,j=E.lng>u.lng&&w.lng<p.lng;return T&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,u){return i?(i=ze(i),this._southWest.equals(i.getSouthWest(),u)&&this._northEast.equals(i.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ze(i,u){return i instanceof ft?i:new ft(i,u)}function Qe(i,u,p){if(isNaN(i)||isNaN(u))throw new Error("Invalid LatLng object: ("+i+", "+u+")");this.lat=+i,this.lng=+u,p!==void 0&&(this.alt=+p)}Qe.prototype={equals:function(i,u){if(!i)return!1;i=ce(i);var p=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return p<=(u===void 0?1e-9:u)},toString:function(i){return"LatLng("+H(this.lat,i)+", "+H(this.lng,i)+")"},distanceTo:function(i){return gt.distance(this,ce(i))},wrap:function(){return gt.wrapLatLng(this)},toBounds:function(i){var u=180*i/40075017,p=u/Math.cos(Math.PI/180*this.lat);return ze([this.lat-u,this.lng-p],[this.lat+u,this.lng+p])},clone:function(){return new Qe(this.lat,this.lng,this.alt)}};function ce(i,u,p){return i instanceof Qe?i:B(i)&&typeof i[0]!="object"?i.length===3?new Qe(i[0],i[1],i[2]):i.length===2?new Qe(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Qe(i.lat,"lng"in i?i.lng:i.lon,i.alt):u===void 0?null:new Qe(i,u,p)}var Zt={latLngToPoint:function(i,u){var p=this.projection.project(i),w=this.scale(u);return this.transformation._transform(p,w)},pointToLatLng:function(i,u){var p=this.scale(u),w=this.transformation.untransform(i,p);return this.projection.unproject(w)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var u=this.projection.bounds,p=this.scale(i),w=this.transformation.transform(u.min,p),E=this.transformation.transform(u.max,p);return new Le(w,E)},infinite:!1,wrapLatLng:function(i){var u=this.wrapLng?D(i.lng,this.wrapLng,!0):i.lng,p=this.wrapLat?D(i.lat,this.wrapLat,!0):i.lat,w=i.alt;return new Qe(p,u,w)},wrapLatLngBounds:function(i){var u=i.getCenter(),p=this.wrapLatLng(u),w=u.lat-p.lat,E=u.lng-p.lng;if(w===0&&E===0)return i;var T=i.getSouthWest(),j=i.getNorthEast(),G=new Qe(T.lat-w,T.lng-E),$=new Qe(j.lat-w,j.lng-E);return new ft(G,$)}},gt=h({},Zt,{wrapLng:[-180,180],R:6371e3,distance:function(i,u){var p=Math.PI/180,w=i.lat*p,E=u.lat*p,T=Math.sin((u.lat-i.lat)*p/2),j=Math.sin((u.lng-i.lng)*p/2),G=T*T+Math.cos(w)*Math.cos(E)*j*j,$=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*$}}),Br=6378137,vr={R:Br,MAX_LATITUDE:85.0511287798,project:function(i){var u=Math.PI/180,p=this.MAX_LATITUDE,w=Math.max(Math.min(p,i.lat),-p),E=Math.sin(w*u);return new ee(this.R*i.lng*u,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(i){var u=180/Math.PI;return new Qe((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*u,i.x*u/this.R)},bounds:function(){var i=Br*Math.PI;return new Le([-i,-i],[i,i])}()};function Wt(i,u,p,w){if(B(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=u,this._c=p,this._d=w}Wt.prototype={transform:function(i,u){return this._transform(i.clone(),u)},_transform:function(i,u){return u=u||1,i.x=u*(this._a*i.x+this._b),i.y=u*(this._c*i.y+this._d),i},untransform:function(i,u){return u=u||1,new ee((i.x/u-this._b)/this._a,(i.y/u-this._d)/this._c)}};function sr(i,u,p,w){return new Wt(i,u,p,w)}var Je=h({},gt,{code:"EPSG:3857",projection:vr,transformation:function(){var i=.5/(Math.PI*vr.R);return sr(i,.5,-i,.5)}()}),jr=h({},Je,{code:"EPSG:900913"});function xn(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Cr(i,u){var p="",w,E,T,j,G,$;for(w=0,T=i.length;w<T;w++){for(G=i[w],E=0,j=G.length;E<j;E++)$=G[E],p+=(E?"L":"M")+$.x+" "+$.y;p+=u?Ne.svg?"z":"x":""}return p||"M0 0"}var Ot=document.documentElement.style,rt="ActiveXObject"in window,Ke=rt&&!document.addEventListener,Fr="msLaunchUri"in navigator&&!("documentMode"in document),Ee=Nt("webkit"),zr=Nt("android"),Ei=Nt("android 2")||Nt("android 3"),Bn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ai=zr&&Nt("Google")&&Bn<537&&!("AudioNode"in window),rn=!!window.opera,bi=!Fr&&Nt("chrome"),jn=Nt("gecko")&&!Ee&&!rn&&!rt,Gt=!bi&&Nt("safari"),Si=Nt("phantom"),Ur="OTransition"in Ot,Ls=navigator.platform.indexOf("Win")===0,vt=rt&&"transition"in Ot,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ei,St="MozPerspective"in Ot,lt=!window.L_DISABLE_3D&&(vt||me||St)&&!Ur&&!Si,ut=typeof orientation<"u"||Nt("mobile"),Hr=ut&&Ee,Ni=ut&&me,le=!window.PointerEvent&&window.MSPointerEvent,fe=!!(window.PointerEvent||le),We="ontouchstart"in window||!!window.TouchEvent,yn=!window.L_NO_TOUCH&&(We||fe),Da=ut&&rn,Gn=ut&&jn,Ao=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,sn=function(){var i=!1;try{var u=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",R,u),window.removeEventListener("testPassiveEventSupport",R,u)}catch{}return i}(),Ii=function(){return!!document.createElement("canvas").getContext}(),Ti=!!(document.createElementNS&&xn("svg").createSVGRect),or=!!Ti&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),gc=!Ti&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var u=i.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),ti=navigator.platform.indexOf("Mac")===0,bo=navigator.platform.indexOf("Linux")===0;function Nt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Ne={ie:rt,ielt9:Ke,edge:Fr,webkit:Ee,android:zr,android23:Ei,androidStock:Ai,opera:rn,chrome:bi,gecko:jn,safari:Gt,phantom:Si,opera12:Ur,win:Ls,ie3d:vt,webkit3d:me,gecko3d:St,any3d:lt,mobile:ut,mobileWebkit:Hr,mobileWebkit3d:Ni,msPointer:le,pointer:fe,touch:yn,touchNative:We,mobileOpera:Da,mobileGecko:Gn,retina:Ao,passiveEvents:sn,canvas:Ii,svg:Ti,vml:gc,inlineSvg:or,mac:ti,linux:bo},Nn=Ne.msPointer?"MSPointerDown":"pointerdown",ve=Ne.msPointer?"MSPointerMove":"pointermove",ni=Ne.msPointer?"MSPointerUp":"pointerup",Ds=Ne.msPointer?"MSPointerCancel":"pointercancel",on={touchstart:Nn,touchmove:ve,touchend:ni,touchcancel:Ds},ri={touchstart:Vr,touchmove:ls,touchend:ls,touchcancel:ls},Er={},as=!1;function ar(i,u,p){return u==="touchstart"&&Ct(),ri[u]?(p=ri[u].bind(this,p),i.addEventListener(on[u],p,!1),p):(console.warn("wrong event specified:",u),R)}function pc(i,u,p){if(!on[u]){console.warn("wrong event specified:",u);return}i.removeEventListener(on[u],p,!1)}function mc(i){Er[i.pointerId]=i}function lr(i){Er[i.pointerId]&&(Er[i.pointerId]=i)}function an(i){delete Er[i.pointerId]}function Ct(){as||(document.addEventListener(Nn,mc,!0),document.addEventListener(ve,lr,!0),document.addEventListener(ni,an,!0),document.addEventListener(Ds,an,!0),as=!0)}function ls(i,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var p in Er)u.touches.push(Er[p]);u.changedTouches=[u],i(u)}}function Vr(i,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Jt(u),ls(i,u)}function So(i){var u={},p,w;for(w in i)p=i[w],u[w]=p&&p.bind?p.bind(i):p;return i=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var ie=200;function xc(i,u){i.addEventListener("dblclick",u);var p=0,w;function E(T){if(T.detail!==1){w=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var j=Mi(T);if(!(j.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!j.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var G=Date.now();G-p<=ie?(w++,w===2&&u(So(T))):w=1,p=G}}}return i.addEventListener("click",E),{dblclick:u,simDblclick:E}}function Lt(i,u){i.removeEventListener("dblclick",u.dblclick),i.removeEventListener("click",u.simDblclick)}var Zr=W(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),cs=W(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ot=cs==="webkitTransition"||cs==="OTransition"?cs+"End":"transitionend";function it(i){return typeof i=="string"?document.getElementById(i):i}function Ze(i,u){var p=i.style[u]||i.currentStyle&&i.currentStyle[u];if((!p||p==="auto")&&document.defaultView){var w=document.defaultView.getComputedStyle(i,null);p=w?w[u]:null}return p==="auto"?null:p}function tt(i,u,p){var w=document.createElement(i);return w.className=u||"",p&&p.appendChild(w),w}function wt(i){var u=i.parentNode;u&&u.removeChild(i)}function ki(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Et(i){var u=i.parentNode;u&&u.lastChild!==i&&u.appendChild(i)}function In(i){var u=i.parentNode;u&&u.firstChild!==i&&u.insertBefore(i,u.firstChild)}function No(i,u){if(i.classList!==void 0)return i.classList.contains(u);var p=Ar(i);return p.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(p)}function Ie(i,u){if(i.classList!==void 0)for(var p=te(u),w=0,E=p.length;w<E;w++)i.classList.add(p[w]);else if(!No(i,u)){var T=Ar(i);Io(i,(T?T+" ":"")+u)}}function dt(i,u){i.classList!==void 0?i.classList.remove(u):Io(i,X((" "+Ar(i)+" ").replace(" "+u+" "," ")))}function Io(i,u){i.className.baseVal===void 0?i.className=u:i.className.baseVal=u}function Ar(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Ge(i,u){"opacity"in i.style?i.style.opacity=u:"filter"in i.style&&ln(i,u)}function ln(i,u){var p=!1,w="DXImageTransform.Microsoft.Alpha";try{p=i.filters.item(w)}catch{if(u===1)return}u=Math.round(u*100),p?(p.Enabled=u!==100,p.Opacity=u):i.style.filter+=" progid:"+w+"(opacity="+u+")"}function W(i){for(var u=document.documentElement.style,p=0;p<i.length;p++)if(i[p]in u)return i[p];return!1}function O(i,u,p){var w=u||new ee(0,0);i.style[Zr]=(Ne.ie3d?"translate("+w.x+"px,"+w.y+"px)":"translate3d("+w.x+"px,"+w.y+"px,0)")+(p?" scale("+p+")":"")}function we(i,u){i._leaflet_pos=u,Ne.any3d?O(i,u):(i.style.left=u.x+"px",i.style.top=u.y+"px")}function At(i){return i._leaflet_pos||new ee(0,0)}var cn,us,ds;if("onselectstart"in document)cn=function(){Fe(window,"selectstart",Jt)},us=function(){_e(window,"selectstart",Jt)};else{var un=W(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);cn=function(){if(un){var i=document.documentElement.style;ds=i[un],i[un]="none"}},us=function(){un&&(document.documentElement.style[un]=ds,ds=void 0)}}function ke(){Fe(window,"dragstart",Jt)}function _t(){_e(window,"dragstart",Jt)}var hs,To;function fs(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(ii(),hs=i,To=i.style.outlineStyle,i.style.outlineStyle="none",Fe(window,"keydown",ii))}function ii(){hs&&(hs.style.outlineStyle=To,hs=void 0,To=void 0,_e(window,"keydown",ii))}function Rs(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function ko(i){var u=i.getBoundingClientRect();return{x:u.width/i.offsetWidth||1,y:u.height/i.offsetHeight||1,boundingClientRect:u}}var Yt={__proto__:null,TRANSFORM:Zr,TRANSITION:cs,TRANSITION_END:ot,get:it,getStyle:Ze,create:tt,remove:wt,empty:ki,toFront:Et,toBack:In,hasClass:No,addClass:Ie,removeClass:dt,setClass:Io,getClass:Ar,setOpacity:Ge,testProp:W,setTransform:O,setPosition:we,getPosition:At,get disableTextSelection(){return cn},get enableTextSelection(){return us},disableImageDrag:ke,enableImageDrag:_t,preventOutline:fs,restoreOutline:ii,getSizedParentNode:Rs,getScale:ko};function Fe(i,u,p,w){if(u&&typeof u=="object")for(var E in u)Ht(i,E,u[E],p);else{u=te(u);for(var T=0,j=u.length;T<j;T++)Ht(i,u[T],p,w)}return this}var qt="_leaflet_events";function _e(i,u,p,w){if(arguments.length===1)Ra(i),delete i[qt];else if(u&&typeof u=="object")for(var E in u)Mo(i,E,u[E],p);else if(u=te(u),arguments.length===2)Ra(i,function(G){return Y(u,G)!==-1});else for(var T=0,j=u.length;T<j;T++)Mo(i,u[T],p,w);return this}function Ra(i,u){for(var p in i[qt]){var w=p.split(/\d/)[0];(!u||u(w))&&Mo(i,w,null,null,p)}}var Ue={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ht(i,u,p,w){var E=u+b(p)+(w?"_"+b(w):"");if(i[qt]&&i[qt][E])return this;var T=function(G){return p.call(w||i,G||window.event)},j=T;!Ne.touchNative&&Ne.pointer&&u.indexOf("touch")===0?T=ar(i,u,T):Ne.touch&&u==="dblclick"?T=xc(i,T):"addEventListener"in i?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?i.addEventListener(Ue[u]||u,T,Ne.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(T=function(G){G=G||window.event,si(i,G)&&j(G)},i.addEventListener(Ue[u],T,!1)):i.addEventListener(u,j,!1):i.attachEvent("on"+u,T),i[qt]=i[qt]||{},i[qt][E]=T}function Mo(i,u,p,w,E){E=E||u+b(p)+(w?"_"+b(w):"");var T=i[qt]&&i[qt][E];if(!T)return this;!Ne.touchNative&&Ne.pointer&&u.indexOf("touch")===0?pc(i,u,T):Ne.touch&&u==="dblclick"?Lt(i,T):"removeEventListener"in i?i.removeEventListener(Ue[u]||u,T,!1):i.detachEvent("on"+u,T),i[qt][E]=null}function br(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Ps(i){return Ht(i,"wheel",br),this}function Yn(i){return Fe(i,"mousedown touchstart dblclick contextmenu",br),i._leaflet_disable_click=!0,this}function Jt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Xn(i){return Jt(i),br(i),this}function Mi(i){if(i.composedPath)return i.composedPath();for(var u=[],p=i.target;p;)u.push(p),p=p.parentNode;return u}function Oi(i,u){if(!u)return new ee(i.clientX,i.clientY);var p=ko(u),w=p.boundingClientRect;return new ee((i.clientX-w.left)/p.x-u.clientLeft,(i.clientY-w.top)/p.y-u.clientTop)}var Pa=Ne.linux&&Ne.chrome?window.devicePixelRatio:Ne.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Li(i){return Ne.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Pa:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function si(i,u){var p=u.relatedTarget;if(!p)return!0;try{for(;p&&p!==i;)p=p.parentNode}catch{return!1}return p!==i}var wn={__proto__:null,on:Fe,off:_e,stopPropagation:br,disableScrollPropagation:Ps,disableClickPropagation:Yn,preventDefault:Jt,stop:Xn,getPropagationPath:Mi,getMousePosition:Oi,getWheelDelta:Li,isExternalTarget:si,addListener:Fe,removeListener:_e},Oo=Re.extend({run:function(i,u,p,w){this.stop(),this._el=i,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(w||.5,.2),this._startPos=At(i),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Me(this._animate,this),this._step()},_step:function(i){var u=+new Date-this._startTime,p=this._duration*1e3;u<p?this._runFrame(this._easeOut(u/p),i):(this._runFrame(1),this._complete())},_runFrame:function(i,u){var p=this._startPos.add(this._offset.multiplyBy(i));u&&p._round(),we(this._el,p),this.fire("step")},_complete:function(){ye(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),$e=Re.extend({options:{crs:Je,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,u){u=U(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=_(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(ce(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=cs&&Ne.any3d&&!Ne.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Fe(this._proxy,ot,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,u,p){if(u=u===void 0?this._zoom:this._limitZoom(u),i=this._limitCenter(ce(i),u,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=h({animate:p.animate},p.zoom),p.pan=h({animate:p.animate,duration:p.duration},p.pan));var w=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,u,p.zoom):this._tryAnimatedPan(i,p.pan);if(w)return clearTimeout(this._sizeTimer),this}return this._resetView(i,u,p.pan&&p.pan.noMoveStart),this},setZoom:function(i,u){return this._loaded?this.setView(this.getCenter(),i,{zoom:u}):(this._zoom=i,this)},zoomIn:function(i,u){return i=i||(Ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,u)},zoomOut:function(i,u){return i=i||(Ne.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,u)},setZoomAround:function(i,u,p){var w=this.getZoomScale(u),E=this.getSize().divideBy(2),T=i instanceof ee?i:this.latLngToContainerPoint(i),j=T.subtract(E).multiplyBy(1-1/w),G=this.containerPointToLatLng(E.add(j));return this.setView(G,u,{zoom:p})},_getBoundsCenterZoom:function(i,u){u=u||{},i=i.getBounds?i.getBounds():ze(i);var p=ue(u.paddingTopLeft||u.padding||[0,0]),w=ue(u.paddingBottomRight||u.padding||[0,0]),E=this.getBoundsZoom(i,!1,p.add(w));if(E=typeof u.maxZoom=="number"?Math.min(u.maxZoom,E):E,E===1/0)return{center:i.getCenter(),zoom:E};var T=w.subtract(p).divideBy(2),j=this.project(i.getSouthWest(),E),G=this.project(i.getNorthEast(),E),$=this.unproject(j.add(G).divideBy(2).add(T),E);return{center:$,zoom:E}},fitBounds:function(i,u){if(i=ze(i),!i.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(i,u);return this.setView(p.center,p.zoom,u)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,u){return this.setView(i,this._zoom,{pan:u})},panBy:function(i,u){if(i=ue(i).round(),u=u||{},!i.x&&!i.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Oo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Ie(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,p,u.duration||.25,u.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,u,p){if(p=p||{},p.animate===!1||!Ne.any3d)return this.setView(i,u,p);this._stop();var w=this.project(this.getCenter()),E=this.project(i),T=this.getSize(),j=this._zoom;i=ce(i),u=u===void 0?j:u;var G=Math.max(T.x,T.y),$=G*this.getZoomScale(j,u),se=E.distanceTo(w)||1,Ce=1.42,je=Ce*Ce;function qe(Qt){var Za=Qt?-1:1,Tg=Qt?$:G,kg=$*$-G*G+Za*je*je*se*se,Mg=2*Tg*je*se,Ac=kg/Mg,dh=Math.sqrt(Ac*Ac+1)-Ac,Og=dh<1e-9?-18:Math.log(dh);return Og}function On(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function dn(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}function gr(Qt){return On(Qt)/dn(Qt)}var zn=qe(0);function Us(Qt){return G*(dn(zn)/dn(zn+Ce*Qt))}function bg(Qt){return G*(dn(zn)*gr(zn+Ce*Qt)-On(zn))/je}function Sg(Qt){return 1-Math.pow(1-Qt,1.5)}var Ng=Date.now(),ch=(qe(1)-zn)/Ce,Ig=p.duration?1e3*p.duration:1e3*ch*.8;function uh(){var Qt=(Date.now()-Ng)/Ig,Za=Sg(Qt)*ch;Qt<=1?(this._flyToFrame=Me(uh,this),this._move(this.unproject(w.add(E.subtract(w).multiplyBy(bg(Za)/se)),j),this.getScaleZoom(G/Us(Za),j),{flyTo:!0})):this._move(i,u)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),uh.call(this),this},flyToBounds:function(i,u){var p=this._getBoundsCenterZoom(i,u);return this.flyTo(p.center,p.zoom,u)},setMaxBounds:function(i){return i=ze(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var u=this.options.minZoom;return this.options.minZoom=i,this._loaded&&u!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var u=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&u!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,u){this._enforcingBounds=!0;var p=this.getCenter(),w=this._limitCenter(p,this._zoom,ze(i));return p.equals(w)||this.panTo(w,u),this._enforcingBounds=!1,this},panInside:function(i,u){u=u||{};var p=ue(u.paddingTopLeft||u.padding||[0,0]),w=ue(u.paddingBottomRight||u.padding||[0,0]),E=this.project(this.getCenter()),T=this.project(i),j=this.getPixelBounds(),G=Pe([j.min.add(p),j.max.subtract(w)]),$=G.getSize();if(!G.contains(T)){this._enforcingBounds=!0;var se=T.subtract(G.getCenter()),Ce=G.extend(T).getSize().subtract($);E.x+=se.x<0?-Ce.x:Ce.x,E.y+=se.y<0?-Ce.y:Ce.y,this.panTo(this.unproject(E),u),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=h({animate:!1,pan:!0},i===!0?{animate:!0}:i);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),w=u.divideBy(2).round(),E=p.divideBy(2).round(),T=w.subtract(E);return!T.x&&!T.y?this:(i.animate&&i.pan?this.panBy(T):(i.pan&&this._rawPanBy(T),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(_(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=h({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=_(this._handleGeolocationResponse,this),p=_(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,p,i):navigator.geolocation.getCurrentPosition(u,p,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var u=i.code,p=i.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var u=i.coords.latitude,p=i.coords.longitude,w=new Qe(u,p),E=w.toBounds(i.coords.accuracy*2),T=this._locateOptions;if(T.setView){var j=this.getBoundsZoom(E);this.setView(w,T.maxZoom?Math.min(j,T.maxZoom):j)}var G={latlng:w,bounds:E,timestamp:i.timestamp};for(var $ in i.coords)typeof i.coords[$]=="number"&&(G[$]=i.coords[$]);this.fire("locationfound",G)}},addHandler:function(i,u){if(!u)return this;var p=this[i]=new u(this);return this._handlers.push(p),this.options[i]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ye(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)wt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,u){var p="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),w=tt("div",p,u||this._mapPane);return i&&(this._panes[i]=w),w},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),u=this.unproject(i.getBottomLeft()),p=this.unproject(i.getTopRight());return new ft(u,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,u,p){i=ze(i),p=ue(p||[0,0]);var w=this.getZoom()||0,E=this.getMinZoom(),T=this.getMaxZoom(),j=i.getNorthWest(),G=i.getSouthEast(),$=this.getSize().subtract(p),se=Pe(this.project(G,w),this.project(j,w)).getSize(),Ce=Ne.any3d?this.options.zoomSnap:1,je=$.x/se.x,qe=$.y/se.y,On=u?Math.max(je,qe):Math.min(je,qe);return w=this.getScaleZoom(On,w),Ce&&(w=Math.round(w/(Ce/100))*(Ce/100),w=u?Math.ceil(w/Ce)*Ce:Math.floor(w/Ce)*Ce),Math.max(E,Math.min(T,w))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,u){var p=this._getTopLeftPoint(i,u);return new Le(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,u){var p=this.options.crs;return u=u===void 0?this._zoom:u,p.scale(i)/p.scale(u)},getScaleZoom:function(i,u){var p=this.options.crs;u=u===void 0?this._zoom:u;var w=p.zoom(i*p.scale(u));return isNaN(w)?1/0:w},project:function(i,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(ce(i),u)},unproject:function(i,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(ue(i),u)},layerPointToLatLng:function(i){var u=ue(i).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(i){var u=this.project(ce(i))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ce(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ze(i))},distance:function(i,u){return this.options.crs.distance(ce(i),ce(u))},containerPointToLayerPoint:function(i){return ue(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return ue(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var u=this.containerPointToLayerPoint(ue(i));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(i)))},mouseEventToContainerPoint:function(i){return Oi(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var u=this._container=it(i);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Fe(u,"scroll",this._onScroll,this),this._containerId=b(u)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ne.any3d,Ie(i,"leaflet-container"+(Ne.touch?" leaflet-touch":"")+(Ne.retina?" leaflet-retina":"")+(Ne.ielt9?" leaflet-oldie":"")+(Ne.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Ze(i,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),we(this._mapPane,new ee(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ie(i.markerPane,"leaflet-zoom-hide"),Ie(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,u,p){we(this._mapPane,new ee(0,0));var w=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var E=this._zoom!==u;this._moveStart(E,p)._move(i,u)._moveEnd(E),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(i,u){return i&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(i,u,p,w){u===void 0&&(u=this._zoom);var E=this._zoom!==u;return this._zoom=u,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),w?p&&p.pinch&&this.fire("zoom",p):((E||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ye(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){we(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[b(this._container)]=this;var u=i?_e:Fe;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ne.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ye(this._resizeRequest),this._resizeRequest=Me(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,u){for(var p=[],w,E=u==="mouseout"||u==="mouseover",T=i.target||i.srcElement,j=!1;T;){if(w=this._targets[b(T)],w&&(u==="click"||u==="preclick")&&this._draggableMoved(w)){j=!0;break}if(w&&w.listens(u,!0)&&(E&&!si(T,i)||(p.push(w),E))||T===this._container)break;T=T.parentNode}return!p.length&&!j&&!E&&this.listens(u,!0)&&(p=[this]),p},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var u=i.target||i.srcElement;if(!(!this._loaded||u._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(u))){var p=i.type;p==="mousedown"&&fs(u),this._fireDOMEvent(i,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,u,p){if(i.type==="click"){var w=h({},i);w.type="preclick",this._fireDOMEvent(w,w.type,p)}var E=this._findEventTargets(i,u);if(p){for(var T=[],j=0;j<p.length;j++)p[j].listens(u,!0)&&T.push(p[j]);E=T.concat(E)}if(E.length){u==="contextmenu"&&Jt(i);var G=E[0],$={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var se=G.getLatLng&&(!G._radius||G._radius<=10);$.containerPoint=se?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(i),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=se?G.getLatLng():this.layerPointToLatLng($.layerPoint)}for(j=0;j<E.length;j++)if(E[j].fire(u,$,!0),$.originalEvent._stopped||E[j].options.bubblingMouseEvents===!1&&Y(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,u=this._handlers.length;i<u;i++)this._handlers[i].disable()},whenReady:function(i,u){return this._loaded?i.call(u||this,{target:this}):this.on("load",i,u),this},_getMapPanePos:function(){return At(this._mapPane)||new ee(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,u){var p=i&&u!==void 0?this._getNewPixelOrigin(i,u):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,u){var p=this.getSize()._divideBy(2);return this.project(i,u)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,u,p){var w=this._getNewPixelOrigin(p,u);return this.project(i,u)._subtract(w)},_latLngBoundsToNewLayerBounds:function(i,u,p){var w=this._getNewPixelOrigin(p,u);return Pe([this.project(i.getSouthWest(),u)._subtract(w),this.project(i.getNorthWest(),u)._subtract(w),this.project(i.getSouthEast(),u)._subtract(w),this.project(i.getNorthEast(),u)._subtract(w)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,u,p){if(!p)return i;var w=this.project(i,u),E=this.getSize().divideBy(2),T=new Le(w.subtract(E),w.add(E)),j=this._getBoundsOffset(T,p,u);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?i:this.unproject(w.add(j),u)},_limitOffset:function(i,u){if(!u)return i;var p=this.getPixelBounds(),w=new Le(p.min.add(i),p.max.add(i));return i.add(this._getBoundsOffset(w,u))},_getBoundsOffset:function(i,u,p){var w=Pe(this.project(u.getNorthEast(),p),this.project(u.getSouthWest(),p)),E=w.min.subtract(i.min),T=w.max.subtract(i.max),j=this._rebound(E.x,-T.x),G=this._rebound(E.y,-T.y);return new ee(j,G)},_rebound:function(i,u){return i+u>0?Math.round(i-u)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(u))},_limitZoom:function(i){var u=this.getMinZoom(),p=this.getMaxZoom(),w=Ne.any3d?this.options.zoomSnap:1;return w&&(i=Math.round(i/w)*w),Math.max(u,Math.min(p,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){dt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,u){var p=this._getCenterOffset(i)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,u),!0)},_createAnimProxy:function(){var i=this._proxy=tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(u){var p=Zr,w=this._proxy.style[p];O(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),w===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),u=this.getZoom();O(this._proxy,this.project(i,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,u,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var w=this.getZoomScale(u),E=this._getCenterOffset(i)._divideBy(1-1/w);return p.animate!==!0&&!this.getSize().contains(E)?!1:(Me(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(i,u,!0)},this),!0)},_animateZoom:function(i,u,p,w){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=u,Ie(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:u,noUpdate:w}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(_(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&dt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ba(i,u){return new $e(i,u)}var Qn=Xe.extend({options:{position:"topright"},initialize:function(i){U(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var u=this._map;return u&&u.removeControl(this),this.options.position=i,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var u=this._container=this.onAdd(i),p=this.getPosition(),w=i._controlCorners[p];return Ie(u,"leaflet-control"),p.indexOf("bottom")!==-1?w.insertBefore(u,w.firstChild):w.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),gs=function(i){return new Qn(i)};$e.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},u="leaflet-",p=this._controlContainer=tt("div",u+"control-container",this._container);function w(E,T){var j=u+E+" "+u+T;i[E+T]=tt("div",j,p)}w("top","left"),w("top","right"),w("bottom","left"),w("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)wt(this._controlCorners[i]);wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ja=Qn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,u,p,w){return p<w?-1:w<p?1:0}},initialize:function(i,u,p){U(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var w in i)this._addLayer(i[w],w);for(w in u)this._addLayer(u[w],w,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Qn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,u){return this._addLayer(i,u),this._map?this._update():this},addOverlay:function(i,u){return this._addLayer(i,u,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var u=this._getLayer(b(i));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Ie(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Ie(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):dt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return dt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",u=this._container=tt("div",i),p=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Yn(u),Ps(u);var w=this._section=tt("section",i+"-list");p&&(this._map.on("click",this.collapse,this),Fe(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=tt("a",i+"-toggle",u);E.href="#",E.title="Layers",E.setAttribute("role","button"),Fe(E,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){Jt(T),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=tt("div",i+"-base",w),this._separator=tt("div",i+"-separator",w),this._overlaysList=tt("div",i+"-overlays",w),u.appendChild(w)},_getLayer:function(i){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&b(this._layers[u].layer)===i)return this._layers[u]},_addLayer:function(i,u,p){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:u,overlay:p}),this.options.sortLayers&&this._layers.sort(_(function(w,E){return this.options.sortFunction(w.layer,E.layer,w.name,E.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ki(this._baseLayersList),ki(this._overlaysList),this._layerControlInputs=[];var i,u,p,w,E=0;for(p=0;p<this._layers.length;p++)w=this._layers[p],this._addItem(w),u=u||w.overlay,i=i||!w.overlay,E+=w.overlay?0:1;return this.options.hideSingleBase&&(i=i&&E>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=u&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var u=this._getLayer(b(i.target)),p=u.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;p&&this._map.fire(p,u)},_createRadioElement:function(i,u){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(u?' checked="checked"':"")+"/>",w=document.createElement("div");return w.innerHTML=p,w.firstChild},_addItem:function(i){var u=document.createElement("label"),p=this._map.hasLayer(i.layer),w;i.overlay?(w=document.createElement("input"),w.type="checkbox",w.className="leaflet-control-layers-selector",w.defaultChecked=p):w=this._createRadioElement("leaflet-base-layers_"+b(this),p),this._layerControlInputs.push(w),w.layerId=b(i.layer),Fe(w,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+i.name;var T=document.createElement("span");u.appendChild(T),T.appendChild(w),T.appendChild(E);var j=i.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,u,p,w=[],E=[];this._handlingClick=!0;for(var T=i.length-1;T>=0;T--)u=i[T],p=this._getLayer(u.layerId).layer,u.checked?w.push(p):u.checked||E.push(p);for(T=0;T<E.length;T++)this._map.hasLayer(E[T])&&this._map.removeLayer(E[T]);for(T=0;T<w.length;T++)this._map.hasLayer(w[T])||this._map.addLayer(w[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,u,p,w=this._map.getZoom(),E=i.length-1;E>=0;E--)u=i[E],p=this._getLayer(u.layerId).layer,u.disabled=p.options.minZoom!==void 0&&w<p.options.minZoom||p.options.maxZoom!==void 0&&w>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Fe(i,"click",Jt),this.expand();var u=this;setTimeout(function(){_e(i,"click",Jt),u._preventClick=!1})}}),ht=function(i,u,p){return new ja(i,u,p)},Bs=Qn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var u="leaflet-control-zoom",p=tt("div",u+" leaflet-bar"),w=this.options;return this._zoomInButton=this._createButton(w.zoomInText,w.zoomInTitle,u+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(w.zoomOutText,w.zoomOutTitle,u+"-out",p,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,u,p,w,E){var T=tt("a",p,w);return T.innerHTML=i,T.href="#",T.title=u,T.setAttribute("role","button"),T.setAttribute("aria-label",u),Yn(T),Fe(T,"click",Xn),Fe(T,"click",E,this),Fe(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var i=this._map,u="leaflet-disabled";dt(this._zoomInButton,u),dt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Ie(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Ie(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});$e.mergeOptions({zoomControl:!0}),$e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bs,this.addControl(this.zoomControl))});var js=function(i){return new Bs(i)},Sr=Qn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var u="leaflet-control-scale",p=tt("div",u),w=this.options;return this._addScales(w,u+"-line",p),i.on(w.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),p},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,u,p){i.metric&&(this._mScale=tt("div",u,p)),i.imperial&&(this._iScale=tt("div",u,p))},_update:function(){var i=this._map,u=i.getSize().y/2,p=i.distance(i.containerPointToLatLng([0,u]),i.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(p)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var u=this._getRoundNum(i),p=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,p,u/i)},_updateImperial:function(i){var u=i*3.2808399,p,w,E;u>5280?(p=u/5280,w=this._getRoundNum(p),this._updateScale(this._iScale,w+" mi",w/p)):(E=this._getRoundNum(u),this._updateScale(this._iScale,E+" ft",E/u))},_updateScale:function(i,u,p){i.style.width=Math.round(this.options.maxWidth*p)+"px",i.innerHTML=u},_getRoundNum:function(i){var u=Math.pow(10,(Math.floor(i)+"").length-1),p=i/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,u*p}}),yc=function(i){return new Sr(i)},J='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ve=Qn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ne.inlineSvg?J+" ":"")+"Leaflet</a>"},initialize:function(i){U(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=tt("div","leaflet-control-attribution"),Yn(this._container);for(var u in i._layers)i._layers[u].getAttribution&&this.addAttribution(i._layers[u].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var u in this._attributions)this._attributions[u]&&i.push(u);var p=[];this.options.prefix&&p.push(this.options.prefix),i.length&&p.push(i.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});$e.mergeOptions({attributionControl:!0}),$e.addInitHook(function(){this.options.attributionControl&&new Ve().addTo(this)});var $t=function(i){return new Ve(i)};Qn.Layers=ja,Qn.Zoom=Bs,Qn.Scale=Sr,Qn.Attribution=Ve,gs.layers=ht,gs.zoom=js,gs.scale=yc,gs.attribution=$t;var Tn=Xe.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Tn.addTo=function(i,u){return i.addHandler(u,this),this};var Fa={Events:Be},za=Ne.touch?"touchstart mousedown":"mousedown",Wr=Re.extend({options:{clickTolerance:3},initialize:function(i,u,p,w){U(this,w),this._element=i,this._dragStartTarget=u||i,this._preventOutline=p},enable:function(){this._enabled||(Fe(this._dragStartTarget,za,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Wr._dragging===this&&this.finishDrag(!0),_e(this._dragStartTarget,za,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!No(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Wr._dragging===this&&this.finishDrag();return}if(!(Wr._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Wr._dragging=this,this._preventOutline&&fs(this._element),ke(),cn(),!this._moving)){this.fire("down");var u=i.touches?i.touches[0]:i,p=Rs(this._element);this._startPoint=new ee(u.clientX,u.clientY),this._startPos=At(this._element),this._parentScale=ko(p);var w=i.type==="mousedown";Fe(document,w?"mousemove":"touchmove",this._onMove,this),Fe(document,w?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var u=i.touches&&i.touches.length===1?i.touches[0]:i,p=new ee(u.clientX,u.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,Jt(i),this._moved||(this.fire("dragstart"),this._moved=!0,Ie(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ie(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),we(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){dt(document.body,"leaflet-dragging"),this._lastTarget&&(dt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),_e(document,"mousemove touchmove",this._onMove,this),_e(document,"mouseup touchend touchcancel",this._onUp,this),_t(),us();var u=this._moved&&this._moving;this._moving=!1,Wr._dragging=!1,u&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ua(i,u,p){var w,E=[1,4,2,8],T,j,G,$,se,Ce,je,qe;for(T=0,Ce=i.length;T<Ce;T++)i[T]._code=ai(i[T],u);for(G=0;G<4;G++){for(je=E[G],w=[],T=0,Ce=i.length,j=Ce-1;T<Ce;j=T++)$=i[T],se=i[j],$._code&je?se._code&je||(qe=Nr(se,$,je,u,p),qe._code=ai(qe,u),w.push(qe)):(se._code&je&&(qe=Nr(se,$,je,u,p),qe._code=ai(qe,u),w.push(qe)),w.push($));i=w}return i}function Fs(i,u){var p,w,E,T,j,G,$,se,Ce;if(!i||i.length===0)throw new Error("latlngs not passed");kn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var je=ce([0,0]),qe=ze(i),On=qe.getNorthWest().distanceTo(qe.getSouthWest())*qe.getNorthEast().distanceTo(qe.getNorthWest());On<1700&&(je=Rt(i));var dn=i.length,gr=[];for(p=0;p<dn;p++){var zn=ce(i[p]);gr.push(u.project(ce([zn.lat-je.lat,zn.lng-je.lng])))}for(G=$=se=0,p=0,w=dn-1;p<dn;w=p++)E=gr[p],T=gr[w],j=E.y*T.x-T.y*E.x,$+=(E.x+T.x)*j,se+=(E.y+T.y)*j,G+=j*3;G===0?Ce=gr[0]:Ce=[$/G,se/G];var Us=u.unproject(ue(Ce));return ce([Us.lat+je.lat,Us.lng+je.lng])}function Rt(i){for(var u=0,p=0,w=0,E=0;E<i.length;E++){var T=ce(i[E]);u+=T.lat,p+=T.lng,w++}return ce([u/w,p/w])}var Lo={__proto__:null,clipPolygon:Ua,polygonCenter:Fs,centroid:Rt};function It(i,u){if(!u||!i.length)return i.slice();var p=u*u;return i=wc(i,p),i=pt(i,p),i}function ps(i,u,p){return Math.sqrt(li(i,u,p,!0))}function oi(i,u,p){return li(i,u,p)}function pt(i,u){var p=i.length,w=typeof Uint8Array<"u"?Uint8Array:Array,E=new w(p);E[0]=E[p-1]=1,De(i,E,u,0,p-1);var T,j=[];for(T=0;T<p;T++)E[T]&&j.push(i[T]);return j}function De(i,u,p,w,E){var T=0,j,G,$;for(G=w+1;G<=E-1;G++)$=li(i[G],i[w],i[E],!0),$>T&&(j=G,T=$);T>p&&(u[j]=1,De(i,u,p,w,j),De(i,u,p,j,E))}function wc(i,u){for(var p=[i[0]],w=1,E=0,T=i.length;w<T;w++)cr(i[w],i[E])>u&&(p.push(i[w]),E=w);return E<T-1&&p.push(i[T-1]),p}var yt;function Gr(i,u,p,w,E){var T=w?yt:ai(i,p),j=ai(u,p),G,$,se;for(yt=j;;){if(!(T|j))return[i,u];if(T&j)return!1;G=T||j,$=Nr(i,u,G,p,E),se=ai($,p),G===T?(i=$,T=se):(u=$,j=se)}}function Nr(i,u,p,w,E){var T=u.x-i.x,j=u.y-i.y,G=w.min,$=w.max,se,Ce;return p&8?(se=i.x+T*($.y-i.y)/j,Ce=$.y):p&4?(se=i.x+T*(G.y-i.y)/j,Ce=G.y):p&2?(se=$.x,Ce=i.y+j*($.x-i.x)/T):p&1&&(se=G.x,Ce=i.y+j*(G.x-i.x)/T),new ee(se,Ce,E)}function ai(i,u){var p=0;return i.x<u.min.x?p|=1:i.x>u.max.x&&(p|=2),i.y<u.min.y?p|=4:i.y>u.max.y&&(p|=8),p}function cr(i,u){var p=u.x-i.x,w=u.y-i.y;return p*p+w*w}function li(i,u,p,w){var E=u.x,T=u.y,j=p.x-E,G=p.y-T,$=j*j+G*G,se;return $>0&&(se=((i.x-E)*j+(i.y-T)*G)/$,se>1?(E=p.x,T=p.y):se>0&&(E+=j*se,T+=G*se)),j=i.x-E,G=i.y-T,w?j*j+G*G:new ee(E,T)}function kn(i){return!B(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function zs(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),kn(i)}function Do(i,u){var p,w,E,T,j,G,$,se;if(!i||i.length===0)throw new Error("latlngs not passed");kn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Ce=ce([0,0]),je=ze(i),qe=je.getNorthWest().distanceTo(je.getSouthWest())*je.getNorthEast().distanceTo(je.getNorthWest());qe<1700&&(Ce=Rt(i));var On=i.length,dn=[];for(p=0;p<On;p++){var gr=ce(i[p]);dn.push(u.project(ce([gr.lat-Ce.lat,gr.lng-Ce.lng])))}for(p=0,w=0;p<On-1;p++)w+=dn[p].distanceTo(dn[p+1])/2;if(w===0)se=dn[0];else for(p=0,T=0;p<On-1;p++)if(j=dn[p],G=dn[p+1],E=j.distanceTo(G),T+=E,T>w){$=(T-w)/E,se=[G.x-$*(G.x-j.x),G.y-$*(G.y-j.y)];break}var zn=u.unproject(ue(se));return ce([zn.lat+Ce.lat,zn.lng+Ce.lng])}var Ha={__proto__:null,simplify:It,pointToSegmentDistance:ps,closestPointOnSegment:oi,clipSegment:Gr,_getEdgeIntersection:Nr,_getBitCode:ai,_sqClosestPointOnSegment:li,isFlat:kn,_flat:zs,polylineCenter:Do},Ro={project:function(i){return new ee(i.lng,i.lat)},unproject:function(i){return new Qe(i.y,i.x)},bounds:new Le([-180,-90],[180,90])},Yr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Le([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var u=Math.PI/180,p=this.R,w=i.lat*u,E=this.R_MINOR/p,T=Math.sqrt(1-E*E),j=T*Math.sin(w),G=Math.tan(Math.PI/4-w/2)/Math.pow((1-j)/(1+j),T/2);return w=-p*Math.log(Math.max(G,1e-10)),new ee(i.lng*u*p,w)},unproject:function(i){for(var u=180/Math.PI,p=this.R,w=this.R_MINOR/p,E=Math.sqrt(1-w*w),T=Math.exp(-i.y/p),j=Math.PI/2-2*Math.atan(T),G=0,$=.1,se;G<15&&Math.abs($)>1e-7;G++)se=E*Math.sin(j),se=Math.pow((1-se)/(1+se),E/2),$=Math.PI/2-2*Math.atan(T*se)-j,j+=$;return new Qe(j*u,i.x*u/p)}},Po={__proto__:null,LonLat:Ro,Mercator:Yr,SphericalMercator:vr},_c=h({},gt,{code:"EPSG:3395",projection:Yr,transformation:function(){var i=.5/(Math.PI*Yr.R);return sr(i,.5,-i,.5)}()}),Di=h({},gt,{code:"EPSG:4326",projection:Ro,transformation:sr(1/180,1,-1/180,.5)}),vc=h({},Zt,{projection:Ro,transformation:sr(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,u){var p=u.lng-i.lng,w=u.lat-i.lat;return Math.sqrt(p*p+w*w)},infinite:!0});Zt.Earth=gt,Zt.EPSG3395=_c,Zt.EPSG3857=Je,Zt.EPSG900913=jr,Zt.EPSG4326=Di,Zt.Simple=vc;var Xt=Re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[b(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[b(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var u=i.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var p=this.getEvents();u.on(p,this),this.once("remove",function(){u.off(p,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});$e.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var u=b(i);return this._layers[u]?this:(this._layers[u]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var u=b(i);return this._layers[u]?(this._loaded&&i.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return b(i)in this._layers},eachLayer:function(i,u){for(var p in this._layers)i.call(u,this._layers[p]);return this},_addLayers:function(i){i=i?B(i)?i:[i]:[];for(var u=0,p=i.length;u<p;u++)this.addLayer(i[u])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[b(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var u=b(i);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,u=-1/0,p=this._getZoomSpan();for(var w in this._zoomBoundLayers){var E=this._zoomBoundLayers[w].options;i=E.minZoom===void 0?i:Math.min(i,E.minZoom),u=E.maxZoom===void 0?u:Math.max(u,E.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=i===1/0?void 0:i,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ir=Xt.extend({initialize:function(i,u){U(this,u),this._layers={};var p,w;if(i)for(p=0,w=i.length;p<w;p++)this.addLayer(i[p])},addLayer:function(i){var u=this.getLayerId(i);return this._layers[u]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var u=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(i){var u=typeof i=="number"?i:this.getLayerId(i);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var u=Array.prototype.slice.call(arguments,1),p,w;for(p in this._layers)w=this._layers[p],w[i]&&w[i].apply(w,u);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,u){for(var p in this._layers)i.call(u,this._layers[p]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return b(i)}}),Fn=function(i,u){return new Ir(i,u)},ur=Ir.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Ir.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Ir.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new ft;for(var u in this._layers){var p=this._layers[u];i.extend(p.getBounds?p.getBounds():p.getLatLng())}return i}}),dr=function(i,u){return new ur(i,u)},Ri=Xe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){U(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,u){var p=this._getIconUrl(i);if(!p){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var w=this._createImg(p,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(w,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),w},_setIconStyles:function(i,u){var p=this.options,w=p[u+"Size"];typeof w=="number"&&(w=[w,w]);var E=ue(w),T=ue(u==="shadow"&&p.shadowAnchor||p.iconAnchor||E&&E.divideBy(2,!0));i.className="leaflet-marker-"+u+" "+(p.className||""),T&&(i.style.marginLeft=-T.x+"px",i.style.marginTop=-T.y+"px"),E&&(i.style.width=E.x+"px",i.style.height=E.y+"px")},_createImg:function(i,u){return u=u||document.createElement("img"),u.src=i,u},_getIconUrl:function(i){return Ne.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Bo(i){return new Ri(i)}var ms=Ri.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof ms.imagePath!="string"&&(ms.imagePath=this._detectIconPath()),(this.options.imagePath||ms.imagePath)+Ri.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var u=function(p,w,E){var T=w.exec(p);return T&&T[E]};return i=u(i,/^url\((['"])?(.+)\1\)$/,2),i&&u(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=tt("div","leaflet-default-icon-path",document.body),u=Ze(i,"background-image")||Ze(i,"backgroundImage");if(document.body.removeChild(i),u=this._stripUrl(u),u)return u;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),jo=Tn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Wr(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ie(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&dt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var u=this._marker,p=u._map,w=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,T=At(u._icon),j=p.getPixelBounds(),G=p.getPixelOrigin(),$=Pe(j.min._subtract(G).add(E),j.max._subtract(G).subtract(E));if(!$.contains(T)){var se=ue((Math.max($.max.x,T.x)-$.max.x)/(j.max.x-$.max.x)-(Math.min($.min.x,T.x)-$.min.x)/(j.min.x-$.min.x),(Math.max($.max.y,T.y)-$.max.y)/(j.max.y-$.max.y)-(Math.min($.min.y,T.y)-$.min.y)/(j.min.y-$.min.y)).multiplyBy(w);p.panBy(se,{animate:!1}),this._draggable._newPos._add(se),this._draggable._startPos._add(se),we(u._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=Me(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(ye(this._panRequest),this._panRequest=Me(this._adjustPan.bind(this,i)))},_onDrag:function(i){var u=this._marker,p=u._shadow,w=At(u._icon),E=u._map.layerPointToLatLng(w);p&&we(p,w),u._latlng=E,i.latlng=E,i.oldLatLng=this._oldLatLng,u.fire("move",i).fire("drag",i)},_onDragEnd:function(i){ye(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Mn=Xt.extend({options:{icon:new ms,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,u){U(this,u),this._latlng=ce(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var u=this._latlng;return this._latlng=ce(i),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=i.icon.createIcon(this._icon),w=!1;p!==this._icon&&(this._icon&&this._removeIcon(),w=!0,i.title&&(p.title=i.title),p.tagName==="IMG"&&(p.alt=i.alt||"")),Ie(p,u),i.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(p,"focus",this._panOnFocus,this);var E=i.icon.createShadow(this._shadow),T=!1;E!==this._shadow&&(this._removeShadow(),T=!0),E&&(Ie(E,u),E.alt=""),this._shadow=E,i.opacity<1&&this._updateOpacity(),w&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&T&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_e(this._icon,"focus",this._panOnFocus,this),wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&we(this._icon,i),this._shadow&&we(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Ie(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),jo)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new jo(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Ge(this._icon,i),this._shadow&&Ge(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var u=this.options.icon.options,p=u.iconSize?ue(u.iconSize):ue(0,0),w=u.iconAnchor?ue(u.iconAnchor):ue(0,0);i.panInside(this._latlng,{paddingTopLeft:w,paddingBottomRight:p.subtract(w)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Cc(i,u){return new Mn(i,u)}var hr=Xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return U(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Xr=hr.extend({options:{fill:!0,radius:10},initialize:function(i,u){U(this,u),this._latlng=ce(i),this._radius=this.options.radius},setLatLng:function(i){var u=this._latlng;return this._latlng=ce(i),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var u=i&&i.radius||this._radius;return hr.prototype.setStyle.call(this,i),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,u=this._radiusY||i,p=this._clickTolerance(),w=[i+p,u+p];this._pxBounds=new Le(this._point.subtract(w),this._point.add(w))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function nt(i,u){return new Xr(i,u)}var Pi=Xr.extend({initialize:function(i,u,p){if(typeof u=="number"&&(u=h({},p,{radius:u})),U(this,u),this._latlng=ce(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new ft(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:hr.prototype.setStyle,_project:function(){var i=this._latlng.lng,u=this._latlng.lat,p=this._map,w=p.options.crs;if(w.distance===gt.distance){var E=Math.PI/180,T=this._mRadius/gt.R/E,j=p.project([u+T,i]),G=p.project([u-T,i]),$=j.add(G).divideBy(2),se=p.unproject($).lat,Ce=Math.acos((Math.cos(T*E)-Math.sin(u*E)*Math.sin(se*E))/(Math.cos(u*E)*Math.cos(se*E)))/E;(isNaN(Ce)||Ce===0)&&(Ce=T/Math.cos(Math.PI/180*u)),this._point=$.subtract(p.getPixelOrigin()),this._radius=isNaN(Ce)?0:$.x-p.project([se,i-Ce]).x,this._radiusY=$.y-j.y}else{var je=w.unproject(w.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(je).x}this._updateBounds()}});function S(i,u,p){return new Pi(i,u,p)}var t=hr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,u){U(this,u),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var u=1/0,p=null,w=li,E,T,j=0,G=this._parts.length;j<G;j++)for(var $=this._parts[j],se=1,Ce=$.length;se<Ce;se++){E=$[se-1],T=$[se];var je=w(i,E,T,!0);je<u&&(u=je,p=w(i,E,T))}return p&&(p.distance=Math.sqrt(u)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Do(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,u){return u=u||this._defaultShape(),i=ce(i),u.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new ft,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return kn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var u=[],p=kn(i),w=0,E=i.length;w<E;w++)p?(u[w]=ce(i[w]),this._bounds.extend(u[w])):u[w]=this._convertLatLngs(i[w]);return u},_project:function(){var i=new Le;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),u=new ee(i,i);this._rawPxBounds&&(this._pxBounds=new Le([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(i,u,p){var w=i[0]instanceof Qe,E=i.length,T,j;if(w){for(j=[],T=0;T<E;T++)j[T]=this._map.latLngToLayerPoint(i[T]),p.extend(j[T]);u.push(j)}else for(T=0;T<E;T++)this._projectLatlngs(i[T],u,p)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,p,w,E,T,j,G,$;for(p=0,E=0,T=this._rings.length;p<T;p++)for($=this._rings[p],w=0,j=$.length;w<j-1;w++)G=Gr($[w],$[w+1],i,w,!0),G&&(u[E]=u[E]||[],u[E].push(G[0]),(G[1]!==$[w+1]||w===j-2)&&(u[E].push(G[1]),E++))}},_simplifyPoints:function(){for(var i=this._parts,u=this.options.smoothFactor,p=0,w=i.length;p<w;p++)i[p]=It(i[p],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,u){var p,w,E,T,j,G,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(p=0,T=this._parts.length;p<T;p++)for(G=this._parts[p],w=0,j=G.length,E=j-1;w<j;E=w++)if(!(!u&&w===0)&&ps(i,G[E],G[w])<=$)return!0;return!1}});function r(i,u){return new t(i,u)}t._flat=zs;var o=t.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var u=t.prototype._convertLatLngs.call(this,i),p=u.length;return p>=2&&u[0]instanceof Qe&&u[0].equals(u[p-1])&&u.pop(),u},_setLatLngs:function(i){t.prototype._setLatLngs.call(this,i),kn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return kn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,u=this.options.weight,p=new ee(u,u);if(i=new Le(i.min.subtract(p),i.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var w=0,E=this._rings.length,T;w<E;w++)T=Ua(this._rings[w],i,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var u=!1,p,w,E,T,j,G,$,se;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(T=0,$=this._parts.length;T<$;T++)for(p=this._parts[T],j=0,se=p.length,G=se-1;j<se;G=j++)w=p[j],E=p[G],w.y>i.y!=E.y>i.y&&i.x<(E.x-w.x)*(i.y-w.y)/(E.y-w.y)+w.x&&(u=!u);return u||t.prototype._containsPoint.call(this,i,!0)}});function a(i,u){return new o(i,u)}var l=ur.extend({initialize:function(i,u){U(this,u),this._layers={},i&&this.addData(i)},addData:function(i){var u=B(i)?i:i.features,p,w,E;if(u){for(p=0,w=u.length;p<w;p++)E=u[p],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var T=this.options;if(T.filter&&!T.filter(i))return this;var j=d(i,T);return j?(j.feature=P(i),j.defaultOptions=j.options,this.resetStyle(j),T.onEachFeature&&T.onEachFeature(i,j),this.addLayer(j)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=h({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(u){this._setLayerStyle(u,i)},this)},_setLayerStyle:function(i,u){i.setStyle&&(typeof u=="function"&&(u=u(i.feature)),i.setStyle(u))}});function d(i,u){var p=i.type==="Feature"?i.geometry:i,w=p?p.coordinates:null,E=[],T=u&&u.pointToLayer,j=u&&u.coordsToLatLng||m,G,$,se,Ce;if(!w&&!p)return null;switch(p.type){case"Point":return G=j(w),f(T,i,G,u);case"MultiPoint":for(se=0,Ce=w.length;se<Ce;se++)G=j(w[se]),E.push(f(T,i,G,u));return new ur(E);case"LineString":case"MultiLineString":return $=y(w,p.type==="LineString"?0:1,j),new t($,u);case"Polygon":case"MultiPolygon":return $=y(w,p.type==="Polygon"?1:2,j),new o($,u);case"GeometryCollection":for(se=0,Ce=p.geometries.length;se<Ce;se++){var je=d({geometry:p.geometries[se],type:"Feature",properties:i.properties},u);je&&E.push(je)}return new ur(E);case"FeatureCollection":for(se=0,Ce=p.features.length;se<Ce;se++){var qe=d(p.features[se],u);qe&&E.push(qe)}return new ur(E);default:throw new Error("Invalid GeoJSON object.")}}function f(i,u,p,w){return i?i(u,p):new Mn(p,w&&w.markersInheritOptions&&w)}function m(i){return new Qe(i[1],i[0],i[2])}function y(i,u,p){for(var w=[],E=0,T=i.length,j;E<T;E++)j=u?y(i[E],u-1,p):(p||m)(i[E]),w.push(j);return w}function C(i,u){return i=ce(i),i.alt!==void 0?[H(i.lng,u),H(i.lat,u),H(i.alt,u)]:[H(i.lng,u),H(i.lat,u)]}function N(i,u,p,w){for(var E=[],T=0,j=i.length;T<j;T++)E.push(u?N(i[T],kn(i[T])?0:u-1,p,w):C(i[T],w));return!u&&p&&E.length>0&&E.push(E[0].slice()),E}function I(i,u){return i.feature?h({},i.feature,{geometry:u}):P(u)}function P(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var F={toGeoJSON:function(i){return I(this,{type:"Point",coordinates:C(this.getLatLng(),i)})}};Mn.include(F),Pi.include(F),Xr.include(F),t.include({toGeoJSON:function(i){var u=!kn(this._latlngs),p=N(this._latlngs,u?1:0,!1,i);return I(this,{type:(u?"Multi":"")+"LineString",coordinates:p})}}),o.include({toGeoJSON:function(i){var u=!kn(this._latlngs),p=u&&!kn(this._latlngs[0]),w=N(this._latlngs,p?2:u?1:0,!0,i);return u||(w=[w]),I(this,{type:(p?"Multi":"")+"Polygon",coordinates:w})}}),Ir.include({toMultiPoint:function(i){var u=[];return this.eachLayer(function(p){u.push(p.toGeoJSON(i).geometry.coordinates)}),I(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(i){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(i);var p=u==="GeometryCollection",w=[];return this.eachLayer(function(E){if(E.toGeoJSON){var T=E.toGeoJSON(i);if(p)w.push(T.geometry);else{var j=P(T);j.type==="FeatureCollection"?w.push.apply(w,j.features):w.push(j)}}}),p?I(this,{geometries:w,type:"GeometryCollection"}):{type:"FeatureCollection",features:w}}});function z(i,u){return new l(i,u)}var Z=z,q=Xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,u,p){this._url=i,this._bounds=ze(u),U(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ie(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Et(this._image),this},bringToBack:function(){return this._map&&In(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ze(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",u=this._image=i?this._url:tt("img");if(Ie(u,"leaflet-image-layer"),this._zoomAnimated&&Ie(u,"leaflet-zoom-animated"),this.options.className&&Ie(u,this.options.className),u.onselectstart=R,u.onmousemove=R,u.onload=_(this.fire,this,"load"),u.onerror=_(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(i){var u=this._map.getZoomScale(i.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;O(this._image,p,u)},_reset:function(){var i=this._image,u=new Le(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=u.getSize();we(i,u.min),i.style.width=p.x+"px",i.style.height=p.y+"px"},_updateOpacity:function(){Ge(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),de=function(i,u,p){return new q(i,u,p)},ge=q.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",u=this._image=i?this._url:tt("video");if(Ie(u,"leaflet-image-layer"),this._zoomAnimated&&Ie(u,"leaflet-zoom-animated"),this.options.className&&Ie(u,this.options.className),u.onselectstart=R,u.onmousemove=R,u.onloadeddata=_(this.fire,this,"load"),i){for(var p=u.getElementsByTagName("source"),w=[],E=0;E<p.length;E++)w.push(p[E].src);this._url=p.length>0?w:[u.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var j=tt("source");j.src=this._url[T],u.appendChild(j)}}});function ae(i,u,p){return new ge(i,u,p)}var Ye=q.extend({_initImage:function(){var i=this._image=this._url;Ie(i,"leaflet-image-layer"),this._zoomAnimated&&Ie(i,"leaflet-zoom-animated"),this.options.className&&Ie(i,this.options.className),i.onselectstart=R,i.onmousemove=R}});function He(i,u,p){return new Ye(i,u,p)}var Tt=Xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,u){i&&(i instanceof Qe||B(i))?(this._latlng=ce(i),U(this,u)):(U(this,i),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Ge(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Ge(this._container,1),this.bringToFront(),this.options.interactive&&(Ie(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Ge(this._container,0),this._removeTimeout=setTimeout(_(wt,void 0,this._container),200)):wt(this._container),this.options.interactive&&(dt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ce(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Et(this._container),this},bringToBack:function(){return this._map&&In(this._container),this},_prepareOpen:function(i){var u=this._source;if(!u._map)return!1;if(u instanceof ur){u=null;var p=this._source._layers;for(var w in p)if(p[w]._map){u=p[w];break}if(!u)return!1;this._source=u}if(!i)if(u.getCenter)i=u.getCenter();else if(u.getLatLng)i=u.getLatLng();else if(u.getBounds)i=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")i.innerHTML=u;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),u=ue(this.options.offset),p=this._getAnchor();this._zoomAnimated?we(this._container,i.add(p)):u=u.add(i).add(p);var w=this._containerBottom=-u.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=w+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});$e.include({_initOverlay:function(i,u,p,w){var E=u;return E instanceof i||(E=new i(w).setContent(u)),p&&E.setLatLng(p),E}}),Xt.include({_initOverlay:function(i,u,p,w){var E=p;return E instanceof i?(U(E,w),E._source=this):(E=u&&!w?u:new i(w,this),E.setContent(p)),E}});var _n=Tt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Tt.prototype.openOn.call(this,i)},onAdd:function(i){Tt.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof hr||this._source.on("preclick",br))},onRemove:function(i){Tt.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof hr||this._source.off("preclick",br))},getEvents:function(){var i=Tt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",u=this._container=tt("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=tt("div",i+"-content-wrapper",u);if(this._contentNode=tt("div",i+"-content",p),Yn(u),Ps(this._contentNode),Fe(u,"contextmenu",br),this._tipContainer=tt("div",i+"-tip-container",u),this._tip=tt("div",i+"-tip",this._tipContainer),this.options.closeButton){var w=this._closeButton=tt("a",i+"-close-button",u);w.setAttribute("role","button"),w.setAttribute("aria-label","Close popup"),w.href="#close",w.innerHTML='<span aria-hidden="true">&#215;</span>',Fe(w,"click",function(E){Jt(E),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,u=i.style;u.width="",u.whiteSpace="nowrap";var p=i.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),u.width=p+1+"px",u.whiteSpace="",u.height="";var w=i.offsetHeight,E=this.options.maxHeight,T="leaflet-popup-scrolled";E&&w>E?(u.height=E+"px",Ie(i,T)):dt(i,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),p=this._getAnchor();we(this._container,u.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,u=parseInt(Ze(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+u,w=this._containerWidth,E=new ee(this._containerLeft,-p-this._containerBottom);E._add(At(this._container));var T=i.layerPointToContainerPoint(E),j=ue(this.options.autoPanPadding),G=ue(this.options.autoPanPaddingTopLeft||j),$=ue(this.options.autoPanPaddingBottomRight||j),se=i.getSize(),Ce=0,je=0;T.x+w+$.x>se.x&&(Ce=T.x+w-se.x+$.x),T.x-Ce-G.x<0&&(Ce=T.x-G.x),T.y+p+$.y>se.y&&(je=T.y+p-se.y+$.y),T.y-je-G.y<0&&(je=T.y-G.y),(Ce||je)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([Ce,je]))}},_getAnchor:function(){return ue(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),vn=function(i,u){return new _n(i,u)};$e.mergeOptions({closePopupOnClick:!0}),$e.include({openPopup:function(i,u,p){return this._initOverlay(_n,i,u,p).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Xt.include({bindPopup:function(i,u){return this._popup=this._initOverlay(_n,this._popup,i,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof ur||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Xn(i);var u=i.layer||i.target;if(this._popup._source===u&&!(u instanceof hr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=u,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ct=Tt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Tt.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Tt.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Tt.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",u=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=tt("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+b(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var u,p,w=this._map,E=this._container,T=w.latLngToContainerPoint(w.getCenter()),j=w.layerPointToContainerPoint(i),G=this.options.direction,$=E.offsetWidth,se=E.offsetHeight,Ce=ue(this.options.offset),je=this._getAnchor();G==="top"?(u=$/2,p=se):G==="bottom"?(u=$/2,p=0):G==="center"?(u=$/2,p=se/2):G==="right"?(u=0,p=se/2):G==="left"?(u=$,p=se/2):j.x<T.x?(G="right",u=0,p=se/2):(G="left",u=$+(Ce.x+je.x)*2,p=se/2),i=i.subtract(ue(u,p,!0)).add(Ce).add(je),dt(E,"leaflet-tooltip-right"),dt(E,"leaflet-tooltip-left"),dt(E,"leaflet-tooltip-top"),dt(E,"leaflet-tooltip-bottom"),Ie(E,"leaflet-tooltip-"+G),we(E,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Ge(this._container,i)},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(u)},_getAnchor:function(){return ue(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),en=function(i,u){return new ct(i,u)};$e.include({openTooltip:function(i,u,p){return this._initOverlay(ct,i,u,p).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Xt.include({bindTooltip:function(i,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ct,this._tooltip,i,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var u=i?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[u](p),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof ur||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var u=typeof i.getElement=="function"&&i.getElement();u&&(Fe(u,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Fe(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var u=typeof i.getElement=="function"&&i.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var u=i.latlng,p,w;this._tooltip.options.sticky&&i.originalEvent&&(p=this._map.mouseEventToContainerPoint(i.originalEvent),w=this._map.containerPointToLayerPoint(p),u=this._map.layerPointToLatLng(w)),this._tooltip.setLatLng(u)}});var Cn=Ri.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var u=i&&i.tagName==="DIV"?i:document.createElement("div"),p=this.options;if(p.html instanceof Element?(ki(u),u.appendChild(p.html)):u.innerHTML=p.html!==!1?p.html:"",p.bgPos){var w=ue(p.bgPos);u.style.backgroundPosition=-w.x+"px "+-w.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function Bi(i){return new Cn(i)}Ri.Default=ms;var fr=Xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ne.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){U(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),wt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Et(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(In(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof ee?i:new ee(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var u=this.getPane().children,p=-i(-1/0,1/0),w=0,E=u.length,T;w<E;w++)T=u[w].style.zIndex,u[w]!==this._container&&T&&(p=i(p,+T));isFinite(p)&&(this.options.zIndex=p+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ne.ielt9){Ge(this._container,this.options.opacity);var i=+new Date,u=!1,p=!1;for(var w in this._tiles){var E=this._tiles[w];if(!(!E.current||!E.loaded)){var T=Math.min(1,(i-E.loaded)/200);Ge(E.el,T),T<1?u=!0:(E.active?p=!0:this._onOpaqueTile(E),E.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),u&&(ye(this._fadeFrame),this._fadeFrame=Me(this._updateOpacity,this))}},_onOpaqueTile:R,_initContainer:function(){this._container||(this._container=tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,u=this.options.maxZoom;if(i!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===i?(this._levels[p].el.style.zIndex=u-Math.abs(i-p),this._onUpdateLevel(p)):(wt(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var w=this._levels[i],E=this._map;return w||(w=this._levels[i]={},w.el=tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),w.el.style.zIndex=u,w.origin=E.project(E.unproject(E.getPixelOrigin()),i).round(),w.zoom=i,this._setZoomTransform(w,E.getCenter(),E.getZoom()),R(w.el.offsetWidth),this._onCreateLevel(w)),this._level=w,w}},_onUpdateLevel:R,_onRemoveLevel:R,_onCreateLevel:R,_pruneTiles:function(){if(this._map){var i,u,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)u=this._tiles[i],u.retain=u.current;for(i in this._tiles)if(u=this._tiles[i],u.current&&!u.active){var w=u.coords;this._retainParent(w.x,w.y,w.z,w.z-5)||this._retainChildren(w.x,w.y,w.z,w.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var u in this._tiles)this._tiles[u].coords.z===i&&this._removeTile(u)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)wt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,u,p,w){var E=Math.floor(i/2),T=Math.floor(u/2),j=p-1,G=new ee(+E,+T);G.z=+j;var $=this._tileCoordsToKey(G),se=this._tiles[$];return se&&se.active?(se.retain=!0,!0):(se&&se.loaded&&(se.retain=!0),j>w?this._retainParent(E,T,j,w):!1)},_retainChildren:function(i,u,p,w){for(var E=2*i;E<2*i+2;E++)for(var T=2*u;T<2*u+2;T++){var j=new ee(E,T);j.z=p+1;var G=this._tileCoordsToKey(j),$=this._tiles[G];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);p+1<w&&this._retainChildren(E,T,p+1,w)}},_resetView:function(i){var u=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var u=this.options;return u.minNativeZoom!==void 0&&i<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<i?u.maxNativeZoom:i},_setView:function(i,u,p,w){var E=Math.round(u);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var T=this.options.updateWhenZooming&&E!==this._tileZoom;(!w||T)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(i),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(i,u)},_setZoomTransforms:function(i,u){for(var p in this._levels)this._setZoomTransform(this._levels[p],i,u)},_setZoomTransform:function(i,u,p){var w=this._map.getZoomScale(p,i.zoom),E=i.origin.multiplyBy(w).subtract(this._map._getNewPixelOrigin(u,p)).round();Ne.any3d?O(i.el,E,w):we(i.el,E)},_resetGrid:function(){var i=this._map,u=i.options.crs,p=this._tileSize=this.getTileSize(),w=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,u.wrapLng[0]],w).x/p.x),Math.ceil(i.project([0,u.wrapLng[1]],w).x/p.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([u.wrapLat[0],0],w).y/p.x),Math.ceil(i.project([u.wrapLat[1],0],w).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var u=this._map,p=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),w=u.getZoomScale(p,this._tileZoom),E=u.project(i,this._tileZoom).floor(),T=u.getSize().divideBy(w*2);return new Le(E.subtract(T),E.add(T))},_update:function(i){var u=this._map;if(u){var p=this._clampZoom(u.getZoom());if(i===void 0&&(i=u.getCenter()),this._tileZoom!==void 0){var w=this._getTiledPixelBounds(i),E=this._pxBoundsToTileRange(w),T=E.getCenter(),j=[],G=this.options.keepBuffer,$=new Le(E.getBottomLeft().subtract([G,-G]),E.getTopRight().add([G,-G]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var se in this._tiles){var Ce=this._tiles[se].coords;(Ce.z!==this._tileZoom||!$.contains(new ee(Ce.x,Ce.y)))&&(this._tiles[se].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(i,p);return}for(var je=E.min.y;je<=E.max.y;je++)for(var qe=E.min.x;qe<=E.max.x;qe++){var On=new ee(qe,je);if(On.z=this._tileZoom,!!this._isValidTile(On)){var dn=this._tiles[this._tileCoordsToKey(On)];dn?dn.current=!0:j.push(On)}}if(j.sort(function(zn,Us){return zn.distanceTo(T)-Us.distanceTo(T)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gr=document.createDocumentFragment();for(qe=0;qe<j.length;qe++)this._addTile(j[qe],gr);this._level.el.appendChild(gr)}}}},_isValidTile:function(i){var u=this._map.options.crs;if(!u.infinite){var p=this._globalTileRange;if(!u.wrapLng&&(i.x<p.min.x||i.x>p.max.x)||!u.wrapLat&&(i.y<p.min.y||i.y>p.max.y))return!1}if(!this.options.bounds)return!0;var w=this._tileCoordsToBounds(i);return ze(this.options.bounds).overlaps(w)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var u=this._map,p=this.getTileSize(),w=i.scaleBy(p),E=w.add(p),T=u.unproject(w,i.z),j=u.unproject(E,i.z);return[T,j]},_tileCoordsToBounds:function(i){var u=this._tileCoordsToNwSe(i),p=new ft(u[0],u[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var u=i.split(":"),p=new ee(+u[0],+u[1]);return p.z=+u[2],p},_removeTile:function(i){var u=this._tiles[i];u&&(wt(u.el),delete this._tiles[i],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Ie(i,"leaflet-tile");var u=this.getTileSize();i.style.width=u.x+"px",i.style.height=u.y+"px",i.onselectstart=R,i.onmousemove=R,Ne.ielt9&&this.options.opacity<1&&Ge(i,this.options.opacity)},_addTile:function(i,u){var p=this._getTilePos(i),w=this._tileCoordsToKey(i),E=this.createTile(this._wrapCoords(i),_(this._tileReady,this,i));this._initTile(E),this.createTile.length<2&&Me(_(this._tileReady,this,i,null,E)),we(E,p),this._tiles[w]={el:E,coords:i,current:!0},u.appendChild(E),this.fire("tileloadstart",{tile:E,coords:i})},_tileReady:function(i,u,p){u&&this.fire("tileerror",{error:u,tile:p,coords:i});var w=this._tileCoordsToKey(i);p=this._tiles[w],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Ge(p.el,0),ye(this._fadeFrame),this._fadeFrame=Me(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),u||(Ie(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ne.ielt9||!this._map._fadeAnimated?Me(this._pruneTiles,this):setTimeout(_(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var u=new ee(this._wrapX?D(i.x,this._wrapX):i.x,this._wrapY?D(i.y,this._wrapY):i.y);return u.z=i.z,u},_pxBoundsToTileRange:function(i){var u=this.getTileSize();return new Le(i.min.unscaleBy(u).floor(),i.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Ec(i){return new fr(i)}var ji=fr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,u){this._url=i,u=U(this,u),u.detectRetina&&Ne.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,u){return this._url===i&&u===void 0&&(u=!0),this._url=i,u||this.redraw(),this},createTile:function(i,u){var p=document.createElement("img");return Fe(p,"load",_(this._tileOnLoad,this,u,p)),Fe(p,"error",_(this._tileOnError,this,u,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(i),p},getTileUrl:function(i){var u={r:Ne.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-i.y;this.options.tms&&(u.y=p),u["-y"]=p}return M(this._url,h(u,this.options))},_tileOnLoad:function(i,u){Ne.ielt9?setTimeout(_(i,this,null,u),0):i(null,u)},_tileOnError:function(i,u,p){var w=this.options.errorTileUrl;w&&u.getAttribute("src")!==w&&(u.src=w),i(p,u)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,u=this.options.maxZoom,p=this.options.zoomReverse,w=this.options.zoomOffset;return p&&(i=u-i),i+w},_getSubdomain:function(i){var u=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var i,u;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(u=this._tiles[i].el,u.onload=R,u.onerror=R,!u.complete)){u.src=he;var p=this._tiles[i].coords;wt(u),delete this._tiles[i],this.fire("tileabort",{tile:u,coords:p})}},_removeTile:function(i){var u=this._tiles[i];if(u)return u.el.setAttribute("src",he),fr.prototype._removeTile.call(this,i)},_tileReady:function(i,u,p){if(!(!this._map||p&&p.getAttribute("src")===he))return fr.prototype._tileReady.call(this,i,u,p)}});function Kd(i,u){return new ji(i,u)}var qd=ji.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,u){this._url=i;var p=h({},this.defaultWmsParams);for(var w in u)w in this.options||(p[w]=u[w]);u=U(this,u);var E=u.detectRetina&&Ne.retina?2:1,T=this.getTileSize();p.width=T.x*E,p.height=T.y*E,this.wmsParams=p},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,ji.prototype.onAdd.call(this,i)},getTileUrl:function(i){var u=this._tileCoordsToNwSe(i),p=this._crs,w=Pe(p.project(u[0]),p.project(u[1])),E=w.min,T=w.max,j=(this._wmsVersion>=1.3&&this._crs===Di?[E.y,E.x,T.y,T.x]:[E.x,E.y,T.x,T.y]).join(","),G=ji.prototype.getTileUrl.call(this,i);return G+xe(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(i,u){return h(this.wmsParams,i),u||this.redraw(),this}});function _g(i,u){return new qd(i,u)}ji.WMS=qd,Kd.wms=_g;var ci=Xt.extend({options:{padding:.1},initialize:function(i){U(this,i),b(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ie(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,u){var p=this._map.getZoomScale(u,this._zoom),w=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,u),T=w.multiplyBy(-p).add(E).subtract(this._map._getNewPixelOrigin(i,u));Ne.any3d?O(this._container,T,p):we(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,u=this._map.getSize(),p=this._map.containerPointToLayerPoint(u.multiplyBy(-i)).round();this._bounds=new Le(p,p.add(u.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jd=ci.extend({options:{tolerance:0},getEvents:function(){var i=ci.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ci.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Fe(i,"mousemove",this._onMouseMove,this),Fe(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Fe(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){ye(this._redrawRequest),delete this._ctx,wt(this._container),_e(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var u in this._layers)i=this._layers[u],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ci.prototype._update.call(this);var i=this._bounds,u=this._container,p=i.getSize(),w=Ne.retina?2:1;we(u,i.min),u.width=w*p.x,u.height=w*p.y,u.style.width=p.x+"px",u.style.height=p.y+"px",Ne.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){ci.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[b(i)]=i;var u=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var u=i._order,p=u.next,w=u.prev;p?p.prev=w:this._drawLast=w,w?w.next=p:this._drawFirst=p,delete i._order,delete this._layers[b(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var u=i.options.dashArray.split(/[, ]+/),p=[],w,E;for(E=0;E<u.length;E++){if(w=Number(u[E]),isNaN(w))return;p.push(w)}i.options._dashArray=p}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||Me(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var u=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Le,this._redrawBounds.extend(i._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(i._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var u=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,u=this._redrawBounds;if(this._ctx.save(),u){var p=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var w=this._drawFirst;w;w=w.next)i=w.layer,(!u||i._pxBounds&&i._pxBounds.intersects(u))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,u){if(this._drawing){var p,w,E,T,j=i._parts,G=j.length,$=this._ctx;if(G){for($.beginPath(),p=0;p<G;p++){for(w=0,E=j[p].length;w<E;w++)T=j[p][w],$[w?"lineTo":"moveTo"](T.x,T.y);u&&$.closePath()}this._fillStroke($,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var u=i._point,p=this._ctx,w=Math.max(Math.round(i._radius),1),E=(Math.max(Math.round(i._radiusY),1)||w)/w;E!==1&&(p.save(),p.scale(1,E)),p.beginPath(),p.arc(u.x,u.y/E,w,0,Math.PI*2,!1),E!==1&&p.restore(),this._fillStroke(p,i)}},_fillStroke:function(i,u){var p=u.options;p.fill&&(i.globalAlpha=p.fillOpacity,i.fillStyle=p.fillColor||p.color,i.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(i.setLineDash&&i.setLineDash(u.options&&u.options._dashArray||[]),i.globalAlpha=p.opacity,i.lineWidth=p.weight,i.strokeStyle=p.color,i.lineCap=p.lineCap,i.lineJoin=p.lineJoin,i.stroke())},_onClick:function(i){for(var u=this._map.mouseEventToLayerPoint(i),p,w,E=this._drawFirst;E;E=E.next)p=E.layer,p.options.interactive&&p._containsPoint(u)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(p))&&(w=p);this._fireEvent(w?[w]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,u)}},_handleMouseOut:function(i){var u=this._hoveredLayer;u&&(dt(this._container,"leaflet-interactive"),this._fireEvent([u],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,u){if(!this._mouseHoverThrottled){for(var p,w,E=this._drawFirst;E;E=E.next)p=E.layer,p.options.interactive&&p._containsPoint(u)&&(w=p);w!==this._hoveredLayer&&(this._handleMouseOut(i),w&&(Ie(this._container,"leaflet-interactive"),this._fireEvent([w],i,"mouseover"),this._hoveredLayer=w)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(_(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,u,p){this._map._fireDOMEvent(u,p||u.type,i)},_bringToFront:function(i){var u=i._order;if(u){var p=u.next,w=u.prev;if(p)p.prev=w;else return;w?w.next=p:p&&(this._drawFirst=p),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(i)}},_bringToBack:function(i){var u=i._order;if(u){var p=u.next,w=u.prev;if(w)w.next=p;else return;p?p.prev=w:w&&(this._drawLast=w),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(i)}}});function $d(i){return Ne.canvas?new Jd(i):null}var Fo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),vg={_initContainer:function(){this._container=tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ci.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var u=i._container=Fo("shape");Ie(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",i._path=Fo("path"),u.appendChild(i._path),this._updateStyle(i),this._layers[b(i)]=i},_addPath:function(i){var u=i._container;this._container.appendChild(u),i.options.interactive&&i.addInteractiveTarget(u)},_removePath:function(i){var u=i._container;wt(u),i.removeInteractiveTarget(u),delete this._layers[b(i)]},_updateStyle:function(i){var u=i._stroke,p=i._fill,w=i.options,E=i._container;E.stroked=!!w.stroke,E.filled=!!w.fill,w.stroke?(u||(u=i._stroke=Fo("stroke")),E.appendChild(u),u.weight=w.weight+"px",u.color=w.color,u.opacity=w.opacity,w.dashArray?u.dashStyle=B(w.dashArray)?w.dashArray.join(" "):w.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=w.lineCap.replace("butt","flat"),u.joinstyle=w.lineJoin):u&&(E.removeChild(u),i._stroke=null),w.fill?(p||(p=i._fill=Fo("fill")),E.appendChild(p),p.color=w.fillColor||w.color,p.opacity=w.fillOpacity):p&&(E.removeChild(p),i._fill=null)},_updateCircle:function(i){var u=i._point.round(),p=Math.round(i._radius),w=Math.round(i._radiusY||p);this._setPath(i,i._empty()?"M0 0":"AL "+u.x+","+u.y+" "+p+","+w+" 0,"+65535*360)},_setPath:function(i,u){i._path.v=u},_bringToFront:function(i){Et(i._container)},_bringToBack:function(i){In(i._container)}},Va=Ne.vml?Fo:xn,zo=ci.extend({_initContainer:function(){this._container=Va("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Va("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wt(this._container),_e(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ci.prototype._update.call(this);var i=this._bounds,u=i.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,p.setAttribute("width",u.x),p.setAttribute("height",u.y)),we(p,i.min),p.setAttribute("viewBox",[i.min.x,i.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(i){var u=i._path=Va("path");i.options.className&&Ie(u,i.options.className),i.options.interactive&&Ie(u,"leaflet-interactive"),this._updateStyle(i),this._layers[b(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){wt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[b(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var u=i._path,p=i.options;u&&(p.stroke?(u.setAttribute("stroke",p.color),u.setAttribute("stroke-opacity",p.opacity),u.setAttribute("stroke-width",p.weight),u.setAttribute("stroke-linecap",p.lineCap),u.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?u.setAttribute("stroke-dasharray",p.dashArray):u.removeAttribute("stroke-dasharray"),p.dashOffset?u.setAttribute("stroke-dashoffset",p.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),p.fill?(u.setAttribute("fill",p.fillColor||p.color),u.setAttribute("fill-opacity",p.fillOpacity),u.setAttribute("fill-rule",p.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(i,u){this._setPath(i,Cr(i._parts,u))},_updateCircle:function(i){var u=i._point,p=Math.max(Math.round(i._radius),1),w=Math.max(Math.round(i._radiusY),1)||p,E="a"+p+","+w+" 0 1,0 ",T=i._empty()?"M0 0":"M"+(u.x-p)+","+u.y+E+p*2+",0 "+E+-p*2+",0 ";this._setPath(i,T)},_setPath:function(i,u){i._path.setAttribute("d",u)},_bringToFront:function(i){Et(i._path)},_bringToBack:function(i){In(i._path)}});Ne.vml&&zo.include(vg);function eh(i){return Ne.svg||Ne.vml?new zo(i):null}$e.include({getRenderer:function(i){var u=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var u=this._paneRenderers[i];return u===void 0&&(u=this._createRenderer({pane:i}),this._paneRenderers[i]=u),u},_createRenderer:function(i){return this.options.preferCanvas&&$d(i)||eh(i)}});var th=o.extend({initialize:function(i,u){o.prototype.initialize.call(this,this._boundsToLatLngs(i),u)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ze(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Cg(i,u){return new th(i,u)}zo.create=Va,zo.pointsToPath=Cr,l.geometryToLayer=d,l.coordsToLatLng=m,l.coordsToLatLngs=y,l.latLngToCoords=C,l.latLngsToCoords=N,l.getFeature=I,l.asFeature=P,$e.mergeOptions({boxZoom:!0});var nh=Tn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),cn(),ke(),this._startPoint=this._map.mouseEventToContainerPoint(i),Fe(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=tt("div","leaflet-zoom-box",this._container),Ie(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var u=new Le(this._point,this._startPoint),p=u.getSize();we(this._box,u.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(wt(this._box),dt(this._container,"leaflet-crosshair")),us(),_t(),_e(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(_(this._resetState,this),0);var u=new ft(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});$e.addInitHook("addHandler","boxZoom",nh),$e.mergeOptions({doubleClickZoom:!0});var rh=Tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var u=this._map,p=u.getZoom(),w=u.options.zoomDelta,E=i.originalEvent.shiftKey?p-w:p+w;u.options.doubleClickZoom==="center"?u.setZoom(E):u.setZoomAround(i.containerPoint,E)}});$e.addInitHook("addHandler","doubleClickZoom",rh),$e.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ih=Tn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Wr(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Ie(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){dt(this._map._container,"leaflet-grab"),dt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=ze(this._map.options.maxBounds);this._offsetLimit=Pe(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var u=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(u),this._prunePositions(u)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,u){return i-(i-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;i.x<u.min.x&&(i.x=this._viscousLimit(i.x,u.min.x)),i.y<u.min.y&&(i.y=this._viscousLimit(i.y,u.min.y)),i.x>u.max.x&&(i.x=this._viscousLimit(i.x,u.max.x)),i.y>u.max.y&&(i.y=this._viscousLimit(i.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,u=Math.round(i/2),p=this._initialWorldOffset,w=this._draggable._newPos.x,E=(w-u+p)%i+u-p,T=(w+u+p)%i-u-p,j=Math.abs(E+p)<Math.abs(T+p)?E:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(i){var u=this._map,p=u.options,w=!p.inertia||i.noInertia||this._times.length<2;if(u.fire("dragend",i),w)u.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,j=p.easeLinearity,G=E.multiplyBy(j/T),$=G.distanceTo([0,0]),se=Math.min(p.inertiaMaxSpeed,$),Ce=G.multiplyBy(se/$),je=se/(p.inertiaDeceleration*j),qe=Ce.multiplyBy(-je/2).round();!qe.x&&!qe.y?u.fire("moveend"):(qe=u._limitOffset(qe,u.options.maxBounds),Me(function(){u.panBy(qe,{duration:je,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});$e.addInitHook("addHandler","dragging",ih),$e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var sh=Tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Fe(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),_e(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,u=document.documentElement,p=i.scrollTop||u.scrollTop,w=i.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(w,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var u=this._panKeys={},p=this.keyCodes,w,E;for(w=0,E=p.left.length;w<E;w++)u[p.left[w]]=[-1*i,0];for(w=0,E=p.right.length;w<E;w++)u[p.right[w]]=[i,0];for(w=0,E=p.down.length;w<E;w++)u[p.down[w]]=[0,i];for(w=0,E=p.up.length;w<E;w++)u[p.up[w]]=[0,-1*i]},_setZoomDelta:function(i){var u=this._zoomKeys={},p=this.keyCodes,w,E;for(w=0,E=p.zoomIn.length;w<E;w++)u[p.zoomIn[w]]=i;for(w=0,E=p.zoomOut.length;w<E;w++)u[p.zoomOut[w]]=-i},_addHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var u=i.keyCode,p=this._map,w;if(u in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(w=this._panKeys[u],i.shiftKey&&(w=ue(w).multiplyBy(3)),p.options.maxBounds&&(w=p._limitOffset(ue(w),p.options.maxBounds)),p.options.worldCopyJump){var E=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(w)));p.panTo(E)}else p.panBy(w)}else if(u in this._zoomKeys)p.setZoom(p.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Xn(i)}}});$e.addInitHook("addHandler","keyboard",sh),$e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var oh=Tn.extend({addHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var u=Li(i),p=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var w=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(_(this._performZoom,this),w),Xn(i)},_performZoom:function(){var i=this._map,u=i.getZoom(),p=this._map.options.zoomSnap||0;i._stop();var w=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(w))))/Math.LN2,T=p?Math.ceil(E/p)*p:E,j=i._limitZoom(u+(this._delta>0?T:-T))-u;this._delta=0,this._startTime=null,j&&(i.options.scrollWheelZoom==="center"?i.setZoom(u+j):i.setZoomAround(this._lastMousePos,u+j))}});$e.addInitHook("addHandler","scrollWheelZoom",oh);var Eg=600;$e.mergeOptions({tapHold:Ne.touchNative&&Ne.safari&&Ne.mobile,tapTolerance:15});var ah=Tn.extend({addHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var u=i.touches[0];this._startPos=this._newPos=new ee(u.clientX,u.clientY),this._holdTimeout=setTimeout(_(function(){this._cancel(),this._isTapValid()&&(Fe(document,"touchend",Jt),Fe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Eg),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){_e(document,"touchend",Jt),_e(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),_e(document,"touchend touchcancel contextmenu",this._cancel,this),_e(document,"touchmove",this._onMove,this)},_onMove:function(i){var u=i.touches[0];this._newPos=new ee(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,u){var p=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});p._simulated=!0,u.target.dispatchEvent(p)}});$e.addInitHook("addHandler","tapHold",ah),$e.mergeOptions({touchZoom:Ne.touch,bounceAtZoomLimits:!0});var lh=Tn.extend({addHooks:function(){Ie(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){dt(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var u=this._map;if(!(!i.touches||i.touches.length!==2||u._animatingZoom||this._zooming)){var p=u.mouseEventToContainerPoint(i.touches[0]),w=u.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(p.add(w)._divideBy(2))),this._startDist=p.distanceTo(w),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),Jt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var u=this._map,p=u.mouseEventToContainerPoint(i.touches[0]),w=u.mouseEventToContainerPoint(i.touches[1]),E=p.distanceTo(w)/this._startDist;if(this._zoom=u.getScaleZoom(E,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&E<1||this._zoom>u.getMaxZoom()&&E>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var T=p._add(w)._divideBy(2)._subtract(this._centerPoint);if(E===1&&T.x===0&&T.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),ye(this._animRequest);var j=_(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Me(j,this,!0),Jt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ye(this._animRequest),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});$e.addInitHook("addHandler","touchZoom",lh),$e.BoxZoom=nh,$e.DoubleClickZoom=rh,$e.Drag=ih,$e.Keyboard=sh,$e.ScrollWheelZoom=oh,$e.TapHold=ah,$e.TouchZoom=lh,s.Bounds=Le,s.Browser=Ne,s.CRS=Zt,s.Canvas=Jd,s.Circle=Pi,s.CircleMarker=Xr,s.Class=Xe,s.Control=Qn,s.DivIcon=Cn,s.DivOverlay=Tt,s.DomEvent=wn,s.DomUtil=Yt,s.Draggable=Wr,s.Evented=Re,s.FeatureGroup=ur,s.GeoJSON=l,s.GridLayer=fr,s.Handler=Tn,s.Icon=Ri,s.ImageOverlay=q,s.LatLng=Qe,s.LatLngBounds=ft,s.Layer=Xt,s.LayerGroup=Ir,s.LineUtil=Ha,s.Map=$e,s.Marker=Mn,s.Mixin=Fa,s.Path=hr,s.Point=ee,s.PolyUtil=Lo,s.Polygon=o,s.Polyline=t,s.Popup=_n,s.PosAnimation=Oo,s.Projection=Po,s.Rectangle=th,s.Renderer=ci,s.SVG=zo,s.SVGOverlay=Ye,s.TileLayer=ji,s.Tooltip=ct,s.Transformation=Wt,s.Util=Te,s.VideoOverlay=ge,s.bind=_,s.bounds=Pe,s.canvas=$d,s.circle=S,s.circleMarker=nt,s.control=gs,s.divIcon=Bi,s.extend=h,s.featureGroup=dr,s.geoJSON=z,s.geoJson=Z,s.gridLayer=Ec,s.icon=Bo,s.imageOverlay=de,s.latLng=ce,s.latLngBounds=ze,s.layerGroup=Fn,s.map=Ba,s.marker=Cc,s.point=ue,s.polygon=a,s.polyline=r,s.popup=vn,s.rectangle=Cg,s.setOptions=U,s.stamp=b,s.svg=eh,s.svgOverlay=He,s.tileLayer=Kd,s.tooltip=en,s.transformation=sr,s.version=c,s.videoOverlay=ae;var Ag=window.L;s.noConflict=function(){return window.L=Ag,this},window.L=s})})(Qu,Qu.exports);var Eo=Qu.exports;const da=Hf(Eo);function hc(e,n,s){return Object.freeze({instance:e,context:n,container:s})}function fc(e,n){return n==null?function(c,h){const g=re.useRef();return g.current||(g.current=e(c,h)),g}:function(c,h){const g=re.useRef();g.current||(g.current=e(c,h));const _=re.useRef(c),{instance:A}=g.current;return re.useEffect(function(){_.current!==c&&(n(A,c,_.current),_.current=c)},[A,c,h]),g}}function ug(e,n){re.useEffect(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){var g;(g=n.layerContainer)==null||g.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function dg(e){return function(s){const c=uc(),h=e(dc(s,c),c);return sg(c.map,s.attribution),Yd(h.current,s.eventHandlers),ug(h.current,c),h}}function Ix(e,n){const s=re.useRef();re.useEffect(function(){if(n.pathOptions!==s.current){const h=n.pathOptions??{};e.instance.setStyle(h),s.current=h}},[e,n])}function Tx(e){return function(s){const c=uc(),h=e(dc(s,c),c);return Yd(h.current,s.eventHandlers),ug(h.current,c),Ix(h.current,s),h}}function kx(e,n){const s=fc(e,n),c=dg(s);return cg(c)}function Mx(e,n){const s=fc(e),c=Nx(s,n);return bx(c)}function Ox(e,n){const s=fc(e,n),c=Tx(s);return cg(c)}function Lx(e,n){const s=fc(e,n),c=dg(s);return Sx(c)}function Dx(e,n,s){const{opacity:c,zIndex:h}=n;c!=null&&c!==s.opacity&&e.setOpacity(c),h!=null&&h!==s.zIndex&&e.setZIndex(h)}function Rx(){return uc().map}function Ku(){return Ku=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c])}return e},Ku.apply(this,arguments)}function Px({bounds:e,boundsOptions:n,center:s,children:c,className:h,id:g,placeholder:_,style:A,whenReady:b,zoom:v,...D},R){const[H]=re.useState({className:h,id:g,style:A}),[X,te]=re.useState(null);re.useImperativeHandle(R,()=>(X==null?void 0:X.map)??null,[X]);const U=re.useCallback(k=>{if(k!==null&&X===null){const M=new Eo.Map(k,D);s!=null&&v!=null?M.setView(s,v):e!=null&&M.fitBounds(e,n),b!=null&&M.whenReady(b),te(Ax(M))}},[]);re.useEffect(()=>()=>{X==null||X.map.remove()},[X]);const xe=X?vl.createElement(lg,{value:X},c):_??null;return vl.createElement("div",Ku({},H,{ref:U}),xe)}const Bx=re.forwardRef(Px),jx=kx(function({position:n,...s},c){const h=new Eo.Marker(n,s);return hc(h,og(c,{overlayContainer:h}))},function(n,s,c){s.position!==c.position&&n.setLatLng(s.position),s.icon!=null&&s.icon!==c.icon&&n.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==c.zIndexOffset&&n.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==c.opacity&&n.setOpacity(s.opacity),n.dragging!=null&&s.draggable!==c.draggable&&(s.draggable===!0?n.dragging.enable():n.dragging.disable())}),Fx=Ox(function({positions:n,...s},c){const h=new Eo.Polyline(n,s);return hc(h,og(c,{overlayContainer:h}))},function(n,s,c){s.positions!==c.positions&&n.setLatLngs(s.positions)}),zx=Mx(function(n,s){const c=new Eo.Popup(n,s.overlayContainer);return hc(c,s)},function(n,s,{position:c},h){re.useEffect(function(){const{instance:_}=n;function A(v){v.popup===_&&(_.update(),h(!0))}function b(v){v.popup===_&&h(!1)}return s.map.on({popupopen:A,popupclose:b}),s.overlayContainer==null?(c!=null&&_.setLatLng(c),_.openOn(s.map)):s.overlayContainer.bindPopup(_),function(){var D;s.map.off({popupopen:A,popupclose:b}),(D=s.overlayContainer)==null||D.unbindPopup(),s.map.removeLayer(_)}},[n,s,h,c])}),Ux=Lx(function({url:n,...s},c){const h=new Eo.TileLayer(n,dc(s,c));return hc(h,c)},function(n,s,c){Dx(n,s,c);const{url:h}=s;h!=null&&h!==c.url&&n.setUrl(h)});delete da.Icon.Default.prototype._getIconUrl;const Hx=(e,n)=>{const s=e===0,c=e===n-1;if(s)return da.divIcon({html:'<div class="flex items-center justify-center w-10 h-10 bg-gradient-to-br from-primary-600 to-primary-700 rounded-full shadow-lg border-4 border-white dark:border-gray-800 text-white font-black text-xs">START</div>',iconSize:[40,40],className:"custom-marker-start"});if(c)return da.divIcon({html:'<div class="flex items-center justify-center w-10 h-10 bg-gradient-to-br from-accent-500 to-accent-600 rounded-full shadow-lg border-4 border-white dark:border-gray-800 text-white font-black text-xs">END</div>',iconSize:[40,40],className:"custom-marker-end"});const h=["bg-blue-500","bg-indigo-500","bg-purple-500","bg-pink-500","bg-rose-500"],g=h[e%h.length];return da.divIcon({html:`<div class="flex items-center justify-center w-9 h-9 ${g} rounded-full shadow-lg border-3 border-white dark:border-gray-800 text-white font-bold text-xs">${e+1}</div>`,iconSize:[36,36],className:"custom-marker"})};function Vx({points:e}){const n=Rx();return re.useEffect(()=>{if(e&&e.length>0){const s=da.latLngBounds(e.map(c=>[c.lat,c.lng]));n.fitBounds(s,{padding:[80,80]})}},[e,n]),null}function Zx({stops:e}){const[n,s]=re.useState(null),[c,h]=re.useState(!1);if(re.useEffect(()=>{const v=document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches;h(v);const D=window.matchMedia("(prefers-color-scheme: dark)"),R=H=>h(H.matches);return D.addEventListener("change",R),()=>D.removeEventListener("change",R)},[]),!e||e.length===0)return x.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-800",children:[x.jsx(ig,{className:"w-12 h-12 text-gray-400 mb-3"}),x.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Sem pontos no mapa"})]});const g=e.map(v=>[v.lat,v.lng]),_=[e[0].lat,e[0].lng],A=c?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",b=c?"#8B5CF6":"#7C3AED";return x.jsxs("div",{className:"h-full w-full relative z-0",children:[x.jsxs(Bx,{center:_,zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,className:"map-container",children:[x.jsx(Ux,{attribution:' <a href="https://carto.com/">CartoDB</a>',url:A,maxZoom:19}),x.jsx(Fx,{positions:g,pathOptions:{color:b,weight:3,opacity:.8,dashArray:"5, 5",lineCap:"round",lineJoin:"round"}}),e.map((v,D)=>x.jsx(jx,{position:[v.lat,v.lng],icon:Hx(D,e.length),eventHandlers:{click:()=>s(D)},children:x.jsx(zx,{className:"custom-popup",children:x.jsxs("div",{className:"min-w-max p-2",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-gray-200",children:[x.jsx(uo,{className:"w-4 h-4 text-primary-600"}),x.jsxs("strong",{className:"text-gray-900",children:["Parada ",v.id]})]}),x.jsx("p",{className:"text-sm text-gray-700 font-medium mb-1",children:v.address}),x.jsx("div",{className:"mt-3 pt-2 border-t border-gray-200",children:x.jsxs("span",{className:"inline-block bg-primary-100 text-primary-800 text-xs px-2.5 py-1 rounded-full font-semibold",children:[v.packages.length," pacote",v.packages.length!==1?"s":""]})})]})})},D)),x.jsx(Vx,{points:e})]}),n!==null&&x.jsx(Wx,{stop:e[n],index:n,total:e.length,onClose:()=>s(null)})]})}function Wx({stop:e,index:n,total:s,onClose:c}){const[h,g]=re.useState(!1);return x.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-40 animate-slide-up",onClick:_=>{_.target===_.currentTarget&&c()},children:[x.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-md",onClick:c}),x.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-t-3xl shadow-2xl transition-all duration-300 ${h?"h-2/3":"h-fit max-h-96"} border-t-2 border-primary-600`,children:[x.jsx("div",{className:"flex justify-center pt-4 pb-3 bg-gradient-to-b from-transparent to-gray-50 dark:to-gray-800/50",children:x.jsx("div",{className:"w-14 h-1.5 bg-gradient-to-r from-gray-300 via-gray-400 to-gray-300 dark:from-gray-600 dark:via-gray-500 dark:to-gray-600 rounded-full shadow-md"})}),x.jsx("div",{className:"px-5 pb-4 border-b border-gray-100 dark:border-gray-700",children:x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-600 to-primary-700 flex items-center justify-center text-white font-black text-lg shadow-lg shadow-primary-500/30",children:n+1}),x.jsxs("div",{children:[x.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-bold uppercase tracking-wide",children:["Parada ",n+1," de ",s]}),x.jsx("h3",{className:"font-black text-lg text-gray-900 dark:text-white",children:e.id})]})]}),x.jsx("button",{onClick:c,className:"w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center justify-center transition-all active:scale-90",children:x.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-300",children:""})})]})}),x.jsxs("div",{className:`overflow-y-auto px-5 py-4 ${h?"max-h-[calc(2/3vh-120px)]":"max-h-64"}`,children:[x.jsx("div",{className:"mb-5 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/10 rounded-2xl border border-blue-200 dark:border-blue-800/30",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx(ig,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-bold uppercase tracking-wide mb-1",children:"Endereo"}),x.jsx("p",{className:"font-bold text-base text-gray-900 dark:text-white",children:e.address})]})]})}),x.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/10 rounded-2xl border border-green-200 dark:border-green-800/30",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(uo,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),x.jsx("p",{className:"text-xs font-bold text-green-700 dark:text-green-400 uppercase tracking-wide",children:"Pacotes"})]}),x.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-green-600 text-white text-xs font-bold shadow-lg shadow-green-500/30",children:[x.jsx(uo,{className:"w-3.5 h-3.5"}),e.packages.length]})]}),e.packages&&e.packages.length>0&&x.jsxs("div",{className:"space-y-2 text-sm",children:[e.packages.slice(0,4).map((_,A)=>x.jsxs("div",{className:"flex items-center gap-2 bg-white/50 dark:bg-gray-800/50 p-2 rounded-lg",children:[x.jsx("div",{className:"w-2 h-2 rounded-full bg-green-600"}),x.jsx("span",{className:"font-mono text-xs text-gray-700 dark:text-gray-300 truncate",children:_})]},A)),e.packages.length>4&&x.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 italic pl-2",children:["+",e.packages.length-4," mais pacotes"]})]})]}),x.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border border-yellow-200 dark:border-yellow-800/30 flex items-center gap-2",children:[x.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),x.jsx("p",{className:"text-xs font-semibold text-yellow-700 dark:text-yellow-400",children:"Aguardando confirmao"})]}),x.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 space-y-3",children:[x.jsxs("button",{className:"btn-primary w-full flex items-center justify-center gap-2 active:scale-95",children:[x.jsx(no,{className:"w-5 h-5"}),x.jsx("span",{children:"Navegar At Aqui"})]}),x.jsxs("button",{className:"w-full px-4 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold hover:shadow-lg hover:shadow-green-500/30 transition-all active:scale-95 shadow-lg shadow-green-500/20 flex items-center justify-center gap-2",children:[x.jsx(rg,{className:"w-5 h-5"}),x.jsx("span",{children:"Confirmar Entrega"})]})]})]})]})]})}function Gx({data:e,adminStats:n}){return e?e.view==="personal"?x.jsx(Yx,{data:e}):e.view==="company"?x.jsx(Xx,{data:e,adminStats:n}):x.jsx("div",{children:"Tipo de visualizao desconhecido."}):x.jsxs("div",{className:"space-y-4 animate-fade-in",children:[x.jsx("div",{className:"skeleton h-48 rounded-3xl"}),x.jsx("div",{className:"skeleton h-32 rounded-2xl"}),x.jsx("div",{className:"skeleton h-40 rounded-2xl"})]})}function Yx({data:e}){const n=e.balance.toFixed(2).replace(".",","),s=n.split(",")[0],c=n.split(",")[1];return x.jsxs("div",{className:"space-y-5 animate-fade-in",children:[x.jsxs("div",{className:"relative overflow-hidden gradient-success rounded-3xl p-6 text-white shadow-glass",children:[x.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -mr-20 -mt-20"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -ml-16 -mb-16"}),x.jsxs("div",{className:"relative z-10",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[x.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:x.jsx(_x,{className:"w-5 h-5"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-xs font-medium text-white/70",children:"Seus Ganhos"}),x.jsx("p",{className:"text-xs font-bold text-white/90",children:e.period})]})]}),x.jsx("div",{className:"mb-6",children:x.jsxs("div",{className:"flex items-baseline gap-1",children:[x.jsx("span",{className:"text-xl font-bold opacity-80",children:"R$"}),x.jsx("span",{className:"text-5xl font-black tracking-tight",children:s}),x.jsxs("span",{className:"text-2xl font-bold opacity-80",children:[",",c]})]})}),x.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/20",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(cx,{className:"w-4 h-4 text-white/70"}),x.jsx("span",{className:"text-xs font-medium text-white/90",children:"Prximo pagamento: Sexta"})]}),x.jsx("span",{className:"badge bg-yellow-400/30 text-yellow-100 border-yellow-400/50 text-[10px]",children:"A RECEBER"})]})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx(Ef,{label:"Entregas",value:"--",icon:x.jsx(wo,{className:"w-4 h-4"}),trend:"positive"}),x.jsx(Ef,{label:"Mdia/Dia",value:`R$ ${(e.balance/5).toFixed(0)}`,icon:x.jsx(Cs,{className:"w-4 h-4"}),trend:"neutral"})]}),x.jsxs("div",{className:"card-premium overflow-hidden",children:[x.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-800/50 px-5 py-3 border-b border-gray-100 dark:border-gray-700/50",children:x.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-2",children:[x.jsx(hx,{className:"w-4 h-4"}),"Extrato Recente"]})}),x.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700/50",children:[x.jsx(eu,{title:"Rota de Hoje",subtitle:"Processando...",value:"--",status:"pending"}),x.jsx(eu,{title:"Rota Ontem",subtitle:"Concluda",value:`+ R$ ${((e.balance>0?e.balance:50)*.4).toFixed(2).replace(".",",")}`,status:"completed"}),x.jsx(eu,{title:"Bnus Meta Semanal",subtitle:"Extra conquistado",value:`+ R$ ${((e.balance>0?e.balance:50)*.1).toFixed(2).replace(".",",")}`,status:"bonus"})]})]})]})}function Xx({data:e,adminStats:n}){const{revenue:s,costs:c,profit:h}=e.company_stats,[g,_]=re.useState(""),[A,b]=re.useState(""),[v,D]=re.useState(!1),[R,H]=re.useState(null),X=h.toFixed(2).replace(".",","),te=h>=0,U=(n==null?void 0:n.active_session)&&(n==null?void 0:n.pending)===0,xe=async()=>{D(!0),H(null);try{const k=await fetch("/api/session/finalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({extra_revenue:g?parseFloat(g):0,other_costs:A?parseFloat(A):0})}),M=await k.json();if(!k.ok)throw new Error(M.detail||"Falha ao fechar dia");H(" Dia fechado com sucesso.")}catch(k){H(k.message)}finally{D(!1)}};return x.jsxs("div",{className:"space-y-5 animate-fade-in",children:[x.jsxs("div",{className:"relative overflow-hidden gradient-dark rounded-3xl p-6 text-white shadow-glass",children:[x.jsx("div",{className:"absolute top-0 right-0 opacity-10",children:x.jsx(Cs,{size:120,strokeWidth:1})}),x.jsxs("div",{className:"relative z-10",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx("div",{className:"w-10 h-10 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:x.jsx(wo,{className:"w-5 h-5"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-xs text-gray-400",children:"Lucro Lquido"}),x.jsx("p",{className:"text-xs font-bold text-gray-300",children:e.period})]})]}),x.jsx("div",{className:"mb-6",children:x.jsxs("div",{className:`text-5xl font-black ${te?"text-green-400":"text-red-400"}`,children:["R$ ",X]})}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs("div",{className:"bg-white/5 backdrop-blur-sm p-4 rounded-xl border border-white/10",children:[x.jsxs("div",{className:"flex items-center gap-1.5 text-green-300 text-xs mb-2 font-medium",children:[x.jsx(ax,{className:"w-3.5 h-3.5"})," Receita"]}),x.jsxs("div",{className:"text-2xl font-black text-white",children:["R$ ",s.toFixed(0)]})]}),x.jsxs("div",{className:"bg-white/5 backdrop-blur-sm p-4 rounded-xl border border-white/10",children:[x.jsxs("div",{className:"flex items-center gap-1.5 text-red-300 text-xs mb-2 font-medium",children:[x.jsx(ox,{className:"w-3.5 h-3.5"})," Custos"]}),x.jsxs("div",{className:"text-2xl font-black text-white",children:["R$ ",c.toFixed(0)]})]})]})]})]}),x.jsxs("div",{className:"card-premium overflow-hidden",children:[x.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 px-5 py-3 border-b border-gray-100 dark:border-gray-700/50",children:x.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm flex items-center gap-2",children:[x.jsx(pi,{className:"w-4 h-4"}),"Repasse aos Entregadores"]})}),x.jsx("div",{className:"p-5 space-y-4",children:Object.entries(e.deliverers_stats).length>0?Object.entries(e.deliverers_stats).map(([k,M],B)=>x.jsxs("div",{className:"flex items-center justify-between group hover:bg-gray-50 dark:hover:bg-gray-800/50 p-3 rounded-xl transition-all",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-black text-xs shadow-lg shadow-blue-500/30",children:k.substring(0,2).toUpperCase()}),x.jsxs("div",{children:[x.jsx("p",{className:"font-bold text-sm text-gray-900 dark:text-white",children:k}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Colaborador"})]})]}),x.jsx("div",{className:"text-right",children:x.jsxs("p",{className:"font-black text-lg text-gray-900 dark:text-white",children:["R$ ",M.toFixed(2).replace(".",",")]})})]},B)):x.jsxs("div",{className:"text-center py-8",children:[x.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:x.jsx(pi,{className:"w-8 h-8 text-gray-400"})}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Nenhum repasse registrado"}),x.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Os valores aparecero aqui"})]})})]}),U&&x.jsxs("div",{className:"card-premium p-5 space-y-3",children:[x.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:" Fechar Dia"}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Todos os pacotes foram finalizados. Informe custos e lucros extras para fechar a sesso."}),x.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[x.jsx("input",{type:"number",placeholder:"Lucro extra",value:g,onChange:k=>_(k.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"}),x.jsx("input",{type:"number",placeholder:"Custos extras",value:A,onChange:k=>b(k.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),x.jsx("button",{onClick:xe,disabled:v,className:`w-full py-3 rounded-lg text-sm font-semibold ${v?"bg-gray-400 text-white":"bg-emerald-600 text-white"}`,children:v?"Fechando...":"Fechar Dia"}),R&&x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:R})]})]})}function Ef({label:e,value:n,icon:s,trend:c}){const h={positive:"text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/30",negative:"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30",neutral:"text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30"};return x.jsxs("div",{className:"card-premium p-4",children:[x.jsx("div",{className:`w-8 h-8 rounded-xl flex items-center justify-center mb-3 ${h[c]}`,children:s}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium mb-1",children:e}),x.jsx("p",{className:"text-lg font-black text-gray-900 dark:text-white",children:n})]})}function eu({title:e,subtitle:n,value:s,status:c}){const h={pending:{color:"text-gray-400",bg:"bg-gray-100 dark:bg-gray-800"},completed:{color:"text-green-600 dark:text-green-400",bg:"bg-green-50 dark:bg-green-900/20"},bonus:{color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"}};return x.jsxs("div",{className:"flex justify-between items-center p-4 hover:bg-gray-50 dark:hover:bg-gray-800/30 transition-all",children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-bold text-sm text-gray-900 dark:text-white mb-0.5",children:e}),x.jsx("p",{className:`text-xs font-semibold ${h[c].color}`,children:n})]}),x.jsx("div",{className:`text-sm font-black font-mono ${h[c].color}`,children:s})]})}function Qx(){const[e,n]=re.useState([]),[s,c]=re.useState(!0),[h,g]=re.useState(!1),[_,A]=re.useState({name:"",telegram_id:"",is_partner:!1}),[b,v]=re.useState([]),D=()=>{c(!0),fetch("/api/admin/team").then(U=>U.json()).then(U=>{n(U),c(!1)}).catch(U=>{console.error(U),c(!1)})};re.useEffect(()=>{D(),X()},[]);const R=async U=>{if(U.preventDefault(),!_.name||!_.telegram_id)return;(await fetch("/api/admin/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({..._,telegram_id:parseInt(_.telegram_id)})})).ok?(g(!1),A({name:"",telegram_id:"",is_partner:!1}),D()):alert("Erro ao adicionar member")},H=async U=>{confirm("Tem certeza que deseja remover este entregador?")&&(await fetch(`/api/admin/team/${U}`,{method:"DELETE"}),D())},X=async()=>{try{const xe=await(await fetch("/api/delivery/pending-transfers")).json();v(xe.transfers||[])}catch(U){console.error("Erro ao buscar transferncias:",U)}},te=async(U,xe,k="")=>{try{(await fetch("/api/delivery/transfer-approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transfer_id:U,approved:xe,admin_id:123456,admin_name:"Admin",rejection_reason:k})})).ok&&(alert(xe?"Transferncia aprovada!":"Transferncia rejeitada!"),X())}catch{alert("Erro ao processar transferncia")}};return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[x.jsxs("div",{children:[x.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[x.jsx(pi,{className:"text-blue-500"})," Gesto de Equipe"]}),x.jsx("p",{className:"text-sm text-gray-500",children:"Gerencie seus entregadores e parceiros"})]}),x.jsx("button",{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg shadow-lg shadow-blue-500/30 transition-all active:scale-95",children:x.jsx(wx,{size:20})})]}),x.jsx("div",{className:"space-y-3",children:s?x.jsx("div",{className:"text-center text-gray-500 py-10",children:"Carregando equipe..."}):e.length===0?x.jsx("div",{className:"text-center text-gray-400 py-10 bg-gray-50 dark:bg-gray-800 rounded-xl border border-dashed border-gray-300",children:"Nenhum membro na equipe ainda."}):e.map(U=>x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex justify-between items-center group",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg ${U.is_partner?"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-300":"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-300"}`,children:U.name.substring(0,1).toUpperCase()}),x.jsxs("div",{children:[x.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[U.name,U.is_partner&&x.jsx(px,{size:14,className:"text-purple-500",title:"Scio"})]}),x.jsxs("div",{className:"flex gap-3 text-xs text-gray-500 mt-1",children:[x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(xx,{size:10})," ",U.deliveries," entregas"]}),x.jsxs("span",{className:"font-mono",children:["ID: ",U.id]})]})]})]}),x.jsx("button",{onClick:()=>H(U.id),className:"text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:x.jsx(mx,{size:18})})]},U.id))}),b.length>0&&x.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-6 border border-yellow-200 dark:border-yellow-800",children:[x.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2 mb-4 text-yellow-800 dark:text-yellow-200",children:[x.jsx(ng,{size:20})," Solicitaes de Transferncia Pendentes (",b.length,")"]}),x.jsx("div",{className:"space-y-3",children:b.map(U=>x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[x.jsxs("div",{className:"flex justify-between items-start mb-3",children:[x.jsxs("div",{children:[x.jsxs("p",{className:"font-semibold text-sm",children:[U.from_deliverer.name,"  ",U.to_deliverer.name]}),x.jsxs("p",{className:"text-xs text-gray-500",children:[U.package_count," pacote(s)"]})]}),x.jsx("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300 px-2 py-1 rounded",children:"Pendente"})]}),x.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:[x.jsx("strong",{children:"Motivo:"})," ",U.reason]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>te(U.id,!0),className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg text-sm font-semibold transition",children:[x.jsx(ux,{size:16})," Aprovar"]}),x.jsxs("button",{onClick:()=>{const xe=prompt("Motivo da rejeio (opcional):");te(U.id,!1,xe||"")},className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2 rounded-lg text-sm font-semibold transition",children:[x.jsx(vx,{size:16})," Rejeitar"]})]})]},U.id))})]}),h&&x.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:x.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-fade-in",children:[x.jsx("h3",{className:"text-lg font-bold mb-4",children:"Novo Entregador"}),x.jsxs("form",{onSubmit:R,className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Nome"}),x.jsx("input",{type:"text",required:!0,className:"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-lg p-3 outline-none focus:ring-2 ring-blue-500",placeholder:"Ex: Joo Silva",value:_.name,onChange:U=>A({..._,name:U.target.value})})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Telegram ID"}),x.jsx("input",{type:"number",required:!0,className:"w-full bg-gray-50 dark:bg-gray-800 border-none rounded-lg p-3 outline-none focus:ring-2 ring-blue-500 font-mono",placeholder:"Ex: 123456789",value:_.telegram_id,onChange:U=>A({..._,telegram_id:U.target.value})}),x.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Pea pro entregador enviar /id para o bot."})]}),x.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[x.jsx("input",{type:"checkbox",id:"is_partner",className:"w-5 h-5 rounded text-blue-600 focus:ring-blue-500 border-gray-300",checked:_.is_partner,onChange:U=>A({..._,is_partner:U.target.checked})}),x.jsx("label",{htmlFor:"is_partner",className:"text-sm font-medium",children:"Scio (No recebe por pacote)"})]}),x.jsxs("div",{className:"flex gap-3 pt-4",children:[x.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 py-3 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl text-sm font-medium",children:"Cancelar"}),x.jsx("button",{type:"submit",className:"flex-1 py-3 bg-blue-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-blue-500/30",children:"Salvar"})]})]})]})})]})}function hg(){const[e,n]=re.useState({width:typeof window<"u"?window.innerWidth:1024,height:typeof window<"u"?window.innerHeight:768}),[s,c]=re.useState("desktop");return re.useEffect(()=>{const h=()=>{const g=window.innerWidth,_=window.innerHeight;n({width:g,height:_}),g<768?c("mobile"):g<1024?c("tablet"):c("desktop")};return window.addEventListener("resize",h),h(),()=>window.removeEventListener("resize",h)},[]),{width:e.width,height:e.height,isMobile:s==="mobile",isTablet:s==="tablet",isDesktop:s==="desktop",deviceType:s,isSmallScreen:e.width<768,isMediumScreen:e.width>=768&&e.width<1024,isLargeScreen:e.width>=1024,isPortrait:e.height>e.width,isLandscape:e.width>e.height}}const Kx=({onScan:e,onClose:n})=>{const[s,c]=re.useState([]),[h,g]=re.useState("camera"),_=re.useRef(null),A=re.useRef(null),b=re.useRef(null),v=re.useRef(null);re.useEffect(()=>(h==="camera"&&D(),()=>R()),[h]);const D=async()=>{try{const k=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});v.current=k,_.current&&(_.current.srcObject=k,_.current.play().catch(M=>console.error("Play error:",M))),H()}catch(k){console.error("Cmera bloqueada:",k),g("upload")}},R=()=>{v.current&&v.current.getTracks().forEach(k=>k.stop())},H=()=>{if(!_.current||!A.current)return;const k=A.current,M=k.getContext("2d"),B=_.current,Y=()=>{B.readyState===B.HAVE_ENOUGH_DATA&&(k.width=B.videoWidth,k.height=B.videoHeight,M.drawImage(B,0,0),M.getImageData(0,0,k.width,k.height)),requestAnimationFrame(Y)};Y()},X=async k=>{const M=new FileReader;M.onload=async B=>{const Y=new Image;Y.onload=()=>{if(A.current){const he=A.current;he.width=Y.width,he.height=Y.height,he.getContext("2d").drawImage(Y,0,0),te(k.name.replace(/\D/g,"")||"manual-"+Date.now())}},Y.src=B.target.result},M.readAsDataURL(k)},te=k=>{if(!k||s.includes(k))return;const M={id:k,timestamp:new Date().toLocaleTimeString("pt-BR"),confirmed:!1};c([...s,M]),e==null||e(k)},U=k=>{k.key==="Enter"&&(te(k.target.value),k.target.value="")},xe=()=>{n==null||n(s.map(k=>k.id))};return x.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-2xl w-full mx-4 space-y-4",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h2",{className:"text-2xl font-bold",children:" Scanner de Cdigos"}),x.jsx("button",{onClick:()=>n==null?void 0:n([]),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:x.jsx(Cx,{className:"w-6 h-6"})})]}),x.jsx("div",{className:"flex gap-2 border-b dark:border-gray-700",children:["camera","upload","manual"].map(k=>x.jsxs("button",{onClick:()=>g(k),className:`px-4 py-2 capitalize font-medium transition ${h===k?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[k==="camera"&&""," ",k==="upload"&&""," ",k==="manual"&&""," ",k]},k))}),h==="camera"&&x.jsxs("div",{className:"space-y-4",children:[x.jsx("video",{ref:_,className:"w-full h-64 bg-black rounded-lg object-cover",playsInline:!0}),x.jsx("canvas",{ref:A,style:{display:"none"}}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:" Posicione o cdigo de barras ou QR code em frente  cmera"})]}),h==="upload"&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("button",{onClick:()=>{var k;return(k=b.current)==null?void 0:k.click()},className:"w-full border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[x.jsx(yx,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),x.jsx("p",{className:"text-sm font-medium",children:"Clique para selecionar imagem"})]}),x.jsx("input",{ref:b,type:"file",accept:"image/*",className:"hidden",onChange:k=>{var M;return((M=k.target.files)==null?void 0:M[0])&&X(k.target.files[0])}}),x.jsx("canvas",{ref:A,style:{display:"none"}})]}),h==="manual"&&x.jsxs("div",{className:"space-y-4",children:[x.jsx("input",{type:"text",placeholder:"Digite o cdigo e pressione ENTER...",onKeyPress:U,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),x.jsx("p",{className:"text-xs text-gray-500",children:"til para insero manual de CPF, CNPJ ou IDs"})]}),s.length>0&&x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[x.jsxs("h3",{className:"font-semibold mb-2",children:[" ",s.length," cdigo(s) escaneado(s)"]}),x.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:s.map((k,M)=>x.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-gray-700 p-2 rounded",children:[x.jsx("span",{className:"font-mono text-sm",children:k.id}),x.jsx("span",{className:"text-xs text-gray-500",children:k.timestamp}),x.jsx("button",{onClick:()=>c(s.filter((B,Y)=>Y!==M)),className:"text-red-500 hover:text-red-700",children:""})]},M))})]}),x.jsxs("div",{className:"flex gap-2 pt-4 border-t dark:border-gray-700",children:[x.jsx("button",{onClick:()=>n==null?void 0:n([]),className:"flex-1 px-4 py-2 bg-gray-300 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-400 dark:hover:bg-gray-600 font-medium",children:"Cancelar"}),x.jsxs("button",{onClick:xe,disabled:s.length===0,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[x.jsx(rg,{className:"w-4 h-4"})," Confirmar (",s.length,")"]})]})]})})};function qx(){var Cr,Ot,rt,Ke,Fr,Ee,zr,Ei,Bn,Ai,rn,bi,jn,Gt,Si,Ur,Ls,vt,me,St,lt,ut,Hr,Ni;const e=hg(),[n,s]=re.useState("simple"),[c,h]=re.useState(""),[g,_]=re.useState(""),[A,b]=re.useState(null),[v,D]=re.useState(!1),[R,H]=re.useState(null),[X,te]=re.useState(!1),[U,xe]=re.useState(null),[k,M]=re.useState(""),[B,Y]=re.useState(!1),[he,oe]=re.useState(null),[V,ne]=re.useState(null),[Q,Se]=re.useState(2),[Me,ye]=re.useState([]),[Te,Xe]=re.useState({}),[K,Be]=re.useState(!1),[Re,ee]=re.useState(null),[Oe,ue]=re.useState([]),Le=re.useRef(null),[Pe,ft]=re.useState(!1);re.useEffect(()=>{fetch("/api/admin/team").then(le=>le.json()).then(le=>ue(le)).catch(()=>ue([])),fetch("/api/session/state").then(le=>le.json()).then(le=>{le.active&&(console.log("Restaurando sesso:",le),le.has_romaneio&&(s("import"),Y(!0),oe(le.session_id),le.route_value&&M(le.route_value),le.num_deliverers&&Se(le.num_deliverers),le.routes&&le.routes.length>0&&(ye(le.routes),Xe(le.assignments||{})),fetch("/api/session/report").then(fe=>fe.json()).then(fe=>ne(fe)).catch(fe=>console.error("Erro recarregar report",fe))))}).catch(le=>console.error("Erro ao checar estado",le))},[]);const ze=async()=>{if(!c.trim()||!g){ee("Preencha os endereos e o valor total");return}D(!0),ee(null),b(null);const le=new FormData;le.append("addresses_text",c),le.append("route_value",parseFloat(g));try{const fe=await fetch("/api/routes/analyze-addresses",{method:"POST",body:le});if(!fe.ok){const yn=await fe.json();throw new Error(yn.detail||"Falha ao analisar")}const We=await fe.json();b(We)}catch(fe){ee(fe.message)}finally{D(!1)}},Qe=()=>{h(""),_(""),b(null),H(null),ee(null)},ce=async()=>{if(!c.trim()){ee("Cole os endereos primeiro");return}te(!0),ee(null);const le=new FormData;le.append("addresses_text",c);try{const fe=await fetch("/api/routes/generate-map",{method:"POST",body:le});if(!fe.ok){const yn=await fe.json();throw new Error(yn.detail||"Falha ao gerar mapa")}const We=await fe.json();H(We.map_url)}catch(fe){ee(fe.message)}finally{te(!1)}},Zt=le=>{le.target.files.length>0&&(xe(le.target.files[0]),ee(null))},gt=async()=>{if(!U||!k){ee("Selecione arquivo e informe valor");return}Be(!0),ee(null);const le=new FormData;le.append("file",U);try{const fe=await fetch("/api/romaneio/import",{method:"POST",body:le});if(!fe.ok){const yn=await fe.json();throw new Error(yn.detail||"Falha ao importar romaneio")}const We=await fe.json();Y(!0),We.session_id&&oe(We.session_id),xe(null),Le.current&&(Le.current.value="")}catch(fe){ee(fe.message)}finally{Be(!1)}},Br=async()=>{if(!U){ee("Selecione arquivo para importar");return}Be(!0),ee(null);const le=new FormData;le.append("file",U);try{const fe=await fetch("/api/session/romaneio/import-additional",{method:"POST",body:le});if(!fe.ok){const yn=await fe.json();throw new Error(yn.detail||"Falha ao importar adicional")}const We=await fe.json();We.session_id&&oe(We.session_id),xe(null),Le.current&&(Le.current.value="")}catch(fe){ee(fe.message)}finally{Be(!1)}},vr=async()=>{Be(!0),ee(null);try{const le=await fetch("/api/session/report");if(!le.ok){const We=await le.json();throw new Error(We.detail||"Falha ao gerar relatrio")}const fe=await le.json();ne(fe)}catch(le){ee(le.message)}finally{Be(!1)}},Wt=async()=>{Be(!0),ee(null),ye([]);try{const le=await fetch("/api/routes/optimize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({num_deliverers:Number(Q)})});if(!le.ok){const We=await le.json();throw new Error(We.detail||"Falha ao otimizar rotas")}const fe=await le.json();ye(fe.routes||[])}catch(le){ee(le.message)}finally{Be(!1)}},sr=async(le,fe)=>{try{const We=await fetch("/api/routes/assign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({route_id:le,deliverer_id:Number(fe)})});if(!We.ok){const yn=await We.json();throw new Error(yn.detail||"Falha ao atribuir")}Xe(yn=>({...yn,[le]:fe}))}catch(We){ee(We.message)}},Je=async()=>{if(confirm(" Tem certeza? Isso apagar todos os romaneios e rotas atuais.")){Be(!0);try{await fetch("/api/session/cancel-import",{method:"POST"}),Y(!1),oe(null),ne(null),ye([]),Xe({}),M(""),xe(null),s("simple")}catch(le){ee("Erro ao cancelar: "+le.message)}finally{Be(!1)}}},jr=async()=>{if(!(Me.length>0&&Me.every(fe=>Te[fe.route_id]))){ee("Selecione um entregador para cada rota antes de iniciar.");return}Be(!0),ee(null);try{const fe=await fetch("/api/routes/send",{method:"POST"});if(!fe.ok){const We=await fe.json();throw new Error(We.detail||"Falha ao enviar rotas")}}catch(fe){ee(fe.message)}finally{Be(!1)}},xn=Me.length>0&&Me.every(le=>Te[le.route_id]);return x.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[x.jsxs("div",{className:`rounded-3xl p-6 shadow-lg text-white bg-gradient-to-r from-purple-600 to-blue-600 ${e.isDesktop?"mb-8":"mb-5"}`,children:[x.jsxs("h2",{className:`font-bold flex items-center gap-2 mb-2 ${e.isDesktop?"text-3xl":"text-2xl"}`,children:[x.jsx(hi,{size:e.isDesktop?36:32})," Anlise de Rota com IA"]}),x.jsx("p",{className:`${e.isDesktop?"text-base":"text-purple-100"} opacity-90`,children:"Cole endereos ou importe romaneio. A IA te diz se vale a pena."})]}),x.jsxs("div",{className:`grid gap-3 ${e.isDesktop?"grid-cols-4":"grid-cols-2"}`,children:[x.jsxs("button",{onClick:()=>s("simple"),className:`${e.isDesktop?"py-4 px-6":"py-3 px-4"} rounded-xl font-bold transition-all flex items-center justify-center ${n==="simple"?"bg-purple-600 text-white shadow-lg scale-105":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[x.jsx(hi,{size:e.isDesktop?20:18,className:"mr-2"}),e.isDesktop?"Anlise Manual":"Colar"]}),x.jsxs("button",{onClick:()=>s("import"),className:`${e.isDesktop?"py-4 px-6":"py-3 px-4"} rounded-xl font-bold transition-all flex items-center justify-center ${n==="import"?"bg-blue-600 text-white shadow-lg scale-105":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[x.jsx(Qo,{size:e.isDesktop?20:18,className:"mr-2"}),e.isDesktop?"Importar Arquivo":"Importar"]})]}),Re&&x.jsxs("div",{className:`bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 flex gap-3 ${e.isDesktop?"text-base":"text-sm"}`,children:[x.jsx(ng,{className:"text-red-600 flex-shrink-0",size:e.isDesktop?24:20}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-bold text-red-800 dark:text-red-300",children:"Erro detectado"}),x.jsx("p",{className:"text-red-700 dark:text-red-400 mt-1",children:Re})]}),x.jsx("button",{onClick:()=>ee(null),className:"text-red-500 hover:text-red-700",children:""})]}),n==="simple"&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 ${e.isDesktop?"p-6":"p-4"}`,children:[x.jsxs("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2 flex justify-between",children:[x.jsx("span",{children:" Cola os Endereos (um por linha)"}),x.jsxs("span",{className:"text-xs font-normal text-gray-400",children:[c.trim()?c.trim().split(`
`).length:0," linhas"]})]}),x.jsx("textarea",{value:c,onChange:le=>h(le.target.value),placeholder:`Rua Principado de Mnaco, 37, Apt 501
Rua Mena Barreto, 161, Loja BMRIO
Rua General Polidoro, 322, 301
...`,className:`w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all outline-none resize-none ${e.isDesktop?"h-48 p-4":"h-40 p-3"}`})]}),x.jsxs("div",{className:`grid gap-4 ${e.isDesktop?"grid-cols-2":"grid-cols-1"}`,children:[x.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 ${e.isDesktop?"p-6":"p-4"}`,children:[x.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:" Valor Total da Rota (R$)"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-bold",children:"R$"}),x.jsx("input",{type:"number",value:g,onChange:le=>_(le.target.value),placeholder:"150.00",className:"w-full pl-10 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-bold text-lg outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx("button",{onClick:ze,disabled:v||!c.trim()||!g,className:"col-span-1 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all shadow-md hover:shadow-lg active:scale-95 flex flex-col items-center justify-center gap-1 p-2",children:v?x.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"}):x.jsxs(x.Fragment,{children:[x.jsx(hi,{size:24}),x.jsx("span",{children:"Analisar"})]})}),x.jsxs("button",{onClick:Qe,className:"col-span-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-200 font-bold rounded-xl transition-all flex flex-col items-center justify-center gap-1 p-2",children:[x.jsx(Qo,{size:24,className:"rotate-180"}),x.jsx("span",{children:"Limpar"})]})]})]}),A&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:`bg-gradient-to-r rounded-xl p-6 text-white ${((Cr=A.header)==null?void 0:Cr[" SCORE"])>=7?"from-green-500 to-emerald-600":((Ot=A.header)==null?void 0:Ot[" SCORE"])>=5?"from-yellow-500 to-orange-600":"from-red-500 to-pink-600"}`,children:[x.jsxs("div",{className:`grid gap-4 ${e.isDesktop?"grid-cols-4":"grid-cols-2"}`,children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm opacity-80",children:"Valor"}),x.jsx("p",{className:"text-2xl font-bold",children:(rt=A.header)==null?void 0:rt[" VALOR"]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm opacity-80",children:"Tipo"}),x.jsx("p",{className:`font-bold ${String(((Ke=A.header)==null?void 0:Ke[" TIPO"])||"").length>10?"text-xl":"text-2xl"}`,children:(Fr=A.header)==null?void 0:Fr[" TIPO"]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm opacity-80",children:"Score"}),x.jsx("p",{className:"text-3xl font-bold",children:(Ee=A.header)==null?void 0:Ee[" SCORE"]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm opacity-80",children:"Ganho/hora"}),x.jsx("p",{className:"text-2xl font-bold",children:(zr=A.financial)==null?void 0:zr.hourly})]})]}),x.jsx("p",{className:"mt-4 text-sm font-semibold",children:(Ei=A.header)==null?void 0:Ei[" RECOMENDAO"]})]}),A.top_drops&&A.top_drops.length>0&&x.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-xl p-5 border-2 border-orange-200 dark:border-orange-700",children:[x.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2 text-lg",children:[x.jsx(wo,{size:22,className:"text-orange-600"})," Top Drops (Ruas com Maior Concentrao)"]}),x.jsx("div",{className:"space-y-3",children:A.top_drops.map((le,fe)=>x.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all transform hover:scale-102 ${fe===0?"bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 border-yellow-300 dark:border-yellow-600 shadow-md":fe===1?"bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30 border-blue-300 dark:border-blue-600":"bg-gradient-to-r from-gray-100 to-slate-100 dark:from-gray-700 dark:to-slate-700 border-gray-300 dark:border-gray-600"}`,children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("span",{className:"text-4xl",children:le.emoji}),x.jsxs("div",{children:[x.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg",children:le.street}),x.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-semibold",children:[le.count," endereos"]})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:le.percentage}),x.jsx("p",{className:"text-xs text-gray-500",children:"concentrao"})]})]},fe))})]}),x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[x.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:" Perfil da Rota"}),x.jsxs("div",{className:`grid gap-3 ${e.isDesktop?"grid-cols-4":"grid-cols-2"}`,children:[x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[x.jsx("p",{className:"text-xs text-gray-500",children:"Tipo"}),x.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(Bn=A.profile)==null?void 0:Bn.type})]}),x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[x.jsx("p",{className:"text-xs text-gray-500",children:"Comercial"}),x.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(Ai=A.profile)==null?void 0:Ai.commercial_pct})]}),x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[x.jsx("p",{className:"text-xs text-gray-500",children:"Pacotes"}),x.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(rn=A.profile)==null?void 0:rn.total_packages})]}),x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[x.jsx("p",{className:"text-xs text-gray-500",children:"Paradas"}),x.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(bi=A.profile)==null?void 0:bi.unique_stops})]})]})]}),x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[x.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:" Prs"}),x.jsx("ul",{className:"space-y-2",children:(Gt=(jn=A.analysis)==null?void 0:jn.pros)==null?void 0:Gt.map((le,fe)=>x.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300",children:[x.jsx("span",{className:"text-green-500 font-bold mt-0.5",children:""}),le]},fe))})]}),x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[x.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-3",children:" Contras"}),x.jsx("ul",{className:"space-y-2",children:(Ur=(Si=A.analysis)==null?void 0:Si.cons)==null?void 0:Ur.map((le,fe)=>x.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300",children:[x.jsx("span",{className:"text-red-500 font-bold mt-0.5",children:""}),le]},fe))})]}),x.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:[x.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-2",children:" Comentrio da IA"}),x.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-400 whitespace-pre-wrap leading-relaxed",children:A.ai_comment})]}),x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[x.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 text-white font-bold flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Es,{size:20})," Minimapa da Rota"]}),X&&x.jsx("span",{className:"text-sm",children:" Gerando..."})]}),R?x.jsx("iframe",{src:R,className:"w-full h-96 border-0",title:"Mapa da Rota",allowFullScreen:""}):x.jsxs("div",{className:"p-6 text-center",children:[x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:" Geocodificao lenta (3-5 seg por endereo)"}),x.jsx("button",{onClick:ce,disabled:X,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:X?" Gerando Mapa...":" Gerar Mapa"})]})]})]})]}),n==="import"&&x.jsxs("div",{className:"space-y-4",children:[x.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 ${e.isDesktop?"p-6":"p-4"}`,children:x.jsxs("div",{onClick:()=>{var le;return(le=Le.current)==null?void 0:le.click()},className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-8 text-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[x.jsx("input",{type:"file",ref:Le,onChange:Zt,accept:".xlsx,.xls",className:"hidden"}),x.jsx(Qo,{size:48,className:"mx-auto text-gray-400 mb-4"}),U?x.jsxs("div",{children:[x.jsx("p",{className:"font-bold text-green-600 text-lg",children:U.name}),x.jsxs("p",{className:"text-sm text-gray-500",children:[(U.size/1024).toFixed(1)," KB"]})]}):x.jsxs("div",{children:[x.jsx("p",{className:"font-bold text-gray-700 dark:text-gray-300 text-lg",children:"Clique ou arraste arquivo Excel"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Suporta .xlsx ou .xls (Shopee)"})]})]})}),x.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 ${e.isDesktop?"p-6":"p-4"}`,children:[x.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:" Valor Inicial da Sesso (R$)"}),x.jsxs("div",{className:"relative",children:[x.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-bold",children:"R$"}),x.jsx("input",{type:"number",value:k,onChange:le=>M(le.target.value),placeholder:"500.00",className:"w-full pl-10 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-bold text-lg outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),B?x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:`grid gap-3 ${e.isDesktop?"grid-cols-2":"grid-cols-1"}`,children:[x.jsxs("button",{onClick:Br,disabled:K||!U,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:[x.jsx(Qo,{size:20}),K?"...":"+ Add Outro Romaneio"]}),x.jsxs("button",{onClick:vr,disabled:K,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:[x.jsx(hi,{size:20}),K?"...":"Gerar Relatrio Completo"]})]}),x.jsx("button",{onClick:Je,disabled:K,className:"w-full bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400 font-bold py-3 rounded-lg transition-colors border border-red-200 dark:border-red-800/50 text-sm",children:" Cancelar Sesso (Limpar tudo)"})]}):x.jsx("button",{onClick:gt,disabled:K||!U||!k,className:`w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all shadow-md hover:shadow-lg active:scale-95 flex items-center justify-center gap-2 ${e.isDesktop?"py-4 text-lg":"py-3"}`,children:K?x.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"}):x.jsxs(x.Fragment,{children:[x.jsx(Qo,{size:24}),x.jsx("span",{children:"Importar Romaneio"})]})}),V&&x.jsxs("div",{className:"space-y-4 animate-fade-in",children:[x.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4 flex items-center gap-3",children:[x.jsx("div",{className:"bg-green-100 p-2 rounded-full text-green-600",children:x.jsx(hi,{size:24})}),x.jsxs("div",{children:[x.jsx("p",{className:"font-bold text-green-900 dark:text-green-300",children:"Sesso Gerada!"}),x.jsx("p",{className:"text-sm text-green-800 dark:text-green-400",children:"Prximo: Otimizar e distribuir entregadores"})]})]}),V.formatted&&x.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 space-y-4 ${e.isDesktop?"p-6":"p-4"}`,children:[x.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[x.jsx(wo,{size:20,className:"text-blue-600"}),"Anlise da Sesso"]}),x.jsxs("div",{className:`grid gap-3 ${e.isDesktop?"grid-cols-4":"grid-cols-2"}`,children:[x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center",children:[x.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Valor"}),x.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg",children:(Ls=V.formatted.header)==null?void 0:Ls.value})]}),x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center",children:[x.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Tipo"}),x.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg",children:(vt=V.formatted.header)==null?void 0:vt.type})]}),x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center",children:[x.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Score"}),x.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-2xl text-blue-600",children:(me=V.formatted.header)==null?void 0:me.score})]}),x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center",children:[x.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Status"}),x.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-sm",children:(St=V.formatted.header)==null?void 0:St.recommendation})]})]}),x.jsxs("div",{className:`grid gap-3 ${e.isDesktop?"grid-cols-4":"grid-cols-2"}`,children:[x.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[x.jsx("p",{className:"text-xs text-blue-600 font-bold",children:"Ganho/Hora"}),x.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(lt=V.formatted.earnings)==null?void 0:lt.hourly})]}),x.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[x.jsx("p",{className:"text-xs text-blue-600 font-bold",children:"Ganho/Pct"}),x.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(ut=V.formatted.earnings)==null?void 0:ut.package})]}),x.jsxs("div",{className:`bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg ${e.isDesktop,"col-span-2"}`,children:[x.jsx("p",{className:"text-xs text-blue-600 font-bold",children:"Tempo Total Est."}),x.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:(Hr=V.formatted.earnings)==null?void 0:Hr.time_estimate})]})]}),((Ni=V.formatted.top_drops)==null?void 0:Ni.length)>0&&x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white mb-2",children:" Top Drops"}),x.jsx("div",{className:"grid gap-2 grid-cols-1 md:grid-cols-2",children:V.formatted.top_drops.map((le,fe)=>x.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded-lg p-3 border border-gray-100 dark:border-gray-600",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("span",{className:"text-2xl",children:le.emoji}),x.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:le.street})]}),x.jsxs("span",{className:"text-xs font-bold bg-white dark:bg-gray-600 px-2 py-1 rounded text-gray-600 dark:text-gray-300",children:[le.count," entregas"]})]},fe))})]})]}),V.minimap_url&&x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[x.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-4 text-white font-bold flex items-center gap-2",children:[x.jsx(Es,{size:20})," Minimapa da Sesso"]}),x.jsx("iframe",{src:V.minimap_url,className:"w-full h-96 border-0",title:"Minimapa da Sesso",allowFullScreen:""})]})]}),B&&x.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 ${e.isDesktop?"p-6":"p-4"}`,children:[x.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:" Quantos Entregadores para dividir?"}),x.jsxs("div",{className:`flex gap-3 ${e.isDesktop?"flex-row items-center":"flex-col"}`,children:[x.jsxs("div",{className:"relative flex-1",children:[x.jsx(pi,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),x.jsx("input",{type:"number",min:"1",max:"10",value:Q,onChange:le=>Se(le.target.value),className:"w-full pl-10 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-bold text-lg"})]}),x.jsx("button",{onClick:Wt,disabled:K||!B,className:`bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-bold px-8 py-3 rounded-lg transition-colors shadow-lg hover:shadow-xl ${e.isDesktop?"":"w-full"}`,children:K?"Processando...":" Otimizar Rotas"})]})]}),Me.length>0&&x.jsxs("div",{className:"space-y-4 animate-fade-in-up",children:[x.jsxs("h3",{className:"font-bold text-xl text-gray-900 dark:text-white flex items-center gap-2",children:[x.jsx(pi,{size:24,className:"text-purple-600"}),"Atribuio de Entregadores"]}),x.jsx("div",{className:`grid gap-4 ${e.isDesktop?"grid-cols-2":"grid-cols-1"}`,children:Me.map((le,fe)=>x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-5 border-2 border-gray-100 dark:border-gray-700 hover:border-purple-200 dark:hover:border-purple-900 transition-all shadow-sm",children:[x.jsxs("div",{className:"flex justify-between items-start mb-3",children:[x.jsxs("div",{children:[x.jsxs("p",{className:"font-bold text-lg text-gray-900 dark:text-white",children:["Rota ",fe+1]}),x.jsxs("p",{className:"text-sm text-gray-500",children:[le.total_stops??"-"," paradas  ",le.total_packages??"-"," pacotes"]})]}),x.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-3 py-1 rounded-full text-xs font-bold",children:le.percentage_load?`${le.percentage_load}% volume`:"Auto"})]}),le.map_url&&x.jsx("div",{className:"mb-4",children:x.jsxs("a",{href:le.map_url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-sm font-bold text-purple-600 dark:text-purple-400 hover:underline bg-purple-50 dark:bg-purple-900/20 px-3 py-2 rounded-lg w-full justify-center transition-colors hover:bg-purple-100",children:[x.jsx(Es,{size:16})," Ver mapa no Google M."]})}),x.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Entregador Responsvel"}),x.jsxs("select",{value:Te[le.route_id]||"",onChange:We=>sr(le.route_id,We.target.value),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white font-medium focus:ring-2 focus:ring-purple-500 outline-none",children:[x.jsx("option",{value:"",children:"-- Selecione --"}),Oe.map(We=>x.jsx("option",{value:We.id,children:We.name},We.id))]})]},le.route_id))}),x.jsxs("div",{className:"space-y-3 pt-4",children:[x.jsx("button",{onClick:jr,disabled:!xn||K,className:`w-full ${xn?"bg-green-600 hover:bg-green-700 shadow-green-500/30":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed"} text-white font-bold py-4 rounded-xl transition-all shadow-lg text-lg flex items-center justify-center gap-2`,children:K?"Enviando...":x.jsxs(x.Fragment,{children:[x.jsx(gx,{size:24}),"Confirmar e Enviar Rotas"]})}),x.jsxs("button",{onClick:()=>window.location.href="/?tab=separation",className:"w-full bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:[x.jsx(no,{size:20}),"Ir para Modo Separao"]})]})]})]}),Pe&&x.jsx(Kx,{onScan:le=>{if(le&&le.length>0){const fe=le.join(`
`);h(We=>We?We+`
`+fe:fe)}},onClose:()=>ft(!1)})]})}var Ae;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ae||(Ae={}));var Af=new Map([[Ae.QR_CODE,"QR_CODE"],[Ae.AZTEC,"AZTEC"],[Ae.CODABAR,"CODABAR"],[Ae.CODE_39,"CODE_39"],[Ae.CODE_93,"CODE_93"],[Ae.CODE_128,"CODE_128"],[Ae.DATA_MATRIX,"DATA_MATRIX"],[Ae.MAXICODE,"MAXICODE"],[Ae.ITF,"ITF"],[Ae.EAN_13,"EAN_13"],[Ae.EAN_8,"EAN_8"],[Ae.PDF_417,"PDF_417"],[Ae.RSS_14,"RSS_14"],[Ae.RSS_EXPANDED,"RSS_EXPANDED"],[Ae.UPC_A,"UPC_A"],[Ae.UPC_E,"UPC_E"],[Ae.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),bf;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(bf||(bf={}));function Jx(e){return Object.values(Ae).includes(e)}var rs;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(rs||(rs={}));var Or=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[rs.SCAN_TYPE_CAMERA,rs.SCAN_TYPE_FILE],e}(),fg=function(){function e(n,s){this.format=n,this.formatName=s}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!Af.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,Af.get(n))},e}(),Sf=function(){function e(){}return e.createFromText=function(n){var s={text:n};return{decodedText:n,result:s}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}(),qu;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(qu||(qu={}));var gg=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:qu.UNKWOWN_ERROR}},e}(),pg=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,s){(this.verbose||s===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function qr(e){return typeof e>"u"||e===null}function $x(e,n,s){return e>s?s:e<n?n:e}var ro=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),mt=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(n){return"Last Match: ".concat(n)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Nf=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),mg=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,s){if(typeof n!="object"){var c=typeof n;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(c,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(h),_=Object.keys(n),A=0,b=_;A<b.length;A++){var v=b[A];if(g.has(v))return s.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},e}(),Ju={exports:{}};(function(e,n){(function(s,c){c(n)})(Vs,function(s){function c(S){return S==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,t){S.__proto__=t}||function(S,t){for(var r in t)t.hasOwnProperty(r)&&(S[r]=t[r])};function g(S,t){h(S,t);function r(){this.constructor=S}S.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function _(S,t){var r=Object.setPrototypeOf;r?r(S,t):S.__proto__=t}function A(S,t){t===void 0&&(t=S.constructor);var r=Error.captureStackTrace;r&&r(S,t)}var b=function(S){g(t,S);function t(r){var o=this.constructor,a=S.call(this,r)||this;return Object.defineProperty(a,"name",{value:o.name,enumerable:!1}),_(a,o.prototype),A(a),a}return t}(Error);class v extends b{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}v.kind="Exception";class D extends v{}D.kind="ArgumentException";class R extends v{}R.kind="IllegalArgumentException";class H{constructor(t){if(this.binarizer=t,t===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,o,a){const l=this.binarizer.getLuminanceSource().crop(t,r,o,a);return new H(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new H(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new H(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class X extends v{static getChecksumInstance(){return new X}}X.kind="ChecksumException";class te{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class U{static arraycopy(t,r,o,a,l){for(;l--;)o[a++]=t[r++]}static currentTimeMillis(){return Date.now()}}class xe extends v{}xe.kind="IndexOutOfBoundsException";class k extends xe{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}k.kind="ArrayIndexOutOfBoundsException";class M{static fill(t,r){for(let o=0,a=t.length;o<a;o++)t[o]=r}static fillWithin(t,r,o,a){M.rangeCheck(t.length,r,o);for(let l=r;l<o;l++)t[l]=a}static rangeCheck(t,r,o){if(r>o)throw new R("fromIndex("+r+") > toIndex("+o+")");if(r<0)throw new k(r);if(o>t)throw new k(o)}static asList(...t){return t}static create(t,r,o){return Array.from({length:t}).map(l=>Array.from({length:r}).fill(o))}static createInt32Array(t,r,o){return Array.from({length:t}).map(l=>Int32Array.from({length:r}).fill(o))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let o=0,a=t.length;o<a;o++)if(t[o]!==r[o])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const o of t)r=31*r+o;return r}static fillUint8Array(t,r){for(let o=0;o!==t.length;o++)t[o]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const o=new Uint8Array(r);return o.set(t),o}return t.slice(0,r)}static copyOfRange(t,r,o){const a=o-r,l=new Int32Array(a);return U.arraycopy(t,r,l,0,a),l}static binarySearch(t,r,o){o===void 0&&(o=M.numberComparator);let a=0,l=t.length-1;for(;a<=l;){const d=l+a>>1,f=o(r,t[d]);if(f>0)a=d+1;else if(f<0)l=d-1;else return d}return-a-1}static numberComparator(t,r){return t-r}}class B{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let o=31;return r=t<<16,r!==0&&(o-=16,t=r),r=t<<8,r!==0&&(o-=8,t=r),r=t<<4,r!==0&&(o-=4,t=r),r=t<<2,r!==0&&(o-=2,t=r),o-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Y{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=Y.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=Y.makeArray(t);U.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const o=this.bits;let a=Math.floor(t/32),l=o[a];l&=~((1<<(t&31))-1);const d=o.length;for(;l===0;){if(++a===d)return r;l=o[a]}const f=a*32+B.numberOfTrailingZeros(l);return f>r?r:f}getNextUnset(t){const r=this.size;if(t>=r)return r;const o=this.bits;let a=Math.floor(t/32),l=~o[a];l&=~((1<<(t&31))-1);const d=o.length;for(;l===0;){if(++a===d)return r;l=~o[a]}const f=a*32+B.numberOfTrailingZeros(l);return f>r?r:f}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new R;if(r===t)return;r--;const o=Math.floor(t/32),a=Math.floor(r/32),l=this.bits;for(let d=o;d<=a;d++){const f=d>o?0:t&31,y=(2<<(d<a?31:r&31))-(1<<f);l[d]|=y}}clear(){const t=this.bits.length,r=this.bits;for(let o=0;o<t;o++)r[o]=0}isRange(t,r,o){if(r<t||t<0||r>this.size)throw new R;if(r===t)return!0;r--;const a=Math.floor(t/32),l=Math.floor(r/32),d=this.bits;for(let f=a;f<=l;f++){const m=f>a?0:t&31,C=(2<<(f<l?31:r&31))-(1<<m)&4294967295;if((d[f]&C)!==(o?C:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let o=r;o>0;o--)this.appendBit((t>>o-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let o=0;o<r;o++)this.appendBit(t.get(o))}xor(t){if(this.size!==t.size)throw new R("Sizes don't match");const r=this.bits;for(let o=0,a=r.length;o<a;o++)r[o]^=t.bits[o]}toBytes(t,r,o,a){for(let l=0;l<a;l++){let d=0;for(let f=0;f<8;f++)this.get(t)&&(d|=1<<7-f),t++;r[o+l]=d}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),o=r+1,a=this.bits;for(let l=0;l<o;l++){let d=a[l];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,t[r-l]=d}if(this.size!==o*32){const l=o*32-this.size;let d=t[0]>>>l;for(let f=1;f<o;f++){const m=t[f];d|=m<<32-l,t[f-1]=d,d=m>>>l}t[o-1]=d}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof Y))return!1;const r=t;return this.size===r.size&&M.equals(this.bits,r.bits)}hashCode(){return 31*this.size+M.hashCode(this.bits)}toString(){let t="";for(let r=0,o=this.size;r<o;r++)r&7||(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new Y(this.size,this.bits.slice())}}var he;(function(S){S[S.OTHER=0]="OTHER",S[S.PURE_BARCODE=1]="PURE_BARCODE",S[S.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",S[S.TRY_HARDER=3]="TRY_HARDER",S[S.CHARACTER_SET=4]="CHARACTER_SET",S[S.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",S[S.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",S[S.ASSUME_GS1=7]="ASSUME_GS1",S[S.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",S[S.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",S[S.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(he||(he={}));var oe=he;class V extends v{static getFormatInstance(){return new V}}V.kind="FormatException";var ne;(function(S){S[S.Cp437=0]="Cp437",S[S.ISO8859_1=1]="ISO8859_1",S[S.ISO8859_2=2]="ISO8859_2",S[S.ISO8859_3=3]="ISO8859_3",S[S.ISO8859_4=4]="ISO8859_4",S[S.ISO8859_5=5]="ISO8859_5",S[S.ISO8859_6=6]="ISO8859_6",S[S.ISO8859_7=7]="ISO8859_7",S[S.ISO8859_8=8]="ISO8859_8",S[S.ISO8859_9=9]="ISO8859_9",S[S.ISO8859_10=10]="ISO8859_10",S[S.ISO8859_11=11]="ISO8859_11",S[S.ISO8859_13=12]="ISO8859_13",S[S.ISO8859_14=13]="ISO8859_14",S[S.ISO8859_15=14]="ISO8859_15",S[S.ISO8859_16=15]="ISO8859_16",S[S.SJIS=16]="SJIS",S[S.Cp1250=17]="Cp1250",S[S.Cp1251=18]="Cp1251",S[S.Cp1252=19]="Cp1252",S[S.Cp1256=20]="Cp1256",S[S.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",S[S.UTF8=22]="UTF8",S[S.ASCII=23]="ASCII",S[S.Big5=24]="Big5",S[S.GB18030=25]="GB18030",S[S.EUC_KR=26]="EUC_KR"})(ne||(ne={}));class Q{constructor(t,r,o,...a){this.valueIdentifier=t,this.name=o,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=a,Q.VALUE_IDENTIFIER_TO_ECI.set(t,this),Q.NAME_TO_ECI.set(o,this);const l=this.values;for(let d=0,f=l.length;d!==f;d++){const m=l[d];Q.VALUES_TO_ECI.set(m,this)}for(const d of a)Q.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new V("incorect value");const r=Q.VALUES_TO_ECI.get(t);if(r===void 0)throw new V("incorect value");return r}static getCharacterSetECIByName(t){const r=Q.NAME_TO_ECI.get(t);if(r===void 0)throw new V("incorect value");return r}equals(t){if(!(t instanceof Q))return!1;const r=t;return this.getName()===r.getName()}}Q.VALUE_IDENTIFIER_TO_ECI=new Map,Q.VALUES_TO_ECI=new Map,Q.NAME_TO_ECI=new Map,Q.Cp437=new Q(ne.Cp437,Int32Array.from([0,2]),"Cp437"),Q.ISO8859_1=new Q(ne.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Q.ISO8859_2=new Q(ne.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Q.ISO8859_3=new Q(ne.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Q.ISO8859_4=new Q(ne.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Q.ISO8859_5=new Q(ne.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Q.ISO8859_6=new Q(ne.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Q.ISO8859_7=new Q(ne.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Q.ISO8859_8=new Q(ne.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Q.ISO8859_9=new Q(ne.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Q.ISO8859_10=new Q(ne.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Q.ISO8859_11=new Q(ne.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Q.ISO8859_13=new Q(ne.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Q.ISO8859_14=new Q(ne.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Q.ISO8859_15=new Q(ne.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Q.ISO8859_16=new Q(ne.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Q.SJIS=new Q(ne.SJIS,20,"SJIS","Shift_JIS"),Q.Cp1250=new Q(ne.Cp1250,21,"Cp1250","windows-1250"),Q.Cp1251=new Q(ne.Cp1251,22,"Cp1251","windows-1251"),Q.Cp1252=new Q(ne.Cp1252,23,"Cp1252","windows-1252"),Q.Cp1256=new Q(ne.Cp1256,24,"Cp1256","windows-1256"),Q.UnicodeBigUnmarked=new Q(ne.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Q.UTF8=new Q(ne.UTF8,26,"UTF8","UTF-8"),Q.ASCII=new Q(ne.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Q.Big5=new Q(ne.Big5,28,"Big5"),Q.GB18030=new Q(ne.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Q.EUC_KR=new Q(ne.EUC_KR,30,"EUC_KR","EUC-KR");class Se extends v{}Se.kind="UnsupportedOperationException";class Me{static decode(t,r){const o=this.encodingName(r);return this.customDecoder?this.customDecoder(t,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(t,o):new TextDecoder(o).decode(t)}static shouldDecodeOnFallback(t){return!Me.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const o=this.encodingName(r);return this.customEncoder?this.customEncoder(t,o):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof Q?t:Q.getCharacterSetECIByName(t)}static decodeFallback(t,r){const o=this.encodingCharacterSet(r);if(Me.isDecodeFallbackSupported(o)){let a="";for(let l=0,d=t.length;l<d;l++){let f=t[l].toString(16);f.length<2&&(f="0"+f),a+="%"+f}return decodeURIComponent(a)}if(o.equals(Q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new Se(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(Q.UTF8)||t.equals(Q.ISO8859_1)||t.equals(Q.ASCII)}static encodeFallback(t){const o=btoa(unescape(encodeURIComponent(t))).split(""),a=[];for(let l=0;l<o.length;l++)a.push(o[l].charCodeAt(0));return new Uint8Array(a)}}class ye{static castAsNonUtf8Char(t,r=null){const o=r?r.getName():this.ISO88591;return Me.decode(new Uint8Array([t]),o)}static guessEncoding(t,r){if(r!=null&&r.get(oe.CHARACTER_SET)!==void 0)return r.get(oe.CHARACTER_SET).toString();const o=t.length;let a=!0,l=!0,d=!0,f=0,m=0,y=0,C=0,N=0,I=0,P=0,F=0,z=0,Z=0,q=0;const de=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let ge=0;ge<o&&(a||l||d);ge++){const ae=t[ge]&255;d&&(f>0?ae&128?f--:d=!1:ae&128&&(ae&64?(f++,ae&32?(f++,ae&16?(f++,ae&8?d=!1:C++):y++):m++):d=!1)),a&&(ae>127&&ae<160?a=!1:ae>159&&(ae<192||ae===215||ae===247)&&q++),l&&(N>0?ae<64||ae===127||ae>252?l=!1:N--:ae===128||ae===160||ae>239?l=!1:ae>160&&ae<224?(I++,F=0,P++,P>z&&(z=P)):ae>127?(N++,P=0,F++,F>Z&&(Z=F)):(P=0,F=0))}return d&&f>0&&(d=!1),l&&N>0&&(l=!1),d&&(de||m+y+C>0)?ye.UTF8:l&&(ye.ASSUME_SHIFT_JIS||z>=3||Z>=3)?ye.SHIFT_JIS:a&&l?z===2&&I===2||q*10>=o?ye.SHIFT_JIS:ye.ISO88591:a?ye.ISO88591:l?ye.SHIFT_JIS:d?ye.UTF8:ye.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let o=-1;function a(d,f,m,y,C,N){if(d==="%%")return"%";if(r[++o]===void 0)return;d=y?parseInt(y.substr(1)):void 0;let I=C?parseInt(C.substr(1)):void 0,P;switch(N){case"s":P=r[o];break;case"c":P=r[o][0];break;case"f":P=parseFloat(r[o]).toFixed(d);break;case"p":P=parseFloat(r[o]).toPrecision(d);break;case"e":P=parseFloat(r[o]).toExponential(d);break;case"x":P=parseInt(r[o]).toString(I||16);break;case"d":P=parseFloat(parseInt(r[o],I||10).toPrecision(d)).toFixed(0);break}P=typeof P=="object"?JSON.stringify(P):(+P).toString(I);let F=parseInt(m),z=m&&m[0]+""=="0"?"0":" ";for(;P.length<F;)P=f!==void 0?P+z:z+P;return P}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(l,a)}static getBytes(t,r){return Me.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}ye.SHIFT_JIS=Q.SJIS.getName(),ye.GB2312="GB2312",ye.ISO88591=Q.ISO8859_1.getName(),ye.EUC_JP="EUC_JP",ye.UTF8=Q.UTF8.getName(),ye.PLATFORM_DEFAULT_ENCODING=ye.UTF8,ye.ASSUME_SHIFT_JIS=!1;class Te{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=ye.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,o){for(let a=r;r<r+o;a++)this.append(t[a]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class Xe{constructor(t,r,o,a){if(this.width=t,this.height=r,this.rowSize=o,this.bits=a,r==null&&(r=t),this.height=r,t<1||r<1)throw new R("Both dimensions must be greater than 0");o==null&&(o=Math.floor((t+31)/32)),this.rowSize=o,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,o=t[0].length,a=new Xe(o,r);for(let l=0;l<r;l++){const d=t[l];for(let f=0;f<o;f++)d[f]&&a.set(f,l)}return a}static parseFromString(t,r,o){if(t===null)throw new R("stringRepresentation cannot be null");const a=new Array(t.length);let l=0,d=0,f=-1,m=0,y=0;for(;y<t.length;)if(t.charAt(y)===`
`||t.charAt(y)==="\r"){if(l>d){if(f===-1)f=l-d;else if(l-d!==f)throw new R("row lengths do not match");d=l,m++}y++}else if(t.substring(y,y+r.length)===r)y+=r.length,a[l]=!0,l++;else if(t.substring(y,y+o.length)===o)y+=o.length,a[l]=!1,l++;else throw new R("illegal character encountered: "+t.substring(y));if(l>d){if(f===-1)f=l-d;else if(l-d!==f)throw new R("row lengths do not match");m++}const C=new Xe(f,m);for(let N=0;N<l;N++)a[N]&&C.set(Math.floor(N%f),Math.floor(N/f));return C}get(t,r){const o=r*this.rowSize+Math.floor(t/32);return(this.bits[o]>>>(t&31)&1)!==0}set(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]|=1<<(t&31)&4294967295}unset(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]&=~(1<<(t&31)&4294967295)}flip(t,r){const o=r*this.rowSize+Math.floor(t/32);this.bits[o]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new R("input matrix dimensions do not match");const r=new Y(Math.floor(this.width/32)+1),o=this.rowSize,a=this.bits;for(let l=0,d=this.height;l<d;l++){const f=l*o,m=t.getRow(l,r).getBitArray();for(let y=0;y<o;y++)a[f+y]^=m[y]}}clear(){const t=this.bits,r=t.length;for(let o=0;o<r;o++)t[o]=0}setRegion(t,r,o,a){if(r<0||t<0)throw new R("Left and top must be nonnegative");if(a<1||o<1)throw new R("Height and width must be at least 1");const l=t+o,d=r+a;if(d>this.height||l>this.width)throw new R("The region must fit inside the matrix");const f=this.rowSize,m=this.bits;for(let y=r;y<d;y++){const C=y*f;for(let N=t;N<l;N++)m[C+Math.floor(N/32)]|=1<<(N&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new Y(this.width):r.clear();const o=this.rowSize,a=this.bits,l=t*o;for(let d=0;d<o;d++)r.setBulk(d*32,a[l+d]);return r}setRow(t,r){U.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let o=new Y(t),a=new Y(t);for(let l=0,d=Math.floor((r+1)/2);l<d;l++)o=this.getRow(l,o),a=this.getRow(r-1-l,a),o.reverse(),a.reverse(),this.setRow(l,a),this.setRow(r-1-l,o)}getEnclosingRectangle(){const t=this.width,r=this.height,o=this.rowSize,a=this.bits;let l=t,d=r,f=-1,m=-1;for(let y=0;y<r;y++)for(let C=0;C<o;C++){const N=a[y*o+C];if(N!==0){if(y<d&&(d=y),y>m&&(m=y),C*32<l){let I=0;for(;!(N<<31-I&4294967295);)I++;C*32+I<l&&(l=C*32+I)}if(C*32+31>f){let I=31;for(;!(N>>>I);)I--;C*32+I>f&&(f=C*32+I)}}}return f<l||m<d?null:Int32Array.from([l,d,f-l+1,m-d+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let o=0;for(;o<r.length&&r[o]===0;)o++;if(o===r.length)return null;const a=o/t;let l=o%t*32;const d=r[o];let f=0;for(;!(d<<31-f&4294967295);)f++;return l+=f,Int32Array.from([l,a])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let o=r.length-1;for(;o>=0&&r[o]===0;)o--;if(o<0)return null;const a=Math.floor(o/t);let l=Math.floor(o%t)*32;const d=r[o];let f=31;for(;!(d>>>f);)f--;return l+=f,Int32Array.from([l,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Xe))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&M.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+M.hashCode(this.bits),t}toString(t="X ",r="  ",o=`
`){return this.buildToString(t,r,o)}buildToString(t,r,o){let a=new Te;for(let l=0,d=this.height;l<d;l++){for(let f=0,m=this.width;f<m;f++)a.append(this.get(f,l)?t:r);a.append(o)}return a.toString()}clone(){return new Xe(this.width,this.height,this.rowSize,this.bits.slice())}}class K extends v{static getNotFoundInstance(){return new K}}K.kind="NotFoundException";class Be extends te{constructor(t){super(t),this.luminances=Be.EMPTY,this.buckets=new Int32Array(Be.LUMINANCE_BUCKETS)}getBlackRow(t,r){const o=this.getLuminanceSource(),a=o.getWidth();r==null||r.getSize()<a?r=new Y(a):r.clear(),this.initArrays(a);const l=o.getRow(t,this.luminances),d=this.buckets;for(let m=0;m<a;m++)d[(l[m]&255)>>Be.LUMINANCE_SHIFT]++;const f=Be.estimateBlackPoint(d);if(a<3)for(let m=0;m<a;m++)(l[m]&255)<f&&r.set(m);else{let m=l[0]&255,y=l[1]&255;for(let C=1;C<a-1;C++){const N=l[C+1]&255;(y*4-m-N)/2<f&&r.set(C),m=y,y=N}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),o=t.getHeight(),a=new Xe(r,o);this.initArrays(r);const l=this.buckets;for(let m=1;m<5;m++){const y=Math.floor(o*m/5),C=t.getRow(y,this.luminances),N=Math.floor(r*4/5);for(let I=Math.floor(r/5);I<N;I++){const P=C[I]&255;l[P>>Be.LUMINANCE_SHIFT]++}}const d=Be.estimateBlackPoint(l),f=t.getMatrix();for(let m=0;m<o;m++){const y=m*r;for(let C=0;C<r;C++)(f[y+C]&255)<d&&a.set(C,m)}return a}createBinarizer(t){return new Be(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let o=0;o<Be.LUMINANCE_BUCKETS;o++)r[o]=0}static estimateBlackPoint(t){const r=t.length;let o=0,a=0,l=0;for(let C=0;C<r;C++)t[C]>l&&(a=C,l=t[C]),t[C]>o&&(o=t[C]);let d=0,f=0;for(let C=0;C<r;C++){const N=C-a,I=t[C]*N*N;I>f&&(d=C,f=I)}if(a>d){const C=a;a=d,d=C}if(d-a<=r/16)throw new K;let m=d-1,y=-1;for(let C=d-1;C>a;C--){const N=C-a,I=N*N*(d-C)*(o-t[C]);I>y&&(m=C,y=I)}return m<<Be.LUMINANCE_SHIFT}}Be.LUMINANCE_BITS=5,Be.LUMINANCE_SHIFT=8-Be.LUMINANCE_BITS,Be.LUMINANCE_BUCKETS=1<<Be.LUMINANCE_BITS,Be.EMPTY=Uint8ClampedArray.from([0]);class Re extends Be{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),o=t.getHeight();if(r>=Re.MINIMUM_DIMENSION&&o>=Re.MINIMUM_DIMENSION){const a=t.getMatrix();let l=r>>Re.BLOCK_SIZE_POWER;r&Re.BLOCK_SIZE_MASK&&l++;let d=o>>Re.BLOCK_SIZE_POWER;o&Re.BLOCK_SIZE_MASK&&d++;const f=Re.calculateBlackPoints(a,l,d,r,o),m=new Xe(r,o);Re.calculateThresholdForBlock(a,l,d,r,o,f,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new Re(t)}static calculateThresholdForBlock(t,r,o,a,l,d,f){const m=l-Re.BLOCK_SIZE,y=a-Re.BLOCK_SIZE;for(let C=0;C<o;C++){let N=C<<Re.BLOCK_SIZE_POWER;N>m&&(N=m);const I=Re.cap(C,2,o-3);for(let P=0;P<r;P++){let F=P<<Re.BLOCK_SIZE_POWER;F>y&&(F=y);const z=Re.cap(P,2,r-3);let Z=0;for(let de=-2;de<=2;de++){const ge=d[I+de];Z+=ge[z-2]+ge[z-1]+ge[z]+ge[z+1]+ge[z+2]}const q=Z/25;Re.thresholdBlock(t,F,N,q,a,f)}}}static cap(t,r,o){return t<r?r:t>o?o:t}static thresholdBlock(t,r,o,a,l,d){for(let f=0,m=o*l+r;f<Re.BLOCK_SIZE;f++,m+=l)for(let y=0;y<Re.BLOCK_SIZE;y++)(t[m+y]&255)<=a&&d.set(r+y,o+f)}static calculateBlackPoints(t,r,o,a,l){const d=l-Re.BLOCK_SIZE,f=a-Re.BLOCK_SIZE,m=new Array(o);for(let y=0;y<o;y++){m[y]=new Int32Array(r);let C=y<<Re.BLOCK_SIZE_POWER;C>d&&(C=d);for(let N=0;N<r;N++){let I=N<<Re.BLOCK_SIZE_POWER;I>f&&(I=f);let P=0,F=255,z=0;for(let q=0,de=C*a+I;q<Re.BLOCK_SIZE;q++,de+=a){for(let ge=0;ge<Re.BLOCK_SIZE;ge++){const ae=t[de+ge]&255;P+=ae,ae<F&&(F=ae),ae>z&&(z=ae)}if(z-F>Re.MIN_DYNAMIC_RANGE)for(q++,de+=a;q<Re.BLOCK_SIZE;q++,de+=a)for(let ge=0;ge<Re.BLOCK_SIZE;ge++)P+=t[de+ge]&255}let Z=P>>Re.BLOCK_SIZE_POWER*2;if(z-F<=Re.MIN_DYNAMIC_RANGE&&(Z=F/2,y>0&&N>0)){const q=(m[y-1][N]+2*m[y][N-1]+m[y-1][N-1])/4;F<q&&(Z=q)}m[y][N]=Z}}return m}}Re.BLOCK_SIZE_POWER=3,Re.BLOCK_SIZE=1<<Re.BLOCK_SIZE_POWER,Re.BLOCK_SIZE_MASK=Re.BLOCK_SIZE-1,Re.MINIMUM_DIMENSION=Re.BLOCK_SIZE*5,Re.MIN_DYNAMIC_RANGE=24;class ee{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,o,a){throw new Se("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Se("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Se("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new Te;for(let o=0;o<this.height;o++){const a=this.getRow(o,t);for(let l=0;l<this.width;l++){const d=a[l]&255;let f;d<64?f="#":d<128?f="+":d<192?f=".":f=" ",r.append(f)}r.append(`
`)}return r.toString()}}class Oe extends ee{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const o=this.delegate.getRow(t,r),a=this.getWidth();for(let l=0;l<a;l++)o[l]=255-(o[l]&255);return o}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(r);for(let a=0;a<r;a++)o[a]=255-(t[a]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,o,a){return new Oe(this.delegate.crop(t,r,o,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Oe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Oe(this.delegate.rotateCounterClockwise45())}}class ue extends ee{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=ue.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return ue.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,o){const a=new Uint8ClampedArray(r*o);for(let l=0,d=0,f=t.length;l<f;l+=4,d++){let m;if(t[l+3]===0)m=255;else{const C=t[l],N=t[l+1],I=t[l+2];m=306*C+601*N+117*I+512>>10}a[d]=m}return a}getRow(t,r){if(t<0||t>=this.getHeight())throw new R("Requested row is outside the image: "+t);const o=this.getWidth(),a=t*o;return r===null?r=this.buffer.slice(a,a+o):(r.length<o&&(r=new Uint8ClampedArray(o)),r.set(this.buffer.slice(a,a+o))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,o,a){return super.crop(t,r,o,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),o=r.getContext("2d"),a=t*ue.DEGREE_TO_RADIANS,l=this.canvas.width,d=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(a))*l+Math.abs(Math.sin(a))*d),m=Math.ceil(Math.abs(Math.sin(a))*l+Math.abs(Math.cos(a))*d);return r.width=f,r.height=m,o.translate(f/2,m/2),o.rotate(a),o.drawImage(this.canvas,l/-2,d/-2),this.buffer=ue.makeBufferFromCanvasImageData(r),this}invert(){return new Oe(this)}}ue.DEGREE_TO_RADIANS=Math.PI/180;class Le{constructor(t,r,o){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Pe=(globalThis||Vs||self||window||void 0)&&(globalThis||Vs||self||window||void 0).__awaiter||function(S,t,r,o){function a(l){return l instanceof r?l:new r(function(d){d(l)})}return new(r||(r=Promise))(function(l,d){function f(C){try{y(o.next(C))}catch(N){d(N)}}function m(C){try{y(o.throw(C))}catch(N){d(N)}}function y(C){C.done?l(C.value):a(C.value).then(f,m)}y((o=o.apply(S,t||[])).next())})};class ft{constructor(t,r=500,o){this.reader=t,this.timeBetweenScansMillis=r,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return Pe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const o of t){const a=o.kind==="video"?"videoinput":o.kind;if(a!=="videoinput")continue;const l=o.deviceId||o.id,d=o.label||`Video device ${r.length+1}`,f=o.groupId,m={deviceId:l,label:d,kind:a,groupId:f};r.push(m)}return r})}getVideoInputDevices(){return Pe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new Le(r.deviceId,r.label))})}findDeviceById(t){return Pe(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(o=>o.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return Pe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return Pe(this,void 0,void 0,function*(){this.reset();let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const a={video:o};return yield this.decodeOnceFromConstraints(a,r)})}decodeOnceFromConstraints(t,r){return Pe(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(o,r)})}decodeOnceFromStream(t,r){return Pe(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(t,r,o){return Pe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,o)})}decodeFromVideoDevice(t,r,o){return Pe(this,void 0,void 0,function*(){let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const l={video:a};return yield this.decodeFromConstraints(l,r,o)})}decodeFromConstraints(t,r,o){return Pe(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(a,r,o)})}decodeFromStream(t,r,o){return Pe(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(a,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return Pe(this,void 0,void 0,function*(){const o=this.prepareVideoElement(r);return this.addVideoSource(o,t),this.videoElement=o,this.stream=t,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(t){return new Promise((r,o)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return Pe(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const o=document.getElementById(t);if(!o)throw new D(`element with id '${t}' not found`);if(o.nodeName.toLowerCase()!==r.toLowerCase())throw new D(`element with id '${t}' must be an ${r} element`);return o}decodeFromImage(t,r){if(!t&&!r)throw new D("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new D("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,o){if(t===void 0&&r===void 0)throw new D("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,o):this.decodeFromVideoElementContinuously(t,o)}decodeFromImageElement(t){if(!t)throw new D("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let o;return this.isImageLoaded(r)?o=this.decodeOnce(r,!1,!0):o=this._decodeOnLoadImage(r),o}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const o=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(o,r)}_decodeFromVideoElementSetup(t){if(!t)throw new D("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new D("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const o=this._decodeOnLoadImage(r);return r.src=t,o}decodeFromVideoUrl(t){if(!t)throw new D("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),o=this.decodeFromVideoElement(r);return r.src=t,o}decodeFromVideoUrlContinuously(t,r){if(!t)throw new D("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(o,r);return o.src=t,a}_decodeOnLoadImage(t){return new Promise((r,o)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,o),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return Pe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return Pe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,o=!0){this._stopAsyncDecode=!1;const a=(l,d)=>{if(this._stopAsyncDecode){d(new K("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(t);l(f)}catch(f){const m=r&&f instanceof K,C=(f instanceof X||f instanceof V)&&o;if(m||C)return setTimeout(a,this._timeBetweenDecodingAttempts,l,d);d(f)}};return new Promise((l,d)=>a(l,d))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(t);r(a,null),setTimeout(o,this.timeBetweenScansMillis)}catch(a){r(null,a);const l=a instanceof X||a instanceof V,d=a instanceof K;(l||d)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,o){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,o=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),o=new ue(r),a=new Re(o);return new H(a)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let o,a;return typeof t<"u"&&(t instanceof HTMLVideoElement?(o=t.videoWidth,a=t.videoHeight):t instanceof HTMLImageElement&&(o=t.naturalWidth||t.width,a=t.naturalHeight||t.height)),r.style.width=o+"px",r.style.height=a+"px",r.width=o,r.height=a,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class ze{constructor(t,r,o=r==null?0:8*r.length,a,l,d=U.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=o,this.resultPoints=a,this.format=l,this.timestamp=d,this.text=t,this.rawBytes=r,o==null?this.numBits=r==null?0:8*r.length:this.numBits=o,this.resultPoints=a,this.format=l,this.resultMetadata=null,d==null?this.timestamp=U.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const o=new Array(r.length+t.length);U.arraycopy(r,0,o,0,r.length),U.arraycopy(t,0,o,r.length,t.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Qe;(function(S){S[S.AZTEC=0]="AZTEC",S[S.CODABAR=1]="CODABAR",S[S.CODE_39=2]="CODE_39",S[S.CODE_93=3]="CODE_93",S[S.CODE_128=4]="CODE_128",S[S.DATA_MATRIX=5]="DATA_MATRIX",S[S.EAN_8=6]="EAN_8",S[S.EAN_13=7]="EAN_13",S[S.ITF=8]="ITF",S[S.MAXICODE=9]="MAXICODE",S[S.PDF_417=10]="PDF_417",S[S.QR_CODE=11]="QR_CODE",S[S.RSS_14=12]="RSS_14",S[S.RSS_EXPANDED=13]="RSS_EXPANDED",S[S.UPC_A=14]="UPC_A",S[S.UPC_E=15]="UPC_E",S[S.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Qe||(Qe={}));var ce=Qe,Zt;(function(S){S[S.OTHER=0]="OTHER",S[S.ORIENTATION=1]="ORIENTATION",S[S.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",S[S.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",S[S.ISSUE_NUMBER=4]="ISSUE_NUMBER",S[S.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",S[S.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",S[S.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",S[S.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",S[S.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",S[S.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Zt||(Zt={}));var gt=Zt;class Br{constructor(t,r,o,a,l=-1,d=-1){this.rawBytes=t,this.text=r,this.byteSegments=o,this.ecLevel=a,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=d,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class vr{exp(t){return this.expTable[t]}log(t){if(t===0)throw new R;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class Wt{constructor(t,r){if(r.length===0)throw new R;this.field=t;const o=r.length;if(o>1&&r[0]===0){let a=1;for(;a<o&&r[a]===0;)a++;a===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-a),U.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let o;if(t===1){o=0;for(let d=0,f=r.length;d!==f;d++){const m=r[d];o=vr.addOrSubtract(o,m)}return o}o=r[0];const a=r.length,l=this.field;for(let d=1;d<a;d++)o=vr.addOrSubtract(l.multiply(t,o),r[d]);return o}addOrSubtract(t){if(!this.field.equals(t.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,o=t.coefficients;if(r.length>o.length){const d=r;r=o,o=d}let a=new Int32Array(o.length);const l=o.length-r.length;U.arraycopy(o,0,a,0,l);for(let d=l;d<o.length;d++)a[d]=vr.addOrSubtract(r[d-l],o[d]);return new Wt(this.field,a)}multiply(t){if(!this.field.equals(t.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,o=r.length,a=t.coefficients,l=a.length,d=new Int32Array(o+l-1),f=this.field;for(let m=0;m<o;m++){const y=r[m];for(let C=0;C<l;C++)d[m+C]=vr.addOrSubtract(d[m+C],f.multiply(y,a[C]))}return new Wt(f,d)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,o=this.field,a=new Int32Array(r),l=this.coefficients;for(let d=0;d<r;d++)a[d]=o.multiply(l[d],t);return new Wt(o,a)}multiplyByMonomial(t,r){if(t<0)throw new R;if(r===0)return this.field.getZero();const o=this.coefficients,a=o.length,l=new Int32Array(a+t),d=this.field;for(let f=0;f<a;f++)l[f]=d.multiply(o[f],r);return new Wt(d,l)}divide(t){if(!this.field.equals(t.field))throw new R("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new R("Divide by 0");const r=this.field;let o=r.getZero(),a=this;const l=t.getCoefficient(t.getDegree()),d=r.inverse(l);for(;a.getDegree()>=t.getDegree()&&!a.isZero();){const f=a.getDegree()-t.getDegree(),m=r.multiply(a.getCoefficient(a.getDegree()),d),y=t.multiplyByMonomial(f,m),C=r.buildMonomial(f,m);o=o.addOrSubtract(C),a=a.addOrSubtract(y)}return[o,a]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let o=this.getCoefficient(r);if(o!==0){if(o<0?(t+=" - ",o=-o):t.length>0&&(t+=" + "),r===0||o!==1){const a=this.field.log(o);a===0?t+="1":a===1?t+="a":(t+="a^",t+=a)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class sr extends v{}sr.kind="ArithmeticException";class Je extends vr{constructor(t,r,o){super(),this.primitive=t,this.size=r,this.generatorBase=o;const a=new Int32Array(r);let l=1;for(let f=0;f<r;f++)a[f]=l,l*=2,l>=r&&(l^=t,l&=r-1);this.expTable=a;const d=new Int32Array(r);for(let f=0;f<r-1;f++)d[a[f]]=f;this.logTable=d,this.zero=new Wt(this,Int32Array.from([0])),this.one=new Wt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new R;if(r===0)return this.zero;const o=new Int32Array(t+1);return o[0]=r,new Wt(this,o)}inverse(t){if(t===0)throw new sr;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}Je.AZTEC_DATA_12=new Je(4201,4096,1),Je.AZTEC_DATA_10=new Je(1033,1024,1),Je.AZTEC_DATA_6=new Je(67,64,1),Je.AZTEC_PARAM=new Je(19,16,1),Je.QR_CODE_FIELD_256=new Je(285,256,0),Je.DATA_MATRIX_FIELD_256=new Je(301,256,1),Je.AZTEC_DATA_8=Je.DATA_MATRIX_FIELD_256,Je.MAXICODE_FIELD_64=Je.AZTEC_DATA_6;class jr extends v{}jr.kind="ReedSolomonException";class xn extends v{}xn.kind="IllegalStateException";class Cr{constructor(t){this.field=t}decode(t,r){const o=this.field,a=new Wt(o,t),l=new Int32Array(r);let d=!0;for(let P=0;P<r;P++){const F=a.evaluateAt(o.exp(P+o.getGeneratorBase()));l[l.length-1-P]=F,F!==0&&(d=!1)}if(d)return;const f=new Wt(o,l),m=this.runEuclideanAlgorithm(o.buildMonomial(r,1),f,r),y=m[0],C=m[1],N=this.findErrorLocations(y),I=this.findErrorMagnitudes(C,N);for(let P=0;P<N.length;P++){const F=t.length-1-o.log(N[P]);if(F<0)throw new jr("Bad error location");t[F]=Je.addOrSubtract(t[F],I[P])}}runEuclideanAlgorithm(t,r,o){if(t.getDegree()<r.getDegree()){const P=t;t=r,r=P}const a=this.field;let l=t,d=r,f=a.getZero(),m=a.getOne();for(;d.getDegree()>=(o/2|0);){let P=l,F=f;if(l=d,f=m,l.isZero())throw new jr("r_{i-1} was zero");d=P;let z=a.getZero();const Z=l.getCoefficient(l.getDegree()),q=a.inverse(Z);for(;d.getDegree()>=l.getDegree()&&!d.isZero();){const de=d.getDegree()-l.getDegree(),ge=a.multiply(d.getCoefficient(d.getDegree()),q);z=z.addOrSubtract(a.buildMonomial(de,ge)),d=d.addOrSubtract(l.multiplyByMonomial(de,ge))}if(m=z.multiply(f).addOrSubtract(F),d.getDegree()>=l.getDegree())throw new xn("Division algorithm failed to reduce polynomial?")}const y=m.getCoefficient(0);if(y===0)throw new jr("sigmaTilde(0) was zero");const C=a.inverse(y),N=m.multiplyScalar(C),I=d.multiplyScalar(C);return[N,I]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const o=new Int32Array(r);let a=0;const l=this.field;for(let d=1;d<l.getSize()&&a<r;d++)t.evaluateAt(d)===0&&(o[a]=l.inverse(d),a++);if(a!==r)throw new jr("Error locator degree does not match number of roots");return o}findErrorMagnitudes(t,r){const o=r.length,a=new Int32Array(o),l=this.field;for(let d=0;d<o;d++){const f=l.inverse(r[d]);let m=1;for(let y=0;y<o;y++)if(d!==y){const C=l.multiply(r[y],f),N=C&1?C&-2:C|1;m=l.multiply(m,N)}a[d]=l.multiply(t.evaluateAt(f),l.inverse(m)),l.getGeneratorBase()!==0&&(a[d]=l.multiply(a[d],f))}return a}}var Ot;(function(S){S[S.UPPER=0]="UPPER",S[S.LOWER=1]="LOWER",S[S.MIXED=2]="MIXED",S[S.DIGIT=3]="DIGIT",S[S.PUNCT=4]="PUNCT",S[S.BINARY=5]="BINARY"})(Ot||(Ot={}));class rt{decode(t){this.ddata=t;let r=t.getBits(),o=this.extractBits(r),a=this.correctBits(o),l=rt.convertBoolArrayToByteArray(a),d=rt.getEncodedData(a),f=new Br(l,d,null,null);return f.setNumBits(a.length),f}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,o=Ot.UPPER,a=Ot.UPPER,l="",d=0;for(;d<r;)if(a===Ot.BINARY){if(r-d<5)break;let f=rt.readCode(t,d,5);if(d+=5,f===0){if(r-d<11)break;f=rt.readCode(t,d,11)+31,d+=11}for(let m=0;m<f;m++){if(r-d<8){d=r;break}const y=rt.readCode(t,d,8);l+=ye.castAsNonUtf8Char(y),d+=8}a=o}else{let f=a===Ot.DIGIT?4:5;if(r-d<f)break;let m=rt.readCode(t,d,f);d+=f;let y=rt.getCharacter(a,m);y.startsWith("CTRL_")?(o=a,a=rt.getTable(y.charAt(5)),y.charAt(6)==="L"&&(o=a)):(l+=y,a=o)}return l}static getTable(t){switch(t){case"L":return Ot.LOWER;case"P":return Ot.PUNCT;case"M":return Ot.MIXED;case"D":return Ot.DIGIT;case"B":return Ot.BINARY;case"U":default:return Ot.UPPER}}static getCharacter(t,r){switch(t){case Ot.UPPER:return rt.UPPER_TABLE[r];case Ot.LOWER:return rt.LOWER_TABLE[r];case Ot.MIXED:return rt.MIXED_TABLE[r];case Ot.PUNCT:return rt.PUNCT_TABLE[r];case Ot.DIGIT:return rt.DIGIT_TABLE[r];default:throw new xn("Bad table")}}correctBits(t){let r,o;this.ddata.getNbLayers()<=2?(o=6,r=Je.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,r=Je.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,r=Je.AZTEC_DATA_10):(o=12,r=Je.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),l=t.length/o;if(l<a)throw new V;let d=t.length%o,f=new Int32Array(l);for(let I=0;I<l;I++,d+=o)f[I]=rt.readCode(t,d,o);try{new Cr(r).decode(f,l-a)}catch(I){throw new V(I)}let m=(1<<o)-1,y=0;for(let I=0;I<a;I++){let P=f[I];if(P===0||P===m)throw new V;(P===1||P===m-1)&&y++}let C=new Array(a*o-y),N=0;for(let I=0;I<a;I++){let P=f[I];if(P===1||P===m-1)C.fill(P>1,N,N+o-1),N+=o-1;else for(let F=o-1;F>=0;--F)C[N++]=(P&1<<F)!==0}return C}extractBits(t){let r=this.ddata.isCompact(),o=this.ddata.getNbLayers(),a=(r?11:14)+o*4,l=new Int32Array(a),d=new Array(this.totalBitsInLayer(o,r));if(r)for(let f=0;f<l.length;f++)l[f]=f;else{let f=a+1+2*B.truncDivision(B.truncDivision(a,2)-1,15),m=a/2,y=B.truncDivision(f,2);for(let C=0;C<m;C++){let N=C+B.truncDivision(C,15);l[m-C-1]=y-N-1,l[m+C]=y+N+1}}for(let f=0,m=0;f<o;f++){let y=(o-f)*4+(r?9:12),C=f*2,N=a-1-C;for(let I=0;I<y;I++){let P=I*2;for(let F=0;F<2;F++)d[m+P+F]=t.get(l[C+F],l[C+I]),d[m+2*y+P+F]=t.get(l[C+I],l[N-F]),d[m+4*y+P+F]=t.get(l[N-F],l[N-I]),d[m+6*y+P+F]=t.get(l[N-I],l[C+F])}m+=y*8}return d}static readCode(t,r,o){let a=0;for(let l=r;l<r+o;l++)a<<=1,t[l]&&(a|=1);return a}static readByte(t,r){let o=t.length-r;return o>=8?rt.readCode(t,r,8):rt.readCode(t,r,o)<<8-o}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let o=0;o<r.length;o++)r[o]=rt.readByte(t,8*o);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}rt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],rt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],rt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],rt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],rt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ke{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,o,a){const l=t-o,d=r-a;return Math.sqrt(l*l+d*d)}static sum(t){let r=0;for(let o=0,a=t.length;o!==a;o++){const l=t[o];r+=l}return r}}class Fr{static floatToIntBits(t){return t}}Fr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ee{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Ee){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Fr.floatToIntBits(this.x)+Fr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),o=this.distance(t[1],t[2]),a=this.distance(t[0],t[2]);let l,d,f;if(o>=r&&o>=a?(d=t[0],l=t[1],f=t[2]):a>=o&&a>=r?(d=t[1],l=t[0],f=t[2]):(d=t[2],l=t[0],f=t[1]),this.crossProductZ(l,d,f)<0){const m=l;l=f,f=m}t[0]=l,t[1]=d,t[2]=f}static distance(t,r){return Ke.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,o){const a=r.x,l=r.y;return(o.x-a)*(t.y-l)-(o.y-l)*(t.x-a)}}class zr{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Ei extends zr{constructor(t,r,o,a,l){super(t,r),this.compact=o,this.nbDatablocks=a,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Bn{constructor(t,r,o,a){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=Bn.INIT_SIZE),o==null&&(o=t.getWidth()/2|0),a==null&&(a=t.getHeight()/2|0);const l=r/2|0;if(this.leftInit=o-l,this.rightInit=o+l,this.upInit=a-l,this.downInit=a+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new K}detect(){let t=this.leftInit,r=this.rightInit,o=this.upInit,a=this.downInit,l=!1,d=!0,f=!1,m=!1,y=!1,C=!1,N=!1;const I=this.width,P=this.height;for(;d;){d=!1;let F=!0;for(;(F||!m)&&r<I;)F=this.containsBlackPoint(o,a,r,!1),F?(r++,d=!0,m=!0):m||r++;if(r>=I){l=!0;break}let z=!0;for(;(z||!y)&&a<P;)z=this.containsBlackPoint(t,r,a,!0),z?(a++,d=!0,y=!0):y||a++;if(a>=P){l=!0;break}let Z=!0;for(;(Z||!C)&&t>=0;)Z=this.containsBlackPoint(o,a,t,!1),Z?(t--,d=!0,C=!0):C||t--;if(t<0){l=!0;break}let q=!0;for(;(q||!N)&&o>=0;)q=this.containsBlackPoint(t,r,o,!0),q?(o--,d=!0,N=!0):N||o--;if(o<0){l=!0;break}d&&(f=!0)}if(!l&&f){const F=r-t;let z=null;for(let ge=1;z===null&&ge<F;ge++)z=this.getBlackPointOnSegment(t,a-ge,t+ge,a);if(z==null)throw new K;let Z=null;for(let ge=1;Z===null&&ge<F;ge++)Z=this.getBlackPointOnSegment(t,o+ge,t+ge,o);if(Z==null)throw new K;let q=null;for(let ge=1;q===null&&ge<F;ge++)q=this.getBlackPointOnSegment(r,o+ge,r-ge,o);if(q==null)throw new K;let de=null;for(let ge=1;de===null&&ge<F;ge++)de=this.getBlackPointOnSegment(r,a-ge,r-ge,a);if(de==null)throw new K;return this.centerEdges(de,z,q,Z)}else throw new K}getBlackPointOnSegment(t,r,o,a){const l=Ke.round(Ke.distance(t,r,o,a)),d=(o-t)/l,f=(a-r)/l,m=this.image;for(let y=0;y<l;y++){const C=Ke.round(t+y*d),N=Ke.round(r+y*f);if(m.get(C,N))return new Ee(C,N)}return null}centerEdges(t,r,o,a){const l=t.getX(),d=t.getY(),f=r.getX(),m=r.getY(),y=o.getX(),C=o.getY(),N=a.getX(),I=a.getY(),P=Bn.CORR;return l<this.width/2?[new Ee(N-P,I+P),new Ee(f+P,m+P),new Ee(y-P,C-P),new Ee(l+P,d-P)]:[new Ee(N+P,I+P),new Ee(f+P,m-P),new Ee(y-P,C+P),new Ee(l-P,d-P)]}containsBlackPoint(t,r,o,a){const l=this.image;if(a){for(let d=t;d<=r;d++)if(l.get(d,o))return!0}else for(let d=t;d<=r;d++)if(l.get(o,d))return!0;return!1}}Bn.INIT_SIZE=10,Bn.CORR=1;class Ai{static checkAndNudgePoints(t,r){const o=t.getWidth(),a=t.getHeight();let l=!0;for(let d=0;d<r.length&&l;d+=2){const f=Math.floor(r[d]),m=Math.floor(r[d+1]);if(f<-1||f>o||m<-1||m>a)throw new K;l=!1,f===-1?(r[d]=0,l=!0):f===o&&(r[d]=o-1,l=!0),m===-1?(r[d+1]=0,l=!0):m===a&&(r[d+1]=a-1,l=!0)}l=!0;for(let d=r.length-2;d>=0&&l;d-=2){const f=Math.floor(r[d]),m=Math.floor(r[d+1]);if(f<-1||f>o||m<-1||m>a)throw new K;l=!1,f===-1?(r[d]=0,l=!0):f===o&&(r[d]=o-1,l=!0),m===-1?(r[d+1]=0,l=!0):m===a&&(r[d+1]=a-1,l=!0)}}}class rn{constructor(t,r,o,a,l,d,f,m,y){this.a11=t,this.a21=r,this.a31=o,this.a12=a,this.a22=l,this.a32=d,this.a13=f,this.a23=m,this.a33=y}static quadrilateralToQuadrilateral(t,r,o,a,l,d,f,m,y,C,N,I,P,F,z,Z){const q=rn.quadrilateralToSquare(t,r,o,a,l,d,f,m);return rn.squareToQuadrilateral(y,C,N,I,P,F,z,Z).times(q)}transformPoints(t){const r=t.length,o=this.a11,a=this.a12,l=this.a13,d=this.a21,f=this.a22,m=this.a23,y=this.a31,C=this.a32,N=this.a33;for(let I=0;I<r;I+=2){const P=t[I],F=t[I+1],z=l*P+m*F+N;t[I]=(o*P+d*F+y)/z,t[I+1]=(a*P+f*F+C)/z}}transformPointsWithValues(t,r){const o=this.a11,a=this.a12,l=this.a13,d=this.a21,f=this.a22,m=this.a23,y=this.a31,C=this.a32,N=this.a33,I=t.length;for(let P=0;P<I;P++){const F=t[P],z=r[P],Z=l*F+m*z+N;t[P]=(o*F+d*z+y)/Z,r[P]=(a*F+f*z+C)/Z}}static squareToQuadrilateral(t,r,o,a,l,d,f,m){const y=t-o+l-f,C=r-a+d-m;if(y===0&&C===0)return new rn(o-t,l-o,t,a-r,d-a,r,0,0,1);{const N=o-l,I=f-l,P=a-d,F=m-d,z=N*F-I*P,Z=(y*F-I*C)/z,q=(N*C-y*P)/z;return new rn(o-t+Z*o,f-t+q*f,t,a-r+Z*a,m-r+q*m,r,Z,q,1)}}static quadrilateralToSquare(t,r,o,a,l,d,f,m){return rn.squareToQuadrilateral(t,r,o,a,l,d,f,m).buildAdjoint()}buildAdjoint(){return new rn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new rn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class bi extends Ai{sampleGrid(t,r,o,a,l,d,f,m,y,C,N,I,P,F,z,Z,q,de,ge){const ae=rn.quadrilateralToQuadrilateral(a,l,d,f,m,y,C,N,I,P,F,z,Z,q,de,ge);return this.sampleGridWithTransform(t,r,o,ae)}sampleGridWithTransform(t,r,o,a){if(r<=0||o<=0)throw new K;const l=new Xe(r,o),d=new Float32Array(2*r);for(let f=0;f<o;f++){const m=d.length,y=f+.5;for(let C=0;C<m;C+=2)d[C]=C/2+.5,d[C+1]=y;a.transformPoints(d),Ai.checkAndNudgePoints(t,d);try{for(let C=0;C<m;C+=2)t.get(Math.floor(d[C]),Math.floor(d[C+1]))&&l.set(C/2,f)}catch{throw new K}}return l}}class jn{static setGridSampler(t){jn.gridSampler=t}static getInstance(){return jn.gridSampler}}jn.gridSampler=new bi;class Gt{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new Ee(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Si{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),o=this.getBullsEyeCorners(r);if(t){let d=o[0];o[0]=o[2],o[2]=d}this.extractParameters(o);let a=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),l=this.getMatrixCornerPoints(o);return new Ei(a,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new K;let r=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(o,r);let a=0;for(let d=0;d<4;d++){let f=o[(this.shift+d)%4];this.compact?(a<<=7,a+=f>>1&127):(a<<=10,a+=(f>>2&992)+(f>>1&31))}let l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(t,r){let o=0;t.forEach((a,l,d)=>{let f=(a>>r-2<<1)+(a&1);o=(o<<3)+f}),o=((o&1)<<11)+(o>>1);for(let a=0;a<4;a++)if(B.bitCount(o^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new K}getCorrectedParameterData(t,r){let o,a;r?(o=7,a=2):(o=10,a=4);let l=o-a,d=new Int32Array(o);for(let m=o-1;m>=0;--m)d[m]=t&15,t>>=4;try{new Cr(Je.AZTEC_PARAM).decode(d,l)}catch{throw new K}let f=0;for(let m=0;m<a;m++)f=(f<<4)+d[m];return f}getBullsEyeCorners(t){let r=t,o=t,a=t,l=t,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let N=this.getFirstDifferent(r,d,1,-1),I=this.getFirstDifferent(o,d,1,1),P=this.getFirstDifferent(a,d,-1,1),F=this.getFirstDifferent(l,d,-1,-1);if(this.nbCenterLayers>2){let z=this.distancePoint(F,N)*this.nbCenterLayers/(this.distancePoint(l,r)*(this.nbCenterLayers+2));if(z<.75||z>1.25||!this.isWhiteOrBlackRectangle(N,I,P,F))break}r=N,o=I,a=P,l=F,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new K;this.compact=this.nbCenterLayers===5;let f=new Ee(r.getX()+.5,r.getY()-.5),m=new Ee(o.getX()+.5,o.getY()+.5),y=new Ee(a.getX()-.5,a.getY()+.5),C=new Ee(l.getX()-.5,l.getY()-.5);return this.expandSquare([f,m,y,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,o,a;try{let f=new Bn(this.image).detect();t=f[0],r=f[1],o=f[2],a=f[3]}catch{let m=this.image.getWidth()/2,y=this.image.getHeight()/2;t=this.getFirstDifferent(new Gt(m+7,y-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Gt(m+7,y+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Gt(m-7,y+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Gt(m-7,y-7),!1,-1,-1).toResultPoint()}let l=Ke.round((t.getX()+a.getX()+r.getX()+o.getX())/4),d=Ke.round((t.getY()+a.getY()+r.getY()+o.getY())/4);try{let f=new Bn(this.image,15,l,d).detect();t=f[0],r=f[1],o=f[2],a=f[3]}catch{t=this.getFirstDifferent(new Gt(l+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Gt(l+7,d+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Gt(l-7,d+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Gt(l-7,d-7),!1,-1,-1).toResultPoint()}return l=Ke.round((t.getX()+a.getX()+r.getX()+o.getX())/4),d=Ke.round((t.getY()+a.getY()+r.getY()+o.getY())/4),new Gt(l,d)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,o,a,l){let d=jn.getInstance(),f=this.getDimension(),m=f/2-this.nbCenterLayers,y=f/2+this.nbCenterLayers;return d.sampleGrid(t,f,f,m,m,y,m,y,y,m,y,r.getX(),r.getY(),o.getX(),o.getY(),a.getX(),a.getY(),l.getX(),l.getY())}sampleLine(t,r,o){let a=0,l=this.distanceResultPoint(t,r),d=l/o,f=t.getX(),m=t.getY(),y=d*(r.getX()-t.getX())/l,C=d*(r.getY()-t.getY())/l;for(let N=0;N<o;N++)this.image.get(Ke.round(f+N*y),Ke.round(m+N*C))&&(a|=1<<o-N-1);return a}isWhiteOrBlackRectangle(t,r,o,a){let l=3;t=new Gt(t.getX()-l,t.getY()+l),r=new Gt(r.getX()-l,r.getY()-l),o=new Gt(o.getX()+l,o.getY()-l),a=new Gt(a.getX()+l,a.getY()+l);let d=this.getColor(a,t);if(d===0)return!1;let f=this.getColor(t,r);return f!==d||(f=this.getColor(r,o),f!==d)?!1:(f=this.getColor(o,a),f===d)}getColor(t,r){let o=this.distancePoint(t,r),a=(r.getX()-t.getX())/o,l=(r.getY()-t.getY())/o,d=0,f=t.getX(),m=t.getY(),y=this.image.get(t.getX(),t.getY()),C=Math.ceil(o);for(let I=0;I<C;I++)f+=a,m+=l,this.image.get(Ke.round(f),Ke.round(m))!==y&&d++;let N=d/o;return N>.1&&N<.9?0:N<=.1===y?1:-1}getFirstDifferent(t,r,o,a){let l=t.getX()+o,d=t.getY()+a;for(;this.isValid(l,d)&&this.image.get(l,d)===r;)l+=o,d+=a;for(l-=o,d-=a;this.isValid(l,d)&&this.image.get(l,d)===r;)l+=o;for(l-=o;this.isValid(l,d)&&this.image.get(l,d)===r;)d+=a;return d-=a,new Gt(l,d)}expandSquare(t,r,o){let a=o/(2*r),l=t[0].getX()-t[2].getX(),d=t[0].getY()-t[2].getY(),f=(t[0].getX()+t[2].getX())/2,m=(t[0].getY()+t[2].getY())/2,y=new Ee(f+a*l,m+a*d),C=new Ee(f-a*l,m-a*d);l=t[1].getX()-t[3].getX(),d=t[1].getY()-t[3].getY(),f=(t[1].getX()+t[3].getX())/2,m=(t[1].getY()+t[3].getY())/2;let N=new Ee(f+a*l,m+a*d),I=new Ee(f-a*l,m-a*d);return[y,N,C,I]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=Ke.round(t.getX()),o=Ke.round(t.getY());return this.isValid(r,o)}distancePoint(t,r){return Ke.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return Ke.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class Ur{decode(t,r=null){let o=null,a=new Si(t.getBlackMatrix()),l=null,d=null;try{let C=a.detectMirror(!1);l=C.getPoints(),this.reportFoundResultPoints(r,l),d=new rt().decode(C)}catch(C){o=C}if(d==null)try{let C=a.detectMirror(!0);l=C.getPoints(),this.reportFoundResultPoints(r,l),d=new rt().decode(C)}catch(C){throw o??C}let f=new ze(d.getText(),d.getRawBytes(),d.getNumBits(),l,ce.AZTEC,U.currentTimeMillis()),m=d.getByteSegments();m!=null&&f.putMetadata(gt.BYTE_SEGMENTS,m);let y=d.getECLevel();return y!=null&&f.putMetadata(gt.ERROR_CORRECTION_LEVEL,y),f}reportFoundResultPoints(t,r){if(t!=null){let o=t.get(oe.NEED_RESULT_POINT_CALLBACK);o!=null&&r.forEach((a,l,d)=>{o.foundPossibleResultPoint(a)})}}reset(){}}class Ls extends ft{constructor(t=500){super(new Ur,t)}}class vt{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(oe.TRY_HARDER)===!0&&t.isRotateSupported()){const l=t.rotateCounterClockwise(),d=this.doDecode(l,r),f=d.getResultMetadata();let m=270;f!==null&&f.get(gt.ORIENTATION)===!0&&(m=m+f.get(gt.ORIENTATION)%360),d.putMetadata(gt.ORIENTATION,m);const y=d.getResultPoints();if(y!==null){const C=l.getHeight();for(let N=0;N<y.length;N++)y[N]=new Ee(C-y[N].getY()-1,y[N].getX())}return d}else throw new K}}reset(){}doDecode(t,r){const o=t.getWidth(),a=t.getHeight();let l=new Y(o);const d=r&&r.get(oe.TRY_HARDER)===!0,f=Math.max(1,a>>(d?8:5));let m;d?m=a:m=15;const y=Math.trunc(a/2);for(let C=0;C<m;C++){const N=Math.trunc((C+1)/2),I=(C&1)===0,P=y+f*(I?N:-N);if(P<0||P>=a)break;try{l=t.getBlackRow(P,l)}catch{continue}for(let F=0;F<2;F++){if(F===1&&(l.reverse(),r&&r.get(oe.NEED_RESULT_POINT_CALLBACK)===!0)){const z=new Map;r.forEach((Z,q)=>z.set(q,Z)),z.delete(oe.NEED_RESULT_POINT_CALLBACK),r=z}try{const z=this.decodeRow(P,l,r);if(F===1){z.putMetadata(gt.ORIENTATION,180);const Z=z.getResultPoints();Z!==null&&(Z[0]=new Ee(o-Z[0].getX()-1,Z[0].getY()),Z[1]=new Ee(o-Z[1].getX()-1,Z[1].getY()))}return z}catch{}}}throw new K}static recordPattern(t,r,o){const a=o.length;for(let y=0;y<a;y++)o[y]=0;const l=t.getSize();if(r>=l)throw new K;let d=!t.get(r),f=0,m=r;for(;m<l;){if(t.get(m)!==d)o[f]++;else{if(++f===a)break;o[f]=1,d=!d}m++}if(!(f===a||f===a-1&&m===l))throw new K}static recordPatternInReverse(t,r,o){let a=o.length,l=t.get(r);for(;r>0&&a>=0;)t.get(--r)!==l&&(a--,l=!l);if(a>=0)throw new K;vt.recordPattern(t,r+1,o)}static patternMatchVariance(t,r,o){const a=t.length;let l=0,d=0;for(let y=0;y<a;y++)l+=t[y],d+=r[y];if(l<d)return Number.POSITIVE_INFINITY;const f=l/d;o*=f;let m=0;for(let y=0;y<a;y++){const C=t[y],N=r[y]*f,I=C>N?C-N:N-C;if(I>o)return Number.POSITIVE_INFINITY;m+=I}return m/l}}class me extends vt{static findStartPattern(t){const r=t.getSize(),o=t.getNextSet(0);let a=0,l=Int32Array.from([0,0,0,0,0,0]),d=o,f=!1;const m=6;for(let y=o;y<r;y++)if(t.get(y)!==f)l[a]++;else{if(a===m-1){let C=me.MAX_AVG_VARIANCE,N=-1;for(let I=me.CODE_START_A;I<=me.CODE_START_C;I++){const P=vt.patternMatchVariance(l,me.CODE_PATTERNS[I],me.MAX_INDIVIDUAL_VARIANCE);P<C&&(C=P,N=I)}if(N>=0&&t.isRange(Math.max(0,d-(y-d)/2),d,!1))return Int32Array.from([d,y,N]);d+=l[0]+l[1],l=l.slice(2,l.length-1),l[a-1]=0,l[a]=0,a--}else a++;l[a]=1,f=!f}throw new K}static decodeCode(t,r,o){vt.recordPattern(t,o,r);let a=me.MAX_AVG_VARIANCE,l=-1;for(let d=0;d<me.CODE_PATTERNS.length;d++){const f=me.CODE_PATTERNS[d],m=this.patternMatchVariance(r,f,me.MAX_INDIVIDUAL_VARIANCE);m<a&&(a=m,l=d)}if(l>=0)return l;throw new K}decodeRow(t,r,o){const a=o&&o.get(oe.ASSUME_GS1)===!0,l=me.findStartPattern(r),d=l[2];let f=0;const m=new Uint8Array(20);m[f++]=d;let y;switch(d){case me.CODE_START_A:y=me.CODE_CODE_A;break;case me.CODE_START_B:y=me.CODE_CODE_B;break;case me.CODE_START_C:y=me.CODE_CODE_C;break;default:throw new V}let C=!1,N=!1,I="",P=l[0],F=l[1];const z=Int32Array.from([0,0,0,0,0,0]);let Z=0,q=0,de=d,ge=0,ae=!0,Ye=!1,He=!1;for(;!C;){const fr=N;switch(N=!1,Z=q,q=me.decodeCode(r,z,F),m[f++]=q,q!==me.CODE_STOP&&(ae=!0),q!==me.CODE_STOP&&(ge++,de+=ge*q),P=F,F+=z.reduce((Ec,ji)=>Ec+ji,0),q){case me.CODE_START_A:case me.CODE_START_B:case me.CODE_START_C:throw new V}switch(y){case me.CODE_CODE_A:if(q<64)He===Ye?I+=String.fromCharCode(32+q):I+=String.fromCharCode(32+q+128),He=!1;else if(q<96)He===Ye?I+=String.fromCharCode(q-64):I+=String.fromCharCode(q+64),He=!1;else switch(q!==me.CODE_STOP&&(ae=!1),q){case me.CODE_FNC_1:a&&(I.length===0?I+="]C1":I+="");break;case me.CODE_FNC_2:case me.CODE_FNC_3:break;case me.CODE_FNC_4_A:!Ye&&He?(Ye=!0,He=!1):Ye&&He?(Ye=!1,He=!1):He=!0;break;case me.CODE_SHIFT:N=!0,y=me.CODE_CODE_B;break;case me.CODE_CODE_B:y=me.CODE_CODE_B;break;case me.CODE_CODE_C:y=me.CODE_CODE_C;break;case me.CODE_STOP:C=!0;break}break;case me.CODE_CODE_B:if(q<96)He===Ye?I+=String.fromCharCode(32+q):I+=String.fromCharCode(32+q+128),He=!1;else switch(q!==me.CODE_STOP&&(ae=!1),q){case me.CODE_FNC_1:a&&(I.length===0?I+="]C1":I+="");break;case me.CODE_FNC_2:case me.CODE_FNC_3:break;case me.CODE_FNC_4_B:!Ye&&He?(Ye=!0,He=!1):Ye&&He?(Ye=!1,He=!1):He=!0;break;case me.CODE_SHIFT:N=!0,y=me.CODE_CODE_A;break;case me.CODE_CODE_A:y=me.CODE_CODE_A;break;case me.CODE_CODE_C:y=me.CODE_CODE_C;break;case me.CODE_STOP:C=!0;break}break;case me.CODE_CODE_C:if(q<100)q<10&&(I+="0"),I+=q;else switch(q!==me.CODE_STOP&&(ae=!1),q){case me.CODE_FNC_1:a&&(I.length===0?I+="]C1":I+="");break;case me.CODE_CODE_A:y=me.CODE_CODE_A;break;case me.CODE_CODE_B:y=me.CODE_CODE_B;break;case me.CODE_STOP:C=!0;break}break}fr&&(y=y===me.CODE_CODE_A?me.CODE_CODE_B:me.CODE_CODE_A)}const Tt=F-P;if(F=r.getNextUnset(F),!r.isRange(F,Math.min(r.getSize(),F+(F-P)/2),!1))throw new K;if(de-=ge*Z,de%103!==Z)throw new X;const _n=I.length;if(_n===0)throw new K;_n>0&&ae&&(y===me.CODE_CODE_C?I=I.substring(0,_n-2):I=I.substring(0,_n-1));const vn=(l[1]+l[0])/2,ct=P+Tt/2,en=m.length,Cn=new Uint8Array(en);for(let fr=0;fr<en;fr++)Cn[fr]=m[fr];const Bi=[new Ee(vn,t),new Ee(ct,t)];return new ze(I,Cn,0,Bi,ce.CODE_128,new Date().getTime())}}me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],me.MAX_AVG_VARIANCE=.25,me.MAX_INDIVIDUAL_VARIANCE=.7,me.CODE_SHIFT=98,me.CODE_CODE_C=99,me.CODE_CODE_B=100,me.CODE_CODE_A=101,me.CODE_FNC_1=102,me.CODE_FNC_2=97,me.CODE_FNC_3=96,me.CODE_FNC_4_A=101,me.CODE_FNC_4_B=100,me.CODE_START_A=103,me.CODE_START_B=104,me.CODE_START_C=105,me.CODE_STOP=106;class St extends vt{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,o){let a=this.counters;a.fill(0),this.decodeRowResult="";let l=St.findAsteriskPattern(r,a),d=r.getNextSet(l[1]),f=r.getSize(),m,y;do{St.recordPattern(r,d,a);let z=St.toNarrowWidePattern(a);if(z<0)throw new K;m=St.patternToChar(z),this.decodeRowResult+=m,y=d;for(let Z of a)d+=Z;d=r.getNextSet(d)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let z of a)C+=z;let N=d-y-C;if(d!==f&&N*2<C)throw new K;if(this.usingCheckDigit){let z=this.decodeRowResult.length-1,Z=0;for(let q=0;q<z;q++)Z+=St.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(q));if(this.decodeRowResult.charAt(z)!==St.ALPHABET_STRING.charAt(Z%43))throw new X;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new K;let I;this.extendedMode?I=St.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;let P=(l[1]+l[0])/2,F=y+C/2;return new ze(I,null,0,[new Ee(P,t),new Ee(F,t)],ce.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let o=t.getSize(),a=t.getNextSet(0),l=0,d=a,f=!1,m=r.length;for(let y=a;y<o;y++)if(t.get(y)!==f)r[l]++;else{if(l===m-1){if(this.toNarrowWidePattern(r)===St.ASTERISK_ENCODING&&t.isRange(Math.max(0,d-Math.floor((y-d)/2)),d,!1))return[d,y];d+=r[0]+r[1],r.copyWithin(0,2,2+l-1),r[l-1]=0,r[l]=0,l--}else l++;r[l]=1,f=!f}throw new K}static toNarrowWidePattern(t){let r=t.length,o=0,a;do{let l=2147483647;for(let m of t)m<l&&m>o&&(l=m);o=l,a=0;let d=0,f=0;for(let m=0;m<r;m++){let y=t[m];y>o&&(f|=1<<r-1-m,a++,d+=y)}if(a===3){for(let m=0;m<r&&a>0;m++){let y=t[m];if(y>o&&(a--,y*2>=d))return-1}return f}}while(a>3);return-1}static patternToChar(t){for(let r=0;r<St.CHARACTER_ENCODINGS.length;r++)if(St.CHARACTER_ENCODINGS[r]===t)return St.ALPHABET_STRING.charAt(r);if(t===St.ASTERISK_ENCODING)return"*";throw new K}static decodeExtended(t){let r=t.length,o="";for(let a=0;a<r;a++){let l=t.charAt(a);if(l==="+"||l==="$"||l==="%"||l==="/"){let d=t.charAt(a+1),f="\0";switch(l){case"+":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)+32);else throw new V;break;case"$":if(d>="A"&&d<="Z")f=String.fromCharCode(d.charCodeAt(0)-64);else throw new V;break;case"%":if(d>="A"&&d<="E")f=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")f=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")f=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")f="\0";else if(d==="V")f="@";else if(d==="W")f="`";else if(d==="X"||d==="Y"||d==="Z")f="";else throw new V;break;case"/":if(d>="A"&&d<="O")f=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")f=":";else throw new V;break}o+=f,a++}else o+=l}return o}}St.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",St.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],St.ASTERISK_ENCODING=148;class lt extends vt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,o){let a=this.decodeStart(r),l=this.decodeEnd(r),d=new Te;lt.decodeMiddle(r,a[1],l[0],d);let f=d.toString(),m=null;o!=null&&(m=o.get(oe.ALLOWED_LENGTHS)),m==null&&(m=lt.DEFAULT_ALLOWED_LENGTHS);let y=f.length,C=!1,N=0;for(let F of m){if(y===F){C=!0;break}F>N&&(N=F)}if(!C&&y>N&&(C=!0),!C)throw new V;const I=[new Ee(a[1],t),new Ee(l[0],t)];return new ze(f,null,0,I,ce.ITF,new Date().getTime())}static decodeMiddle(t,r,o,a){let l=new Int32Array(10),d=new Int32Array(5),f=new Int32Array(5);for(l.fill(0),d.fill(0),f.fill(0);r<o;){vt.recordPattern(t,r,l);for(let y=0;y<5;y++){let C=2*y;d[y]=l[C],f[y]=l[C+1]}let m=lt.decodeDigit(d);a.append(m.toString()),m=this.decodeDigit(f),a.append(m.toString()),l.forEach(function(y){r+=y})}}decodeStart(t){let r=lt.skipWhiteSpace(t),o=lt.findGuardPattern(t,r,lt.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(t,o[0]),o}validateQuietZone(t,r){let o=this.narrowLineWidth*10;o=o<r?o:r;for(let a=r-1;o>0&&a>=0&&!t.get(a);a--)o--;if(o!==0)throw new K}static skipWhiteSpace(t){const r=t.getSize(),o=t.getNextSet(0);if(o===r)throw new K;return o}decodeEnd(t){t.reverse();try{let r=lt.skipWhiteSpace(t),o;try{o=lt.findGuardPattern(t,r,lt.END_PATTERN_REVERSED[0])}catch(l){l instanceof K&&(o=lt.findGuardPattern(t,r,lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,o[0]);let a=o[0];return o[0]=t.getSize()-o[1],o[1]=t.getSize()-a,o}finally{t.reverse()}}static findGuardPattern(t,r,o){let a=o.length,l=new Int32Array(a),d=t.getSize(),f=!1,m=0,y=r;l.fill(0);for(let C=r;C<d;C++)if(t.get(C)!==f)l[m]++;else{if(m===a-1){if(vt.patternMatchVariance(l,o,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return[y,C];y+=l[0]+l[1],U.arraycopy(l,2,l,0,m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,f=!f}throw new K}static decodeDigit(t){let r=lt.MAX_AVG_VARIANCE,o=-1,a=lt.PATTERNS.length;for(let l=0;l<a;l++){let d=lt.PATTERNS[l],f=vt.patternMatchVariance(t,d,lt.MAX_INDIVIDUAL_VARIANCE);f<r?(r=f,o=l):f===r&&(o=-1)}if(o>=0)return o%10;throw new K}}lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],lt.MAX_AVG_VARIANCE=.38,lt.MAX_INDIVIDUAL_VARIANCE=.5,lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],lt.START_PATTERN=Int32Array.from([1,1,1,1]),lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ut extends vt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,o,a=0,l=Int32Array.from([0,0,0]);for(;!r;){l=Int32Array.from([0,0,0]),o=ut.findGuardPattern(t,a,!1,this.START_END_PATTERN,l);let d=o[0];a=o[1];let f=d-(a-d);f>=0&&(r=t.isRange(f,d,!1))}return o}static checkChecksum(t){return ut.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let o=parseInt(t.charAt(r-1),10);return ut.getStandardUPCEANChecksum(t.substring(0,r-1))===o}static getStandardUPCEANChecksum(t){let r=t.length,o=0;for(let a=r-1;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new V;o+=l}o*=3;for(let a=r-2;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new V;o+=l}return(1e3-o)%10}static decodeEnd(t,r){return ut.findGuardPattern(t,r,!1,ut.START_END_PATTERN,new Int32Array(ut.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,o,a){return this.findGuardPattern(t,r,o,a,new Int32Array(a.length))}static findGuardPattern(t,r,o,a,l){let d=t.getSize();r=o?t.getNextUnset(r):t.getNextSet(r);let f=0,m=r,y=a.length,C=o;for(let N=r;N<d;N++)if(t.get(N)!==C)l[f]++;else{if(f===y-1){if(vt.patternMatchVariance(l,a,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return Int32Array.from([m,N]);m+=l[0]+l[1];let I=l.slice(2,l.length-1);for(let P=0;P<f-1;P++)l[P]=I[P];l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,C=!C}throw new K}static decodeDigit(t,r,o,a){this.recordPattern(t,o,r);let l=this.MAX_AVG_VARIANCE,d=-1,f=a.length;for(let m=0;m<f;m++){let y=a[m],C=vt.patternMatchVariance(r,y,ut.MAX_INDIVIDUAL_VARIANCE);C<l&&(l=C,d=m)}if(d>=0)return d;throw new K}}ut.MAX_AVG_VARIANCE=.48,ut.MAX_INDIVIDUAL_VARIANCE=.7,ut.START_END_PATTERN=Int32Array.from([1,1,1]),ut.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ut.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ut.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Hr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,o){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(r,o,a),d=a.toString(),f=Hr.parseExtensionString(d),m=[new Ee((o[0]+o[1])/2,t),new Ee(l,t)],y=new ze(d,null,0,m,ce.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&y.putAllMetadata(f),y}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),d=r[1],f=0;for(let y=0;y<5&&d<l;y++){let C=ut.decodeDigit(t,a,d,ut.L_AND_G_PATTERNS);o+=String.fromCharCode(48+C%10);for(let N of a)d+=N;C>=10&&(f|=1<<4-y),y!==4&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(o.length!==5)throw new K;let m=this.determineCheckDigit(f);if(Hr.extensionChecksum(o.toString())!==m)throw new K;return d}static extensionChecksum(t){let r=t.length,o=0;for(let a=r-2;a>=0;a-=2)o+=t.charAt(a).charCodeAt(0)-48;o*=3;for(let a=r-1;a>=0;a-=2)o+=t.charAt(a).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new K}static parseExtensionString(t){if(t.length!==5)return null;let r=Hr.parseExtension5String(t);return r==null?null:new Map([[gt.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let o=parseInt(t.substring(1)),a=(o/100).toString(),l=o%100,d=l<10?"0"+l:l.toString();return r+a+"."+d}}class Ni{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,o){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(r,o,a),d=a.toString(),f=Ni.parseExtensionString(d),m=[new Ee((o[0]+o[1])/2,t),new Ee(l,t)],y=new ze(d,null,0,m,ce.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&y.putAllMetadata(f),y}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),d=r[1],f=0;for(let m=0;m<2&&d<l;m++){let y=ut.decodeDigit(t,a,d,ut.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let C of a)d+=C;y>=10&&(f|=1<<1-m),m!==1&&(d=t.getNextSet(d),d=t.getNextUnset(d))}if(o.length!==2)throw new K;if(parseInt(o.toString())%4!==f)throw new K;return d}static parseExtensionString(t){return t.length!==2?null:new Map([[gt.ISSUE_NUMBER,parseInt(t)]])}}class le{static decodeRow(t,r,o){let a=ut.findGuardPattern(r,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Hr().decodeRow(t,r,a)}catch{return new Ni().decodeRow(t,r,a)}}}le.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class fe extends ut{constructor(){super(),this.decodeRowStringBuffer="",fe.L_AND_G_PATTERNS=fe.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=fe.L_PATTERNS[t-10],o=new Int32Array(r.length);for(let a=0;a<r.length;a++)o[a]=r[r.length-a-1];fe.L_AND_G_PATTERNS[t]=o}}decodeRow(t,r,o){let a=fe.findStartGuardPattern(r),l=o==null?null:o.get(oe.NEED_RESULT_POINT_CALLBACK);if(l!=null){const ae=new Ee((a[0]+a[1])/2,t);l.foundPossibleResultPoint(ae)}let d=this.decodeMiddle(r,a,this.decodeRowStringBuffer),f=d.rowOffset,m=d.resultString;if(l!=null){const ae=new Ee(f,t);l.foundPossibleResultPoint(ae)}let y=this.decodeEnd(r,f);if(l!=null){const ae=new Ee((y[0]+y[1])/2,t);l.foundPossibleResultPoint(ae)}let C=y[1],N=C+(C-y[0]);if(N>=r.getSize()||!r.isRange(C,N,!1))throw new K;let I=m.toString();if(I.length<8)throw new V;if(!fe.checkChecksum(I))throw new X;let P=(a[1]+a[0])/2,F=(y[1]+y[0])/2,z=this.getBarcodeFormat(),Z=[new Ee(P,t),new Ee(F,t)],q=new ze(I,null,0,Z,z,new Date().getTime()),de=0;try{let ae=le.decodeRow(t,r,y[1]);q.putMetadata(gt.UPC_EAN_EXTENSION,ae.getText()),q.putAllMetadata(ae.getResultMetadata()),q.addResultPoints(ae.getResultPoints()),de=ae.getText().length}catch{}let ge=o==null?null:o.get(oe.ALLOWED_EAN_EXTENSIONS);if(ge!=null){let ae=!1;for(let Ye in ge)if(de.toString()===Ye){ae=!0;break}if(!ae)throw new K}return q}decodeEnd(t,r){return fe.findGuardPattern(t,r,!1,fe.START_END_PATTERN,new Int32Array(fe.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return fe.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let o=parseInt(t.charAt(r-1),10);return fe.getStandardUPCEANChecksum(t.substring(0,r-1))===o}static getStandardUPCEANChecksum(t){let r=t.length,o=0;for(let a=r-1;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new V;o+=l}o*=3;for(let a=r-2;a>=0;a-=2){let l=t.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new V;o+=l}return(1e3-o)%10}}class We extends fe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),d=r[1],f=0;for(let y=0;y<6&&d<l;y++){let C=fe.decodeDigit(t,a,d,fe.L_AND_G_PATTERNS);o+=String.fromCharCode(48+C%10);for(let N of a)d+=N;C>=10&&(f|=1<<5-y)}o=We.determineFirstDigit(o,f),d=fe.findGuardPattern(t,d,!0,fe.MIDDLE_PATTERN,new Int32Array(fe.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<6&&d<l;y++){let C=fe.decodeDigit(t,a,d,fe.L_PATTERNS);o+=String.fromCharCode(48+C);for(let N of a)d+=N}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return ce.EAN_13}static determineFirstDigit(t,r){for(let o=0;o<10;o++)if(r===this.FIRST_DIGIT_ENCODINGS[o])return t=String.fromCharCode(48+o)+t,t;throw new K}}We.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class yn extends fe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,o){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),d=r[1];for(let m=0;m<4&&d<l;m++){let y=fe.decodeDigit(t,a,d,fe.L_PATTERNS);o+=String.fromCharCode(48+y);for(let C of a)d+=C}d=fe.findGuardPattern(t,d,!0,fe.MIDDLE_PATTERN,new Int32Array(fe.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&d<l;m++){let y=fe.decodeDigit(t,a,d,fe.L_PATTERNS);o+=String.fromCharCode(48+y);for(let C of a)d+=C}return{rowOffset:d,resultString:o}}getBarcodeFormat(){return ce.EAN_8}}class Da extends fe{constructor(){super(...arguments),this.ean13Reader=new We}getBarcodeFormat(){return ce.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,o))}decodeMiddle(t,r,o){return this.ean13Reader.decodeMiddle(t,r,o)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let o=new ze(r.substring(1),null,null,t.getResultPoints(),ce.UPC_A);return t.getResultMetadata()!=null&&o.putAllMetadata(t.getResultMetadata()),o}else throw new K}reset(){this.ean13Reader.reset()}}class Gn extends fe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,o){const a=this.decodeMiddleCounters.map(y=>y);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const l=t.getSize();let d=r[1],f=0;for(let y=0;y<6&&d<l;y++){const C=Gn.decodeDigit(t,a,d,Gn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+C%10);for(let N of a)d+=N;C>=10&&(f|=1<<5-y)}let m=Gn.determineNumSysAndCheckDigit(o,f);return{rowOffset:d,resultString:m}}decodeEnd(t,r){return Gn.findGuardPatternWithoutCounters(t,r,!0,Gn.MIDDLE_END_PATTERN)}checkChecksum(t){return fe.checkChecksum(Gn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let o=0;o<=1;o++)for(let a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][a]){let l=String.fromCharCode(48+o),d=String.fromCharCode(48+a);return l+t+d}throw K.getNotFoundInstance()}getBarcodeFormat(){return ce.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(l=>l.charCodeAt(0)),o=new Te;o.append(t.charAt(0));let a=r[5];switch(a){case 0:case 1:case 2:o.appendChars(r,0,2),o.append(a),o.append("0000"),o.appendChars(r,2,3);break;case 3:o.appendChars(r,0,3),o.append("00000"),o.appendChars(r,3,2);break;case 4:o.appendChars(r,0,4),o.append("00000"),o.append(r[4]);break;default:o.appendChars(r,0,5),o.append("0000"),o.append(a);break}return t.length>=8&&o.append(t.charAt(7)),o.toString()}}Gn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Gn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ao extends vt{constructor(t){super();let r=t==null?null:t.get(oe.POSSIBLE_FORMATS),o=[];c(r)?(o.push(new We),o.push(new Da),o.push(new yn),o.push(new Gn)):(r.indexOf(ce.EAN_13)>-1&&o.push(new We),r.indexOf(ce.UPC_A)>-1&&o.push(new Da),r.indexOf(ce.EAN_8)>-1&&o.push(new yn),r.indexOf(ce.UPC_E)>-1&&o.push(new Gn)),this.readers=o}decodeRow(t,r,o){for(let a of this.readers)try{const l=a.decodeRow(t,r,o),d=l.getBarcodeFormat()===ce.EAN_13&&l.getText().charAt(0)==="0",f=o==null?null:o.get(oe.POSSIBLE_FORMATS),m=f==null||f.includes(ce.UPC_A);if(d&&m){const y=l.getRawBytes(),C=new ze(l.getText().substring(1),y,y?y.length:null,l.getResultPoints(),ce.UPC_A);return C.putAllMetadata(l.getResultMetadata()),C}return l}catch{}throw new K}reset(){for(let t of this.readers)t.reset()}}class sn extends vt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let o=0;o<r.length;o++)if(vt.patternMatchVariance(t,r[o],sn.MAX_INDIVIDUAL_VARIANCE)<sn.MAX_AVG_VARIANCE)return o;throw new K}static count(t){return Ke.sum(new Int32Array(t))}static increment(t,r){let o=0,a=r[0];for(let l=1;l<t.length;l++)r[l]>a&&(a=r[l],o=l);t[o]++}static decrement(t,r){let o=0,a=r[0];for(let l=1;l<t.length;l++)r[l]<a&&(a=r[l],o=l);t[o]--}static isFinderPattern(t){let r=t[0]+t[1],o=r+t[2]+t[3],a=r/o;if(a>=sn.MIN_FINDER_PATTERN_RATIO&&a<=sn.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let f of t)f>d&&(d=f),f<l&&(l=f);return d<10*l}return!1}}sn.MAX_AVG_VARIANCE=.2,sn.MAX_INDIVIDUAL_VARIANCE=.45,sn.MIN_FINDER_PATTERN_RATIO=9.5/12,sn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ii{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Ii))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ti{constructor(t,r,o,a,l){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ee(o,l)),this.resultPoints.push(new Ee(a,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof Ti))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class or{constructor(){}static getRSSvalue(t,r,o){let a=0;for(let m of t)a+=m;let l=0,d=0,f=t.length;for(let m=0;m<f-1;m++){let y;for(y=1,d|=1<<m;y<t[m];y++,d&=~(1<<m)){let C=or.combins(a-y-1,f-m-2);if(o&&d===0&&a-y-(f-m-1)>=f-m-1&&(C-=or.combins(a-y-(f-m),f-m-2)),f-m-1>1){let N=0;for(let I=a-y-(f-m-2);I>r;I--)N+=or.combins(a-y-I-1,f-m-3);C-=N*(f-1-m)}else a-y>r&&C--;l+=C}a-=y}return l}static combins(t,r){let o,a;t-r>r?(a=r,o=t-r):(a=t-r,o=r);let l=1,d=1;for(let f=t;f>o;f--)l*=f,d<=a&&(l/=d,d++);for(;d<=a;)l/=d,d++;return l}}class gc{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let o=12*r,a=new Y(o),l=0,f=t[0].getRightChar().getValue();for(let m=11;m>=0;--m)f&1<<m&&a.set(l),l++;for(let m=1;m<t.length;++m){let y=t[m],C=y.getLeftChar().getValue();for(let N=11;N>=0;--N)C&1<<N&&a.set(l),l++;if(y.getRightChar()!=null){let N=y.getRightChar().getValue();for(let I=11;I>=0;--I)N&1<<I&&a.set(l),l++}}return a}}class ti{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class bo{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Nt extends bo{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===Nt.FNC1}}Nt.FNC1="$";class Ne extends bo{constructor(t,r,o){super(t),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Nn extends bo{constructor(t,r,o){if(super(t),r<0||r>10||o<0||o>10)throw new V;this.firstDigit=r,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Nn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Nn.FNC1}isAnyFNC1(){return this.firstDigit===Nn.FNC1||this.secondDigit===Nn.FNC1}}Nn.FNC1=10;class ve{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new K;let r=t.substring(0,2);for(let l of ve.TWO_DIGIT_DATA_LENGTH)if(l[0]===r)return l[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(2,l[2],t):ve.processFixedAI(2,l[1],t);if(t.length<3)throw new K;let o=t.substring(0,3);for(let l of ve.THREE_DIGIT_DATA_LENGTH)if(l[0]===o)return l[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(3,l[2],t):ve.processFixedAI(3,l[1],t);for(let l of ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===o)return l[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(4,l[2],t):ve.processFixedAI(4,l[1],t);if(t.length<4)throw new K;let a=t.substring(0,4);for(let l of ve.FOUR_DIGIT_DATA_LENGTH)if(l[0]===a)return l[1]===ve.VARIABLE_LENGTH?ve.processVariableAI(4,l[2],t):ve.processFixedAI(4,l[1],t);throw new K}static processFixedAI(t,r,o){if(o.length<t)throw new K;let a=o.substring(0,t);if(o.length<t+r)throw new K;let l=o.substring(t,t+r),d=o.substring(t+r),f="("+a+")"+l,m=ve.parseFieldsInGeneralPurpose(d);return m==null?f:f+m}static processVariableAI(t,r,o){let a=o.substring(0,t),l;o.length<t+r?l=o.length:l=t+r;let d=o.substring(t,l),f=o.substring(l),m="("+a+")"+d,y=ve.parseFieldsInGeneralPurpose(f);return y==null?m:m+y}}ve.VARIABLE_LENGTH=[],ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ve.VARIABLE_LENGTH,20],["22",ve.VARIABLE_LENGTH,29],["30",ve.VARIABLE_LENGTH,8],["37",ve.VARIABLE_LENGTH,8],["90",ve.VARIABLE_LENGTH,30],["91",ve.VARIABLE_LENGTH,30],["92",ve.VARIABLE_LENGTH,30],["93",ve.VARIABLE_LENGTH,30],["94",ve.VARIABLE_LENGTH,30],["95",ve.VARIABLE_LENGTH,30],["96",ve.VARIABLE_LENGTH,30],["97",ve.VARIABLE_LENGTH,3],["98",ve.VARIABLE_LENGTH,30],["99",ve.VARIABLE_LENGTH,30]],ve.THREE_DIGIT_DATA_LENGTH=[["240",ve.VARIABLE_LENGTH,30],["241",ve.VARIABLE_LENGTH,30],["242",ve.VARIABLE_LENGTH,6],["250",ve.VARIABLE_LENGTH,30],["251",ve.VARIABLE_LENGTH,30],["253",ve.VARIABLE_LENGTH,17],["254",ve.VARIABLE_LENGTH,20],["400",ve.VARIABLE_LENGTH,30],["401",ve.VARIABLE_LENGTH,30],["402",17],["403",ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ve.VARIABLE_LENGTH,20],["421",ve.VARIABLE_LENGTH,15],["422",3],["423",ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ve.VARIABLE_LENGTH,15],["391",ve.VARIABLE_LENGTH,18],["392",ve.VARIABLE_LENGTH,15],["393",ve.VARIABLE_LENGTH,18],["703",ve.VARIABLE_LENGTH,30]],ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ve.VARIABLE_LENGTH,20],["8003",ve.VARIABLE_LENGTH,30],["8004",ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ve.VARIABLE_LENGTH,30],["8008",ve.VARIABLE_LENGTH,12],["8018",18],["8020",ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ve.VARIABLE_LENGTH,70],["8200",ve.VARIABLE_LENGTH,70]];class ni{constructor(t){this.buffer=new Te,this.information=t}decodeAllCodes(t,r){let o=r,a=null;do{let l=this.decodeGeneralPurposeField(o,a),d=ve.parseFieldsInGeneralPurpose(l.getNewString());if(d!=null&&t.append(d),l.isRemaining()?a=""+l.getRemainingValue():a=null,o===l.getNewPosition())break;o=l.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(t,4);return l===0?new Nn(this.information.getSize(),Nn.FNC1,Nn.FNC1):new Nn(this.information.getSize(),l-1,Nn.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),o=(r-8)/11,a=(r-8)%11;return new Nn(t+7,o,a)}extractNumericValueFromBitArray(t,r){return ni.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,o){let a=0;for(let l=0;l<o;++l)t.get(r+l)&&(a|=1<<o-l-1);return a}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Ne(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Ne(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let o=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(o!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new Ne(this.current.getPosition(),this.buffer.toString()):r=new Ne(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new ti(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new Ne(this.current.getPosition(),this.buffer.toString());return new ti(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ti(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Ne(this.current.getPosition(),this.buffer.toString());return new ti(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ti(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Ne(this.current.getPosition(),this.buffer.toString());return new ti(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ti(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<116)return!0;if(t+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,8);return a>=232&&a<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Nt(t+5,Nt.FNC1);if(r>=5&&r<15)return new Nt(t+5,"0"+(r-5));let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<90)return new Nt(t+7,""+(o+1));if(o>=90&&o<116)return new Nt(t+7,""+(o+7));let a=this.extractNumericValueFromBitArray(t,8),l;switch(a){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new V}return new Nt(t+8,l)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,6);return o>=16&&o<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Nt(t+5,Nt.FNC1);if(r>=5&&r<15)return new Nt(t+5,"0"+(r-5));let o=this.extractNumericValueFromBitArray(t,6);if(o>=32&&o<58)return new Nt(t+6,""+(o+33));let a;switch(o){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new xn("Decoding invalid alphanumeric value: "+o)}return new Nt(t+6,a)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class Ds{constructor(t){this.information=t,this.generalDecoder=new ni(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class on extends Ds{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let o=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,o)}encodeCompressedGtinWithoutAI(t,r,o){for(let a=0;a<4;++a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);l/100===0&&t.append("0"),l/10===0&&t.append("0"),t.append(l)}on.appendCheckDigit(t,o)}static appendCheckDigit(t,r){let o=0;for(let a=0;a<13;a++){let l=t.charAt(a+r).charCodeAt(0)-48;o+=a&1?l:3*l}o=10-o%10,o===10&&(o=0),t.append(o)}}on.GTIN_SIZE=40;class ri extends on{constructor(t){super(t)}parseInformation(){let t=new Te;t.append("(01)");let r=t.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(ri.HEADER_SIZE,4);return t.append(o),this.encodeCompressedGtinWithoutAI(t,ri.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,ri.HEADER_SIZE+44)}}ri.HEADER_SIZE=4;class Er extends Ds{constructor(t){super(t)}parseInformation(){let t=new Te;return this.getGeneralDecoder().decodeAllCodes(t,Er.HEADER_SIZE)}}Er.HEADER_SIZE=5;class as extends on{constructor(t){super(t)}encodeCompressedWeight(t,r,o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,o);this.addWeightCode(t,a);let l=this.checkWeight(a),d=1e5;for(let f=0;f<5;++f)l/d===0&&t.append("0"),d/=10;t.append(l)}}class ar extends as{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=ar.HEADER_SIZE+as.GTIN_SIZE+ar.WEIGHT_SIZE)throw new K;let t=new Te;return this.encodeCompressedGtin(t,ar.HEADER_SIZE),this.encodeCompressedWeight(t,ar.HEADER_SIZE+as.GTIN_SIZE,ar.WEIGHT_SIZE),t.toString()}}ar.HEADER_SIZE=5,ar.WEIGHT_SIZE=15;class pc extends ar{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class mc extends ar{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class lr extends on{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<lr.HEADER_SIZE+on.GTIN_SIZE)throw new K;let t=new Te;this.encodeCompressedGtin(t,lr.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(lr.HEADER_SIZE+on.GTIN_SIZE,lr.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(lr.HEADER_SIZE+on.GTIN_SIZE+lr.LAST_DIGIT_SIZE,null);return t.append(o.getNewString()),t.toString()}}lr.HEADER_SIZE=8,lr.LAST_DIGIT_SIZE=2;class an extends on{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<an.HEADER_SIZE+on.GTIN_SIZE)throw new K;let t=new Te;this.encodeCompressedGtin(t,an.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(an.HEADER_SIZE+on.GTIN_SIZE,an.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(an.HEADER_SIZE+on.GTIN_SIZE+an.LAST_DIGIT_SIZE,an.FIRST_THREE_DIGITS_SIZE);o/100==0&&t.append("0"),o/10==0&&t.append("0"),t.append(o);let a=this.getGeneralDecoder().decodeGeneralPurposeField(an.HEADER_SIZE+on.GTIN_SIZE+an.LAST_DIGIT_SIZE+an.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()}}an.HEADER_SIZE=8,an.LAST_DIGIT_SIZE=2,an.FIRST_THREE_DIGITS_SIZE=10;class Ct extends as{constructor(t,r,o){super(t),this.dateCode=o,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=Ct.HEADER_SIZE+Ct.GTIN_SIZE+Ct.WEIGHT_SIZE+Ct.DATE_SIZE)throw new K;let t=new Te;return this.encodeCompressedGtin(t,Ct.HEADER_SIZE),this.encodeCompressedWeight(t,Ct.HEADER_SIZE+Ct.GTIN_SIZE,Ct.WEIGHT_SIZE),this.encodeCompressedDate(t,Ct.HEADER_SIZE+Ct.GTIN_SIZE+Ct.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,Ct.DATE_SIZE);if(o==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let a=o%32;o/=32;let l=o%12+1;o/=12;let d=o;d/10==0&&t.append("0"),t.append(d),l/10==0&&t.append("0"),t.append(l),a/10==0&&t.append("0"),t.append(a)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}Ct.HEADER_SIZE=8,Ct.WEIGHT_SIZE=20,Ct.DATE_SIZE=16;function ls(S){try{if(S.get(1))return new ri(S);if(!S.get(2))return new Er(S);switch(ni.extractNumericValueFromBitArray(S,1,4)){case 4:return new pc(S);case 5:return new mc(S)}switch(ni.extractNumericValueFromBitArray(S,1,5)){case 12:return new lr(S);case 13:return new an(S)}switch(ni.extractNumericValueFromBitArray(S,1,7)){case 56:return new Ct(S,"310","11");case 57:return new Ct(S,"320","11");case 58:return new Ct(S,"310","13");case 59:return new Ct(S,"320","13");case 60:return new Ct(S,"310","15");case 61:return new Ct(S,"320","15");case 62:return new Ct(S,"310","17");case 63:return new Ct(S,"320","17")}}catch(t){throw console.log(t),new xn("unknown decoder: "+S)}}class Vr{constructor(t,r,o,a){this.leftchar=t,this.rightchar=r,this.finderpattern=o,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof Vr?Vr.equalsOrNull(t.leftchar,r.leftchar)&&Vr.equalsOrNull(t.rightchar,r.rightchar)&&Vr.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:Vr.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class So{constructor(t,r,o){this.pairs=t,this.rowNumber=r,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof So?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let o;return t.forEach((a,l)=>{r.forEach(d=>{a.getLeftChar().getValue()===d.getLeftChar().getValue()&&a.getRightChar().getValue()===d.getRightChar().getValue()&&a.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(o=!0)})}),o}}class ie extends sn{constructor(t){super(...arguments),this.pairs=new Array(ie.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,o){this.pairs.length=0,this.startFromEven=!1;try{return ie.constructResult(this.decodeRow2pairs(t,r))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,ie.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(l){if(l instanceof K){if(!this.pairs.length)throw new K;o=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new K}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let o=r;o<this.rows.length;o++){let a=this.rows[o];this.pairs.length=0;for(let d of t)this.pairs.push(d.getPairs());if(this.pairs.push(a.getPairs()),!ie.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(t);l.push(a);try{return this.checkRows(l,o+1)}catch(d){this.verbose&&console.log(d)}}throw new K}static isValidSequence(t){for(let r of ie.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let o=!0;for(let a=0;a<t.length;a++)if(t[a].getFinderPattern().getValue()!=r[a]){o=!1;break}if(o)return!0}return!1}storeRow(t,r){let o=0,a=!1,l=!1;for(;o<this.rows.length;){let d=this.rows[o];if(d.getRowNumber()>t){l=d.isEquivalent(this.pairs);break}a=d.isEquivalent(this.pairs),o++}l||a||ie.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new So(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let o of r)if(o.getPairs().length!==t.length){for(let a of o.getPairs())for(let l of t)if(Vr.equals(a,l))break}}static isPartialRow(t,r){for(let o of r){let a=!0;for(let l of t){let d=!1;for(let f of o.getPairs())if(l.equals(f)){d=!0;break}if(!d){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=gc.buildBitArray(t),a=ls(r).parseInformation(),l=t[0].getFinderPattern().getResultPoints(),d=t[t.length-1].getFinderPattern().getResultPoints(),f=[l[0],l[1],d[0],d[1]];return new ze(a,null,null,f,ce.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),o=t.getRightChar();if(o==null)return!1;let a=o.getChecksumPortion(),l=2;for(let f=1;f<this.pairs.size();++f){let m=this.pairs.get(f);a+=m.getLeftChar().getChecksumPortion(),l++;let y=m.getRightChar();y!=null&&(a+=y.getChecksumPortion(),l++)}return a%=211,211*(l-4)+a==r.getValue()}static getNextSecondBar(t,r){let o;return t.get(r)?(o=t.getNextUnset(r),o=t.getNextSet(o)):(o=t.getNextSet(r),o=t.getNextUnset(o)),o}retrieveNextPair(t,r,o){let a=r.length%2==0;this.startFromEven&&(a=!a);let l,d=!0,f=-1;do this.findNextPair(t,r,f),l=this.parseFoundFinderPattern(t,o,a),l==null?f=ie.getNextSecondBar(t,this.startEnd[0]):d=!1;while(d);let m=this.decodeDataCharacter(t,l,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new K;let y;try{y=this.decodeDataCharacter(t,l,a,!1)}catch(C){y=null,this.verbose&&console.log(C)}return new Vr(m,y,l,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,o){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=t.getSize(),d;o>=0?d=o:this.isEmptyPair(r)?d=0:d=r[r.length-1].getFinderPattern().getStartEnd()[1];let f=r.length%2!=0;this.startFromEven&&(f=!f);let m=!1;for(;d<l&&(m=!t.get(d),!!m);)d++;let y=0,C=d;for(let N=d;N<l;N++)if(t.get(N)!=m)a[y]++;else{if(y==3){if(f&&ie.reverseCounters(a),ie.isFinderPattern(a)){this.startEnd[0]=C,this.startEnd[1]=N;return}f&&ie.reverseCounters(a),C+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,y--}else y++;a[y]=1,m=!m}throw new K}static reverseCounters(t){let r=t.length;for(let o=0;o<r/2;++o){let a=t[o];t[o]=t[r-o-1],t[r-o-1]=a}}parseFoundFinderPattern(t,r,o){let a,l,d;if(o){let y=this.startEnd[0]-1;for(;y>=0&&!t.get(y);)y--;y++,a=this.startEnd[0]-y,l=y,d=this.startEnd[1]}else l=this.startEnd[0],d=t.getNextUnset(this.startEnd[1]+1),a=d-this.startEnd[1];let f=this.getDecodeFinderCounters();U.arraycopy(f,0,f,1,f.length-1),f[0]=a;let m;try{m=this.parseFinderValue(f,ie.FINDER_PATTERNS)}catch{return null}return new Ti(m,[l,d],l,d,r)}decodeDataCharacter(t,r,o,a){let l=this.getDataCharacterCounters();for(let ct=0;ct<l.length;ct++)l[ct]=0;if(a)ie.recordPatternInReverse(t,r.getStartEnd()[0],l);else{ie.recordPattern(t,r.getStartEnd()[1],l);for(let ct=0,en=l.length-1;ct<en;ct++,en--){let Cn=l[ct];l[ct]=l[en],l[en]=Cn}}let d=17,f=Ke.sum(new Int32Array(l))/d,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(f-m)/m>.3)throw new K;let y=this.getOddCounts(),C=this.getEvenCounts(),N=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let ct=0;ct<l.length;ct++){let en=1*l[ct]/f,Cn=en+.5;if(Cn<1){if(en<.3)throw new K;Cn=1}else if(Cn>8){if(en>8.7)throw new K;Cn=8}let Bi=ct/2;ct&1?(C[Bi]=Cn,I[Bi]=en-Cn):(y[Bi]=Cn,N[Bi]=en-Cn)}this.adjustOddEvenCounts(d);let P=4*r.getValue()+(o?0:2)+(a?0:1)-1,F=0,z=0;for(let ct=y.length-1;ct>=0;ct--){if(ie.isNotA1left(r,o,a)){let en=ie.WEIGHTS[P][2*ct];z+=y[ct]*en}F+=y[ct]}let Z=0;for(let ct=C.length-1;ct>=0;ct--)if(ie.isNotA1left(r,o,a)){let en=ie.WEIGHTS[P][2*ct+1];Z+=C[ct]*en}let q=z+Z;if(F&1||F>13||F<4)throw new K;let de=(13-F)/2,ge=ie.SYMBOL_WIDEST[de],ae=9-ge,Ye=or.getRSSvalue(y,ge,!0),He=or.getRSSvalue(C,ae,!1),Tt=ie.EVEN_TOTAL_SUBSET[de],_n=ie.GSUM[de],vn=Ye*Tt+He+_n;return new Ii(vn,q)}static isNotA1left(t,r,o){return!(t.getValue()==0&&r&&o)}adjustOddEvenCounts(t){let r=Ke.sum(new Int32Array(this.getOddCounts())),o=Ke.sum(new Int32Array(this.getEvenCounts())),a=!1,l=!1;r>13?l=!0:r<4&&(a=!0);let d=!1,f=!1;o>13?f=!0:o<4&&(d=!0);let m=r+o-t,y=(r&1)==1,C=(o&1)==0;if(m==1)if(y){if(C)throw new K;l=!0}else{if(!C)throw new K;f=!0}else if(m==-1)if(y){if(C)throw new K;a=!0}else{if(!C)throw new K;d=!0}else if(m==0){if(y){if(!C)throw new K;r<o?(a=!0,f=!0):(l=!0,d=!0)}else if(C)throw new K}else throw new K;if(a){if(l)throw new K;ie.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&ie.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(f)throw new K;ie.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&ie.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ie.SYMBOL_WIDEST=[7,5,4,3,1],ie.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ie.GSUM=[0,348,1388,2948,3988],ie.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ie.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ie.FINDER_PAT_A=0,ie.FINDER_PAT_B=1,ie.FINDER_PAT_C=2,ie.FINDER_PAT_D=3,ie.FINDER_PAT_E=4,ie.FINDER_PAT_F=5,ie.FINDER_PATTERN_SEQUENCES=[[ie.FINDER_PAT_A,ie.FINDER_PAT_A],[ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B],[ie.FINDER_PAT_A,ie.FINDER_PAT_C,ie.FINDER_PAT_B,ie.FINDER_PAT_D],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_C],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_D,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_E,ie.FINDER_PAT_B,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_D],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_E],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F],[ie.FINDER_PAT_A,ie.FINDER_PAT_A,ie.FINDER_PAT_B,ie.FINDER_PAT_B,ie.FINDER_PAT_C,ie.FINDER_PAT_D,ie.FINDER_PAT_D,ie.FINDER_PAT_E,ie.FINDER_PAT_E,ie.FINDER_PAT_F,ie.FINDER_PAT_F]],ie.MAX_PAIRS=11;class xc extends Ii{constructor(t,r,o){super(t,r),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Lt extends sn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,o){const a=this.decodePair(r,!1,t,o);Lt.addOrTally(this.possibleLeftPairs,a),r.reverse();let l=this.decodePair(r,!0,t,o);Lt.addOrTally(this.possibleRightPairs,l),r.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&Lt.checkChecksum(d,f))return Lt.constructResult(d,f)}throw new K}static addOrTally(t,r){if(r==null)return;let o=!1;for(let a of t)if(a.getValue()===r.getValue()){a.incrementCount(),o=!0;break}o||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let o=4537077*t.getValue()+r.getValue(),a=new String(o).toString(),l=new Te;for(let y=13-a.length;y>0;y--)l.append("0");l.append(a);let d=0;for(let y=0;y<13;y++){let C=l.charAt(y).charCodeAt(0)-48;d+=y&1?C:3*C}d=10-d%10,d===10&&(d=0),l.append(d.toString());let f=t.getFinderPattern().getResultPoints(),m=r.getFinderPattern().getResultPoints();return new ze(l.toString(),null,0,[f[0],f[1],m[0],m[1]],ce.RSS_14,new Date().getTime())}static checkChecksum(t,r){let o=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,o===a}decodePair(t,r,o,a){try{let l=this.findFinderPattern(t,r),d=this.parseFoundFinderPattern(t,o,r,l),f=a==null?null:a.get(oe.NEED_RESULT_POINT_CALLBACK);if(f!=null){let C=(l[0]+l[1])/2;r&&(C=t.getSize()-1-C),f.foundPossibleResultPoint(new Ee(C,o))}let m=this.decodeDataCharacter(t,d,!0),y=this.decodeDataCharacter(t,d,!1);return new xc(1597*m.getValue()+y.getValue(),m.getChecksumPortion()+4*y.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(t,r,o){let a=this.getDataCharacterCounters();for(let Z=0;Z<a.length;Z++)a[Z]=0;if(o)vt.recordPatternInReverse(t,r.getStartEnd()[0],a);else{vt.recordPattern(t,r.getStartEnd()[1]+1,a);for(let Z=0,q=a.length-1;Z<q;Z++,q--){let de=a[Z];a[Z]=a[q],a[q]=de}}let l=o?16:15,d=Ke.sum(new Int32Array(a))/l,f=this.getOddCounts(),m=this.getEvenCounts(),y=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let Z=0;Z<a.length;Z++){let q=a[Z]/d,de=Math.floor(q+.5);de<1?de=1:de>8&&(de=8);let ge=Math.floor(Z/2);Z&1?(m[ge]=de,C[ge]=q-de):(f[ge]=de,y[ge]=q-de)}this.adjustOddEvenCounts(o,l);let N=0,I=0;for(let Z=f.length-1;Z>=0;Z--)I*=9,I+=f[Z],N+=f[Z];let P=0,F=0;for(let Z=m.length-1;Z>=0;Z--)P*=9,P+=m[Z],F+=m[Z];let z=I+3*P;if(o){if(N&1||N>12||N<4)throw new K;let Z=(12-N)/2,q=Lt.OUTSIDE_ODD_WIDEST[Z],de=9-q,ge=or.getRSSvalue(f,q,!1),ae=or.getRSSvalue(m,de,!0),Ye=Lt.OUTSIDE_EVEN_TOTAL_SUBSET[Z],He=Lt.OUTSIDE_GSUM[Z];return new Ii(ge*Ye+ae+He,z)}else{if(F&1||F>10||F<4)throw new K;let Z=(10-F)/2,q=Lt.INSIDE_ODD_WIDEST[Z],de=9-q,ge=or.getRSSvalue(f,q,!0),ae=or.getRSSvalue(m,de,!1),Ye=Lt.INSIDE_ODD_TOTAL_SUBSET[Z],He=Lt.INSIDE_GSUM[Z];return new Ii(ae*Ye+ge+He,z)}}findFinderPattern(t,r){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),l=!1,d=0;for(;d<a&&(l=!t.get(d),r!==l);)d++;let f=0,m=d;for(let y=d;y<a;y++)if(t.get(y)!==l)o[f]++;else{if(f===3){if(sn.isFinderPattern(o))return[m,y];m+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,l=!l}throw new K}parseFoundFinderPattern(t,r,o,a){let l=t.get(a[0]),d=a[0]-1;for(;d>=0&&l!==t.get(d);)d--;d++;const f=a[0]-d,m=this.getDecodeFinderCounters(),y=new Int32Array(m.length);U.arraycopy(m,0,y,1,m.length-1),y[0]=f;const C=this.parseFinderValue(y,Lt.FINDER_PATTERNS);let N=d,I=a[1];return o&&(N=t.getSize()-1-N,I=t.getSize()-1-I),new Ti(C,[d,a[1]],N,I,r)}adjustOddEvenCounts(t,r){let o=Ke.sum(new Int32Array(this.getOddCounts())),a=Ke.sum(new Int32Array(this.getEvenCounts())),l=!1,d=!1,f=!1,m=!1;t?(o>12?d=!0:o<4&&(l=!0),a>12?m=!0:a<4&&(f=!0)):(o>11?d=!0:o<5&&(l=!0),a>10?m=!0:a<4&&(f=!0));let y=o+a-r,C=(o&1)===(t?1:0),N=(a&1)===1;if(y===1)if(C){if(N)throw new K;d=!0}else{if(!N)throw new K;m=!0}else if(y===-1)if(C){if(N)throw new K;l=!0}else{if(!N)throw new K;f=!0}else if(y===0){if(C){if(!N)throw new K;o<a?(l=!0,m=!0):(d=!0,f=!0)}else if(N)throw new K}else throw new K;if(l){if(d)throw new K;sn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&sn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(m)throw new K;sn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&sn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Lt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Lt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Lt.OUTSIDE_GSUM=[0,161,961,2015,2715],Lt.INSIDE_GSUM=[0,336,1036,1516],Lt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Lt.INSIDE_ODD_WIDEST=[2,4,6,8],Lt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Zr extends vt{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const o=t?t.get(oe.POSSIBLE_FORMATS):null,a=t&&t.get(oe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ce.EAN_13)||o.includes(ce.UPC_A)||o.includes(ce.EAN_8)||o.includes(ce.UPC_E))&&this.readers.push(new Ao(t)),o.includes(ce.CODE_39)&&this.readers.push(new St(a)),o.includes(ce.CODE_128)&&this.readers.push(new me),o.includes(ce.ITF)&&this.readers.push(new lt),o.includes(ce.RSS_14)&&this.readers.push(new Lt),o.includes(ce.RSS_EXPANDED)&&this.readers.push(new ie(this.verbose))):(this.readers.push(new Ao(t)),this.readers.push(new St),this.readers.push(new Ao(t)),this.readers.push(new me),this.readers.push(new lt),this.readers.push(new Lt),this.readers.push(new ie(this.verbose)))}decodeRow(t,r,o){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,o)}catch{}throw new K}reset(){this.readers.forEach(t=>t.reset())}}class cs extends ft{constructor(t=500,r){super(new Zr(r),t,r)}}class ot{constructor(t,r,o){this.ecCodewords=t,this.ecBlocks=[r],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class it{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(t,r,o,a,l,d){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=o,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=l,this.ecBlocks=d;let f=0;const m=d.getECCodewords(),y=d.getECBlocks();for(let C of y)f+=C.getCount()*(C.getDataCodewords()+m);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if(t&1||r&1)throw new V;for(let o of Ze.VERSIONS)if(o.symbolSizeRows===t&&o.symbolSizeColumns===r)return o;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new Ze(1,10,10,8,8,new ot(5,new it(1,3))),new Ze(2,12,12,10,10,new ot(7,new it(1,5))),new Ze(3,14,14,12,12,new ot(10,new it(1,8))),new Ze(4,16,16,14,14,new ot(12,new it(1,12))),new Ze(5,18,18,16,16,new ot(14,new it(1,18))),new Ze(6,20,20,18,18,new ot(18,new it(1,22))),new Ze(7,22,22,20,20,new ot(20,new it(1,30))),new Ze(8,24,24,22,22,new ot(24,new it(1,36))),new Ze(9,26,26,24,24,new ot(28,new it(1,44))),new Ze(10,32,32,14,14,new ot(36,new it(1,62))),new Ze(11,36,36,16,16,new ot(42,new it(1,86))),new Ze(12,40,40,18,18,new ot(48,new it(1,114))),new Ze(13,44,44,20,20,new ot(56,new it(1,144))),new Ze(14,48,48,22,22,new ot(68,new it(1,174))),new Ze(15,52,52,24,24,new ot(42,new it(2,102))),new Ze(16,64,64,14,14,new ot(56,new it(2,140))),new Ze(17,72,72,16,16,new ot(36,new it(4,92))),new Ze(18,80,80,18,18,new ot(48,new it(4,114))),new Ze(19,88,88,20,20,new ot(56,new it(4,144))),new Ze(20,96,96,22,22,new ot(68,new it(4,174))),new Ze(21,104,104,24,24,new ot(56,new it(6,136))),new Ze(22,120,120,18,18,new ot(68,new it(6,175))),new Ze(23,132,132,20,20,new ot(62,new it(8,163))),new Ze(24,144,144,22,22,new ot(62,new it(8,156),new it(2,155))),new Ze(25,8,18,6,16,new ot(7,new it(1,5))),new Ze(26,8,32,6,14,new ot(11,new it(1,10))),new Ze(27,12,26,10,24,new ot(14,new it(1,16))),new Ze(28,12,36,10,16,new ot(18,new it(1,22))),new Ze(29,16,36,14,16,new ot(24,new it(1,32))),new Ze(30,16,48,14,22,new ot(28,new it(1,49)))]}}Ze.VERSIONS=Ze.buildVersions();class tt{constructor(t){const r=t.getHeight();if(r<8||r>144||r&1)throw new V;this.version=tt.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Xe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),o=t.getWidth();return Ze.getVersionForDimensions(r,o)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,o=4,a=0;const l=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let f=!1,m=!1,y=!1,C=!1;do if(o===l&&a===0&&!f)t[r++]=this.readCorner1(l,d)&255,o-=2,a+=2,f=!0;else if(o===l-2&&a===0&&d&3&&!m)t[r++]=this.readCorner2(l,d)&255,o-=2,a+=2,m=!0;else if(o===l+4&&a===2&&!(d&7)&&!y)t[r++]=this.readCorner3(l,d)&255,o-=2,a+=2,y=!0;else if(o===l-2&&a===0&&(d&7)===4&&!C)t[r++]=this.readCorner4(l,d)&255,o-=2,a+=2,C=!0;else{do o<l&&a>=0&&!this.readMappingMatrix.get(a,o)&&(t[r++]=this.readUtah(o,a,l,d)&255),o-=2,a+=2;while(o>=0&&a<d);o+=1,a+=3;do o>=0&&a<d&&!this.readMappingMatrix.get(a,o)&&(t[r++]=this.readUtah(o,a,l,d)&255),o+=2,a-=2;while(o<l&&a>=0);o+=3,a+=1}while(o<l||a<d);if(r!==this.version.getTotalCodewords())throw new V;return t}readModule(t,r,o,a){return t<0&&(t+=o,r+=4-(o+4&7)),r<0&&(r+=a,t+=4-(a+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,o,a){let l=0;return this.readModule(t-2,r-2,o,a)&&(l|=1),l<<=1,this.readModule(t-2,r-1,o,a)&&(l|=1),l<<=1,this.readModule(t-1,r-2,o,a)&&(l|=1),l<<=1,this.readModule(t-1,r-1,o,a)&&(l|=1),l<<=1,this.readModule(t-1,r,o,a)&&(l|=1),l<<=1,this.readModule(t,r-2,o,a)&&(l|=1),l<<=1,this.readModule(t,r-1,o,a)&&(l|=1),l<<=1,this.readModule(t,r,o,a)&&(l|=1),l}readCorner1(t,r){let o=0;return this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,1,t,r)&&(o|=1),o<<=1,this.readModule(t-1,2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(2,r-1,t,r)&&(o|=1),o<<=1,this.readModule(3,r-1,t,r)&&(o|=1),o}readCorner2(t,r){let o=0;return this.readModule(t-3,0,t,r)&&(o|=1),o<<=1,this.readModule(t-2,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(0,r-4,t,r)&&(o|=1),o<<=1,this.readModule(0,r-3,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o}readCorner3(t,r){let o=0;return this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(0,r-3,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-3,t,r)&&(o|=1),o<<=1,this.readModule(1,r-2,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o}readCorner4(t,r){let o=0;return this.readModule(t-3,0,t,r)&&(o|=1),o<<=1,this.readModule(t-2,0,t,r)&&(o|=1),o<<=1,this.readModule(t-1,0,t,r)&&(o|=1),o<<=1,this.readModule(0,r-2,t,r)&&(o|=1),o<<=1,this.readModule(0,r-1,t,r)&&(o|=1),o<<=1,this.readModule(1,r-1,t,r)&&(o|=1),o<<=1,this.readModule(2,r-1,t,r)&&(o|=1),o<<=1,this.readModule(3,r-1,t,r)&&(o|=1),o}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new R("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),d=r/a|0,f=o/l|0,m=d*a,y=f*l,C=new Xe(y,m);for(let N=0;N<d;++N){const I=N*a;for(let P=0;P<f;++P){const F=P*l;for(let z=0;z<a;++z){const Z=N*(a+2)+1+z,q=I+z;for(let de=0;de<l;++de){const ge=P*(l+2)+1+de;if(t.get(ge,Z)){const ae=F+de;C.set(ae,q)}}}}}return C}}class wt{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const o=r.getECBlocks();let a=0;const l=o.getECBlocks();for(let z of l)a+=z.getCount();const d=new Array(a);let f=0;for(let z of l)for(let Z=0;Z<z.getCount();Z++){const q=z.getDataCodewords(),de=o.getECCodewords()+q;d[f++]=new wt(q,new Uint8Array(de))}const y=d[0].codewords.length-o.getECCodewords(),C=y-1;let N=0;for(let z=0;z<C;z++)for(let Z=0;Z<f;Z++)d[Z].codewords[z]=t[N++];const I=r.getVersionNumber()===24,P=I?8:f;for(let z=0;z<P;z++)d[z].codewords[y-1]=t[N++];const F=d[0].codewords.length;for(let z=y;z<F;z++)for(let Z=0;Z<f;Z++){const q=I?(Z+8)%f:Z,de=I&&q>7?z-1:z;d[q].codewords[de]=t[N++]}if(N!==t.length)throw new R;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ki{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new R(""+t);let r=0,o=this.bitOffset,a=this.byteOffset;const l=this.bytes;if(o>0){const d=8-o,f=t<d?t:d,m=d-f,y=255>>8-f<<m;r=(l[a]&y)>>m,t-=f,o+=f,o===8&&(o=0,a++)}if(t>0){for(;t>=8;)r=r<<8|l[a]&255,a++,t-=8;if(t>0){const d=8-t,f=255>>d<<d;r=r<<t|(l[a]&f)>>d,o+=t}}return this.bitOffset=o,this.byteOffset=a,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Et;(function(S){S[S.PAD_ENCODE=0]="PAD_ENCODE",S[S.ASCII_ENCODE=1]="ASCII_ENCODE",S[S.C40_ENCODE=2]="C40_ENCODE",S[S.TEXT_ENCODE=3]="TEXT_ENCODE",S[S.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",S[S.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",S[S.BASE256_ENCODE=6]="BASE256_ENCODE"})(Et||(Et={}));class In{static decode(t){const r=new ki(t),o=new Te,a=new Te,l=new Array;let d=Et.ASCII_ENCODE;do if(d===Et.ASCII_ENCODE)d=this.decodeAsciiSegment(r,o,a);else{switch(d){case Et.C40_ENCODE:this.decodeC40Segment(r,o);break;case Et.TEXT_ENCODE:this.decodeTextSegment(r,o);break;case Et.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,o);break;case Et.EDIFACT_ENCODE:this.decodeEdifactSegment(r,o);break;case Et.BASE256_ENCODE:this.decodeBase256Segment(r,o,l);break;default:throw new V}d=Et.ASCII_ENCODE}while(d!==Et.PAD_ENCODE&&r.available()>0);return a.length()>0&&o.append(a.toString()),new Br(t,o.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(t,r,o){let a=!1;do{let l=t.readBits(8);if(l===0)throw new V;if(l<=128)return a&&(l+=128),r.append(String.fromCharCode(l-1)),Et.ASCII_ENCODE;if(l===129)return Et.PAD_ENCODE;if(l<=229){const d=l-130;d<10&&r.append("0"),r.append(""+d)}else switch(l){case 230:return Et.C40_ENCODE;case 231:return Et.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),o.insert(0,"");break;case 237:r.append("[)>06"),o.insert(0,"");break;case 238:return Et.ANSIX12_ENCODE;case 239:return Et.TEXT_ENCODE;case 240:return Et.EDIFACT_ENCODE;case 241:break;default:if(l!==254||t.available()!==0)throw new V;break}}while(t.available()>0);return Et.ASCII_ENCODE}static decodeC40Segment(t,r){let o=!1;const a=[];let l=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),a);for(let f=0;f<3;f++){const m=a[f];switch(l){case 0:if(m<3)l=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const y=this.C40_BASIC_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else throw new V;break;case 1:o?(r.append(String.fromCharCode(m+128)),o=!1):r.append(String.fromCharCode(m)),l=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const y=this.C40_SHIFT2_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else switch(m){case 27:r.append("");break;case 30:o=!0;break;default:throw new V}l=0;break;case 3:o?(r.append(String.fromCharCode(m+224)),o=!1):r.append(String.fromCharCode(m+96)),l=0;break;default:throw new V}}}while(t.available()>0)}static decodeTextSegment(t,r){let o=!1,a=[],l=0;do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),a);for(let f=0;f<3;f++){const m=a[f];switch(l){case 0:if(m<3)l=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const y=this.TEXT_BASIC_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else throw new V;break;case 1:o?(r.append(String.fromCharCode(m+128)),o=!1):r.append(String.fromCharCode(m)),l=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const y=this.TEXT_SHIFT2_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y)}else switch(m){case 27:r.append("");break;case 30:o=!0;break;default:throw new V}l=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const y=this.TEXT_SHIFT3_SET_CHARS[m];o?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):r.append(y),l=0}else throw new V;break;default:throw new V}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const o=[];do{if(t.available()===8)return;const a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),o);for(let l=0;l<3;l++){const d=o[l];switch(d){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(d<14)r.append(String.fromCharCode(d+44));else if(d<40)r.append(String.fromCharCode(d+51));else throw new V;break}}}while(t.available()>0)}static parseTwoBytes(t,r,o){let a=(t<<8)+r-1,l=Math.floor(a/1600);o[0]=l,a-=l*1600,l=Math.floor(a/40),o[1]=l,o[2]=a-l*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let o=0;o<4;o++){let a=t.readBits(6);if(a===31){const l=8-t.getBitOffset();l!==8&&t.readBits(l);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(t.available()>0)}static decodeBase256Segment(t,r,o){let a=1+t.getByteOffset();const l=this.unrandomize255State(t.readBits(8),a++);let d;if(l===0?d=t.available()/8|0:l<250?d=l:d=250*(l-249)+this.unrandomize255State(t.readBits(8),a++),d<0)throw new V;const f=new Uint8Array(d);for(let m=0;m<d;m++){if(t.available()<8)throw new V;f[m]=this.unrandomize255State(t.readBits(8),a++)}o.push(f);try{r.append(Me.decode(f,ye.ISO88591))}catch(m){throw new xn("Platform does not support required encoding: "+m.message)}}static unrandomize255State(t,r){const o=149*r%255+1,a=t-o;return a>=0?a:a+256}}In.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],In.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],In.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],In.TEXT_SHIFT2_SET_CHARS=In.C40_SHIFT2_SET_CHARS,In.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class No{constructor(){this.rsDecoder=new Cr(Je.DATA_MATRIX_FIELD_256)}decode(t){const r=new tt(t),o=r.getVersion(),a=r.readCodewords(),l=wt.getDataBlocks(a,o);let d=0;for(let y of l)d+=y.getNumDataCodewords();const f=new Uint8Array(d),m=l.length;for(let y=0;y<m;y++){const C=l[y],N=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(N,I);for(let P=0;P<I;P++)f[P*m+y]=N[P]}return In.decode(f)}correctErrors(t,r){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-r)}catch{throw new X}for(let a=0;a<r;a++)t[a]=o[a]}}class Ie{constructor(t){this.image=t,this.rectangleDetector=new Bn(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new K;r=this.shiftToModuleCenter(r);const o=r[0],a=r[1],l=r[2],d=r[3];let f=this.transitionsBetween(o,d)+1,m=this.transitionsBetween(l,d)+1;(f&1)===1&&(f+=1),(m&1)===1&&(m+=1),4*f<7*m&&4*m<7*f&&(f=m=Math.max(f,m));let y=Ie.sampleGrid(this.image,o,a,l,d,f,m);return new zr(y,[o,a,l,d])}static shiftPoint(t,r,o){let a=(r.getX()-t.getX())/(o+1),l=(r.getY()-t.getY())/(o+1);return new Ee(t.getX()+a,t.getY()+l)}static moveAway(t,r,o){let a=t.getX(),l=t.getY();return a<r?a-=1:a+=1,l<o?l-=1:l+=1,new Ee(a,l)}detectSolid1(t){let r=t[0],o=t[1],a=t[3],l=t[2],d=this.transitionsBetween(r,o),f=this.transitionsBetween(o,a),m=this.transitionsBetween(a,l),y=this.transitionsBetween(l,r),C=d,N=[l,r,o,a];return C>f&&(C=f,N[0]=r,N[1]=o,N[2]=a,N[3]=l),C>m&&(C=m,N[0]=o,N[1]=a,N[2]=l,N[3]=r),C>y&&(N[0]=a,N[1]=l,N[2]=r,N[3]=o),N}detectSolid2(t){let r=t[0],o=t[1],a=t[2],l=t[3],d=this.transitionsBetween(r,l),f=Ie.shiftPoint(o,a,(d+1)*4),m=Ie.shiftPoint(a,o,(d+1)*4),y=this.transitionsBetween(f,r),C=this.transitionsBetween(m,l);return y<C?(t[0]=r,t[1]=o,t[2]=a,t[3]=l):(t[0]=o,t[1]=a,t[2]=l,t[3]=r),t}correctTopRight(t){let r=t[0],o=t[1],a=t[2],l=t[3],d=this.transitionsBetween(r,l),f=this.transitionsBetween(o,l),m=Ie.shiftPoint(r,o,(f+1)*4),y=Ie.shiftPoint(a,o,(d+1)*4);d=this.transitionsBetween(m,l),f=this.transitionsBetween(y,l);let C=new Ee(l.getX()+(a.getX()-o.getX())/(d+1),l.getY()+(a.getY()-o.getY())/(d+1)),N=new Ee(l.getX()+(r.getX()-o.getX())/(f+1),l.getY()+(r.getY()-o.getY())/(f+1));if(!this.isValid(C))return this.isValid(N)?N:null;if(!this.isValid(N))return C;let I=this.transitionsBetween(m,C)+this.transitionsBetween(y,C),P=this.transitionsBetween(m,N)+this.transitionsBetween(y,N);return I>P?C:N}shiftToModuleCenter(t){let r=t[0],o=t[1],a=t[2],l=t[3],d=this.transitionsBetween(r,l)+1,f=this.transitionsBetween(a,l)+1,m=Ie.shiftPoint(r,o,f*4),y=Ie.shiftPoint(a,o,d*4);d=this.transitionsBetween(m,l)+1,f=this.transitionsBetween(y,l)+1,(d&1)===1&&(d+=1),(f&1)===1&&(f+=1);let C=(r.getX()+o.getX()+a.getX()+l.getX())/4,N=(r.getY()+o.getY()+a.getY()+l.getY())/4;r=Ie.moveAway(r,C,N),o=Ie.moveAway(o,C,N),a=Ie.moveAway(a,C,N),l=Ie.moveAway(l,C,N);let I,P;return m=Ie.shiftPoint(r,o,f*4),m=Ie.shiftPoint(m,l,d*4),I=Ie.shiftPoint(o,r,f*4),I=Ie.shiftPoint(I,a,d*4),y=Ie.shiftPoint(a,l,f*4),y=Ie.shiftPoint(y,o,d*4),P=Ie.shiftPoint(l,a,f*4),P=Ie.shiftPoint(P,r,d*4),[m,I,y,P]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,o,a,l,d,f){return jn.getInstance().sampleGrid(t,d,f,.5,.5,d-.5,.5,d-.5,f-.5,.5,f-.5,r.getX(),r.getY(),l.getX(),l.getY(),a.getX(),a.getY(),o.getX(),o.getY())}transitionsBetween(t,r){let o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),l=Math.trunc(r.getX()),d=Math.trunc(r.getY()),f=Math.abs(d-a)>Math.abs(l-o);if(f){let z=o;o=a,a=z,z=l,l=d,d=z}let m=Math.abs(l-o),y=Math.abs(d-a),C=-m/2,N=a<d?1:-1,I=o<l?1:-1,P=0,F=this.image.get(f?a:o,f?o:a);for(let z=o,Z=a;z!==l;z+=I){let q=this.image.get(f?Z:z,f?z:Z);if(q!==F&&(P++,F=q),C+=y,C>0){if(Z===d)break;Z+=N,C-=m}}return P}}class dt{constructor(){this.decoder=new No}decode(t,r=null){let o,a;if(r!=null&&r.has(oe.PURE_BARCODE)){const y=dt.extractPureBits(t.getBlackMatrix());o=this.decoder.decode(y),a=dt.NO_POINTS}else{const y=new Ie(t.getBlackMatrix()).detect();o=this.decoder.decode(y.getBits()),a=y.getPoints()}const l=o.getRawBytes(),d=new ze(o.getText(),l,8*l.length,a,ce.DATA_MATRIX,U.currentTimeMillis()),f=o.getByteSegments();f!=null&&d.putMetadata(gt.BYTE_SEGMENTS,f);const m=o.getECLevel();return m!=null&&d.putMetadata(gt.ERROR_CORRECTION_LEVEL,m),d}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(r==null||o==null)throw new K;const a=this.moduleSize(r,t);let l=r[1];const d=o[1];let f=r[0];const y=(o[0]-f+1)/a,C=(d-l+1)/a;if(y<=0||C<=0)throw new K;const N=a/2;l+=N,f+=N;const I=new Xe(y,C);for(let P=0;P<C;P++){const F=l+P*a;for(let z=0;z<y;z++)t.get(f+z*a,F)&&I.set(z,P)}return I}static moduleSize(t,r){const o=r.getWidth();let a=t[0];const l=t[1];for(;a<o&&r.get(a,l);)a++;if(a===o)throw new K;const d=a-t[0];if(d===0)throw new K;return d}}dt.NO_POINTS=[];class Io extends ft{constructor(t=500){super(new dt,t)}}var Ar;(function(S){S[S.L=0]="L",S[S.M=1]="M",S[S.Q=2]="Q",S[S.H=3]="H"})(Ar||(Ar={}));class Ge{constructor(t,r,o){this.value=t,this.stringValue=r,this.bits=o,Ge.FOR_BITS.set(o,this),Ge.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return Ge.L;case"M":return Ge.M;case"Q":return Ge.Q;case"H":return Ge.H;default:throw new D(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof Ge))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=Ge.FOR_BITS.size)throw new R;return Ge.FOR_BITS.get(t)}}Ge.FOR_BITS=new Map,Ge.FOR_VALUE=new Map,Ge.L=new Ge(Ar.L,"L",1),Ge.M=new Ge(Ar.M,"M",0),Ge.Q=new Ge(Ar.Q,"Q",3),Ge.H=new Ge(Ar.H,"H",2);class ln{constructor(t){this.errorCorrectionLevel=Ge.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return B.bitCount(t^r)}static decodeFormatInformation(t,r){const o=ln.doDecodeFormatInformation(t,r);return o!==null?o:ln.doDecodeFormatInformation(t^ln.FORMAT_INFO_MASK_QR,r^ln.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let o=Number.MAX_SAFE_INTEGER,a=0;for(const l of ln.FORMAT_INFO_DECODE_LOOKUP){const d=l[0];if(d===t||d===r)return new ln(l[1]);let f=ln.numBitsDiffering(t,d);f<o&&(a=l[1],o=f),t!==r&&(f=ln.numBitsDiffering(r,d),f<o&&(a=l[1],o=f))}return o<=3?new ln(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof ln))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}ln.FORMAT_INFO_MASK_QR=21522,ln.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class W{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const o of r)t+=o.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class O{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class we{constructor(t,r,...o){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=o;let a=0;const l=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();for(const f of d)a+=f.getCount()*(f.getDataCodewords()+l);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new V;try{return this.getVersionForNumber((t-17)/4)}catch{throw new V}}static getVersionForNumber(t){if(t<1||t>40)throw new R;return we.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,o=0;for(let a=0;a<we.VERSION_DECODE_INFO.length;a++){const l=we.VERSION_DECODE_INFO[a];if(l===t)return we.getVersionForNumber(a+7);const d=ln.numBitsDiffering(t,l);d<r&&(o=a+7,r=d)}return r<=3?we.getVersionForNumber(o):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new Xe(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const o=this.alignmentPatternCenters.length;for(let a=0;a<o;a++){const l=this.alignmentPatternCenters[a]-2;for(let d=0;d<o;d++)a===0&&(d===0||d===o-1)||a===o-1&&d===0||r.setRegion(this.alignmentPatternCenters[d]-2,l,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}we.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),we.VERSIONS=[new we(1,new Int32Array(0),new W(7,new O(1,19)),new W(10,new O(1,16)),new W(13,new O(1,13)),new W(17,new O(1,9))),new we(2,Int32Array.from([6,18]),new W(10,new O(1,34)),new W(16,new O(1,28)),new W(22,new O(1,22)),new W(28,new O(1,16))),new we(3,Int32Array.from([6,22]),new W(15,new O(1,55)),new W(26,new O(1,44)),new W(18,new O(2,17)),new W(22,new O(2,13))),new we(4,Int32Array.from([6,26]),new W(20,new O(1,80)),new W(18,new O(2,32)),new W(26,new O(2,24)),new W(16,new O(4,9))),new we(5,Int32Array.from([6,30]),new W(26,new O(1,108)),new W(24,new O(2,43)),new W(18,new O(2,15),new O(2,16)),new W(22,new O(2,11),new O(2,12))),new we(6,Int32Array.from([6,34]),new W(18,new O(2,68)),new W(16,new O(4,27)),new W(24,new O(4,19)),new W(28,new O(4,15))),new we(7,Int32Array.from([6,22,38]),new W(20,new O(2,78)),new W(18,new O(4,31)),new W(18,new O(2,14),new O(4,15)),new W(26,new O(4,13),new O(1,14))),new we(8,Int32Array.from([6,24,42]),new W(24,new O(2,97)),new W(22,new O(2,38),new O(2,39)),new W(22,new O(4,18),new O(2,19)),new W(26,new O(4,14),new O(2,15))),new we(9,Int32Array.from([6,26,46]),new W(30,new O(2,116)),new W(22,new O(3,36),new O(2,37)),new W(20,new O(4,16),new O(4,17)),new W(24,new O(4,12),new O(4,13))),new we(10,Int32Array.from([6,28,50]),new W(18,new O(2,68),new O(2,69)),new W(26,new O(4,43),new O(1,44)),new W(24,new O(6,19),new O(2,20)),new W(28,new O(6,15),new O(2,16))),new we(11,Int32Array.from([6,30,54]),new W(20,new O(4,81)),new W(30,new O(1,50),new O(4,51)),new W(28,new O(4,22),new O(4,23)),new W(24,new O(3,12),new O(8,13))),new we(12,Int32Array.from([6,32,58]),new W(24,new O(2,92),new O(2,93)),new W(22,new O(6,36),new O(2,37)),new W(26,new O(4,20),new O(6,21)),new W(28,new O(7,14),new O(4,15))),new we(13,Int32Array.from([6,34,62]),new W(26,new O(4,107)),new W(22,new O(8,37),new O(1,38)),new W(24,new O(8,20),new O(4,21)),new W(22,new O(12,11),new O(4,12))),new we(14,Int32Array.from([6,26,46,66]),new W(30,new O(3,115),new O(1,116)),new W(24,new O(4,40),new O(5,41)),new W(20,new O(11,16),new O(5,17)),new W(24,new O(11,12),new O(5,13))),new we(15,Int32Array.from([6,26,48,70]),new W(22,new O(5,87),new O(1,88)),new W(24,new O(5,41),new O(5,42)),new W(30,new O(5,24),new O(7,25)),new W(24,new O(11,12),new O(7,13))),new we(16,Int32Array.from([6,26,50,74]),new W(24,new O(5,98),new O(1,99)),new W(28,new O(7,45),new O(3,46)),new W(24,new O(15,19),new O(2,20)),new W(30,new O(3,15),new O(13,16))),new we(17,Int32Array.from([6,30,54,78]),new W(28,new O(1,107),new O(5,108)),new W(28,new O(10,46),new O(1,47)),new W(28,new O(1,22),new O(15,23)),new W(28,new O(2,14),new O(17,15))),new we(18,Int32Array.from([6,30,56,82]),new W(30,new O(5,120),new O(1,121)),new W(26,new O(9,43),new O(4,44)),new W(28,new O(17,22),new O(1,23)),new W(28,new O(2,14),new O(19,15))),new we(19,Int32Array.from([6,30,58,86]),new W(28,new O(3,113),new O(4,114)),new W(26,new O(3,44),new O(11,45)),new W(26,new O(17,21),new O(4,22)),new W(26,new O(9,13),new O(16,14))),new we(20,Int32Array.from([6,34,62,90]),new W(28,new O(3,107),new O(5,108)),new W(26,new O(3,41),new O(13,42)),new W(30,new O(15,24),new O(5,25)),new W(28,new O(15,15),new O(10,16))),new we(21,Int32Array.from([6,28,50,72,94]),new W(28,new O(4,116),new O(4,117)),new W(26,new O(17,42)),new W(28,new O(17,22),new O(6,23)),new W(30,new O(19,16),new O(6,17))),new we(22,Int32Array.from([6,26,50,74,98]),new W(28,new O(2,111),new O(7,112)),new W(28,new O(17,46)),new W(30,new O(7,24),new O(16,25)),new W(24,new O(34,13))),new we(23,Int32Array.from([6,30,54,78,102]),new W(30,new O(4,121),new O(5,122)),new W(28,new O(4,47),new O(14,48)),new W(30,new O(11,24),new O(14,25)),new W(30,new O(16,15),new O(14,16))),new we(24,Int32Array.from([6,28,54,80,106]),new W(30,new O(6,117),new O(4,118)),new W(28,new O(6,45),new O(14,46)),new W(30,new O(11,24),new O(16,25)),new W(30,new O(30,16),new O(2,17))),new we(25,Int32Array.from([6,32,58,84,110]),new W(26,new O(8,106),new O(4,107)),new W(28,new O(8,47),new O(13,48)),new W(30,new O(7,24),new O(22,25)),new W(30,new O(22,15),new O(13,16))),new we(26,Int32Array.from([6,30,58,86,114]),new W(28,new O(10,114),new O(2,115)),new W(28,new O(19,46),new O(4,47)),new W(28,new O(28,22),new O(6,23)),new W(30,new O(33,16),new O(4,17))),new we(27,Int32Array.from([6,34,62,90,118]),new W(30,new O(8,122),new O(4,123)),new W(28,new O(22,45),new O(3,46)),new W(30,new O(8,23),new O(26,24)),new W(30,new O(12,15),new O(28,16))),new we(28,Int32Array.from([6,26,50,74,98,122]),new W(30,new O(3,117),new O(10,118)),new W(28,new O(3,45),new O(23,46)),new W(30,new O(4,24),new O(31,25)),new W(30,new O(11,15),new O(31,16))),new we(29,Int32Array.from([6,30,54,78,102,126]),new W(30,new O(7,116),new O(7,117)),new W(28,new O(21,45),new O(7,46)),new W(30,new O(1,23),new O(37,24)),new W(30,new O(19,15),new O(26,16))),new we(30,Int32Array.from([6,26,52,78,104,130]),new W(30,new O(5,115),new O(10,116)),new W(28,new O(19,47),new O(10,48)),new W(30,new O(15,24),new O(25,25)),new W(30,new O(23,15),new O(25,16))),new we(31,Int32Array.from([6,30,56,82,108,134]),new W(30,new O(13,115),new O(3,116)),new W(28,new O(2,46),new O(29,47)),new W(30,new O(42,24),new O(1,25)),new W(30,new O(23,15),new O(28,16))),new we(32,Int32Array.from([6,34,60,86,112,138]),new W(30,new O(17,115)),new W(28,new O(10,46),new O(23,47)),new W(30,new O(10,24),new O(35,25)),new W(30,new O(19,15),new O(35,16))),new we(33,Int32Array.from([6,30,58,86,114,142]),new W(30,new O(17,115),new O(1,116)),new W(28,new O(14,46),new O(21,47)),new W(30,new O(29,24),new O(19,25)),new W(30,new O(11,15),new O(46,16))),new we(34,Int32Array.from([6,34,62,90,118,146]),new W(30,new O(13,115),new O(6,116)),new W(28,new O(14,46),new O(23,47)),new W(30,new O(44,24),new O(7,25)),new W(30,new O(59,16),new O(1,17))),new we(35,Int32Array.from([6,30,54,78,102,126,150]),new W(30,new O(12,121),new O(7,122)),new W(28,new O(12,47),new O(26,48)),new W(30,new O(39,24),new O(14,25)),new W(30,new O(22,15),new O(41,16))),new we(36,Int32Array.from([6,24,50,76,102,128,154]),new W(30,new O(6,121),new O(14,122)),new W(28,new O(6,47),new O(34,48)),new W(30,new O(46,24),new O(10,25)),new W(30,new O(2,15),new O(64,16))),new we(37,Int32Array.from([6,28,54,80,106,132,158]),new W(30,new O(17,122),new O(4,123)),new W(28,new O(29,46),new O(14,47)),new W(30,new O(49,24),new O(10,25)),new W(30,new O(24,15),new O(46,16))),new we(38,Int32Array.from([6,32,58,84,110,136,162]),new W(30,new O(4,122),new O(18,123)),new W(28,new O(13,46),new O(32,47)),new W(30,new O(48,24),new O(14,25)),new W(30,new O(42,15),new O(32,16))),new we(39,Int32Array.from([6,26,54,82,110,138,166]),new W(30,new O(20,117),new O(4,118)),new W(28,new O(40,47),new O(7,48)),new W(30,new O(43,24),new O(22,25)),new W(30,new O(10,15),new O(67,16))),new we(40,Int32Array.from([6,30,58,86,114,142,170]),new W(30,new O(19,118),new O(6,119)),new W(28,new O(18,47),new O(31,48)),new W(30,new O(34,24),new O(34,25)),new W(30,new O(20,15),new O(61,16)))];var At;(function(S){S[S.DATA_MASK_000=0]="DATA_MASK_000",S[S.DATA_MASK_001=1]="DATA_MASK_001",S[S.DATA_MASK_010=2]="DATA_MASK_010",S[S.DATA_MASK_011=3]="DATA_MASK_011",S[S.DATA_MASK_100=4]="DATA_MASK_100",S[S.DATA_MASK_101=5]="DATA_MASK_101",S[S.DATA_MASK_110=6]="DATA_MASK_110",S[S.DATA_MASK_111=7]="DATA_MASK_111"})(At||(At={}));class cn{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let o=0;o<r;o++)for(let a=0;a<r;a++)this.isMasked(o,a)&&t.flip(a,o)}}cn.values=new Map([[At.DATA_MASK_000,new cn(At.DATA_MASK_000,(S,t)=>(S+t&1)===0)],[At.DATA_MASK_001,new cn(At.DATA_MASK_001,(S,t)=>(S&1)===0)],[At.DATA_MASK_010,new cn(At.DATA_MASK_010,(S,t)=>t%3===0)],[At.DATA_MASK_011,new cn(At.DATA_MASK_011,(S,t)=>(S+t)%3===0)],[At.DATA_MASK_100,new cn(At.DATA_MASK_100,(S,t)=>(Math.floor(S/2)+Math.floor(t/3)&1)===0)],[At.DATA_MASK_101,new cn(At.DATA_MASK_101,(S,t)=>S*t%6===0)],[At.DATA_MASK_110,new cn(At.DATA_MASK_110,(S,t)=>S*t%6<3)],[At.DATA_MASK_111,new cn(At.DATA_MASK_111,(S,t)=>(S+t+S*t%3&1)===0)]]);class us{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new V;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let l=0;l<6;l++)t=this.copyBit(l,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let l=5;l>=0;l--)t=this.copyBit(8,l,t);const r=this.bitMatrix.getHeight();let o=0;const a=r-7;for(let l=r-1;l>=a;l--)o=this.copyBit(8,l,o);for(let l=r-8;l<r;l++)o=this.copyBit(l,8,o);if(this.parsedFormatInfo=ln.decodeFormatInformation(t,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return we.getVersionForNumber(r);let o=0;const a=t-11;for(let d=5;d>=0;d--)for(let f=t-9;f>=a;f--)o=this.copyBit(f,d,o);let l=we.decodeVersionInformation(o);if(l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;o=0;for(let d=5;d>=0;d--)for(let f=t-9;f>=a;f--)o=this.copyBit(d,f,o);if(l=we.decodeVersionInformation(o),l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;throw new V}copyBit(t,r,o){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?o<<1|1:o<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),o=cn.values.get(t.getDataMask()),a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a);const l=r.buildFunctionPattern();let d=!0;const f=new Uint8Array(r.getTotalCodewords());let m=0,y=0,C=0;for(let N=a-1;N>0;N-=2){N===6&&N--;for(let I=0;I<a;I++){const P=d?a-1-I:I;for(let F=0;F<2;F++)l.get(N-F,P)||(C++,y<<=1,this.bitMatrix.get(N-F,P)&&(y|=1),C===8&&(f[m++]=y,C=0,y=0))}d=!d}if(m!==r.getTotalCodewords())throw new V;return f}remask(){if(this.parsedFormatInfo===null)return;const t=cn.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,o=t.getWidth();r<o;r++)for(let a=r+1,l=t.getHeight();a<l;a++)t.get(r,a)!==t.get(a,r)&&(t.flip(a,r),t.flip(r,a))}}class ds{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,o){if(t.length!==r.getTotalCodewords())throw new R;const a=r.getECBlocksForLevel(o);let l=0;const d=a.getECBlocks();for(const F of d)l+=F.getCount();const f=new Array(l);let m=0;for(const F of d)for(let z=0;z<F.getCount();z++){const Z=F.getDataCodewords(),q=a.getECCodewordsPerBlock()+Z;f[m++]=new ds(Z,new Uint8Array(q))}const y=f[0].codewords.length;let C=f.length-1;for(;C>=0&&f[C].codewords.length!==y;)C--;C++;const N=y-a.getECCodewordsPerBlock();let I=0;for(let F=0;F<N;F++)for(let z=0;z<m;z++)f[z].codewords[F]=t[I++];for(let F=C;F<m;F++)f[F].codewords[N]=t[I++];const P=f[0].codewords.length;for(let F=N;F<P;F++)for(let z=0;z<m;z++){const Z=z<C?F:F+1;f[z].codewords[Z]=t[I++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var un;(function(S){S[S.TERMINATOR=0]="TERMINATOR",S[S.NUMERIC=1]="NUMERIC",S[S.ALPHANUMERIC=2]="ALPHANUMERIC",S[S.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",S[S.BYTE=4]="BYTE",S[S.ECI=5]="ECI",S[S.KANJI=6]="KANJI",S[S.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",S[S.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",S[S.HANZI=9]="HANZI"})(un||(un={}));class ke{constructor(t,r,o,a){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=o,this.bits=a,ke.FOR_BITS.set(a,this),ke.FOR_VALUE.set(t,this)}static forBits(t){const r=ke.FOR_BITS.get(t);if(r===void 0)throw new R;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let o;return r<=9?o=0:r<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof ke))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}ke.FOR_BITS=new Map,ke.FOR_VALUE=new Map,ke.TERMINATOR=new ke(un.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ke.NUMERIC=new ke(un.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ke.ALPHANUMERIC=new ke(un.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ke.STRUCTURED_APPEND=new ke(un.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ke.BYTE=new ke(un.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ke.ECI=new ke(un.ECI,"ECI",Int32Array.from([0,0,0]),7),ke.KANJI=new ke(un.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ke.FNC1_FIRST_POSITION=new ke(un.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ke.FNC1_SECOND_POSITION=new ke(un.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ke.HANZI=new ke(un.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class _t{static decode(t,r,o,a){const l=new ki(t);let d=new Te;const f=new Array;let m=-1,y=-1;try{let C=null,N=!1,I;do{if(l.available()<4)I=ke.TERMINATOR;else{const P=l.readBits(4);I=ke.forBits(P)}switch(I){case ke.TERMINATOR:break;case ke.FNC1_FIRST_POSITION:case ke.FNC1_SECOND_POSITION:N=!0;break;case ke.STRUCTURED_APPEND:if(l.available()<16)throw new V;m=l.readBits(8),y=l.readBits(8);break;case ke.ECI:const P=_t.parseECIValue(l);if(C=Q.getCharacterSetECIByValue(P),C===null)throw new V;break;case ke.HANZI:const F=l.readBits(4),z=l.readBits(I.getCharacterCountBits(r));F===_t.GB2312_SUBSET&&_t.decodeHanziSegment(l,d,z);break;default:const Z=l.readBits(I.getCharacterCountBits(r));switch(I){case ke.NUMERIC:_t.decodeNumericSegment(l,d,Z);break;case ke.ALPHANUMERIC:_t.decodeAlphanumericSegment(l,d,Z,N);break;case ke.BYTE:_t.decodeByteSegment(l,d,Z,C,f,a);break;case ke.KANJI:_t.decodeKanjiSegment(l,d,Z);break;default:throw new V}break}}while(I!==ke.TERMINATOR)}catch{throw new V}return new Br(t,d.toString(),f.length===0?null:f,o===null?null:o.toString(),m,y)}static decodeHanziSegment(t,r,o){if(o*13>t.available())throw new V;const a=new Uint8Array(2*o);let l=0;for(;o>0;){const d=t.readBits(13);let f=d/96<<8&4294967295|d%96;f<959?f+=41377:f+=42657,a[l]=f>>8&255,a[l+1]=f&255,l+=2,o--}try{r.append(Me.decode(a,ye.GB2312))}catch(d){throw new V(d)}}static decodeKanjiSegment(t,r,o){if(o*13>t.available())throw new V;const a=new Uint8Array(2*o);let l=0;for(;o>0;){const d=t.readBits(13);let f=d/192<<8&4294967295|d%192;f<7936?f+=33088:f+=49472,a[l]=f>>8,a[l+1]=f,l+=2,o--}try{r.append(Me.decode(a,ye.SHIFT_JIS))}catch(d){throw new V(d)}}static decodeByteSegment(t,r,o,a,l,d){if(8*o>t.available())throw new V;const f=new Uint8Array(o);for(let y=0;y<o;y++)f[y]=t.readBits(8);let m;a===null?m=ye.guessEncoding(f,d):m=a.getName();try{r.append(Me.decode(f,m))}catch(y){throw new V(y)}l.push(f)}static toAlphaNumericChar(t){if(t>=_t.ALPHANUMERIC_CHARS.length)throw new V;return _t.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,o,a){const l=r.length();for(;o>1;){if(t.available()<11)throw new V;const d=t.readBits(11);r.append(_t.toAlphaNumericChar(Math.floor(d/45))),r.append(_t.toAlphaNumericChar(d%45)),o-=2}if(o===1){if(t.available()<6)throw new V;r.append(_t.toAlphaNumericChar(t.readBits(6)))}if(a)for(let d=l;d<r.length();d++)r.charAt(d)==="%"&&(d<r.length()-1&&r.charAt(d+1)==="%"?r.deleteCharAt(d+1):r.setCharAt(d,""))}static decodeNumericSegment(t,r,o){for(;o>=3;){if(t.available()<10)throw new V;const a=t.readBits(10);if(a>=1e3)throw new V;r.append(_t.toAlphaNumericChar(Math.floor(a/100))),r.append(_t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(_t.toAlphaNumericChar(a%10)),o-=3}if(o===2){if(t.available()<7)throw new V;const a=t.readBits(7);if(a>=100)throw new V;r.append(_t.toAlphaNumericChar(Math.floor(a/10))),r.append(_t.toAlphaNumericChar(a%10))}else if(o===1){if(t.available()<4)throw new V;const a=t.readBits(4);if(a>=10)throw new V;r.append(_t.toAlphaNumericChar(a))}}static parseECIValue(t){const r=t.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const o=t.readBits(8);return(r&63)<<8&4294967295|o}if((r&224)===192){const o=t.readBits(16);return(r&31)<<16&4294967295|o}throw new V}}_t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",_t.GB2312_SUBSET=1;class hs{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class To{constructor(){this.rsDecoder=new Cr(Je.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(Xe.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const o=new us(t);let a=null;try{return this.decodeBitMatrixParser(o,r)}catch(l){a=l}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const l=this.decodeBitMatrixParser(o,r);return l.setOther(new hs(!0)),l}catch(l){throw a!==null?a:l}}decodeBitMatrixParser(t,r){const o=t.readVersion(),a=t.readFormatInformation().getErrorCorrectionLevel(),l=t.readCodewords(),d=ds.getDataBlocks(l,o,a);let f=0;for(const C of d)f+=C.getNumDataCodewords();const m=new Uint8Array(f);let y=0;for(const C of d){const N=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(N,I);for(let P=0;P<I;P++)m[y++]=N[P]}return _t.decode(m,o,a,r)}correctErrors(t,r){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-r)}catch{throw new X}for(let a=0;a<r;a++)t[a]=o[a]}}class fs extends Ee{constructor(t,r,o){super(t,r),this.estimatedModuleSize=o}aboutEquals(t,r,o){if(Math.abs(r-this.getY())<=t&&Math.abs(o-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,r,o){const a=(this.getX()+r)/2,l=(this.getY()+t)/2,d=(this.estimatedModuleSize+o)/2;return new fs(a,l,d)}}class ii{constructor(t,r,o,a,l,d,f){this.image=t,this.startX=r,this.startY=o,this.width=a,this.height=l,this.moduleSize=d,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,o=this.width,a=t+o,l=this.startY+r/2,d=new Int32Array(3),f=this.image;for(let m=0;m<r;m++){const y=l+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));d[0]=0,d[1]=0,d[2]=0;let C=t;for(;C<a&&!f.get(C,y);)C++;let N=0;for(;C<a;){if(f.get(C,y))if(N===1)d[1]++;else if(N===2){if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,y,C);if(I!==null)return I}d[0]=d[2],d[1]=1,d[2]=0,N=1}else d[++N]++;else N===1&&N++,d[N]++;C++}if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,y,a);if(I!==null)return I}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new K}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,o=r/2;for(let a=0;a<3;a++)if(Math.abs(r-t[a])>=o)return!1;return!0}crossCheckVertical(t,r,o,a){const l=this.image,d=l.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let m=t;for(;m>=0&&l.get(r,m)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&!l.get(r,m)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=t+1;m<d&&l.get(r,m)&&f[1]<=o;)f[1]++,m++;if(m===d||f[1]>o)return NaN;for(;m<d&&!l.get(r,m)&&f[2]<=o;)f[2]++,m++;if(f[2]>o)return NaN;const y=f[0]+f[1]+f[2];return 5*Math.abs(y-a)>=2*a?NaN:this.foundPatternCross(f)?ii.centerFromEnd(f,m):NaN}handlePossibleCenter(t,r,o){const a=t[0]+t[1]+t[2],l=ii.centerFromEnd(t,o),d=this.crossCheckVertical(r,l,2*t[1],a);if(!isNaN(d)){const f=(t[0]+t[1]+t[2])/3;for(const y of this.possibleCenters)if(y.aboutEquals(f,d,l))return y.combineEstimate(d,l,f);const m=new fs(l,d,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class Rs extends Ee{constructor(t,r,o,a){super(t,r),this.estimatedModuleSize=o,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,o){if(Math.abs(r-this.getY())<=t&&Math.abs(o-this.getX())<=t){const a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(t,r,o){const a=this.count+1,l=(this.count*this.getX()+r)/a,d=(this.count*this.getY()+t)/a,f=(this.count*this.estimatedModuleSize+o)/a;return new Rs(l,d,f,a)}}class ko{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Yt{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(oe.TRY_HARDER)!==void 0,o=t!=null&&t.get(oe.PURE_BARCODE)!==void 0,a=this.image,l=a.getHeight(),d=a.getWidth();let f=Math.floor(3*l/(4*Yt.MAX_MODULES));(f<Yt.MIN_SKIP||r)&&(f=Yt.MIN_SKIP);let m=!1;const y=new Int32Array(5);for(let N=f-1;N<l&&!m;N+=f){y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0;let I=0;for(let P=0;P<d;P++)if(a.get(P,N))(I&1)===1&&I++,y[I]++;else if(I&1)y[I]++;else if(I===4)if(Yt.foundPatternCross(y)){if(this.handlePossibleCenter(y,N,P,o)===!0)if(f=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const z=this.findRowSkip();z>y[2]&&(N+=z-y[2]-f,P=d-1)}else{y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,I=3;continue}I=0,y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0}else y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,I=3;else y[++I]++;Yt.foundPatternCross(y)&&this.handlePossibleCenter(y,N,d,o)===!0&&(f=y[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return Ee.orderBestPatterns(C),new ko(C)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let l=0;l<5;l++){const d=t[l];if(d===0)return!1;r+=d}if(r<7)return!1;const o=r/7,a=o/2;return Math.abs(o-t[0])<a&&Math.abs(o-t[1])<a&&Math.abs(3*o-t[2])<3*a&&Math.abs(o-t[3])<a&&Math.abs(o-t[4])<a}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,o,a){const l=this.getCrossCheckStateCount();let d=0;const f=this.image;for(;t>=d&&r>=d&&f.get(r-d,t-d);)l[2]++,d++;if(t<d||r<d)return!1;for(;t>=d&&r>=d&&!f.get(r-d,t-d)&&l[1]<=o;)l[1]++,d++;if(t<d||r<d||l[1]>o)return!1;for(;t>=d&&r>=d&&f.get(r-d,t-d)&&l[0]<=o;)l[0]++,d++;if(l[0]>o)return!1;const m=f.getHeight(),y=f.getWidth();for(d=1;t+d<m&&r+d<y&&f.get(r+d,t+d);)l[2]++,d++;if(t+d>=m||r+d>=y)return!1;for(;t+d<m&&r+d<y&&!f.get(r+d,t+d)&&l[3]<o;)l[3]++,d++;if(t+d>=m||r+d>=y||l[3]>=o)return!1;for(;t+d<m&&r+d<y&&f.get(r+d,t+d)&&l[4]<o;)l[4]++,d++;if(l[4]>=o)return!1;const C=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(C-a)<2*a&&Yt.foundPatternCross(l)}crossCheckVertical(t,r,o,a){const l=this.image,d=l.getHeight(),f=this.getCrossCheckStateCount();let m=t;for(;m>=0&&l.get(r,m);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!l.get(r,m)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&l.get(r,m)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=t+1;m<d&&l.get(r,m);)f[2]++,m++;if(m===d)return NaN;for(;m<d&&!l.get(r,m)&&f[3]<o;)f[3]++,m++;if(m===d||f[3]>=o)return NaN;for(;m<d&&l.get(r,m)&&f[4]<o;)f[4]++,m++;if(f[4]>=o)return NaN;const y=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(y-a)>=2*a?NaN:Yt.foundPatternCross(f)?Yt.centerFromEnd(f,m):NaN}crossCheckHorizontal(t,r,o,a){const l=this.image,d=l.getWidth(),f=this.getCrossCheckStateCount();let m=t;for(;m>=0&&l.get(m,r);)f[2]++,m--;if(m<0)return NaN;for(;m>=0&&!l.get(m,r)&&f[1]<=o;)f[1]++,m--;if(m<0||f[1]>o)return NaN;for(;m>=0&&l.get(m,r)&&f[0]<=o;)f[0]++,m--;if(f[0]>o)return NaN;for(m=t+1;m<d&&l.get(m,r);)f[2]++,m++;if(m===d)return NaN;for(;m<d&&!l.get(m,r)&&f[3]<o;)f[3]++,m++;if(m===d||f[3]>=o)return NaN;for(;m<d&&l.get(m,r)&&f[4]<o;)f[4]++,m++;if(f[4]>=o)return NaN;const y=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(y-a)>=a?NaN:Yt.foundPatternCross(f)?Yt.centerFromEnd(f,m):NaN}handlePossibleCenter(t,r,o,a){const l=t[0]+t[1]+t[2]+t[3]+t[4];let d=Yt.centerFromEnd(t,o),f=this.crossCheckVertical(r,Math.floor(d),t[2],l);if(!isNaN(f)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(f),t[2],l),!isNaN(d)&&(!a||this.crossCheckDiagonal(Math.floor(f),Math.floor(d),t[2],l)))){const m=l/7;let y=!1;const C=this.possibleCenters;for(let N=0,I=C.length;N<I;N++){const P=C[N];if(P.aboutEquals(m,f,d)){C[N]=P.combineEstimate(f,d,m),y=!0;break}}if(!y){const N=new Rs(d,f,m);C.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const o of this.possibleCenters)if(o.getCount()>=Yt.CENTER_QUORUM)if(r==null)r=o;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-o.getX())-Math.abs(r.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const o=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Yt.CENTER_QUORUM&&(t++,r+=d.getEstimatedModuleSize());if(t<3)return!1;const a=r/o;let l=0;for(const d of this.possibleCenters)l+=Math.abs(d.getEstimatedModuleSize()-a);return l<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new K;const r=this.possibleCenters;let o;if(t>3){let a=0,l=0;for(const m of this.possibleCenters){const y=m.getEstimatedModuleSize();a+=y,l+=y*y}o=a/t;let d=Math.sqrt(l/t-o*o);r.sort((m,y)=>{const C=Math.abs(y.getEstimatedModuleSize()-o),N=Math.abs(m.getEstimatedModuleSize()-o);return C<N?-1:C>N?1:0});const f=Math.max(.2*o,d);for(let m=0;m<r.length&&r.length>3;m++){const y=r[m];Math.abs(y.getEstimatedModuleSize()-o)>f&&(r.splice(m,1),m--)}}if(r.length>3){let a=0;for(const l of r)a+=l.getEstimatedModuleSize();o=a/r.length,r.sort((l,d)=>{if(d.getCount()===l.getCount()){const f=Math.abs(d.getEstimatedModuleSize()-o),m=Math.abs(l.getEstimatedModuleSize()-o);return f<m?1:f>m?-1:0}else return d.getCount()-l.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Yt.CENTER_QUORUM=2,Yt.MIN_SKIP=3,Yt.MAX_MODULES=57;class Fe{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(oe.NEED_RESULT_POINT_CALLBACK);const o=new Yt(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(o)}processFinderPatternInfo(t){const r=t.getTopLeft(),o=t.getTopRight(),a=t.getBottomLeft(),l=this.calculateModuleSize(r,o,a);if(l<1)throw new K("No pattern found in proccess finder.");const d=Fe.computeDimension(r,o,a,l),f=we.getProvisionalVersionForDimension(d),m=f.getDimensionForVersion()-7;let y=null;if(f.getAlignmentPatternCenters().length>0){const P=o.getX()-r.getX()+a.getX(),F=o.getY()-r.getY()+a.getY(),z=1-3/m,Z=Math.floor(r.getX()+z*(P-r.getX())),q=Math.floor(r.getY()+z*(F-r.getY()));for(let de=4;de<=16;de<<=1)try{y=this.findAlignmentInRegion(l,Z,q,de);break}catch(ge){if(!(ge instanceof K))throw ge}}const C=Fe.createTransform(r,o,a,y,d),N=Fe.sampleGrid(this.image,C,d);let I;return y===null?I=[a,r,o]:I=[a,r,o,y],new zr(N,I)}static createTransform(t,r,o,a,l){const d=l-3.5;let f,m,y,C;return a!==null?(f=a.getX(),m=a.getY(),y=d-3,C=y):(f=r.getX()-t.getX()+o.getX(),m=r.getY()-t.getY()+o.getY(),y=d,C=d),rn.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,y,C,3.5,d,t.getX(),t.getY(),r.getX(),r.getY(),f,m,o.getX(),o.getY())}static sampleGrid(t,r,o){return jn.getInstance().sampleGridWithTransform(t,o,o,r)}static computeDimension(t,r,o,a){const l=Ke.round(Ee.distance(t,r)/a),d=Ke.round(Ee.distance(t,o)/a);let f=Math.floor((l+d)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new K("Dimensions could be not found.")}return f}calculateModuleSize(t,r,o){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,o))/2}calculateModuleSizeOneWay(t,r){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(o)?a/7:isNaN(a)?o/7:(o+a)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,o,a){let l=this.sizeOfBlackWhiteBlackRun(t,r,o,a),d=1,f=t-(o-t);f<0?(d=t/(t-f),f=0):f>=this.image.getWidth()&&(d=(this.image.getWidth()-1-t)/(f-t),f=this.image.getWidth()-1);let m=Math.floor(r-(a-r)*d);return d=1,m<0?(d=r/(r-m),m=0):m>=this.image.getHeight()&&(d=(this.image.getHeight()-1-r)/(m-r),m=this.image.getHeight()-1),f=Math.floor(t+(f-t)*d),l+=this.sizeOfBlackWhiteBlackRun(t,r,f,m),l-1}sizeOfBlackWhiteBlackRun(t,r,o,a){const l=Math.abs(a-r)>Math.abs(o-t);if(l){let P=t;t=r,r=P,P=o,o=a,a=P}const d=Math.abs(o-t),f=Math.abs(a-r);let m=-d/2;const y=t<o?1:-1,C=r<a?1:-1;let N=0;const I=o+y;for(let P=t,F=r;P!==I;P+=y){const z=l?F:P,Z=l?P:F;if(N===1===this.image.get(z,Z)){if(N===2)return Ke.distance(P,F,t,r);N++}if(m+=f,m>0){if(F===a)break;F+=C,m-=d}}return N===2?Ke.distance(o+y,a,t,r):NaN}findAlignmentInRegion(t,r,o,a){const l=Math.floor(a*t),d=Math.max(0,r-l),f=Math.min(this.image.getWidth()-1,r+l);if(f-d<t*3)throw new K("Alignment top exceeds estimated module size.");const m=Math.max(0,o-l),y=Math.min(this.image.getHeight()-1,o+l);if(y-m<t*3)throw new K("Alignment bottom exceeds estimated module size.");return new ii(this.image,d,m,f-d,y-m,t,this.resultPointCallback).find()}}class qt{constructor(){this.decoder=new To}getDecoder(){return this.decoder}decode(t,r){let o,a;if(r!=null&&r.get(oe.PURE_BARCODE)!==void 0){const m=qt.extractPureBits(t.getBlackMatrix());o=this.decoder.decodeBitMatrix(m,r),a=qt.NO_POINTS}else{const m=new Fe(t.getBlackMatrix()).detect(r);o=this.decoder.decodeBitMatrix(m.getBits(),r),a=m.getPoints()}o.getOther()instanceof hs&&o.getOther().applyMirroredCorrection(a);const l=new ze(o.getText(),o.getRawBytes(),void 0,a,ce.QR_CODE,void 0),d=o.getByteSegments();d!==null&&l.putMetadata(gt.BYTE_SEGMENTS,d);const f=o.getECLevel();return f!==null&&l.putMetadata(gt.ERROR_CORRECTION_LEVEL,f),o.hasStructuredAppend()&&(l.putMetadata(gt.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),l.putMetadata(gt.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),l}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(r===null||o===null)throw new K;const a=this.moduleSize(r,t);let l=r[1],d=o[1],f=r[0],m=o[0];if(f>=m||l>=d)throw new K;if(d-l!==m-f&&(m=f+(d-l),m>=t.getWidth()))throw new K;const y=Math.round((m-f+1)/a),C=Math.round((d-l+1)/a);if(y<=0||C<=0)throw new K;if(C!==y)throw new K;const N=Math.floor(a/2);l+=N,f+=N;const I=f+Math.floor((y-1)*a)-m;if(I>0){if(I>N)throw new K;f-=I}const P=l+Math.floor((C-1)*a)-d;if(P>0){if(P>N)throw new K;l-=P}const F=new Xe(y,C);for(let z=0;z<C;z++){const Z=l+Math.floor(z*a);for(let q=0;q<y;q++)t.get(f+Math.floor(q*a),Z)&&F.set(q,z)}return F}static moduleSize(t,r){const o=r.getHeight(),a=r.getWidth();let l=t[0],d=t[1],f=!0,m=0;for(;l<a&&d<o;){if(f!==r.get(l,d)){if(++m===5)break;f=!f}l++,d++}if(l===a||d===o)throw new K;return(l-t[0])/7}}qt.NO_POINTS=new Array;class _e{PDF417Common(){}static getBitCountSum(t){return Ke.sum(t)}static toIntArray(t){if(t==null||!t.length)return _e.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let o=0;for(const a of t)r[o++]=a;return r}static getCodeword(t){const r=M.binarySearch(_e.SYMBOL_TABLE,t&262143);return r<0?-1:(_e.CODEWORD_TABLE[r]-1)%_e.NUMBER_OF_CODEWORDS}}_e.NUMBER_OF_CODEWORDS=929,_e.MAX_CODEWORDS_IN_BARCODE=_e.NUMBER_OF_CODEWORDS-1,_e.MIN_ROWS_IN_BARCODE=3,_e.MAX_ROWS_IN_BARCODE=90,_e.MODULES_IN_CODEWORD=17,_e.MODULES_IN_STOP_PATTERN=18,_e.BARS_IN_MODULE=8,_e.EMPTY_INT_ARRAY=new Int32Array([]),_e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),_e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ra{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Ue{static detectMultiple(t,r,o){let a=t.getBlackMatrix(),l=Ue.detect(o,a);return l.length||(a=a.clone(),a.rotate180(),l=Ue.detect(o,a)),new Ra(a,l)}static detect(t,r){const o=new Array;let a=0,l=0,d=!1;for(;a<r.getHeight();){const f=Ue.findVertices(r,a,l);if(f[0]==null&&f[3]==null){if(!d)break;d=!1,l=0;for(const m of o)m[1]!=null&&(a=Math.trunc(Math.max(a,m[1].getY()))),m[3]!=null&&(a=Math.max(a,Math.trunc(m[3].getY())));a+=Ue.ROW_STEP;continue}if(d=!0,o.push(f),!t)break;f[2]!=null?(l=Math.trunc(f[2].getX()),a=Math.trunc(f[2].getY())):(l=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY()))}return o}static findVertices(t,r,o){const a=t.getHeight(),l=t.getWidth(),d=new Array(8);return Ue.copyToResult(d,Ue.findRowsWithPattern(t,a,l,r,o,Ue.START_PATTERN),Ue.INDEXES_START_PATTERN),d[4]!=null&&(o=Math.trunc(d[4].getX()),r=Math.trunc(d[4].getY())),Ue.copyToResult(d,Ue.findRowsWithPattern(t,a,l,r,o,Ue.STOP_PATTERN),Ue.INDEXES_STOP_PATTERN),d}static copyToResult(t,r,o){for(let a=0;a<o.length;a++)t[o[a]]=r[a]}static findRowsWithPattern(t,r,o,a,l,d){const f=new Array(4);let m=!1;const y=new Int32Array(d.length);for(;a<r;a+=Ue.ROW_STEP){let N=Ue.findGuardPattern(t,l,a,o,!1,d,y);if(N!=null){for(;a>0;){const I=Ue.findGuardPattern(t,l,--a,o,!1,d,y);if(I!=null)N=I;else{a++;break}}f[0]=new Ee(N[0],a),f[1]=new Ee(N[1],a),m=!0;break}}let C=a+1;if(m){let N=0,I=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;C<r;C++){const P=Ue.findGuardPattern(t,I[0],C,o,!1,d,y);if(P!=null&&Math.abs(I[0]-P[0])<Ue.MAX_PATTERN_DRIFT&&Math.abs(I[1]-P[1])<Ue.MAX_PATTERN_DRIFT)I=P,N=0;else{if(N>Ue.SKIPPED_ROW_COUNT_MAX)break;N++}}C-=N+1,f[2]=new Ee(I[0],C),f[3]=new Ee(I[1],C)}return C-a<Ue.BARCODE_MIN_HEIGHT&&M.fill(f,null),f}static findGuardPattern(t,r,o,a,l,d,f){M.fillWithin(f,0,f.length,0);let m=r,y=0;for(;t.get(m,o)&&m>0&&y++<Ue.MAX_PIXEL_DRIFT;)m--;let C=m,N=0,I=d.length;for(let P=l;C<a;C++)if(t.get(C,o)!==P)f[N]++;else{if(N===I-1){if(Ue.patternMatchVariance(f,d,Ue.MAX_INDIVIDUAL_VARIANCE)<Ue.MAX_AVG_VARIANCE)return new Int32Array([m,C]);m+=f[0]+f[1],U.arraycopy(f,2,f,0,N-1),f[N-1]=0,f[N]=0,N--}else N++;f[N]=1,P=!P}return N===I-1&&Ue.patternMatchVariance(f,d,Ue.MAX_INDIVIDUAL_VARIANCE)<Ue.MAX_AVG_VARIANCE?new Int32Array([m,C-1]):null}static patternMatchVariance(t,r,o){let a=t.length,l=0,d=0;for(let y=0;y<a;y++)l+=t[y],d+=r[y];if(l<d)return 1/0;let f=l/d;o*=f;let m=0;for(let y=0;y<a;y++){let C=t[y],N=r[y]*f,I=C>N?C-N:N-C;if(I>o)return 1/0;m+=I}return m/l}}Ue.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ue.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ue.MAX_AVG_VARIANCE=.42,Ue.MAX_INDIVIDUAL_VARIANCE=.8,Ue.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ue.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ue.MAX_PIXEL_DRIFT=3,Ue.MAX_PATTERN_DRIFT=5,Ue.SKIPPED_ROW_COUNT_MAX=25,Ue.ROW_STEP=5,Ue.BARCODE_MIN_HEIGHT=10;class Ht{constructor(t,r){if(r.length===0)throw new R;this.field=t;let o=r.length;if(o>1&&r[0]===0){let a=1;for(;a<o&&r[a]===0;)a++;a===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-a),U.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let a=0;for(let l of this.coefficients)a=this.field.add(a,l);return a}let r=this.coefficients[0],o=this.coefficients.length;for(let a=1;a<o;a++)r=this.field.add(this.field.multiply(t,r),this.coefficients[a]);return r}add(t){if(!this.field.equals(t.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,o=t.coefficients;if(r.length>o.length){let d=r;r=o,o=d}let a=new Int32Array(o.length),l=o.length-r.length;U.arraycopy(o,0,a,0,l);for(let d=l;d<o.length;d++)a[d]=this.field.add(r[d-l],o[d]);return new Ht(this.field,a)}subtract(t){if(!this.field.equals(t.field))throw new R("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Ht?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Ht(this.field,new Int32Array([0]));let r=this.coefficients,o=r.length,a=t.coefficients,l=a.length,d=new Int32Array(o+l-1);for(let f=0;f<o;f++){let m=r[f];for(let y=0;y<l;y++)d[f+y]=this.field.add(d[f+y],this.field.multiply(m,a[y]))}return new Ht(this.field,d)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let o=0;o<t;o++)r[o]=this.field.subtract(0,this.coefficients[o]);return new Ht(this.field,r)}multiplyScalar(t){if(t===0)return new Ht(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,o=new Int32Array(r);for(let a=0;a<r;a++)o[a]=this.field.multiply(this.coefficients[a],t);return new Ht(this.field,o)}multiplyByMonomial(t,r){if(t<0)throw new R;if(r===0)return new Ht(this.field,new Int32Array([0]));let o=this.coefficients.length,a=new Int32Array(o+t);for(let l=0;l<o;l++)a[l]=this.field.multiply(this.coefficients[l],r);return new Ht(this.field,a)}toString(){let t=new Te;for(let r=this.getDegree();r>=0;r--){let o=this.getCoefficient(r);o!==0&&(o<0?(t.append(" - "),o=-o):t.length()>0&&t.append(" + "),(r===0||o!==1)&&t.append(o),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class Mo{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new R;return this.logTable[t]}inverse(t){if(t===0)throw new sr;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class br extends Mo{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let o=1;for(let a=0;a<t;a++)this.expTable[a]=o,o=o*r%t;for(let a=0;a<t-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new Ht(this,new Int32Array([0])),this.one=new Ht(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new R;if(r===0)return this.zero;let o=new Int32Array(t+1);return o[0]=r,new Ht(this,o)}}br.PDF417_GF=new br(_e.NUMBER_OF_CODEWORDS,3);class Ps{constructor(){this.field=br.PDF417_GF}decode(t,r,o){let a=new Ht(this.field,t),l=new Int32Array(r),d=!1;for(let F=r;F>0;F--){let z=a.evaluateAt(this.field.exp(F));l[r-F]=z,z!==0&&(d=!0)}if(!d)return 0;let f=this.field.getOne();if(o!=null)for(const F of o){let z=this.field.exp(t.length-1-F),Z=new Ht(this.field,new Int32Array([this.field.subtract(0,z),1]));f=f.multiply(Z)}let m=new Ht(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),m,r),C=y[0],N=y[1],I=this.findErrorLocations(C),P=this.findErrorMagnitudes(N,C,I);for(let F=0;F<I.length;F++){let z=t.length-1-this.field.log(I[F]);if(z<0)throw X.getChecksumInstance();t[z]=this.field.subtract(t[z],P[F])}return I.length}runEuclideanAlgorithm(t,r,o){if(t.getDegree()<r.getDegree()){let I=t;t=r,r=I}let a=t,l=r,d=this.field.getZero(),f=this.field.getOne();for(;l.getDegree()>=Math.round(o/2);){let I=a,P=d;if(a=l,d=f,a.isZero())throw X.getChecksumInstance();l=I;let F=this.field.getZero(),z=a.getCoefficient(a.getDegree()),Z=this.field.inverse(z);for(;l.getDegree()>=a.getDegree()&&!l.isZero();){let q=l.getDegree()-a.getDegree(),de=this.field.multiply(l.getCoefficient(l.getDegree()),Z);F=F.add(this.field.buildMonomial(q,de)),l=l.subtract(a.multiplyByMonomial(q,de))}f=F.multiply(d).subtract(P).negative()}let m=f.getCoefficient(0);if(m===0)throw X.getChecksumInstance();let y=this.field.inverse(m),C=f.multiply(y),N=l.multiply(y);return[C,N]}findErrorLocations(t){let r=t.getDegree(),o=new Int32Array(r),a=0;for(let l=1;l<this.field.getSize()&&a<r;l++)t.evaluateAt(l)===0&&(o[a]=this.field.inverse(l),a++);if(a!==r)throw X.getChecksumInstance();return o}findErrorMagnitudes(t,r,o){let a=r.getDegree(),l=new Int32Array(a);for(let y=1;y<=a;y++)l[a-y]=this.field.multiply(y,r.getCoefficient(y));let d=new Ht(this.field,l),f=o.length,m=new Int32Array(f);for(let y=0;y<f;y++){let C=this.field.inverse(o[y]),N=this.field.subtract(0,t.evaluateAt(C)),I=this.field.inverse(d.evaluateAt(C));m[y]=this.field.multiply(N,I)}return m}}class Yn{constructor(t,r,o,a,l){t instanceof Yn?this.constructor_2(t):this.constructor_1(t,r,o,a,l)}constructor_1(t,r,o,a,l){const d=r==null||o==null,f=a==null||l==null;if(d&&f)throw new K;d?(r=new Ee(0,a.getY()),o=new Ee(0,l.getY())):f&&(a=new Ee(t.getWidth()-1,r.getY()),l=new Ee(t.getWidth()-1,o.getY())),this.image=t,this.topLeft=r,this.bottomLeft=o,this.topRight=a,this.bottomRight=l,this.minX=Math.trunc(Math.min(r.getX(),o.getX())),this.maxX=Math.trunc(Math.max(a.getX(),l.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(o.getY(),l.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new Yn(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,o){let a=this.topLeft,l=this.bottomLeft,d=this.topRight,f=this.bottomRight;if(t>0){let m=o?this.topLeft:this.topRight,y=Math.trunc(m.getY()-t);y<0&&(y=0);let C=new Ee(m.getX(),y);o?a=C:d=C}if(r>0){let m=o?this.bottomLeft:this.bottomRight,y=Math.trunc(m.getY()+r);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);let C=new Ee(m.getX(),y);o?l=C:f=C}return new Yn(this.image,a,l,d,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Jt{constructor(t,r,o,a){this.columnCount=t,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=o,this.rowCount=r+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Xn{constructor(){this.buffer=""}static form(t,r){let o=-1;function a(d,f,m,y,C,N){if(d==="%%")return"%";if(r[++o]===void 0)return;d=y?parseInt(y.substr(1)):void 0;let I=C?parseInt(C.substr(1)):void 0,P;switch(N){case"s":P=r[o];break;case"c":P=r[o][0];break;case"f":P=parseFloat(r[o]).toFixed(d);break;case"p":P=parseFloat(r[o]).toPrecision(d);break;case"e":P=parseFloat(r[o]).toExponential(d);break;case"x":P=parseInt(r[o]).toString(I||16);break;case"d":P=parseFloat(parseInt(r[o],I||10).toPrecision(d)).toFixed(0);break}P=typeof P=="object"?JSON.stringify(P):(+P).toString(I);let F=parseInt(m),z=m&&m[0]+""=="0"?"0":" ";for(;P.length<F;)P=f!==void 0?P+z:z+P;return P}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(l,a)}format(t,...r){this.buffer+=Xn.form(t,r)}toString(){return this.buffer}}class Mi{constructor(t){this.boundingBox=new Yn(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let o=1;o<Mi.MAX_NEARBY_DISTANCE;o++){let a=this.imageRowToCodewordIndex(t)-o;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(t)+o,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Xn;let r=0;for(const o of this.codewords){if(o==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,o.getRowNumber(),o.getValue())}return t.toString()}}Mi.MAX_NEARBY_DISTANCE=5;class Oi{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[o,a]of this.values.entries()){const l={getKey:()=>o,getValue:()=>a};l.getValue()>t?(t=l.getValue(),r=[],r.push(l.getKey())):l.getValue()===t&&r.push(l.getKey())}return _e.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class Pa extends Mi{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t!=null&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let o=this.getBoundingBox(),a=this._isLeft?o.getTopLeft():o.getTopRight(),l=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=-1,y=1,C=0;for(let N=d;N<f;N++){if(r[N]==null)continue;let I=r[N],P=I.getRowNumber()-m;if(P===0)C++;else if(P===1)y=Math.max(y,C),C=1,m=I.getRowNumber();else if(P<0||I.getRowNumber()>=t.getRowCount()||P>N)r[N]=null;else{let F;y>2?F=(y-2)*P:F=P;let z=F>=N;for(let Z=1;Z<=F&&!z;Z++)z=r[N-Z]!=null;z?r[N]=null:(m=I.getRowNumber(),C=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let o of this.getCodewords())if(o!=null){let a=o.getRowNumber();if(a>=r.length)continue;r[a]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),o=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.getCodewords(),m=-1;for(let y=l;y<d;y++){if(f[y]==null)continue;let C=f[y];C.setRowNumberAsRowIndicatorColumn();let N=C.getRowNumber()-m;N===0||(N===1?m=C.getRowNumber():C.getRowNumber()>=t.getRowCount()?f[y]=null:m=C.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new Oi,o=new Oi,a=new Oi,l=new Oi;for(let f of t){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let m=f.getValue()%30,y=f.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:o.setValue(m*3+1);break;case 1:l.setValue(m/3),a.setValue(m%3);break;case 2:r.setValue(m+1);break}}if(r.getValue().length===0||o.getValue().length===0||a.getValue().length===0||l.getValue().length===0||r.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<_e.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>_e.MAX_ROWS_IN_BARCODE)return null;let d=new Jt(r.getValue()[0],o.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(t,d),d}removeIncorrectCodewords(t,r){for(let o=0;o<t.length;o++){let a=t[o];if(t[o]==null)continue;let l=a.getValue()%30,d=a.getRowNumber();if(d>r.getRowCount()){t[o]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:l*3+1!==r.getRowCountUpperPart()&&(t[o]=null);break;case 1:(Math.trunc(l/3)!==r.getErrorCorrectionLevel()||l%3!==r.getRowCountLowerPart())&&(t[o]=null);break;case 2:l+1!==r.getColumnCount()&&(t[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Li{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=_e.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let o=this.detectionResultColumns[r].getCodewords();for(let a=0;a<o.length;a++)o[a]!=null&&(o[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,o))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<t.length;o++)if(t[o]!=null&&r[o]!=null&&t[o].getRowNumber()===r[o].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let l=this.detectionResultColumns[a].getCodewords()[o];l!=null&&(l.setRowNumber(t[o].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++){if(r[o]==null)continue;let a=r[o].getRowNumber(),l=0;for(let d=this.barcodeColumnCount+1;d>0&&l<this.ADJUST_ROW_NUMBER_SKIP;d--){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(l=Li.adjustRowNumberIfValid(a,l,f),f.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let o=0;o<r.length;o++){if(r[o]==null)continue;let a=r[o].getRowNumber(),l=0;for(let d=1;d<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;d++){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(l=Li.adjustRowNumberIfValid(a,l,f),f.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(t)?(o.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,o){if(!this.detectionResultColumns[t-1])return;let a=o[r],l=this.detectionResultColumns[t-1].getCodewords(),d=l;this.detectionResultColumns[t+1]!=null&&(d=this.detectionResultColumns[t+1].getCodewords());let f=new Array(14);f[2]=l[r],f[3]=d[r],r>0&&(f[0]=o[r-1],f[4]=l[r-1],f[5]=d[r-1]),r>1&&(f[8]=o[r-2],f[10]=l[r-2],f[11]=d[r-2]),r<o.length-1&&(f[1]=o[r+1],f[6]=l[r+1],f[7]=d[r+1]),r<o.length-2&&(f[9]=o[r+2],f[12]=l[r+2],f[13]=d[r+2]);for(let m of f)if(Li.adjustRowNumber(a,m))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new Xn;for(let o=0;o<t.getCodewords().length;o++){r.format("CW %3d:",o);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}let l=this.detectionResultColumns[a].getCodewords()[o];if(l==null){r.format("    |   ");continue}r.format(" %3d|%3d",l.getRowNumber(),l.getValue())}r.format("%n")}return r.toString()}}class si{constructor(t,r,o,a){this.rowNumber=si.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(o),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==si.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}si.BARCODE_ROW_UNKNOWN=-1;class wn{static initialize(){for(let t=0;t<_e.SYMBOL_TABLE.length;t++){let r=_e.SYMBOL_TABLE[t],o=r&1;for(let a=0;a<_e.BARS_IN_MODULE;a++){let l=0;for(;(r&1)===o;)l+=1,r>>=1;o=r&1,wn.RATIOS_TABLE[t]||(wn.RATIOS_TABLE[t]=new Array(_e.BARS_IN_MODULE)),wn.RATIOS_TABLE[t][_e.BARS_IN_MODULE-a-1]=Math.fround(l/_e.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=wn.getDecodedCodewordValue(wn.sampleBitCounts(t));return r!==-1?r:wn.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=Ke.sum(t),o=new Int32Array(_e.BARS_IN_MODULE),a=0,l=0;for(let d=0;d<_e.MODULES_IN_CODEWORD;d++){let f=r/(2*_e.MODULES_IN_CODEWORD)+d*r/_e.MODULES_IN_CODEWORD;l+t[a]<=f&&(l+=t[a],a++),o[a]++}return o}static getDecodedCodewordValue(t){let r=wn.getBitValue(t);return _e.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let o=0;o<t.length;o++)for(let a=0;a<t[o];a++)r=r<<1|(o%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=Ke.sum(t),o=new Array(_e.BARS_IN_MODULE);if(r>1)for(let d=0;d<o.length;d++)o[d]=Math.fround(t[d]/r);let a=Fr.MAX_VALUE,l=-1;this.bSymbolTableReady||wn.initialize();for(let d=0;d<wn.RATIOS_TABLE.length;d++){let f=0,m=wn.RATIOS_TABLE[d];for(let y=0;y<_e.BARS_IN_MODULE;y++){let C=Math.fround(m[y]-o[y]);if(f+=Math.fround(C*C),f>=a)break}f<a&&(a=f,l=_e.SYMBOL_TABLE[d])}return l}}wn.bSymbolTableReady=!1,wn.RATIOS_TABLE=new Array(_e.SYMBOL_TABLE.length).map(S=>new Array(_e.BARS_IN_MODULE));class Oo{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class $e{static parseLong(t,r=void 0){return parseInt(t,r)}}class Ba extends v{}Ba.kind="NullPointerException";class Qn{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,o){if(t==null)throw new Ba;if(r<0||r>t.length||o<0||r+o>t.length||r+o<0)throw new xe;if(o===0)return;for(let a=0;a<o;a++)this.write(t[r+a])}flush(){}close(){}}class gs extends v{}class ja extends Qn{constructor(t=32){if(super(),this.count=0,t<0)throw new R("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let o=this.buf.length<<1;if(o-t<0&&(o=t),o<0){if(t<0)throw new gs;o=B.MAX_VALUE}this.buf=M.copyOfUint8Array(this.buf,o)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,o){if(r<0||r>t.length||o<0||r+o-t.length>0)throw new xe;this.ensureCapacity(this.count+o),U.arraycopy(t,r,this.buf,this.count,o),this.count+=o}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return M.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var ht;(function(S){S[S.ALPHA=0]="ALPHA",S[S.LOWER=1]="LOWER",S[S.MIXED=2]="MIXED",S[S.PUNCT=3]="PUNCT",S[S.ALPHA_SHIFT=4]="ALPHA_SHIFT",S[S.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ht||(ht={}));function Bs(){if(typeof window<"u")return window.BigInt||null;if(typeof Vs<"u")return Vs.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let js;function Sr(S){if(typeof js>"u"&&(js=Bs()),js===null)throw new Error("BigInt is not supported!");return js(S)}function yc(){let S=[];S[0]=Sr(1);let t=Sr(900);S[1]=t;for(let r=2;r<16;r++)S[r]=S[r-1]*t;return S}class J{static decode(t,r){let o=new Te(""),a=Q.ISO8859_1;o.enableDecoding(a);let l=1,d=t[l++],f=new Oo;for(;l<t[0];){switch(d){case J.TEXT_COMPACTION_MODE_LATCH:l=J.textCompaction(t,l,o);break;case J.BYTE_COMPACTION_MODE_LATCH:case J.BYTE_COMPACTION_MODE_LATCH_6:l=J.byteCompaction(d,t,a,l,o);break;case J.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[l++]);break;case J.NUMERIC_COMPACTION_MODE_LATCH:l=J.numericCompaction(t,l,o);break;case J.ECI_CHARSET:Q.getCharacterSetECIByValue(t[l++]);break;case J.ECI_GENERAL_PURPOSE:l+=2;break;case J.ECI_USER_DEFINED:l++;break;case J.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=J.decodeMacroBlock(t,l,f);break;case J.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case J.MACRO_PDF417_TERMINATOR:throw new V;default:l--,l=J.textCompaction(t,l,o);break}if(l<t.length)d=t[l++];else throw V.getFormatInstance()}if(o.length()===0)throw V.getFormatInstance();let m=new Br(null,o.toString(),null,r);return m.setOther(f),m}static decodeMacroBlock(t,r,o){if(r+J.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw V.getFormatInstance();let a=new Int32Array(J.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<J.NUMBER_OF_SEQUENCE_CODEWORDS;f++,r++)a[f]=t[r];o.setSegmentIndex(B.parseInt(J.decodeBase900toBase10(a,J.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new Te;r=J.textCompaction(t,r,l),o.setFileId(l.toString());let d=-1;for(t[r]===J.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=r+1);r<t[0];)switch(t[r]){case J.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case J.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new Te;r=J.textCompaction(t,r+1,f),o.setFileName(f.toString());break;case J.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new Te;r=J.textCompaction(t,r+1,m),o.setSender(m.toString());break;case J.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let y=new Te;r=J.textCompaction(t,r+1,y),o.setAddressee(y.toString());break;case J.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new Te;r=J.numericCompaction(t,r+1,C),o.setSegmentCount(B.parseInt(C.toString()));break;case J.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let N=new Te;r=J.numericCompaction(t,r+1,N),o.setTimestamp($e.parseLong(N.toString()));break;case J.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new Te;r=J.numericCompaction(t,r+1,I),o.setChecksum(B.parseInt(I.toString()));break;case J.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let P=new Te;r=J.numericCompaction(t,r+1,P),o.setFileSize($e.parseLong(P.toString()));break;default:throw V.getFormatInstance()}break;case J.MACRO_PDF417_TERMINATOR:r++,o.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(d!==-1){let f=r-d;o.isLastSegment()&&f--,o.setOptionalData(M.copyOfRange(t,d,d+f))}return r}static textCompaction(t,r,o){let a=new Int32Array((t[0]-r)*2),l=new Int32Array((t[0]-r)*2),d=0,f=!1;for(;r<t[0]&&!f;){let m=t[r++];if(m<J.TEXT_COMPACTION_MODE_LATCH)a[d]=m/30,a[d+1]=m%30,d+=2;else switch(m){case J.TEXT_COMPACTION_MODE_LATCH:a[d++]=J.TEXT_COMPACTION_MODE_LATCH;break;case J.BYTE_COMPACTION_MODE_LATCH:case J.BYTE_COMPACTION_MODE_LATCH_6:case J.NUMERIC_COMPACTION_MODE_LATCH:case J.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case J.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case J.MACRO_PDF417_TERMINATOR:r--,f=!0;break;case J.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[d]=J.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=t[r++],l[d]=m,d++;break}}return J.decodeTextCompaction(a,l,d,o),r}static decodeTextCompaction(t,r,o,a){let l=ht.ALPHA,d=ht.ALPHA,f=0;for(;f<o;){let m=t[f],y="";switch(l){case ht.ALPHA:if(m<26)y=String.fromCharCode(65+m);else switch(m){case 26:y=" ";break;case J.LL:l=ht.LOWER;break;case J.ML:l=ht.MIXED;break;case J.PS:d=l,l=ht.PUNCT_SHIFT;break;case J.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[f]);break;case J.TEXT_COMPACTION_MODE_LATCH:l=ht.ALPHA;break}break;case ht.LOWER:if(m<26)y=String.fromCharCode(97+m);else switch(m){case 26:y=" ";break;case J.AS:d=l,l=ht.ALPHA_SHIFT;break;case J.ML:l=ht.MIXED;break;case J.PS:d=l,l=ht.PUNCT_SHIFT;break;case J.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[f]);break;case J.TEXT_COMPACTION_MODE_LATCH:l=ht.ALPHA;break}break;case ht.MIXED:if(m<J.PL)y=J.MIXED_CHARS[m];else switch(m){case J.PL:l=ht.PUNCT;break;case 26:y=" ";break;case J.LL:l=ht.LOWER;break;case J.AL:l=ht.ALPHA;break;case J.PS:d=l,l=ht.PUNCT_SHIFT;break;case J.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[f]);break;case J.TEXT_COMPACTION_MODE_LATCH:l=ht.ALPHA;break}break;case ht.PUNCT:if(m<J.PAL)y=J.PUNCT_CHARS[m];else switch(m){case J.PAL:l=ht.ALPHA;break;case J.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[f]);break;case J.TEXT_COMPACTION_MODE_LATCH:l=ht.ALPHA;break}break;case ht.ALPHA_SHIFT:if(l=d,m<26)y=String.fromCharCode(65+m);else switch(m){case 26:y=" ";break;case J.TEXT_COMPACTION_MODE_LATCH:l=ht.ALPHA;break}break;case ht.PUNCT_SHIFT:if(l=d,m<J.PAL)y=J.PUNCT_CHARS[m];else switch(m){case J.PAL:l=ht.ALPHA;break;case J.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[f]);break;case J.TEXT_COMPACTION_MODE_LATCH:l=ht.ALPHA;break}break}y!==""&&a.append(y),f++}}static byteCompaction(t,r,o,a,l){let d=new ja,f=0,m=0,y=!1;switch(t){case J.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),N=r[a++];for(;a<r[0]&&!y;)switch(C[f++]=N,m=900*m+N,N=r[a++],N){case J.TEXT_COMPACTION_MODE_LATCH:case J.BYTE_COMPACTION_MODE_LATCH:case J.NUMERIC_COMPACTION_MODE_LATCH:case J.BYTE_COMPACTION_MODE_LATCH_6:case J.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case J.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case J.MACRO_PDF417_TERMINATOR:a--,y=!0;break;default:if(f%5===0&&f>0){for(let I=0;I<6;++I)d.write(Number(Sr(m)>>Sr(8*(5-I))));m=0,f=0}break}a===r[0]&&N<J.TEXT_COMPACTION_MODE_LATCH&&(C[f++]=N);for(let I=0;I<f;I++)d.write(C[I]);break;case J.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!y;){let I=r[a++];if(I<J.TEXT_COMPACTION_MODE_LATCH)f++,m=900*m+I;else switch(I){case J.TEXT_COMPACTION_MODE_LATCH:case J.BYTE_COMPACTION_MODE_LATCH:case J.NUMERIC_COMPACTION_MODE_LATCH:case J.BYTE_COMPACTION_MODE_LATCH_6:case J.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case J.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case J.MACRO_PDF417_TERMINATOR:a--,y=!0;break}if(f%5===0&&f>0){for(let P=0;P<6;++P)d.write(Number(Sr(m)>>Sr(8*(5-P))));m=0,f=0}}break}return l.append(Me.decode(d.toByteArray(),o)),a}static numericCompaction(t,r,o){let a=0,l=!1,d=new Int32Array(J.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!l;){let f=t[r++];if(r===t[0]&&(l=!0),f<J.TEXT_COMPACTION_MODE_LATCH)d[a]=f,a++;else switch(f){case J.TEXT_COMPACTION_MODE_LATCH:case J.BYTE_COMPACTION_MODE_LATCH:case J.BYTE_COMPACTION_MODE_LATCH_6:case J.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case J.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case J.MACRO_PDF417_TERMINATOR:r--,l=!0;break}(a%J.MAX_NUMERIC_CODEWORDS===0||f===J.NUMERIC_COMPACTION_MODE_LATCH||l)&&a>0&&(o.append(J.decodeBase900toBase10(d,a)),a=0)}return r}static decodeBase900toBase10(t,r){let o=Sr(0);for(let l=0;l<r;l++)o+=J.EXP900[r-l-1]*Sr(t[l]);let a=o.toString();if(a.charAt(0)!=="1")throw new V;return a.substring(1)}}J.TEXT_COMPACTION_MODE_LATCH=900,J.BYTE_COMPACTION_MODE_LATCH=901,J.NUMERIC_COMPACTION_MODE_LATCH=902,J.BYTE_COMPACTION_MODE_LATCH_6=924,J.ECI_USER_DEFINED=925,J.ECI_GENERAL_PURPOSE=926,J.ECI_CHARSET=927,J.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,J.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,J.MACRO_PDF417_TERMINATOR=922,J.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,J.MAX_NUMERIC_CODEWORDS=15,J.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,J.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,J.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,J.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,J.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,J.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,J.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,J.PL=25,J.LL=27,J.AS=27,J.ML=28,J.AL=28,J.PS=29,J.PAL=29,J.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,J.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",J.EXP900=Bs()?yc():[],J.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ve{constructor(){}static decode(t,r,o,a,l,d,f){let m=new Yn(t,r,o,a,l),y=null,C=null,N;for(let F=!0;;F=!1){if(r!=null&&(y=Ve.getRowIndicatorColumn(t,m,r,!0,d,f)),a!=null&&(C=Ve.getRowIndicatorColumn(t,m,a,!1,d,f)),N=Ve.merge(y,C),N==null)throw K.getNotFoundInstance();let z=N.getBoundingBox();if(F&&z!=null&&(z.getMinY()<m.getMinY()||z.getMaxY()>m.getMaxY()))m=z;else break}N.setBoundingBox(m);let I=N.getBarcodeColumnCount()+1;N.setDetectionResultColumn(0,y),N.setDetectionResultColumn(I,C);let P=y!=null;for(let F=1;F<=I;F++){let z=P?F:I-F;if(N.getDetectionResultColumn(z)!==void 0)continue;let Z;z===0||z===I?Z=new Pa(m,z===0):Z=new Mi(m),N.setDetectionResultColumn(z,Z);let q=-1,de=q;for(let ge=m.getMinY();ge<=m.getMaxY();ge++){if(q=Ve.getStartColumn(N,z,ge,P),q<0||q>m.getMaxX()){if(de===-1)continue;q=de}let ae=Ve.detectCodeword(t,m.getMinX(),m.getMaxX(),P,q,ge,d,f);ae!=null&&(Z.setCodeword(ge,ae),de=q,d=Math.min(d,ae.getWidth()),f=Math.max(f,ae.getWidth()))}}return Ve.createDecoderResult(N)}static merge(t,r){if(t==null&&r==null)return null;let o=Ve.getBarcodeMetadata(t,r);if(o==null)return null;let a=Yn.merge(Ve.adjustBoundingBox(t),Ve.adjustBoundingBox(r));return new Li(o,a)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let o=Ve.getMax(r),a=0;for(let f of r)if(a+=o-f,f>0)break;let l=t.getCodewords();for(let f=0;a>0&&l[f]==null;f++)a--;let d=0;for(let f=r.length-1;f>=0&&(d+=o-r[f],!(r[f]>0));f--);for(let f=l.length-1;d>0&&l[f]==null;f--)d--;return t.getBoundingBox().addMissingRows(a,d,t.isLeft())}static getMax(t){let r=-1;for(let o of t)r=Math.max(r,o);return r}static getBarcodeMetadata(t,r){let o;if(t==null||(o=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let a;return r==null||(a=r.getBarcodeMetadata())==null?o:o.getColumnCount()!==a.getColumnCount()&&o.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&o.getRowCount()!==a.getRowCount()?null:o}static getRowIndicatorColumn(t,r,o,a,l,d){let f=new Pa(r,a);for(let m=0;m<2;m++){let y=m===0?1:-1,C=Math.trunc(Math.trunc(o.getX()));for(let N=Math.trunc(Math.trunc(o.getY()));N<=r.getMaxY()&&N>=r.getMinY();N+=y){let I=Ve.detectCodeword(t,0,t.getWidth(),a,C,N,l,d);I!=null&&(f.setCodeword(N,I),a?C=I.getStartX():C=I.getEndX())}}return f}static adjustCodewordCount(t,r){let o=r[0][1],a=o.getValue(),l=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-Ve.getNumberOfECCodeWords(t.getBarcodeECLevel());if(a.length===0){if(l<1||l>_e.MAX_CODEWORDS_IN_BARCODE)throw K.getNotFoundInstance();o.setValue(l)}else a[0]!==l&&o.setValue(l)}static createDecoderResult(t){let r=Ve.createBarcodeMatrix(t);Ve.adjustCodewordCount(t,r);let o=new Array,a=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),l=[],d=new Array;for(let m=0;m<t.getBarcodeRowCount();m++)for(let y=0;y<t.getBarcodeColumnCount();y++){let C=r[m][y+1].getValue(),N=m*t.getBarcodeColumnCount()+y;C.length===0?o.push(N):C.length===1?a[N]=C[0]:(d.push(N),l.push(C))}let f=new Array(l.length);for(let m=0;m<f.length;m++)f[m]=l[m];return Ve.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),a,_e.toIntArray(o),_e.toIntArray(d),f)}static createDecoderResultFromAmbiguousValues(t,r,o,a,l){let d=new Int32Array(a.length),f=100;for(;f-- >0;){for(let m=0;m<d.length;m++)r[a[m]]=l[m][d[m]];try{return Ve.decodeCodewords(r,t,o)}catch(m){if(!(m instanceof X))throw m}if(d.length===0)throw X.getChecksumInstance();for(let m=0;m<d.length;m++)if(d[m]<l[m].length-1){d[m]++;break}else if(d[m]=0,m===d.length-1)throw X.getChecksumInstance()}throw X.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let a=0;a<r.length;a++)for(let l=0;l<r[a].length;l++)r[a][l]=new Oi;let o=0;for(let a of t.getDetectionResultColumns()){if(a!=null){for(let l of a.getCodewords())if(l!=null){let d=l.getRowNumber();if(d>=0){if(d>=r.length)continue;r[d][o].setValue(l.getValue())}}}o++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,o,a){let l=a?1:-1,d=null;if(Ve.isValidBarcodeColumn(t,r-l)&&(d=t.getDetectionResultColumn(r-l).getCodeword(o)),d!=null)return a?d.getEndX():d.getStartX();if(d=t.getDetectionResultColumn(r).getCodewordNearby(o),d!=null)return a?d.getStartX():d.getEndX();if(Ve.isValidBarcodeColumn(t,r-l)&&(d=t.getDetectionResultColumn(r-l).getCodewordNearby(o)),d!=null)return a?d.getEndX():d.getStartX();let f=0;for(;Ve.isValidBarcodeColumn(t,r-l);){r-=l;for(let m of t.getDetectionResultColumn(r).getCodewords())if(m!=null)return(a?m.getEndX():m.getStartX())+l*f*(m.getEndX()-m.getStartX());f++}return a?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,o,a,l,d,f,m){l=Ve.adjustCodewordStartColumn(t,r,o,a,l,d);let y=Ve.getModuleBitCount(t,r,o,a,l,d);if(y==null)return null;let C,N=Ke.sum(y);if(a)C=l+N;else{for(let F=0;F<y.length/2;F++){let z=y[F];y[F]=y[y.length-1-F],y[y.length-1-F]=z}C=l,l=C-N}if(!Ve.checkCodewordSkew(N,f,m))return null;let I=wn.getDecodedValue(y),P=_e.getCodeword(I);return P===-1?null:new si(l,C,Ve.getCodewordBucketNumber(I),P)}static getModuleBitCount(t,r,o,a,l,d){let f=l,m=new Int32Array(8),y=0,C=a?1:-1,N=a;for(;(a?f<o:f>=r)&&y<m.length;)t.get(f,d)===N?(m[y]++,f+=C):(y++,N=!N);return y===m.length||f===(a?o:r)&&y===m.length-1?m:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,o,a,l,d){let f=l,m=a?-1:1;for(let y=0;y<2;y++){for(;(a?f>=r:f<o)&&a===t.get(f,d);){if(Math.abs(l-f)>Ve.CODEWORD_SKEW_SIZE)return l;f+=m}m=-m,a=!a}return f}static checkCodewordSkew(t,r,o){return r-Ve.CODEWORD_SKEW_SIZE<=t&&t<=o+Ve.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,o){if(t.length===0)throw V.getFormatInstance();let a=1<<r+1,l=Ve.correctErrors(t,o,a);Ve.verifyCodewordCount(t,a);let d=J.decode(t,""+r);return d.setErrorsCorrected(l),d.setErasures(o.length),d}static correctErrors(t,r,o){if(r!=null&&r.length>o/2+Ve.MAX_ERRORS||o<0||o>Ve.MAX_EC_CODEWORDS)throw X.getChecksumInstance();return Ve.errorCorrection.decode(t,o,r)}static verifyCodewordCount(t,r){if(t.length<4)throw V.getFormatInstance();let o=t[0];if(o>t.length)throw V.getFormatInstance();if(o===0)if(r<t.length)t[0]=t.length-r;else throw V.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),o=0,a=r.length-1;for(;!((t&1)!==o&&(o=t&1,a--,a<0));)r[a]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return Ve.getCodewordBucketNumber(Ve.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new Xn;for(let o=0;o<t.length;o++){r.format("Row %2d: ",o);for(let a=0;a<t[o].length;a++){let l=t[o][a];l.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}r.format("%n")}return r.toString()}}Ve.CODEWORD_SKEW_SIZE=2,Ve.MAX_ERRORS=3,Ve.MAX_EC_CODEWORDS=512,Ve.errorCorrection=new Ps;class $t{decode(t,r=null){let o=$t.decode(t,r,!1);if(o==null||o.length===0||o[0]==null)throw K.getNotFoundInstance();return o[0]}decodeMultiple(t,r=null){try{return $t.decode(t,r,!0)}catch(o){throw o instanceof V||o instanceof X?K.getNotFoundInstance():o}}static decode(t,r,o){const a=new Array,l=Ue.detectMultiple(t,r,o);for(const d of l.getPoints()){const f=Ve.decode(l.getBits(),d[4],d[5],d[6],d[7],$t.getMinCodewordWidth(d),$t.getMaxCodewordWidth(d)),m=new ze(f.getText(),f.getRawBytes(),void 0,d,ce.PDF_417);m.putMetadata(gt.ERROR_CORRECTION_LEVEL,f.getECLevel());const y=f.getOther();y!=null&&m.putMetadata(gt.PDF417_EXTRA_METADATA,y),a.push(m)}return a.map(d=>d)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?B.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max($t.getMaxWidth(t[0],t[4]),$t.getMaxWidth(t[6],t[2])*_e.MODULES_IN_CODEWORD/_e.MODULES_IN_STOP_PATTERN),Math.max($t.getMaxWidth(t[1],t[5]),$t.getMaxWidth(t[7],t[3])*_e.MODULES_IN_CODEWORD/_e.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min($t.getMinWidth(t[0],t[4]),$t.getMinWidth(t[6],t[2])*_e.MODULES_IN_CODEWORD/_e.MODULES_IN_STOP_PATTERN),Math.min($t.getMinWidth(t[1],t[5]),$t.getMinWidth(t[7],t[3])*_e.MODULES_IN_CODEWORD/_e.MODULES_IN_STOP_PATTERN)))}reset(){}}class Tn extends v{}Tn.kind="ReaderException";class Fa{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!c(t)&&t.get(oe.TRY_HARDER)===!0,o=c(t)?null:t.get(oe.POSSIBLE_FORMATS),a=new Array;if(!c(o)){const l=o.some(d=>d===ce.UPC_A||d===ce.UPC_E||d===ce.EAN_13||d===ce.EAN_8||d===ce.CODABAR||d===ce.CODE_39||d===ce.CODE_93||d===ce.CODE_128||d===ce.ITF||d===ce.RSS_14||d===ce.RSS_EXPANDED);l&&!r&&a.push(new Zr(t,this.verbose)),o.includes(ce.QR_CODE)&&a.push(new qt),o.includes(ce.DATA_MATRIX)&&a.push(new dt),o.includes(ce.AZTEC)&&a.push(new Ur),o.includes(ce.PDF_417)&&a.push(new $t),l&&r&&a.push(new Zr(t,this.verbose))}a.length===0&&(r||a.push(new Zr(t,this.verbose)),a.push(new qt),a.push(new dt),a.push(new Ur),a.push(new $t),r&&a.push(new Zr(t,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new Tn("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(o){if(o instanceof Tn)continue}throw new K("No MultiFormat Readers were able to detect the code.")}}class za extends ft{constructor(t=null,r=500){const o=new Fa;o.setHints(t),super(o,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class Wr extends ft{constructor(t=500){super(new $t,t)}}class Ua extends ft{constructor(t=500){super(new qt,t)}}var Fs;(function(S){S[S.ERROR_CORRECTION=0]="ERROR_CORRECTION",S[S.CHARACTER_SET=1]="CHARACTER_SET",S[S.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",S[S.MIN_SIZE=3]="MIN_SIZE",S[S.MAX_SIZE=4]="MAX_SIZE",S[S.MARGIN=5]="MARGIN",S[S.PDF417_COMPACT=6]="PDF417_COMPACT",S[S.PDF417_COMPACTION=7]="PDF417_COMPACTION",S[S.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",S[S.AZTEC_LAYERS=9]="AZTEC_LAYERS",S[S.QR_VERSION=10]="QR_VERSION"})(Fs||(Fs={}));var Rt=Fs;class Lo{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Wt(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let o=r[r.length-1];const a=this.field;for(let l=r.length;l<=t;l++){const d=o.multiply(new Wt(a,Int32Array.from([1,a.exp(l-1+a.getGeneratorBase())])));r.push(d),o=d}}return r[t]}encode(t,r){if(r===0)throw new R("No error correction bytes");const o=t.length-r;if(o<=0)throw new R("No data bytes provided");const a=this.buildGenerator(r),l=new Int32Array(o);U.arraycopy(t,0,l,0,o);let d=new Wt(this.field,l);d=d.multiplyByMonomial(r,1);const m=d.divide(a)[1].getCoefficients(),y=r-m.length;for(let C=0;C<y;C++)t[o+C]=0;U.arraycopy(m,0,t,o+y,m.length)}}class It{constructor(){}static applyMaskPenaltyRule1(t){return It.applyMaskPenaltyRule1Internal(t,!0)+It.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const o=t.getArray(),a=t.getWidth(),l=t.getHeight();for(let d=0;d<l-1;d++){const f=o[d];for(let m=0;m<a-1;m++){const y=f[m];y===f[m+1]&&y===o[d+1][m]&&y===o[d+1][m+1]&&r++}}return It.N2*r}static applyMaskPenaltyRule3(t){let r=0;const o=t.getArray(),a=t.getWidth(),l=t.getHeight();for(let d=0;d<l;d++)for(let f=0;f<a;f++){const m=o[d];f+6<a&&m[f]===1&&m[f+1]===0&&m[f+2]===1&&m[f+3]===1&&m[f+4]===1&&m[f+5]===0&&m[f+6]===1&&(It.isWhiteHorizontal(m,f-4,f)||It.isWhiteHorizontal(m,f+7,f+11))&&r++,d+6<l&&o[d][f]===1&&o[d+1][f]===0&&o[d+2][f]===1&&o[d+3][f]===1&&o[d+4][f]===1&&o[d+5][f]===0&&o[d+6][f]===1&&(It.isWhiteVertical(o,f,d-4,d)||It.isWhiteVertical(o,f,d+7,d+11))&&r++}return r*It.N3}static isWhiteHorizontal(t,r,o){r=Math.max(r,0),o=Math.min(o,t.length);for(let a=r;a<o;a++)if(t[a]===1)return!1;return!0}static isWhiteVertical(t,r,o,a){o=Math.max(o,0),a=Math.min(a,t.length);for(let l=o;l<a;l++)if(t[l][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const o=t.getArray(),a=t.getWidth(),l=t.getHeight();for(let m=0;m<l;m++){const y=o[m];for(let C=0;C<a;C++)y[C]===1&&r++}const d=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-d)*10/d)*It.N4}static getDataMaskBit(t,r,o){let a,l;switch(t){case 0:a=o+r&1;break;case 1:a=o&1;break;case 2:a=r%3;break;case 3:a=(o+r)%3;break;case 4:a=Math.floor(o/2)+Math.floor(r/3)&1;break;case 5:l=o*r,a=(l&1)+l%3;break;case 6:l=o*r,a=(l&1)+l%3&1;break;case 7:l=o*r,a=l%3+(o+r&1)&1;break;default:throw new R("Invalid mask pattern: "+t)}return a===0}static applyMaskPenaltyRule1Internal(t,r){let o=0;const a=r?t.getHeight():t.getWidth(),l=r?t.getWidth():t.getHeight(),d=t.getArray();for(let f=0;f<a;f++){let m=0,y=-1;for(let C=0;C<l;C++){const N=r?d[f][C]:d[C][f];N===y?m++:(m>=5&&(o+=It.N1+(m-5)),m=1,y=N)}m>=5&&(o+=It.N1+(m-5))}return o}}It.N1=3,It.N2=3,It.N3=40,It.N4=10;class ps{constructor(t,r){this.width=t,this.height=r;const o=new Array(r);for(let a=0;a!==r;a++)o[a]=new Uint8Array(t);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,o){this.bytes[r][t]=o}setBoolean(t,r,o){this.bytes[r][t]=o?1:0}clear(t){for(const r of this.bytes)M.fill(r,t)}equals(t){if(!(t instanceof ps))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let o=0,a=this.height;o<a;++o){const l=this.bytes[o],d=r.bytes[o];for(let f=0,m=this.width;f<m;++f)if(l[f]!==d[f])return!1}return!0}toString(){const t=new Te;for(let r=0,o=this.height;r<o;++r){const a=this.bytes[r];for(let l=0,d=this.width;l<d;++l)switch(a[l]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class oi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new Te;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<oi.NUM_MASK_PATTERNS}}oi.NUM_MASK_PATTERNS=8;class pt extends v{}pt.kind="WriterException";class De{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,o,a,l){De.clearMatrix(l),De.embedBasicPatterns(o,l),De.embedTypeInfo(r,a,l),De.maybeEmbedVersionInfo(o,l),De.embedDataBits(t,a,l)}static embedBasicPatterns(t,r){De.embedPositionDetectionPatternsAndSeparators(r),De.embedDarkDotAtLeftBottomCorner(r),De.maybeEmbedPositionAdjustmentPatterns(t,r),De.embedTimingPatterns(r)}static embedTypeInfo(t,r,o){const a=new Y;De.makeTypeInfoBits(t,r,a);for(let l=0,d=a.getSize();l<d;++l){const f=a.get(a.getSize()-1-l),m=De.TYPE_INFO_COORDINATES[l],y=m[0],C=m[1];if(o.setBoolean(y,C,f),l<8){const N=o.getWidth()-l-1;o.setBoolean(N,8,f)}else{const I=o.getHeight()-7+(l-8);o.setBoolean(8,I,f)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const o=new Y;De.makeVersionInfoBits(t,o);let a=6*3-1;for(let l=0;l<6;++l)for(let d=0;d<3;++d){const f=o.get(a);a--,r.setBoolean(l,r.getHeight()-11+d,f),r.setBoolean(r.getHeight()-11+d,l,f)}}static embedDataBits(t,r,o){let a=0,l=-1,d=o.getWidth()-1,f=o.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);f>=0&&f<o.getHeight();){for(let m=0;m<2;++m){const y=d-m;if(!De.isEmpty(o.get(y,f)))continue;let C;a<t.getSize()?(C=t.get(a),++a):C=!1,r!==255&&It.getDataMaskBit(r,y,f)&&(C=!C),o.setBoolean(y,f,C)}f+=l}l=-l,f+=l,d-=2}if(a!==t.getSize())throw new pt("Not all bits consumed: "+a+"/"+t.getSize())}static findMSBSet(t){return 32-B.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new R("0 polynomial");const o=De.findMSBSet(r);for(t<<=o-1;De.findMSBSet(t)>=o;)t^=r<<De.findMSBSet(t)-o;return t}static makeTypeInfoBits(t,r,o){if(!oi.isValidMaskPattern(r))throw new pt("Invalid mask pattern");const a=t.getBits()<<3|r;o.appendBits(a,5);const l=De.calculateBCHCode(a,De.TYPE_INFO_POLY);o.appendBits(l,10);const d=new Y;if(d.appendBits(De.TYPE_INFO_MASK_PATTERN,15),o.xor(d),o.getSize()!==15)throw new pt("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const o=De.calculateBCHCode(t.getVersionNumber(),De.VERSION_INFO_POLY);if(r.appendBits(o,12),r.getSize()!==18)throw new pt("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const o=(r+1)%2;De.isEmpty(t.get(r,6))&&t.setNumber(r,6,o),De.isEmpty(t.get(6,r))&&t.setNumber(6,r,o)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new pt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,o){for(let a=0;a<8;++a){if(!De.isEmpty(o.get(t+a,r)))throw new pt;o.setNumber(t+a,r,0)}}static embedVerticalSeparationPattern(t,r,o){for(let a=0;a<7;++a){if(!De.isEmpty(o.get(t,r+a)))throw new pt;o.setNumber(t,r+a,0)}}static embedPositionAdjustmentPattern(t,r,o){for(let a=0;a<5;++a){const l=De.POSITION_ADJUSTMENT_PATTERN[a];for(let d=0;d<5;++d)o.setNumber(t+d,r+a,l[d])}}static embedPositionDetectionPattern(t,r,o){for(let a=0;a<7;++a){const l=De.POSITION_DETECTION_PATTERN[a];for(let d=0;d<7;++d)o.setNumber(t+d,r+a,l[d])}}static embedPositionDetectionPatternsAndSeparators(t){const r=De.POSITION_DETECTION_PATTERN[0].length;De.embedPositionDetectionPattern(0,0,t),De.embedPositionDetectionPattern(t.getWidth()-r,0,t),De.embedPositionDetectionPattern(0,t.getWidth()-r,t);const o=8;De.embedHorizontalSeparationPattern(0,o-1,t),De.embedHorizontalSeparationPattern(t.getWidth()-o,o-1,t),De.embedHorizontalSeparationPattern(0,t.getWidth()-o,t);const a=7;De.embedVerticalSeparationPattern(a,0,t),De.embedVerticalSeparationPattern(t.getHeight()-a-1,0,t),De.embedVerticalSeparationPattern(a,t.getHeight()-a,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const o=t.getVersionNumber()-1,a=De.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let l=0,d=a.length;l!==d;l++){const f=a[l];if(f>=0)for(let m=0;m!==d;m++){const y=a[m];y>=0&&De.isEmpty(r.get(y,f))&&De.embedPositionAdjustmentPattern(y-2,f-2,r)}}}}De.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),De.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),De.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),De.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),De.VERSION_INFO_POLY=7973,De.TYPE_INFO_POLY=1335,De.TYPE_INFO_MASK_PATTERN=21522;class wc{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class yt{constructor(){}static calculateMaskPenalty(t){return It.applyMaskPenaltyRule1(t)+It.applyMaskPenaltyRule2(t)+It.applyMaskPenaltyRule3(t)+It.applyMaskPenaltyRule4(t)}static encode(t,r,o=null){let a=yt.DEFAULT_BYTE_MODE_ENCODING;const l=o!==null&&o.get(Rt.CHARACTER_SET)!==void 0;l&&(a=o.get(Rt.CHARACTER_SET).toString());const d=this.chooseMode(t,a),f=new Y;if(d===ke.BYTE&&(l||yt.DEFAULT_BYTE_MODE_ENCODING!==a)){const ge=Q.getCharacterSetECIByName(a);ge!==void 0&&this.appendECI(ge,f)}this.appendModeInfo(d,f);const m=new Y;this.appendBytes(t,d,m,a);let y;if(o!==null&&o.get(Rt.QR_VERSION)!==void 0){const ge=Number.parseInt(o.get(Rt.QR_VERSION).toString(),10);y=we.getVersionForNumber(ge);const ae=this.calculateBitsNeeded(d,f,m,y);if(!this.willFit(ae,y,r))throw new pt("Data too big for requested version")}else y=this.recommendVersion(r,d,f,m);const C=new Y;C.appendBitArray(f);const N=d===ke.BYTE?m.getSizeInBytes():t.length;this.appendLengthInfo(N,y,d,C),C.appendBitArray(m);const I=y.getECBlocksForLevel(r),P=y.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(P,C);const F=this.interleaveWithECBytes(C,y.getTotalCodewords(),P,I.getNumBlocks()),z=new oi;z.setECLevel(r),z.setMode(d),z.setVersion(y);const Z=y.getDimensionForVersion(),q=new ps(Z,Z),de=this.chooseMaskPattern(F,r,y,q);return z.setMaskPattern(de),De.buildMatrix(F,r,y,de,q),z.setMatrix(q),z}static recommendVersion(t,r,o,a){const l=this.calculateBitsNeeded(r,o,a,we.getVersionForNumber(1)),d=this.chooseVersion(l,t),f=this.calculateBitsNeeded(r,o,a,d);return this.chooseVersion(f,t)}static calculateBitsNeeded(t,r,o,a){return r.getSize()+t.getCharacterCountBits(a)+o.getSize()}static getAlphanumericCode(t){return t<yt.ALPHANUMERIC_TABLE.length?yt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(Q.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return ke.KANJI;let o=!1,a=!1;for(let l=0,d=t.length;l<d;++l){const f=t.charAt(l);if(yt.isDigit(f))o=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)a=!0;else return ke.BYTE}return a?ke.ALPHANUMERIC:o?ke.NUMERIC:ke.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=Me.encode(t,Q.SJIS)}catch{return!1}const o=r.length;if(o%2!==0)return!1;for(let a=0;a<o;a+=2){const l=r[a]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(t,r,o,a){let l=Number.MAX_SAFE_INTEGER,d=-1;for(let f=0;f<oi.NUM_MASK_PATTERNS;f++){De.buildMatrix(t,r,o,f,a);let m=this.calculateMaskPenalty(a);m<l&&(l=m,d=f)}return d}static chooseVersion(t,r){for(let o=1;o<=40;o++){const a=we.getVersionForNumber(o);if(yt.willFit(t,a,r))return a}throw new pt("Data too big")}static willFit(t,r,o){const a=r.getTotalCodewords(),d=r.getECBlocksForLevel(o).getTotalECCodewords(),f=a-d,m=(t+7)/8;return f>=m}static terminateBits(t,r){const o=t*8;if(r.getSize()>o)throw new pt("data bits cannot fit in the QR Code"+r.getSize()+" > "+o);for(let d=0;d<4&&r.getSize()<o;++d)r.appendBit(!1);const a=r.getSize()&7;if(a>0)for(let d=a;d<8;d++)r.appendBit(!1);const l=t-r.getSizeInBytes();for(let d=0;d<l;++d)r.appendBits(d&1?17:236,8);if(r.getSize()!==o)throw new pt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,o,a,l,d){if(a>=o)throw new pt("Block ID too large");const f=t%o,m=o-f,y=Math.floor(t/o),C=y+1,N=Math.floor(r/o),I=N+1,P=y-N,F=C-I;if(P!==F)throw new pt("EC bytes mismatch");if(o!==m+f)throw new pt("RS blocks mismatch");if(t!==(N+P)*m+(I+F)*f)throw new pt("Total bytes mismatch");a<m?(l[0]=N,d[0]=P):(l[0]=I,d[0]=F)}static interleaveWithECBytes(t,r,o,a){if(t.getSizeInBytes()!==o)throw new pt("Number of bits and data bytes does not match");let l=0,d=0,f=0;const m=new Array;for(let C=0;C<a;++C){const N=new Int32Array(1),I=new Int32Array(1);yt.getNumDataBytesAndNumECBytesForBlockID(r,o,a,C,N,I);const P=N[0],F=new Uint8Array(P);t.toBytes(8*l,F,0,P);const z=yt.generateECBytes(F,I[0]);m.push(new wc(F,z)),d=Math.max(d,P),f=Math.max(f,z.length),l+=N[0]}if(o!==l)throw new pt("Data bytes does not match offset");const y=new Y;for(let C=0;C<d;++C)for(const N of m){const I=N.getDataBytes();C<I.length&&y.appendBits(I[C],8)}for(let C=0;C<f;++C)for(const N of m){const I=N.getErrorCorrectionBytes();C<I.length&&y.appendBits(I[C],8)}if(r!==y.getSizeInBytes())throw new pt("Interleaving error: "+r+" and "+y.getSizeInBytes()+" differ.");return y}static generateECBytes(t,r){const o=t.length,a=new Int32Array(o+r);for(let d=0;d<o;d++)a[d]=t[d]&255;new Lo(Je.QR_CODE_FIELD_256).encode(a,r);const l=new Uint8Array(r);for(let d=0;d<r;d++)l[d]=a[o+d];return l}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,o,a){const l=o.getCharacterCountBits(r);if(t>=1<<l)throw new pt(t+" is bigger than "+((1<<l)-1));a.appendBits(t,l)}static appendBytes(t,r,o,a){switch(r){case ke.NUMERIC:yt.appendNumericBytes(t,o);break;case ke.ALPHANUMERIC:yt.appendAlphanumericBytes(t,o);break;case ke.BYTE:yt.append8BitBytes(t,o,a);break;case ke.KANJI:yt.appendKanjiBytes(t,o);break;default:throw new pt("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=yt.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const o=t.length;let a=0;for(;a<o;){const l=yt.getDigit(t.charAt(a));if(a+2<o){const d=yt.getDigit(t.charAt(a+1)),f=yt.getDigit(t.charAt(a+2));r.appendBits(l*100+d*10+f,10),a+=3}else if(a+1<o){const d=yt.getDigit(t.charAt(a+1));r.appendBits(l*10+d,7),a+=2}else r.appendBits(l,4),a++}}static appendAlphanumericBytes(t,r){const o=t.length;let a=0;for(;a<o;){const l=yt.getAlphanumericCode(t.charCodeAt(a));if(l===-1)throw new pt;if(a+1<o){const d=yt.getAlphanumericCode(t.charCodeAt(a+1));if(d===-1)throw new pt;r.appendBits(l*45+d,11),a+=2}else r.appendBits(l,6),a++}}static append8BitBytes(t,r,o){let a;try{a=Me.encode(t,o)}catch(l){throw new pt(l)}for(let l=0,d=a.length;l!==d;l++){const f=a[l];r.appendBits(f,8)}}static appendKanjiBytes(t,r){let o;try{o=Me.encode(t,Q.SJIS)}catch(l){throw new pt(l)}const a=o.length;for(let l=0;l<a;l+=2){const d=o[l]&255,f=o[l+1]&255,m=d<<8&4294967295|f;let y=-1;if(m>=33088&&m<=40956?y=m-33088:m>=57408&&m<=60351&&(y=m-49472),y===-1)throw new pt("Invalid byte sequence");const C=(y>>8)*192+(y&255);r.appendBits(C,13)}}static appendECI(t,r){r.appendBits(ke.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}yt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),yt.DEFAULT_BYTE_MODE_ENCODING=Q.UTF8.getName();class Gr{write(t,r,o,a=null){if(t.length===0)throw new R("Found empty contents");if(r<0||o<0)throw new R("Requested dimensions are too small: "+r+"x"+o);let l=Ge.L,d=Gr.QUIET_ZONE_SIZE;a!==null&&(a.get(Rt.ERROR_CORRECTION)!==void 0&&(l=Ge.fromString(a.get(Rt.ERROR_CORRECTION).toString())),a.get(Rt.MARGIN)!==void 0&&(d=Number.parseInt(a.get(Rt.MARGIN).toString(),10)));const f=yt.encode(t,l,a);return this.renderResult(f,r,o,d)}writeToDom(t,r,o,a,l=null){typeof t=="string"&&(t=document.querySelector(t));const d=this.write(r,o,a,l);t&&t.appendChild(d)}renderResult(t,r,o,a){const l=t.getMatrix();if(l===null)throw new xn;const d=l.getWidth(),f=l.getHeight(),m=d+a*2,y=f+a*2,C=Math.max(r,m),N=Math.max(o,y),I=Math.min(Math.floor(C/m),Math.floor(N/y)),P=Math.floor((C-d*I)/2),F=Math.floor((N-f*I)/2),z=this.createSVGElement(C,N);for(let Z=0,q=F;Z<f;Z++,q+=I)for(let de=0,ge=P;de<d;de++,ge+=I)if(l.get(de,Z)===1){const ae=this.createSvgRectElement(ge,q,I,I);z.appendChild(ae)}return z}createSVGElement(t,r){const o=document.createElementNS(Gr.SVG_NS,"svg");return o.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width",r.toString()),o}createSvgRectElement(t,r,o,a){const l=document.createElementNS(Gr.SVG_NS,"rect");return l.setAttributeNS(null,"x",t.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"height",o.toString()),l.setAttributeNS(null,"width",a.toString()),l.setAttributeNS(null,"fill","#000000"),l}}Gr.QUIET_ZONE_SIZE=4,Gr.SVG_NS="http://www.w3.org/2000/svg";class Nr{encode(t,r,o,a,l){if(t.length===0)throw new R("Found empty contents");if(r!==ce.QR_CODE)throw new R("Can only encode QR_CODE, but got "+r);if(o<0||a<0)throw new R(`Requested dimensions are too small: ${o}x${a}`);let d=Ge.L,f=Nr.QUIET_ZONE_SIZE;l!==null&&(l.get(Rt.ERROR_CORRECTION)!==void 0&&(d=Ge.fromString(l.get(Rt.ERROR_CORRECTION).toString())),l.get(Rt.MARGIN)!==void 0&&(f=Number.parseInt(l.get(Rt.MARGIN).toString(),10)));const m=yt.encode(t,d,l);return Nr.renderResult(m,o,a,f)}static renderResult(t,r,o,a){const l=t.getMatrix();if(l===null)throw new xn;const d=l.getWidth(),f=l.getHeight(),m=d+a*2,y=f+a*2,C=Math.max(r,m),N=Math.max(o,y),I=Math.min(Math.floor(C/m),Math.floor(N/y)),P=Math.floor((C-d*I)/2),F=Math.floor((N-f*I)/2),z=new Xe(C,N);for(let Z=0,q=F;Z<f;Z++,q+=I)for(let de=0,ge=P;de<d;de++,ge+=I)l.get(de,Z)===1&&z.setRegion(ge,q,I,I);return z}}Nr.QUIET_ZONE_SIZE=4;class ai{encode(t,r,o,a,l){let d;switch(r){case ce.QR_CODE:d=new Nr;break;default:throw new R("No encoder available for format "+r)}return d.encode(t,r,o,a,l)}}class cr extends ee{constructor(t,r,o,a,l,d,f,m){if(super(d,f),this.yuvData=t,this.dataWidth=r,this.dataHeight=o,this.left=a,this.top=l,a+d>r||l+f>o)throw new R("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(d,f)}getRow(t,r){if(t<0||t>=this.getHeight())throw new R("Requested row is outside the image: "+t);const o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));const a=(t+this.top)*this.dataWidth+this.left;return U.arraycopy(this.yuvData,a,r,0,o),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const o=t*r,a=new Uint8ClampedArray(o);let l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return U.arraycopy(this.yuvData,l,a,0,o),a;for(let d=0;d<r;d++){const f=d*t;U.arraycopy(this.yuvData,l,a,f,t),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,r,o,a){return new cr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,o,a,!1)}renderThumbnail(){const t=this.getWidth()/cr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/cr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(t*r),a=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let d=0;d<r;d++){const f=d*t;for(let m=0;m<t;m++){const y=a[l+m*cr.THUMBNAIL_SCALE_FACTOR]&255;o[f+m]=4278190080|y*65793}l+=this.dataWidth*cr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/cr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/cr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const o=this.yuvData;for(let a=0,l=this.top*this.dataWidth+this.left;a<r;a++,l+=this.dataWidth){const d=l+t/2;for(let f=l,m=l+t-1;f<d;f++,m--){const y=o[f];o[f]=o[m],o[m]=y}}}invert(){return new Oe(this)}}cr.THUMBNAIL_SCALE_FACTOR=2;class li extends ee{constructor(t,r,o,a,l,d,f){if(super(r,o),this.dataWidth=a,this.dataHeight=l,this.left=d,this.top=f,t.BYTES_PER_ELEMENT===4){const m=r*o,y=new Uint8ClampedArray(m);for(let C=0;C<m;C++){const N=t[C],I=N>>16&255,P=N>>7&510,F=N&255;y[C]=(I+P+F)/4&255}this.luminances=y}else this.luminances=t;if(a===void 0&&(this.dataWidth=r),l===void 0&&(this.dataHeight=o),d===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+o>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new R("Requested row is outside the image: "+t);const o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));const a=(t+this.top)*this.dataWidth+this.left;return U.arraycopy(this.luminances,a,r,0,o),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const o=t*r,a=new Uint8ClampedArray(o);let l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return U.arraycopy(this.luminances,l,a,0,o),a;for(let d=0;d<r;d++){const f=d*t;U.arraycopy(this.luminances,l,a,f,t),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(t,r,o,a){return new li(this.luminances,o,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new Oe(this)}}class kn extends Q{static forName(t){return this.getCharacterSetECIByName(t)}}class zs{}zs.ISO_8859_1=Q.ISO8859_1;class Do{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Ha{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class Ro{constructor(t){this.previous=t}getPrevious(){return this.previous}}class Yr extends Ro{constructor(t,r,o){super(t),this.value=r,this.bitCount=o}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new Yr(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Yr(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+B.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Po extends Yr{constructor(t,r,o){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=o}appendTo(t,r){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):o===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+o],8)}addBinaryShift(t,r){return new Po(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function _c(S,t,r){return new Po(S,t,r)}function Di(S,t,r){return new Yr(S,t,r)}const vc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Xt=0,Ir=1,Fn=2,ur=3,dr=4,Ri=new Yr(null,0,0),Bo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ms(S){for(let t of S)M.fill(t,-1);return S[Xt][dr]=0,S[Ir][dr]=0,S[Ir][Xt]=28,S[ur][dr]=0,S[Fn][dr]=0,S[Fn][Xt]=15,S}const jo=ms(M.createInt32Array(6,6));class Mn{constructor(t,r,o,a){this.token=t,this.mode=r,this.binaryShiftByteCount=o,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let o=this.bitCount,a=this.token;if(t!==this.mode){let d=Bo[this.mode][t];a=Di(a,d&65535,d>>16),o+=d>>16}let l=t===Fn?4:5;return a=Di(a,r,l),new Mn(a,t,0,o+l)}shiftAndAppend(t,r){let o=this.token,a=this.mode===Fn?4:5;return o=Di(o,jo[this.mode][t],a),o=Di(o,r,5),new Mn(o,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(t){let r=this.token,o=this.mode,a=this.bitCount;if(this.mode===dr||this.mode===Fn){let f=Bo[o][Xt];r=Di(r,f&65535,f>>16),a+=f>>16,o=Xt}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new Mn(r,o,this.binaryShiftByteCount+1,a+l);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(t+1)),d}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=_c(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Mn(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(Bo[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=Mn.calculateBinaryShiftCost(t)-Mn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let a=this.endBinaryShift(t.length).token;a!==null;a=a.getPrevious())r.unshift(a);let o=new Y;for(const a of r)a.appendTo(o,t);return o}toString(){return ye.format("%s bits=%d bytes=%d",vc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Mn.INITIAL_STATE=new Mn(Ri,Xt,0,0);function Cc(S){const t=ye.getCharCode(" "),r=ye.getCharCode("."),o=ye.getCharCode(",");S[Xt][t]=1;const a=ye.getCharCode("Z"),l=ye.getCharCode("A");for(let I=l;I<=a;I++)S[Xt][I]=I-l+2;S[Ir][t]=1;const d=ye.getCharCode("z"),f=ye.getCharCode("a");for(let I=f;I<=d;I++)S[Ir][I]=I-f+2;S[Fn][t]=1;const m=ye.getCharCode("9"),y=ye.getCharCode("0");for(let I=y;I<=m;I++)S[Fn][I]=I-y+2;S[Fn][o]=12,S[Fn][r]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let I=0;I<C.length;I++)S[ur][ye.getCharCode(C[I])]=I;const N=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<N.length;I++)ye.getCharCode(N[I])>0&&(S[dr][ye.getCharCode(N[I])]=I);return S}const hr=Cc(M.createInt32Array(5,256));class Xr{constructor(t){this.text=t}encode(){const t=ye.getCharCode(" "),r=ye.getCharCode(`
`);let o=Ha.singletonList(Mn.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let d,f=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case ye.getCharCode("\r"):d=f===r?2:0;break;case ye.getCharCode("."):d=f===t?3:0;break;case ye.getCharCode(","):d=f===t?4:0;break;case ye.getCharCode(":"):d=f===t?5:0;break;default:d=0}d>0?(o=Xr.updateStateListForPair(o,l,d),l++):o=this.updateStateListForChar(o,l)}return Ha.min(o,(l,d)=>l.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const o=[];for(let a of t)this.updateStateForChar(a,r,o);return Xr.simplifyStates(o)}updateStateForChar(t,r,o){let a=this.text[r]&255,l=hr[t.getMode()][a]>0,d=null;for(let f=0;f<=dr;f++){let m=hr[f][a];if(m>0){if(d==null&&(d=t.endBinaryShift(r)),!l||f===t.getMode()||f===Fn){const y=d.latchAndAppend(f,m);o.push(y)}if(!l&&jo[t.getMode()][f]>=0){const y=d.shiftAndAppend(f,m);o.push(y)}}}if(t.getBinaryShiftByteCount()>0||hr[t.getMode()][a]===0){let f=t.addBinaryShiftChar(r);o.push(f)}}static updateStateListForPair(t,r,o){const a=[];for(let l of t)this.updateStateForPair(l,r,o,a);return this.simplifyStates(a)}static updateStateForPair(t,r,o,a){let l=t.endBinaryShift(r);if(a.push(l.latchAndAppend(dr,o)),t.getMode()!==dr&&a.push(l.shiftAndAppend(dr,o)),o===3||o===4){let d=l.latchAndAppend(Fn,16-o).latchAndAppend(Fn,1);a.push(d)}if(t.getBinaryShiftByteCount()>0){let d=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(d)}}static simplifyStates(t){let r=[];for(const o of t){let a=!0;for(const l of r){if(l.isBetterThanOrEqualTo(o)){a=!1;break}o.isBetterThanOrEqualTo(l)&&(r=r.filter(d=>d!==l))}a&&r.push(o)}return r}}class nt{constructor(){}static encodeBytes(t){return nt.encode(t,nt.DEFAULT_EC_PERCENT,nt.DEFAULT_AZTEC_LAYERS)}static encode(t,r,o){let a=new Xr(t).encode(),l=B.truncDivision(a.getSize()*r,100)+11,d=a.getSize()+l,f,m,y,C,N;if(o!==nt.DEFAULT_AZTEC_LAYERS){if(f=o<0,m=Math.abs(o),m>(f?nt.MAX_NB_BITS_COMPACT:nt.MAX_NB_BITS))throw new R(ye.format("Illegal value %s for layers",o));y=nt.totalBitsInLayer(m,f),C=nt.WORD_SIZE[m];let ae=y-y%C;if(N=nt.stuffBits(a,C),N.getSize()+l>ae)throw new R("Data to large for user specified layer");if(f&&N.getSize()>C*64)throw new R("Data to large for user specified layer")}else{C=0,N=null;for(let ae=0;;ae++){if(ae>nt.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(f=ae<=3,m=f?ae+1:ae,y=nt.totalBitsInLayer(m,f),d>y)continue;(N==null||C!==nt.WORD_SIZE[m])&&(C=nt.WORD_SIZE[m],N=nt.stuffBits(a,C));let Ye=y-y%C;if(!(f&&N.getSize()>C*64)&&N.getSize()+l<=Ye)break}}let I=nt.generateCheckWords(N,y,C),P=N.getSize()/C,F=nt.generateModeMessage(f,m,P),z=(f?11:14)+m*4,Z=new Int32Array(z),q;if(f){q=z;for(let ae=0;ae<Z.length;ae++)Z[ae]=ae}else{q=z+1+2*B.truncDivision(B.truncDivision(z,2)-1,15);let ae=B.truncDivision(z,2),Ye=B.truncDivision(q,2);for(let He=0;He<ae;He++){let Tt=He+B.truncDivision(He,15);Z[ae-He-1]=Ye-Tt-1,Z[ae+He]=Ye+Tt+1}}let de=new Xe(q);for(let ae=0,Ye=0;ae<m;ae++){let He=(m-ae)*4+(f?9:12);for(let Tt=0;Tt<He;Tt++){let _n=Tt*2;for(let vn=0;vn<2;vn++)I.get(Ye+_n+vn)&&de.set(Z[ae*2+vn],Z[ae*2+Tt]),I.get(Ye+He*2+_n+vn)&&de.set(Z[ae*2+Tt],Z[z-1-ae*2-vn]),I.get(Ye+He*4+_n+vn)&&de.set(Z[z-1-ae*2-vn],Z[z-1-ae*2-Tt]),I.get(Ye+He*6+_n+vn)&&de.set(Z[z-1-ae*2-Tt],Z[ae*2+vn])}Ye+=He*8}if(nt.drawModeMessage(de,f,q,F),f)nt.drawBullsEye(de,B.truncDivision(q,2),5);else{nt.drawBullsEye(de,B.truncDivision(q,2),7);for(let ae=0,Ye=0;ae<B.truncDivision(z,2)-1;ae+=15,Ye+=16)for(let He=B.truncDivision(q,2)&1;He<q;He+=2)de.set(B.truncDivision(q,2)-Ye,He),de.set(B.truncDivision(q,2)+Ye,He),de.set(He,B.truncDivision(q,2)-Ye),de.set(He,B.truncDivision(q,2)+Ye)}let ge=new Do;return ge.setCompact(f),ge.setSize(q),ge.setLayers(m),ge.setCodeWords(P),ge.setMatrix(de),ge}static drawBullsEye(t,r,o){for(let a=0;a<o;a+=2)for(let l=r-a;l<=r+a;l++)t.set(l,r-a),t.set(l,r+a),t.set(r-a,l),t.set(r+a,l);t.set(r-o,r-o),t.set(r-o+1,r-o),t.set(r-o,r-o+1),t.set(r+o,r-o),t.set(r+o,r-o+1),t.set(r+o,r+o-1)}static generateModeMessage(t,r,o){let a=new Y;return t?(a.appendBits(r-1,2),a.appendBits(o-1,6),a=nt.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(o-1,11),a=nt.generateCheckWords(a,40,4)),a}static drawModeMessage(t,r,o,a){let l=B.truncDivision(o,2);if(r)for(let d=0;d<7;d++){let f=l-3+d;a.get(d)&&t.set(f,l-5),a.get(d+7)&&t.set(l+5,f),a.get(20-d)&&t.set(f,l+5),a.get(27-d)&&t.set(l-5,f)}else for(let d=0;d<10;d++){let f=l-5+d+B.truncDivision(d,5);a.get(d)&&t.set(f,l-7),a.get(d+10)&&t.set(l+7,f),a.get(29-d)&&t.set(f,l+7),a.get(39-d)&&t.set(l-7,f)}}static generateCheckWords(t,r,o){let a=t.getSize()/o,l=new Lo(nt.getGF(o)),d=B.truncDivision(r,o),f=nt.bitsToWords(t,o,d);l.encode(f,d-a);let m=r%o,y=new Y;y.appendBits(0,m);for(const C of Array.from(f))y.appendBits(C,o);return y}static bitsToWords(t,r,o){let a=new Int32Array(o),l,d;for(l=0,d=t.getSize()/r;l<d;l++){let f=0;for(let m=0;m<r;m++)f|=t.get(l*r+m)?1<<r-m-1:0;a[l]=f}return a}static getGF(t){switch(t){case 4:return Je.AZTEC_PARAM;case 6:return Je.AZTEC_DATA_6;case 8:return Je.AZTEC_DATA_8;case 10:return Je.AZTEC_DATA_10;case 12:return Je.AZTEC_DATA_12;default:throw new R("Unsupported word size "+t)}}static stuffBits(t,r){let o=new Y,a=t.getSize(),l=(1<<r)-2;for(let d=0;d<a;d+=r){let f=0;for(let m=0;m<r;m++)(d+m>=a||t.get(d+m))&&(f|=1<<r-1-m);(f&l)===l?(o.appendBits(f&l,r),d--):f&l?o.appendBits(f,r):(o.appendBits(f|1,r),d--)}return o}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}nt.DEFAULT_EC_PERCENT=33,nt.DEFAULT_AZTEC_LAYERS=0,nt.MAX_NB_BITS=32,nt.MAX_NB_BITS_COMPACT=4,nt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Pi{encode(t,r,o,a){return this.encodeWithHints(t,r,o,a,null)}encodeWithHints(t,r,o,a,l){let d=zs.ISO_8859_1,f=nt.DEFAULT_EC_PERCENT,m=nt.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(Rt.CHARACTER_SET)&&(d=kn.forName(l.get(Rt.CHARACTER_SET).toString())),l.has(Rt.ERROR_CORRECTION)&&(f=B.parseInt(l.get(Rt.ERROR_CORRECTION).toString())),l.has(Rt.AZTEC_LAYERS)&&(m=B.parseInt(l.get(Rt.AZTEC_LAYERS).toString()))),Pi.encodeLayers(t,r,o,a,d,f,m)}static encodeLayers(t,r,o,a,l,d,f){if(r!==ce.AZTEC)throw new R("Can only encode AZTEC, but got "+r);let m=nt.encode(ye.getBytes(t,l),d,f);return Pi.renderResult(m,o,a)}static renderResult(t,r,o){let a=t.getMatrix();if(a==null)throw new xn;let l=a.getWidth(),d=a.getHeight(),f=Math.max(r,l),m=Math.max(o,d),y=Math.min(f/l,m/d),C=(f-l*y)/2,N=(m-d*y)/2,I=new Xe(f,m);for(let P=0,F=N;P<d;P++,F+=y)for(let z=0,Z=C;z<l;z++,Z+=y)a.get(z,P)&&I.setRegion(Z,F,y,y);return I}}s.AbstractExpandedDecoder=Ds,s.ArgumentException=D,s.ArithmeticException=sr,s.AztecCode=Do,s.AztecCodeReader=Ur,s.AztecCodeWriter=Pi,s.AztecDecoder=rt,s.AztecDetector=Si,s.AztecDetectorResult=Ei,s.AztecEncoder=nt,s.AztecHighLevelEncoder=Xr,s.AztecPoint=Gt,s.BarcodeFormat=ce,s.Binarizer=te,s.BinaryBitmap=H,s.BitArray=Y,s.BitMatrix=Xe,s.BitSource=ki,s.BrowserAztecCodeReader=Ls,s.BrowserBarcodeReader=cs,s.BrowserCodeReader=ft,s.BrowserDatamatrixCodeReader=Io,s.BrowserMultiFormatReader=za,s.BrowserPDF417Reader=Wr,s.BrowserQRCodeReader=Ua,s.BrowserQRCodeSvgWriter=Gr,s.CharacterSetECI=Q,s.ChecksumException=X,s.Code128Reader=me,s.Code39Reader=St,s.DataMatrixDecodedBitStreamParser=In,s.DataMatrixReader=dt,s.DecodeHintType=oe,s.DecoderResult=Br,s.DefaultGridSampler=bi,s.DetectorResult=zr,s.EAN13Reader=We,s.EncodeHintType=Rt,s.Exception=v,s.FormatException=V,s.GenericGF=Je,s.GenericGFPoly=Wt,s.GlobalHistogramBinarizer=Be,s.GridSampler=Ai,s.GridSamplerInstance=jn,s.HTMLCanvasElementLuminanceSource=ue,s.HybridBinarizer=Re,s.ITFReader=lt,s.IllegalArgumentException=R,s.IllegalStateException=xn,s.InvertedLuminanceSource=Oe,s.LuminanceSource=ee,s.MathUtils=Ke,s.MultiFormatOneDReader=Zr,s.MultiFormatReader=Fa,s.MultiFormatWriter=ai,s.NotFoundException=K,s.OneDReader=vt,s.PDF417DecodedBitStreamParser=J,s.PDF417DecoderErrorCorrection=Ps,s.PDF417Reader=$t,s.PDF417ResultMetadata=Oo,s.PerspectiveTransform=rn,s.PlanarYUVLuminanceSource=cr,s.QRCodeByteMatrix=ps,s.QRCodeDataMask=cn,s.QRCodeDecodedBitStreamParser=_t,s.QRCodeDecoderErrorCorrectionLevel=Ge,s.QRCodeDecoderFormatInformation=ln,s.QRCodeEncoder=yt,s.QRCodeEncoderQRCode=oi,s.QRCodeMaskUtil=It,s.QRCodeMatrixUtil=De,s.QRCodeMode=ke,s.QRCodeReader=qt,s.QRCodeVersion=we,s.QRCodeWriter=Nr,s.RGBLuminanceSource=li,s.RSS14Reader=Lt,s.RSSExpandedReader=ie,s.ReaderException=Tn,s.ReedSolomonDecoder=Cr,s.ReedSolomonEncoder=Lo,s.ReedSolomonException=jr,s.Result=ze,s.ResultMetadataType=gt,s.ResultPoint=Ee,s.StringUtils=ye,s.UnsupportedOperationException=Se,s.VideoInputDevice=Le,s.WhiteRectangleDetector=Bn,s.WriterException=pt,s.ZXingArrays=M,s.ZXingCharset=kn,s.ZXingInteger=B,s.ZXingStandardCharsets=zs,s.ZXingStringBuilder=Te,s.ZXingStringEncoding=Me,s.ZXingSystem=U,s.createAbstractExpandedDecoder=ls,Object.defineProperty(s,"__esModule",{value:!0})})})(Ju,Ju.exports);var Pt=Ju.exports;const e2=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var If=function(){function e(n,s,c){if(this.formatMap=new Map([[Ae.QR_CODE,Pt.BarcodeFormat.QR_CODE],[Ae.AZTEC,Pt.BarcodeFormat.AZTEC],[Ae.CODABAR,Pt.BarcodeFormat.CODABAR],[Ae.CODE_39,Pt.BarcodeFormat.CODE_39],[Ae.CODE_93,Pt.BarcodeFormat.CODE_93],[Ae.CODE_128,Pt.BarcodeFormat.CODE_128],[Ae.DATA_MATRIX,Pt.BarcodeFormat.DATA_MATRIX],[Ae.MAXICODE,Pt.BarcodeFormat.MAXICODE],[Ae.ITF,Pt.BarcodeFormat.ITF],[Ae.EAN_13,Pt.BarcodeFormat.EAN_13],[Ae.EAN_8,Pt.BarcodeFormat.EAN_8],[Ae.PDF_417,Pt.BarcodeFormat.PDF_417],[Ae.RSS_14,Pt.BarcodeFormat.RSS_14],[Ae.RSS_EXPANDED,Pt.BarcodeFormat.RSS_EXPANDED],[Ae.UPC_A,Pt.BarcodeFormat.UPC_A],[Ae.UPC_E,Pt.BarcodeFormat.UPC_E],[Ae.UPC_EAN_EXTENSION,Pt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!e2)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=c;var h=this.createZXingFormats(n),g=new Map;g.set(Pt.DecodeHintType.POSSIBLE_FORMATS,h),g.set(Pt.DecodeHintType.TRY_HARDER,!1),this.hints=g}return e.prototype.decodeAsync=function(n){var s=this;return new Promise(function(c,h){try{c(s.decode(n))}catch(g){h(g)}})},e.prototype.decode=function(n){var s=new Pt.MultiFormatReader(this.verbose,this.hints),c=new Pt.HTMLCanvasElementLuminanceSource(n),h=new Pt.BinaryBitmap(new Pt.HybridBinarizer(c)),g=s.decode(h);return{text:g.text,format:fg.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,c,h){n.set(s,c)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var s=[],c=0,h=n;c<h.length;c++){var g=h[c];this.formatMap.has(g)?s.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return s},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),t2=function(e,n,s,c){function h(g){return g instanceof s?g:new s(function(_){_(g)})}return new(s||(s=Promise))(function(g,_){function A(D){try{v(c.next(D))}catch(R){_(R)}}function b(D){try{v(c.throw(D))}catch(R){_(R)}}function v(D){D.done?g(D.value):h(D.value).then(A,b)}v((c=c.apply(e,n||[])).next())})},n2=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,h,g,_;return _={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function A(v){return function(D){return b([v,D])}}function b(v){if(c)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(s=0)),s;)try{if(c=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(D){v=[6,D],h=0}finally{c=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Tf=function(){function e(n,s,c){if(this.formatMap=new Map([[Ae.QR_CODE,"qr_code"],[Ae.AZTEC,"aztec"],[Ae.CODABAR,"codabar"],[Ae.CODE_39,"code_39"],[Ae.CODE_93,"code_93"],[Ae.CODE_128,"code_128"],[Ae.DATA_MATRIX,"data_matrix"],[Ae.ITF,"itf"],[Ae.EAN_13,"ean_13"],[Ae.EAN_8,"ean_8"],[Ae.PDF_417,"pdf417"],[Ae.UPC_A,"upc_a"],[Ae.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=c;var h=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return t2(this,void 0,void 0,function(){var s,c;return n2(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(n)];case 1:if(s=h.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return c=this.selectLargestBarcode(s),[2,{text:c.rawValue,format:fg.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var s=null,c=0,h=0,g=n;h<g.length;h++){var _=g[h],A=_.boundingBox.width*_.boundingBox.height;A>c&&(c=A,s=_)}if(!s)throw"No largest barcode found";return s},e.prototype.createBarcodeDetectorFormats=function(n){for(var s=[],c=0,h=n;c<h.length;c++){var g=h[c];this.formatMap.has(g)?s.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,c,h){n.set(s,c)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),kf=function(e,n,s,c){function h(g){return g instanceof s?g:new s(function(_){_(g)})}return new(s||(s=Promise))(function(g,_){function A(D){try{v(c.next(D))}catch(R){_(R)}}function b(D){try{v(c.throw(D))}catch(R){_(R)}}function v(D){D.done?g(D.value):h(D.value).then(A,b)}v((c=c.apply(e,n||[])).next())})},Mf=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,h,g,_;return _={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function A(v){return function(D){return b([v,D])}}function b(v){if(c)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(s=0)),s;)try{if(c=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(D){v=[6,D],h=0}finally{c=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},r2=function(){function e(n,s,c,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=c,s&&Tf.isSupported()?(this.primaryDecoder=new Tf(n,c,h),this.secondaryDecoder=new If(n,c,h)):this.primaryDecoder=new If(n,c,h)}return e.prototype.decodeAsync=function(n){return kf(this,void 0,void 0,function(){var s;return Mf(this,function(c){switch(c.label){case 0:s=performance.now(),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,c.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return kf(this,void 0,void 0,function(){var s,c;return Mf(this,function(h){switch(h.label){case 0:s=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,h.sent()];case 3:if(c=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw c;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var s=performance.now()-n;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,s=0,c=this.executionResults;s<c.length;s++){var h=c[s];n+=h}var g=n/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Xd=function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(c[g]=h[g])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function c(){this.constructor=n}n.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),Gl=function(e,n,s,c){function h(g){return g instanceof s?g:new s(function(_){_(g)})}return new(s||(s=Promise))(function(g,_){function A(D){try{v(c.next(D))}catch(R){_(R)}}function b(D){try{v(c.throw(D))}catch(R){_(R)}}function v(D){D.done?g(D.value):h(D.value).then(A,b)}v((c=c.apply(e,n||[])).next())})},Yl=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,h,g,_;return _={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function A(v){return function(D){return b([v,D])}}function b(v){if(c)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(s=0)),s;)try{if(c=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(D){v=[6,D],h=0}finally{c=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},xg=function(){function e(n,s){this.name=n,this.track=s}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var s={};s[this.name]=n;var c={advanced:[s]};return this.track.applyConstraints(c)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var s=n[this.name];return s}return null},e}(),i2=function(e){Xd(n,e);function n(s,c){return e.call(this,s,c)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(s){var c={};c[this.name]=s;var h={advanced:[c]};return this.track.applyConstraints(h)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),c=s[this.name];return{min:c.min,max:c.max,step:c.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(xg),s2=function(e){Xd(n,e);function n(s){return e.call(this,"zoom",s)||this}return n}(i2),o2=function(e){Xd(n,e);function n(s){return e.call(this,"torch",s)||this}return n}(xg),a2=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new s2(this.track)},e.prototype.torchFeature=function(){return new o2(this.track)},e}(),l2=function(){function e(n,s,c){this.isClosed=!1,this.parentElement=n,this.mediaStream=s,this.callbacks=c,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var s=document.createElement("video");return s.style.width="".concat(n,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var c=n.surface.clientWidth,h=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(c,h),n.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,s,c,h){return Gl(this,void 0,void 0,function(){var g,_;return Yl(this,function(A){switch(A.label){case 0:return g=new e(n,s,h),c.aspectRatio?(_={aspectRatio:c.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(_)]):[3,2];case 1:A.sent(),A.label=2;case 2:return g.setupSurface(),[2,g]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var s=this,c=function(){setTimeout(n,200),s.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return Gl(this,void 0,void 0,function(){return Yl(this,function(s){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(s,c){var h=n.mediaStream.getVideoTracks(),g=h.length,_=0;n.mediaStream.getVideoTracks().forEach(function(A){n.mediaStream.removeTrack(A),A.stop(),++_,_>=g&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),s())})})},e.prototype.getCapabilities=function(){return new a2(this.getFirstTrackOrFail())},e}(),c2=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,s,c){return Gl(this,void 0,void 0,function(){return Yl(this,function(h){return[2,l2.create(n,this.mediaStream,s,c)]})})},e.create=function(n){return Gl(this,void 0,void 0,function(){var s,c;return Yl(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return c=h.sent(),[2,new e(c)]}})})},e}(),Of=function(e,n,s,c){function h(g){return g instanceof s?g:new s(function(_){_(g)})}return new(s||(s=Promise))(function(g,_){function A(D){try{v(c.next(D))}catch(R){_(R)}}function b(D){try{v(c.throw(D))}catch(R){_(R)}}function v(D){D.done?g(D.value):h(D.value).then(A,b)}v((c=c.apply(e,n||[])).next())})},Lf=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,h,g,_;return _={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function A(v){return function(D){return b([v,D])}}function b(v){if(c)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(s=0)),s;)try{if(c=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(D){v=[6,D],h=0}finally{c=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},u2=function(){function e(){}return e.failIfNotSupported=function(){return Of(this,void 0,void 0,function(){return Lf(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return Of(this,void 0,void 0,function(){return Lf(this,function(s){return[2,c2.create(n)]})})},e}(),d2=function(e,n,s,c){function h(g){return g instanceof s?g:new s(function(_){_(g)})}return new(s||(s=Promise))(function(g,_){function A(D){try{v(c.next(D))}catch(R){_(R)}}function b(D){try{v(c.throw(D))}catch(R){_(R)}}function v(D){D.done?g(D.value):h(D.value).then(A,b)}v((c=c.apply(e,n||[])).next())})},h2=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,h,g,_;return _={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function A(v){return function(D){return b([v,D])}}function b(v){if(c)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(s=0)),s;)try{if(c=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(D){v=[6,D],h=0}finally{c=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},f2=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=ro.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=ro.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return d2(this,void 0,void 0,function(){var n,s,c,h,g,_,A;return h2(this,function(b){switch(b.label){case 0:return n=function(v){for(var D=v.getVideoTracks(),R=0,H=D;R<H.length;R++){var X=H[R];X.enabled=!1,X.stop(),v.removeTrack(X)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(c=b.sent(),h=[],g=0,_=c;g<_.length;g++)A=_[g],A.kind==="videoinput"&&h.push({id:A.deviceId,label:A.label});return n(s),[2,h]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,s){var c=function(g){for(var _=[],A=0,b=g;A<b.length;A++){var v=b[A];v.kind==="video"&&_.push({id:v.id,label:v.label})}n(_)},h=MediaStreamTrack;h.getSources(c)})},e}(),zt;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(zt||(zt={}));var g2=function(){function e(){this.state=zt.NOT_STARTED,this.onGoingTransactionNewState=zt.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===zt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=zt.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===zt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=zt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==zt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case zt.UNKNOWN:throw"Transition from unknown is not allowed";case zt.NOT_STARTED:this.failIfNewStateIs(n,[zt.PAUSED]);break;case zt.SCANNING:break;case zt.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,s){for(var c=0,h=s;c<h.length;c++){var g=h[c];if(n===g)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),p2=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===zt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==zt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===zt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===zt.PAUSED},e}(),m2=function(){function e(){}return e.create=function(){return new p2(new g2)},e}(),x2=function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(c[g]=h[g])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function c(){this.constructor=n}n.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),Kn=function(e){x2(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(Or),y2=function(){function e(n,s){this.logger=s,this.fps=Kn.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=Kn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?mg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!qr(this.qrbox)},e.create=function(n,s){return new e(n,s)},e}(),Df=function(){function e(n,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var c;typeof s=="boolean"?this.verbose=s===!0:s&&(c=s,this.verbose=c.verbose===!0,c.experimentalFeatures),this.logger=new pg(this.verbose),this.qrcode=new r2(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(c),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=m2.create()}return e.prototype.start=function(n,s,c,h){var g=this;if(!n)throw"cameraIdOrConfig is required";if(!c||typeof c!="function")throw"qrCodeSuccessCallback is required and should be a function.";var _;h?_=h:_=this.verbose?this.logger.log:function(){};var A=y2.create(s,this.logger);this.clearElement();var b=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=b,D=document.getElementById(this.elementId);D.clientWidth?D.clientWidth:Kn.DEFAULT_WIDTH,D.style.position="relative",this.shouldScan=!0,this.element=D;var R=this,H=this.stateManagerProxy.startTransition(zt.SCANNING);return new Promise(function(X,te){var U=v?A.videoConstraints:R.createVideoConstraints(n);if(!U){H.cancel(),te("videoConstraints should be defined");return}var xe={};(!v||A.aspectRatio)&&(xe.aspectRatio=A.aspectRatio);var k={onRenderSurfaceReady:function(M,B){R.setupUi(M,B,A),R.isScanning=!0,R.foreverScan(A,c,_)}};u2.failIfNotSupported().then(function(M){M.create(U).then(function(B){return B.render(g.element,xe,k).then(function(Y){R.renderedCamera=Y,H.execute(),X(null)}).catch(function(Y){H.cancel(),te(Y)})}).catch(function(B){H.cancel(),te(ro.errorGettingUserMedia(B))})}).catch(function(M){H.cancel(),te(ro.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(zt.PAUSED),this.showPausedState(),(qr(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,s=function(){n.stateManagerProxy.directTransition(zt.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(zt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var c=function(){if(n.element){var g=document.getElementById(Kn.SHADED_REGION_ELEMENT_ID);g&&n.element.removeChild(g)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),c(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),s.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,s){return this.scanFileV2(n,s).then(function(c){return c.decodedText})},e.prototype.scanFileV2=function(n,s){var c=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(qr(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,g){c.possiblyCloseLastScanImageFile(),c.clearElement(),c.lastScanImageFile=URL.createObjectURL(n);var _=new Image;_.onload=function(){var A=_.width,b=_.height,v=document.getElementById(c.elementId),D=v.clientWidth?v.clientWidth:Kn.DEFAULT_WIDTH,R=Math.max(v.clientHeight?v.clientHeight:b,Kn.FILE_SCAN_MIN_HEIGHT),H=c.computeCanvasDrawConfig(A,b,D,R);if(s){var X=c.createCanvasElement(D,R,"qr-canvas-visible");X.style.display="inline-block",v.appendChild(X);var te=X.getContext("2d");if(!te)throw"Unable to get 2d context from canvas";te.canvas.width=D,te.canvas.height=R,te.drawImage(_,0,0,A,b,H.x,H.y,H.width,H.height)}var U=Kn.FILE_SCAN_HIDDEN_CANVAS_PADDING,xe=Math.max(_.width,H.width),k=Math.max(_.height,H.height),M=xe+2*U,B=k+2*U,Y=c.createCanvasElement(M,B);v.appendChild(Y);var he=Y.getContext("2d");if(!he)throw"Unable to get 2d context from canvas";he.canvas.width=M,he.canvas.height=B,he.drawImage(_,0,0,A,b,U,U,xe,k);try{c.qrcode.decodeRobustlyAsync(Y).then(function(oe){h(Sf.createFromQrcodeResult(oe))}).catch(g)}catch(oe){g("QR code parse error, error = ".concat(oe))}},_.onerror=g,_.onabort=g,_.onstalled=g,_.onsuspend=g,_.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return f2.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!mg.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var s=[Ae.QR_CODE,Ae.AZTEC,Ae.CODABAR,Ae.CODE_39,Ae.CODE_93,Ae.CODE_128,Ae.DATA_MATRIX,Ae.MAXICODE,Ae.ITF,Ae.EAN_13,Ae.EAN_8,Ae.PDF_417,Ae.RSS_14,Ae.RSS_EXPANDED,Ae.UPC_A,Ae.UPC_E,Ae.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return s;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var c=[],h=0,g=n.formatsToSupport;h<g.length;h++){var _=g[h];Jx(_)?c.push(_):this.logger.warn("Invalid format: ".concat(_," passed in config, ignoring."))}if(c.length===0)throw"None of formatsToSupport match supported values.";return c},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(qr(n))return!0;if(!qr(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(qr(n.experimentalFeatures))return!0;var s=n.experimentalFeatures;return qr(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,s,c){var h=this,g=c.qrbox;this.validateQrboxConfig(g);var _=this.toQrdimensions(n,s,g),A=function(v){if(v<Kn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Kn.MIN_QR_BOX_SIZE,"px.")},b=function(v){return v>n&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=n),v};A(_.width),A(_.height),_.width=b(_.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,s,c){if(typeof c=="number")return{width:c,height:c};if(typeof c=="function")try{return c(n,s)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return c},e.prototype.setupUi=function(n,s,c){c.isShadedBoxEnabled()&&this.validateQrboxSize(n,s,c);var h=qr(c.qrbox)?{width:n,height:s}:c.qrbox;this.validateQrboxConfig(h);var g=this.toQrdimensions(n,s,h);g.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var _=c.isShadedBoxEnabled()&&g.height<=s,A={x:0,y:0,width:n,height:s},b=_?this.getShadedRegionBounds(n,s,g):A,v=this.createCanvasElement(b.width,b.height),D={willReadFrequently:!0},R=v.getContext("2d",D);R.canvas.width=b.width,R.canvas.height=b.height,this.element.append(v),_&&this.possiblyInsertShadingElement(this.element,n,s,g),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=R,this.canvasElement=v},e.prototype.createScannerPausedUiElement=function(n){var s=document.createElement("div");s.innerText=ro.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",n.appendChild(s),this.scannerPausedUiElement=s},e.prototype.scanContext=function(n,s){var c=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return n(h.text,Sf.createFromQrcodeResult(h)),c.possiblyUpdateShaders(!0),!0}).catch(function(h){c.possiblyUpdateShaders(!1);var g=ro.codeParseError(h);return s(g,gg.createFrom(g)),!1})},e.prototype.foreverScan=function(n,s,c){var h=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),_=g.videoWidth/g.clientWidth,A=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*_,v=this.qrRegion.height*A,D=this.qrRegion.x*_,R=this.qrRegion.y*A;this.context.drawImage(g,D,R,b,v,0,0,this.qrRegion.width,this.qrRegion.height);var H=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(n,s,c)},h.getTimeoutFps(n.fps))};this.scanContext(s,c).then(function(X){!X&&n.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(s,c).finally(function(){H()})):H()}).catch(function(X){h.logger.logError("Error happend while scanning context",X),H()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var s="facingMode",c="deviceId",h={user:!0,environment:!0},g="exact",_=function(te){if(te in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(te,"'")},A=Object.keys(n);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var b=Object.keys(n)[0];if(b!==s&&b!==c)throw"Only '".concat(s,"' and '").concat(c,"' ")+" are supported for 'cameraIdOrConfig'";if(b===s){var v=n.facingMode;if(typeof v=="string"){if(_(v))return{facingMode:v}}else if(typeof v=="object")if(g in v){if(_(v["".concat(g)]))return{facingMode:{exact:v["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var D=typeof v;throw"Invalid type of 'facingMode' = ".concat(D)}}else{var R=n.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(g in R)return{deviceId:{exact:R["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var H=typeof R;throw"Invalid type of 'deviceId' = ".concat(H)}}}var X=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(X)},e.prototype.computeCanvasDrawConfig=function(n,s,c,h){if(n<=c&&s<=h){var g=(c-n)/2,_=(h-s)/2;return{x:g,y:_,width:n,height:s}}else{var A=n,b=s;return n>c&&(s=c/n*s,n=c),s>h&&(n=h/s*n,s=h),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(b)+" to ".concat(n,"X").concat(s,".")),this.computeCanvasDrawConfig(n,s,c,h)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=n?Kn.BORDER_SHADER_MATCH_COLOR:Kn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,s,c){var h=n,g=s,_=document.createElement("canvas");return _.style.width="".concat(h,"px"),_.style.height="".concat(g,"px"),_.style.display="none",_.id=qr(c)?"qr-canvas":c,_},e.prototype.getShadedRegionBounds=function(n,s,c){if(c.width>n||c.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-c.width)/2,y:(s-c.height)/2,width:c.width,height:c.height}},e.prototype.possiblyInsertShadingElement=function(n,s,c,h){if(!(s-h.width<1||c-h.height<1)){var g=document.createElement("div");g.style.position="absolute";var _=(s-h.width)/2,A=(c-h.height)/2;if(g.style.borderLeft="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(Kn.SHADED_REGION_ELEMENT_ID),s-h.width<11||c-h.height<11)this.hasBorderShaders=!1;else{var b=5,v=40;this.insertShaderBorders(g,v,b,-b,null,0,!0),this.insertShaderBorders(g,v,b,-b,null,0,!1),this.insertShaderBorders(g,v,b,null,-b,0,!0),this.insertShaderBorders(g,v,b,null,-b,0,!1),this.insertShaderBorders(g,b,v+b,-b,null,-b,!0),this.insertShaderBorders(g,b,v+b,null,-b,-b,!0),this.insertShaderBorders(g,b,v+b,-b,null,-b,!1),this.insertShaderBorders(g,b,v+b,null,-b,-b,!1),this.hasBorderShaders=!0}n.append(g)}},e.prototype.insertShaderBorders=function(n,s,c,h,g,_,A){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=Kn.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(s,"px"),b.style.height="".concat(c,"px"),h!==null&&(b.style.top="".concat(h,"px")),g!==null&&(b.style.bottom="".concat(g,"px")),A?b.style.left="".concat(_,"px"):b.style.right="".concat(_,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),n.appendChild(b)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}(),Qd="data:image/svg+xml;base64,",w2=Qd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",_2=Qd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Rf=Qd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",v2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Pf=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),C2=function(){function e(){this.data=Pf.createDefault();var n=localStorage.getItem(e.LOCAL_STORAGE_KEY);n?this.data=JSON.parse(n):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(n){this.data.hasPermission=n,this.flush()},e.prototype.setLastUsedCameraId=function(n){this.data.lastUsedCameraId=n,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Pf.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),E2=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(n){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Nf.poweredBy();var s=document.createElement("a");s.innerText="ScanApp",s.href="https://scanapp.org",s.target="new",s.style.color="white",this.infoDiv.appendChild(s);var c=document.createElement("br"),h=document.createElement("br");this.infoDiv.appendChild(c),this.infoDiv.appendChild(h);var g=document.createElement("a");g.innerText=Nf.reportIssues(),g.href="https://github.com/mebjas/html5-qrcode/issues",g.target="new",g.style.color="white",this.infoDiv.appendChild(g),n.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),A2=function(){function e(n,s){this.isShowingInfoIcon=!0,this.onTapIn=n,this.onTapOut=s,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(n){var s=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Rf,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(c){return s.onHoverIn()},this.infoIcon.onmouseout=function(c){return s.onHoverOut()},this.infoIcon.onclick=function(c){return s.onClick()},n.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=v2,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Rf,this.infoIcon.style.opacity="0.6")},e}(),b2=function(){function e(){var n=this;this.infoDiv=new E2,this.infoIcon=new A2(function(){n.infoDiv.show()},function(){n.infoDiv.hide()})}return e.prototype.renderInto=function(n){this.infoDiv.renderInto(n),this.infoIcon.renderInto(n)},e}(),S2=function(e,n,s,c){function h(g){return g instanceof s?g:new s(function(_){_(g)})}return new(s||(s=Promise))(function(g,_){function A(D){try{v(c.next(D))}catch(R){_(R)}}function b(D){try{v(c.throw(D))}catch(R){_(R)}}function v(D){D.done?g(D.value):h(D.value).then(A,b)}v((c=c.apply(e,n||[])).next())})},N2=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,h,g,_;return _={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function A(v){return function(D){return b([v,D])}}function b(v){if(c)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(s=0)),s;)try{if(c=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(D){v=[6,D],h=0}finally{c=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Bf=function(){function e(){}return e.hasPermissions=function(){return S2(this,void 0,void 0,function(){var n,s,c,h;return N2(this,function(g){switch(g.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(n=g.sent(),s=0,c=n;s<c.length;s++)if(h=c[s],h.kind==="videoinput"&&h.label)return[2,!0];return[2,!1]}})})},e}(),zi=function(){function e(n){this.supportedScanTypes=this.validateAndReturnScanTypes(n)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var n=0,s=this.supportedScanTypes;n<s.length;n++){var c=s[n];if(e.isCameraScanType(c))return!0}return!1},e.isCameraScanType=function(n){return n===rs.SCAN_TYPE_CAMERA},e.isFileScanType=function(n){return n===rs.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(n){if(!n||n.length===0)return Or.DEFAULT_SUPPORTED_SCAN_TYPE;var s=Or.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(n.length>s)throw"Max ".concat(s," values expected for ")+"supportedScanTypes";for(var c=0,h=n;c<h.length;c++){var g=h[c];if(!Or.DEFAULT_SUPPORTED_SCAN_TYPE.includes(g))throw"Unsupported scan type ".concat(g)}return n},e}(),$n=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),mi=function(){function e(){}return e.createElement=function(n,s){var c=document.createElement(n);return c.id=s,c.classList.add($n.ALL_ELEMENT_CLASS),n==="button"&&c.setAttribute("type","button"),c},e}(),yg=function(e,n,s,c){function h(g){return g instanceof s?g:new s(function(_){_(g)})}return new(s||(s=Promise))(function(g,_){function A(D){try{v(c.next(D))}catch(R){_(R)}}function b(D){try{v(c.throw(D))}catch(R){_(R)}}function v(D){D.done?g(D.value):h(D.value).then(A,b)}v((c=c.apply(e,n||[])).next())})},wg=function(e,n){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,h,g,_;return _={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function A(v){return function(D){return b([v,D])}}function b(v){if(c)throw new TypeError("Generator is already executing.");for(;_&&(_=0,v[0]&&(s=0)),s;)try{if(c=1,h&&(g=v[0]&2?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,h=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){s.label=v[1];break}if(v[0]===6&&s.label<g[1]){s.label=g[1],g=v;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(v);break}g[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(e,s)}catch(D){v=[6,D],h=0}finally{c=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},jf=function(){function e(n,s,c){this.isTorchOn=!1,this.torchCapability=n,this.buttonController=s,this.onTorchActionFailureCallback=c}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return yg(this,void 0,void 0,function(){var n,s;return wg(this,function(c){switch(c.label){case 0:this.buttonController.disable(),n=!this.isTorchOn,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.torchCapability.apply(n)];case 2:return c.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),n),[3,4];case 3:return s=c.sent(),this.propagateFailure(n,s),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(n,s){n===s?(this.buttonController.setText(s?mt.torchOffButton():mt.torchOnButton()),this.isTorchOn=s):this.propagateFailure(s),this.buttonController.enable()},e.prototype.propagateFailure=function(n,s){var c=n?mt.torchOnFailedMessage():mt.torchOffFailedMessage();s&&(c+="; Error = "+s),this.onTorchActionFailureCallback(c)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),I2=function(){function e(n,s){this.onTorchActionFailureCallback=s,this.torchButton=mi.createElement("button",$n.TORCH_BUTTON_ID),this.torchController=new jf(n,this,s)}return e.prototype.render=function(n,s){var c=this;this.torchButton.innerText=mt.torchOnButton(),this.torchButton.style.display=s.display,this.torchButton.style.marginLeft=s.marginLeft;var h=this;this.torchButton.addEventListener("click",function(g){return yg(c,void 0,void 0,function(){return wg(this,function(_){switch(_.label){case 0:return[4,h.torchController.flipState()];case 1:return _.sent(),h.torchController.isTorchEnabled()?(h.torchButton.classList.remove($n.TORCH_BUTTON_CLASS_TORCH_OFF),h.torchButton.classList.add($n.TORCH_BUTTON_CLASS_TORCH_ON)):(h.torchButton.classList.remove($n.TORCH_BUTTON_CLASS_TORCH_ON),h.torchButton.classList.add($n.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),n.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(n){this.torchController=new jf(n,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(n){this.torchButton.innerText=n},e.prototype.reset=function(){this.torchButton.innerText=mt.torchOnButton(),this.torchController.reset()},e.create=function(n,s,c,h){var g=new e(s,h);return g.render(n,c),g},e}(),T2=function(){function e(n,s,c){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=s?"block":"none",n.appendChild(this.fileBasedScanRegion);var h=document.createElement("label");h.setAttribute("for",this.getFileScanInputId()),h.style.display="inline-block",this.fileBasedScanRegion.appendChild(h),this.fileSelectionButton=mi.createElement("button",$n.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(A){h.click()}),h.append(this.fileSelectionButton),this.fileScanInput=mi.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",h.appendChild(this.fileScanInput);var g=this;this.fileScanInput.addEventListener("change",function(A){if(!(A==null||A.target==null)){var b=A.target;if(!(b.files&&b.files.length===0)){var v=b.files,D=v[0],R=D.name;g.setImageNameToButton(R),c(D)}}});var _=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(_),this.fileBasedScanRegion.addEventListener("dragenter",function(A){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(A){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(A){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(A){A.stopPropagation(),A.preventDefault(),g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder();var b=A.dataTransfer;if(b){var v=b.files;if(!v||v.length===0)return;for(var D=!1,R=0;R<v.length;++R){var H=v.item(R);if(H){var X=/image.*/;if(H.type.match(X)){D=!0;var te=H.name;g.setImageNameToButton(te),c(H),_.innerText=mt.dragAndDropMessage();break}}}D||(_.innerText=mt.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var n=document.createElement("div");return n.style.textAlign="center",n.style.margin="auto",n.style.width="80%",n.style.maxWidth="600px",n.style.border=this.fileBasedScanRegionDefaultBorder(),n.style.padding="10px",n.style.marginBottom="10px",n},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var n=document.createElement("div");return n.innerText=mt.dragAndDropMessage(),n.style.fontWeight="400",n},e.prototype.setImageNameToButton=function(n){var s=20;if(n.length>s){var c=n.substring(0,8),h=n.length,g=n.substring(h-8,h);n="".concat(c,"....").concat(g)}var _=mt.fileSelectionChooseAnother()+" - "+n;this.fileSelectionButton.innerText=_},e.prototype.setInitialValueToButton=function(){var n=mt.fileSelectionChooseImage()+" - "+mt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=n},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(n,s,c){var h=new e(n,s,c);return h},e}(),k2=function(){function e(n){this.selectElement=mi.createElement("select",$n.CAMERA_SELECTION_SELECT_ID),this.cameras=n,this.options=[]}return e.prototype.render=function(n){var s=document.createElement("span");s.style.marginRight="10px";var c=this.cameras.length;if(c===0)throw new Error("No cameras found");if(c===1)s.style.display="none";else{var h=mt.selectCamera();s.innerText="".concat(h," (").concat(this.cameras.length,")  ")}for(var g=1,_=0,A=this.cameras;_<A.length;_++){var b=A[_],v=b.id,D=b.label==null?v:b.label;(!D||D==="")&&(D=[mt.anonymousCameraPrefix(),g++].join(" "));var R=document.createElement("option");R.value=v,R.innerText=D,this.options.push(R),this.selectElement.appendChild(R)}s.appendChild(this.selectElement),n.appendChild(s)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(n){for(var s=0,c=this.options;s<c.length;s++){var h=c[s];if(h.value===n)return!0}return!1},e.prototype.setValue=function(n){if(!this.hasValue(n))throw new Error("".concat(n," is not present in the camera list."));this.selectElement.value=n},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(n,s){var c=new e(s);return c.render(n),c},e}(),M2=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=mi.createElement("input",$n.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(n,s){this.zoomElementContainer.style.display=s?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",n.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var c=mt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(c),this.rangeText.style.marginRight="10px";var h=this;this.rangeInput.addEventListener("input",function(){return h.onValueChange()}),this.rangeInput.addEventListener("change",function(){return h.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var n=mt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(n,s,c,h){this.rangeInput.min=n.toString(),this.rangeInput.max=s.toString(),this.rangeInput.step=h.toString(),this.rangeInput.value=c.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(n){this.onChangeCallback=n},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(n,s){var c=new e;return c.render(n,s),c},e}(),qn;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(qn||(qn={}));function O2(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function L2(e,n){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:n}}var D2=function(){function e(n,s,c){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=n,this.config=this.createConfig(s),this.verbose=c===!0,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.scanTypeSelector=new zi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new pg(this.verbose),this.persistedDataManager=new C2,s.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(n,s){var c=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(g,_){if(n)n(g,_);else{if(c.lastMatchFound===g)return;c.lastMatchFound=g,c.setHeaderMessage(mt.lastMatch(g),qn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(g,_){s&&s(g,_)};var h=document.getElementById(this.elementId);if(!h)throw"HTML Element with id=".concat(this.elementId," not found");h.innerHTML="",this.createBasicLayout(h),this.html5Qrcode=new Df(this.getScanRegionId(),L2(this.config,this.verbose))},e.prototype.pause=function(n){(qr(n)||n!==!0)&&(n=!1),this.getHtml5QrcodeOrFail().pause(n)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var n=this,s=function(){var c=document.getElementById(n.elementId);c&&(c.innerHTML="",n.resetBasicLayout(c))};return this.html5Qrcode?new Promise(function(c,h){if(!n.html5Qrcode){c();return}n.html5Qrcode.isScanning?n.html5Qrcode.stop().then(function(g){if(!n.html5Qrcode){c();return}n.html5Qrcode.clear(),s(),c()}).catch(function(g){n.verbose&&n.logger.logError("Unable to stop qrcode scanner",g),h(g)}):(n.html5Qrcode.clear(),s(),c())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(n){return this.getHtml5QrcodeOrFail().applyVideoConstraints(n)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(n){return n?(n.fps||(n.fps=Or.SCAN_DEFAULT_FPS),n.rememberLastUsedCamera!==!Or.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(n.rememberLastUsedCamera=Or.DEFAULT_REMEMBER_LAST_CAMERA_USED),n.supportedScanTypes||(n.supportedScanTypes=Or.DEFAULT_SUPPORTED_SCAN_TYPE),n):{fps:Or.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Or.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Or.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(n){n.style.position="relative",n.style.padding="0px",n.style.border="1px solid silver",this.createHeader(n);var s=document.createElement("div"),c=this.getScanRegionId();s.id=c,s.style.width="100%",s.style.minHeight="100px",s.style.textAlign="center",n.appendChild(s),zi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var h=document.createElement("div"),g=this.getDashboardId();h.id=g,h.style.width="100%",n.appendChild(h),this.setupInitialDashboard(h)},e.prototype.resetBasicLayout=function(n){n.style.border="none"},e.prototype.setupInitialDashboard=function(n){this.createSection(n),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(n){var s=document.createElement("div");s.style.textAlign="left",s.style.margin="0px",n.appendChild(s);var c=new b2;c.renderInto(s);var h=document.createElement("div");h.id=this.getHeaderMessageContainerId(),h.style.display="none",h.style.textAlign="center",h.style.fontSize="14px",h.style.padding="2px 10px",h.style.margin="4px",h.style.borderTop="1px solid #f6f6f6",s.appendChild(h)},e.prototype.createSection=function(n){var s=document.createElement("div");s.id=this.getDashboardSectionId(),s.style.width="100%",s.style.padding="10px 0px 10px 0px",s.style.textAlign="left",n.appendChild(s)},e.prototype.createCameraListUi=function(n,s,c){var h=this;h.showHideScanTypeSwapLink(!1),h.setHeaderMessage(mt.cameraPermissionRequesting());var g=function(){c||h.createPermissionButton(n,s)};Df.getCameras().then(function(_){h.persistedDataManager.setHasPermission(!0),h.showHideScanTypeSwapLink(!0),h.resetHeaderMessage(),_&&_.length>0?(n.removeChild(s),h.renderCameraSelection(_)):(h.setHeaderMessage(mt.noCameraFound(),qn.STATUS_WARNING),g())}).catch(function(_){h.persistedDataManager.setHasPermission(!1),c?c.disabled=!1:g(),h.setHeaderMessage(_,qn.STATUS_WARNING),h.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(n,s){var c=this,h=mi.createElement("button",this.getCameraPermissionButtonId());h.innerText=mt.cameraPermissionTitle(),h.addEventListener("click",function(){h.disabled=!0,c.createCameraListUi(n,s,h)}),s.appendChild(h)},e.prototype.createPermissionsUi=function(n,s){var c=this;if(zi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Bf.hasPermissions().then(function(h){h?c.createCameraListUi(n,s):(c.persistedDataManager.setHasPermission(!1),c.createPermissionButton(n,s))}).catch(function(h){c.persistedDataManager.setHasPermission(!1),c.createPermissionButton(n,s)});return}this.createPermissionButton(n,s)},e.prototype.createSectionControlPanel=function(){var n=document.getElementById(this.getDashboardSectionId()),s=document.createElement("div");n.appendChild(s);var c=document.createElement("div");c.id=this.getDashboardSectionCameraScanRegionId(),c.style.display=zi.isCameraScanType(this.currentScanType)?"block":"none",s.appendChild(c);var h=document.createElement("div");h.style.textAlign="center",c.appendChild(h),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(c,h),this.renderFileScanUi(s)},e.prototype.renderFileScanUi=function(n){var s=zi.isFileScanType(this.currentScanType),c=this,h=function(g){if(!c.html5Qrcode)throw"html5Qrcode not defined";zi.isFileScanType(c.currentScanType)&&(c.setHeaderMessage(mt.loadingImage()),c.html5Qrcode.scanFileV2(g,!0).then(function(_){c.resetHeaderMessage(),c.qrCodeSuccessCallback(_.decodedText,_)}).catch(function(_){c.setHeaderMessage(_,qn.STATUS_WARNING),c.qrCodeErrorCallback(_,gg.createFrom(_))}))};this.fileSelectionUi=T2.create(n,s,h)},e.prototype.renderCameraSelection=function(n){var s=this,c=this,h=document.getElementById(this.getDashboardSectionCameraScanRegionId());h.style.textAlign="center";var g=M2.create(h,!1),_=function(U){var xe=U.zoomFeature();if(xe.isSupported()){g.setOnCameraZoomValueChangeCallback(function(M){xe.apply(M)});var k=1;s.config.defaultZoomValueIfSupported&&(k=s.config.defaultZoomValueIfSupported),k=$x(k,xe.min(),xe.max()),g.setValues(xe.min(),xe.max(),k,xe.step()),g.show()}},A=k2.create(h,n),b=document.createElement("span"),v=mi.createElement("button",$n.CAMERA_START_BUTTON_ID);v.innerText=mt.scanButtonStartScanningText(),b.appendChild(v);var D=mi.createElement("button",$n.CAMERA_STOP_BUTTON_ID);D.innerText=mt.scanButtonStopScanningText(),D.style.display="none",D.disabled=!0,b.appendChild(D);var R,H=function(U){if(!U.torchFeature().isSupported()){R&&R.hide();return}R?R.updateTorchCapability(U.torchFeature()):R=I2.create(b,U.torchFeature(),{display:"none",marginLeft:"5px"},function(xe){c.setHeaderMessage(xe,qn.STATUS_WARNING)}),R.show()};h.appendChild(b);var X=function(U){U||(v.style.display="none"),v.innerText=mt.scanButtonStartScanningText(),v.style.opacity="1",v.disabled=!1,U&&(v.style.display="inline-block")};if(v.addEventListener("click",function(U){v.innerText=mt.scanButtonScanningStarting(),A.disable(),v.disabled=!0,v.style.opacity="0.5",s.scanTypeSelector.hasMoreThanOneScanType()&&c.showHideScanTypeSwapLink(!1),c.resetHeaderMessage();var xe=A.getValue();c.persistedDataManager.setLastUsedCameraId(xe),c.html5Qrcode.start(xe,O2(c.config),c.qrCodeSuccessCallback,c.qrCodeErrorCallback).then(function(k){D.disabled=!1,D.style.display="inline-block",X(!1);var M=c.html5Qrcode.getRunningTrackCameraCapabilities();s.config.showTorchButtonIfSupported===!0&&H(M),s.config.showZoomSliderIfSupported===!0&&_(M)}).catch(function(k){c.showHideScanTypeSwapLink(!0),A.enable(),X(!0),c.setHeaderMessage(k,qn.STATUS_WARNING)})}),A.hasSingleItem()&&v.click(),D.addEventListener("click",function(U){if(!c.html5Qrcode)throw"html5Qrcode not defined";D.disabled=!0,c.html5Qrcode.stop().then(function(xe){s.scanTypeSelector.hasMoreThanOneScanType()&&c.showHideScanTypeSwapLink(!0),A.enable(),v.disabled=!1,D.style.display="none",v.style.display="inline-block",R&&(R.reset(),R.hide()),g.removeOnCameraZoomValueChangeCallback(),g.hide(),c.insertCameraScanImageToScanRegion()}).catch(function(xe){D.disabled=!1,c.setHeaderMessage(xe,qn.STATUS_WARNING)})}),c.persistedDataManager.getLastUsedCameraId()){var te=c.persistedDataManager.getLastUsedCameraId();A.hasValue(te)?(A.setValue(te),v.click()):c.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var n=this,s=mt.textIfCameraScanSelected(),c=mt.textIfFileScanSelected(),h=document.getElementById(this.getDashboardSectionId()),g=document.createElement("div");g.style.textAlign="center";var _=mi.createElement("span",this.getDashboardSectionSwapLinkId());_.style.textDecoration="underline",_.style.cursor="pointer",_.innerText=zi.isCameraScanType(this.currentScanType)?s:c,_.addEventListener("click",function(){if(!n.sectionSwapAllowed){n.verbose&&n.logger.logError("Section swap called when not allowed");return}n.resetHeaderMessage(),n.fileSelectionUi.resetValue(),n.sectionSwapAllowed=!1,zi.isCameraScanType(n.currentScanType)?(n.clearScanRegion(),n.getCameraScanRegion().style.display="none",n.fileSelectionUi.show(),_.innerText=c,n.currentScanType=rs.SCAN_TYPE_FILE,n.insertFileScanImageToScanRegion()):(n.clearScanRegion(),n.getCameraScanRegion().style.display="block",n.fileSelectionUi.hide(),_.innerText=s,n.currentScanType=rs.SCAN_TYPE_CAMERA,n.insertCameraScanImageToScanRegion(),n.startCameraScanIfPermissionExistsOnSwap()),n.sectionSwapAllowed=!0}),g.appendChild(_),h.appendChild(g)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var n=this,s=this;if(this.persistedDataManager.hasCameraPermissions()){Bf.hasPermissions().then(function(c){if(c){var h=document.getElementById(s.getCameraPermissionButtonId());if(!h)throw n.logger.logError("Permission button not found, fail;"),"Permission button not found";h.click()}else s.persistedDataManager.setHasPermission(!1)}).catch(function(c){s.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var n=document.getElementById(this.getHeaderMessageContainerId());n.style.display="none"},e.prototype.setHeaderMessage=function(n,s){s||(s=qn.STATUS_DEFAULT);var c=this.getHeaderMessageDiv();switch(c.innerText=n,c.style.display="block",s){case qn.STATUS_SUCCESS:c.style.background="rgba(106, 175, 80, 0.26)",c.style.color="#477735";break;case qn.STATUS_WARNING:c.style.background="rgba(203, 36, 49, 0.14)",c.style.color="#cb2431";break;case qn.STATUS_DEFAULT:default:c.style.background="rgba(0, 0, 0, 0)",c.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(n){this.scanTypeSelector.hasMoreThanOneScanType()&&(n!==!0&&(n=!1),this.sectionSwapAllowed=n,this.getDashboardSectionSwapLink().style.display=n?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var n=this,s=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){s.innerHTML="<br>",s.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(c){s.innerHTML="<br>",s.appendChild(n.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=w2,this.cameraScanImage.alt=mt.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var n=this,s=document.getElementById(this.getScanRegionId());if(this.fileScanImage){s.innerHTML="<br>",s.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(c){s.innerHTML="<br>",s.appendChild(n.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=_2,this.fileScanImage.alt=mt.fileScanAltText()},e.prototype.clearScanRegion=function(){var n=document.getElementById(this.getScanRegionId());n.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return $n.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return $n.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function R2(){const[e,n]=re.useState("barcode"),[s,c]=re.useState(""),[h,g]=re.useState(null),[_,A]=re.useState(!1),[b,v]=re.useState(""),[D,R]=re.useState(null),[H,X]=re.useState(null),te=re.useRef(null),U=re.useRef(null);re.useEffect(()=>{xe()},[]),re.useEffect(()=>{e==="barcode"&&te.current&&te.current.focus()},[e,H]),re.useEffect(()=>{if(e==="camera"&&!U.current){const V=new D2("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1});V.render(ne=>{k(ne),V.pause(!0),setTimeout(()=>V.resume(),2e3)},ne=>{console.warn("Erro scanner:",ne)}),U.current=V}return()=>{U.current&&(U.current.clear(),U.current=null)}},[e]);const xe=async()=>{try{const V=await fetch("/api/separation/start",{method:"POST"}),ne=await V.json();if(!V.ok)throw new Error(ne.detail);R(ne.session),g(ne)}catch(V){v(V.message)}},k=async V=>{if(V.trim()){A(!0),v("");try{const ne=await fetch("/api/separation/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({barcode:V.trim()})}),Q=await ne.json();if(!ne.ok)throw new Error(Q.detail);X(Q),Q.progress&&R(Se=>({...Se,scanned_packages:Q.progress.scanned,progress:Q.progress.percentage})),c(""),Y("success")}catch(ne){v(ne.message),Y("error")}finally{A(!1)}}},M=V=>{V.preventDefault(),k(s)},B=async()=>{try{const V=await fetch("/api/separation/complete",{method:"POST"}),ne=await V.json();if(!V.ok)throw new Error(ne.detail);alert("Separao concluda! Agora voc pode enviar as rotas aos entregadores."),window.location.href="/route-analysis"}catch(V){alert(V.message)}},Y=V=>{const ne=new(window.AudioContext||window.webkitAudioContext),Q=ne.createOscillator(),Se=ne.createGain();Q.connect(Se),Se.connect(ne.destination),V==="success"?(Q.frequency.value=800,Se.gain.value=.3):(Q.frequency.value=300,Se.gain.value=.5),Q.start(),Q.stop(ne.currentTime+.1)},he=(D==null?void 0:D.progress)||0,oe=(D==null?void 0:D.scanned_packages)>=(D==null?void 0:D.total_packages);return x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 p-8",children:x.jsxs("div",{className:"max-w-4xl mx-auto",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:" Modo Separao"}),x.jsx("p",{className:"text-indigo-200",children:"Bipe cada pacote para identificar rota e entregador"})]}),x.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-6 mb-6",children:[x.jsx("label",{className:"text-white font-semibold block mb-3",children:"Mtodo de Bipagem:"}),x.jsxs("div",{className:"flex gap-4",children:[x.jsx("button",{onClick:()=>n("barcode"),className:`flex-1 py-3 px-6 rounded-lg font-semibold transition ${e==="barcode"?"bg-green-500 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:" Bipadora"}),x.jsx("button",{onClick:()=>n("camera"),className:`flex-1 py-3 px-6 rounded-lg font-semibold transition ${e==="camera"?"bg-green-500 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:" Cmera"})]})]}),D&&x.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-6 mb-6",children:[x.jsxs("div",{className:"flex justify-between mb-2",children:[x.jsx("span",{className:"text-white font-semibold",children:"Progresso"}),x.jsxs("span",{className:"text-white",children:[D.scanned_packages," / ",D.total_packages," pacotes"]})]}),x.jsx("div",{className:"w-full bg-white/20 rounded-full h-4 overflow-hidden",children:x.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-500 h-full transition-all duration-500",style:{width:`${he}%`}})}),x.jsxs("p",{className:"text-indigo-200 text-sm mt-2",children:[he.toFixed(1),"% completo"]})]}),x.jsx("div",{className:"bg-white/10 backdrop-blur rounded-xl p-6 mb-6",children:e==="barcode"?x.jsxs("form",{onSubmit:M,children:[x.jsx("label",{className:"text-white font-semibold block mb-3",children:"Escaneie o cdigo de barras:"}),x.jsx("input",{ref:te,type:"text",value:s,onChange:V=>c(V.target.value),placeholder:"Posicione o cursor aqui e bipe...",className:"w-full px-4 py-3 rounded-lg bg-white/90 text-gray-900 font-mono text-lg focus:outline-none focus:ring-4 focus:ring-green-400",disabled:_||oe,autoFocus:!0}),x.jsx("button",{type:"submit",className:"w-full mt-4 py-3 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg transition",disabled:_||!s.trim()||oe,children:_?"Processando...":"Confirmar Bipagem"})]}):x.jsxs("div",{children:[x.jsx("label",{className:"text-white font-semibold block mb-3",children:"Aponte a cmera para o cdigo:"}),x.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden"})]})}),H&&x.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-6 mb-6 border-4 animate-pulse",style:{borderColor:H.route_color||"#fff"},children:[x.jsx("h3",{className:"text-white font-bold text-xl mb-4",children:" Pacote Identificado!"}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 text-white",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-indigo-200 text-sm",children:"Entregador:"}),x.jsx("p",{className:"font-bold text-lg",children:H.deliverer_name})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-indigo-200 text-sm",children:"Cor da Rota:"}),x.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white",style:{backgroundColor:H.route_color}}),x.jsx("span",{className:"font-bold",children:H.route_color})]})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-indigo-200 text-sm",children:"Sequncia:"}),x.jsxs("p",{className:"font-bold text-lg",children:["#",H.sequence," de ",H.total_in_route]})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-indigo-200 text-sm",children:"Endereo:"}),x.jsx("p",{className:"text-sm",children:H.address})]})]})]}),b&&x.jsx("div",{className:"bg-red-500/20 border-2 border-red-500 rounded-xl p-4 mb-6",children:x.jsxs("p",{className:"text-white font-semibold",children:[" ",b]})}),oe&&x.jsx("button",{onClick:B,className:"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold text-xl rounded-xl shadow-2xl transition transform hover:scale-105",children:" Finalizar Separao e Enviar Rotas"})]})})}const P2=()=>{const[e,n]=re.useState([]),[s,c]=re.useState(!0),[h,g]=re.useState(null),[_,A]=re.useState("all"),[b,v]=re.useState(null);re.useEffect(()=>{D()},[]);const D=async()=>{try{const M=await(await fetch("/api/history/sessions?limit=100")).json();n(M.sessions||[]),c(!1)}catch(k){console.error("Erro ao carregar histrico:",k),c(!1)}},R=async k=>{try{const M=await fetch(`/api/session/${k}/resume`);if(!M.ok)throw new Error("Erro ao carregar sesso");const B=await M.json();localStorage.setItem("resuming_session",JSON.stringify(B)),localStorage.setItem("current_session_id",k),localStorage.setItem("resume_tab",B.resume_tab),localStorage.setItem("current_step",B.current_step),window.location.href=`/?tab=${B.resume_tab}&session_id=${k}`}catch(M){console.error("Erro ao retomar sesso:",M),alert("Erro ao carregar sesso. Tente novamente.")}},H=k=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(k||0),X=k=>k?new Date(k).toLocaleString("pt-BR"):"-",te=(k,M)=>{if(!k||!M)return"-";const B=new Date(k),Y=new Date(M),he=Math.round((Y-B)/6e4);return`${Math.floor(he/60)}h ${he%60}m`},U=async k=>{try{window.open(`/api/session/${k}/export`,"_blank")}catch(M){console.error("Erro ao baixar relatrio:",M)}},xe=_==="all"?e:e.filter(k=>k.status===_);return s?x.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:x.jsxs("div",{className:"text-center",children:[x.jsx(ua,{className:"w-12 h-12 mx-auto text-gray-400 animate-pulse mb-4"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando histrico..."})]})}):x.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:x.jsxs("div",{className:"max-w-6xl mx-auto",children:[x.jsxs("div",{className:"mb-8",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx(ua,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),x.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:" Histrico de Sesses"})]}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[xe.length," sesso(es) finalizada(s)"]})]}),x.jsx("div",{className:"mb-6 flex gap-2 flex-wrap",children:["all","read_only","completed"].map(k=>x.jsx("button",{onClick:()=>A(k),className:`px-4 py-2 rounded-lg font-medium transition ${_===k?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:k==="all"?"Todas":k==="read_only"?"Histrico":"Completas"},k))}),xe.length===0?x.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg",children:[x.jsx(ua,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Nenhuma sesso finalizada ainda."})]}):x.jsx("div",{className:"space-y-4",children:xe.map(k=>x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition overflow-hidden cursor-pointer group",children:[x.jsxs("div",{onClick:()=>g(h===k.id?null:k.id),className:"w-full p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition flex items-center justify-between",children:[x.jsx("div",{className:"flex items-center gap-4 flex-1 text-left",children:x.jsxs("div",{className:"flex-1",children:[x.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:["Sesso #",k.id.slice(0,8)]}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Criada"}),x.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:X(k.created_at)})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Endereos"}),x.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:k.addresses_count||0})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Entregadores"}),x.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:k.deliverers_count||0})]}),x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Durao"}),x.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:te(k.created_at,k.completed_at)})]})]})]})}),x.jsxs("div",{className:"flex items-center gap-3",children:[!k.is_completed&&x.jsx("button",{onClick:M=>{M.stopPropagation(),R(k.id)},className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-bold text-sm transition flex items-center gap-2",children:" Retomar"}),x.jsx(dx,{className:`w-6 h-6 text-gray-400 transition-transform ${h===k.id?"transform rotate-180":""}`})]})]}),h===k.id&&x.jsxs("div",{className:"border-t dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-700/30",children:[k.financials&&x.jsxs("div",{className:"mb-6",children:[x.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[x.jsx(Cs,{className:"w-5 h-5"}),"Resumo Financeiro"]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[x.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Lucro Total"}),x.jsx("p",{className:"text-2xl font-bold text-green-600",children:H(k.financials.total_profit)})]}),x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[x.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Custos"}),x.jsx("p",{className:"text-2xl font-bold text-red-600",children:H(k.financials.total_cost)})]}),x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[x.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Salrios"}),x.jsx("p",{className:"text-2xl font-bold text-blue-600",children:H(k.financials.total_salary)})]})]})]}),k.statistics&&Object.keys(k.statistics).length>0&&x.jsxs("div",{className:"mb-6",children:[x.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4",children:" Estatsticas"}),x.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg text-sm space-y-2",children:Object.entries(k.statistics).map(([M,B])=>x.jsxs("div",{className:"flex justify-between",children:[x.jsxs("span",{className:"text-gray-600 dark:text-gray-400 capitalize",children:[M.replace(/_/g," "),":"]}),x.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:typeof B=="number"?B.toFixed(2):B})]},M))})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-4",children:" Informaes"}),x.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg text-sm space-y-2",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ID"}),x.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:k.id})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),x.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded text-xs font-medium",children:k.status})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Atualizado"}),x.jsx("span",{className:"text-gray-900 dark:text-white",children:X(k.last_updated)})]})]})]}),x.jsx("div",{className:"flex gap-2",children:x.jsxs("button",{onClick:()=>U(k.id),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-medium flex items-center justify-center gap-2",children:[x.jsx(fx,{className:"w-4 h-4"}),"Exportar Relatrio"]})})]})]},k.id))})]})})};function Ff({visible:e=!0,percentage:n=30}){const[s,c]=re.useState(e);return re.useEffect(()=>{c(e)},[e]),s?x.jsx("div",{className:"fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary-500 via-purple-500 to-accent-500 shadow-lg shadow-primary-500/50 z-50 transition-all duration-300",style:{width:`${n}%`,opacity:n===100?0:1}}):null}function B2(){const[e,n]=re.useState("dashboard"),[s,c]=re.useState(null),[h,g]=re.useState({role:"loading"}),[_,A]=re.useState(null),[b,v]=re.useState(null),[D,R]=re.useState(null),[H,X]=re.useState(!1),[te,U]=re.useState(!1),[xe,k]=re.useState(0),M=hg();re.useEffect(()=>{var Xe;let Q=null;const Se=window.matchMedia("(prefers-color-scheme: dark)").matches;U(Se),Se&&document.documentElement.classList.add("dark");const Me=window.matchMedia("(prefers-color-scheme: dark)"),ye=K=>{U(K.matches),K.matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};Me.addEventListener("change",ye);const Te=new URLSearchParams(window.location.search);if(Te.get("tab")&&n(Te.get("tab")),window.Telegram&&window.Telegram.WebApp){const K=window.Telegram.WebApp;K.ready(),K.expand(),(Xe=K.initDataUnsafe)!=null&&Xe.user&&(c(K.initDataUnsafe.user),Q=K.initDataUnsafe.user.id)}if(!Q){const K=new URLSearchParams(window.location.search);K.get("user_id")&&(Q=parseInt(K.get("user_id")),c({id:Q,first_name:"Dev User"}))}return Q?B(Q):g({role:"guest"}),()=>Me.removeEventListener("change",ye)},[]);const B=async Q=>{X(!0);try{const Me=await(await fetch(`/api/auth/me?user_id=${Q}`)).json();g(Me);const ye=[];ye.push(fetch(`/api/financial/balance?user_id=${Q}`).then(Te=>Te.json()).then(Te=>R(Te)).catch(Te=>console.error("Erro Finanas",Te))),Me.role==="admin"?ye.push(fetch("/api/admin/stats").then(Te=>Te.json()).then(Te=>v(Te))):Me.role==="deliverer"&&ye.push(fetch(`/api/deliverer/route?user_id=${Q}`).then(Te=>Te.json()).then(Te=>A(Te))),await Promise.all(ye)}catch(Se){console.error("Erro fetching data",Se)}finally{X(!1)}},Y=()=>{if(s!=null&&s.id){k(0),X(!0);const Q=setInterval(()=>{k(Se=>Se>=80?(clearInterval(Q),Se):Se+Math.random()*40)},300);B(s.id).finally(()=>{k(100),setTimeout(()=>k(0),500)})}},he=()=>{const Q=!te;U(Q),Q?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},oe=()=>x.jsxs("div",{className:`${M.isDesktop?"space-y-8":"space-y-5"} animate-fade-in`,children:[x.jsxs("div",{className:"relative overflow-hidden gradient-primary rounded-3xl p-6 text-white shadow-glass",children:[x.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -mr-20 -mt-20"}),x.jsxs("div",{className:"relative z-10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{children:[x.jsx("h2",{className:`font-medium text-white/80 mb-1 ${M.isDesktop?"text-base":"text-sm"}`,children:"Painel Administrativo"}),x.jsx("p",{className:`font-bold ${M.isDesktop?"text-3xl":"text-2xl"}`,children:"Viso Geral "})]}),x.jsx("div",{className:`bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center ${M.isDesktop?"w-16 h-16":"w-12 h-12"}`,children:x.jsx(hi,{className:M.isDesktop?"w-8 h-8":"w-6 h-6"})})]}),x.jsxs("div",{className:`grid gap-3 mt-6 ${M.isDesktop?"grid-cols-4":"grid-cols-2"}`,children:[x.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[x.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-xs mb-2",children:[x.jsx(uo,{className:"w-3.5 h-3.5"}),x.jsx("span",{children:"Pacotes Hoje"})]}),x.jsx("p",{className:`font-black ${M.isDesktop?"text-4xl":"text-3xl"}`,children:(b==null?void 0:b.packages_total)||0})]}),x.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[x.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-xs mb-2",children:[x.jsx($c,{className:"w-3.5 h-3.5"}),x.jsx("span",{children:"Entregues"})]}),x.jsx("p",{className:`font-black text-green-300 ${M.isDesktop?"text-4xl":"text-3xl"}`,children:(b==null?void 0:b.delivered)||0})]}),M.isDesktop&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[x.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-xs mb-2",children:[x.jsx(pi,{className:"w-3.5 h-3.5"}),x.jsx("span",{children:"Entregadores"})]}),x.jsx("p",{className:"text-4xl font-black text-blue-300",children:(b==null?void 0:b.active_deliverers)||0})]}),x.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[x.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-xs mb-2",children:[x.jsx(wo,{className:"w-3.5 h-3.5"}),x.jsx("span",{children:"Sesses Ativas"})]}),x.jsx("p",{className:"text-4xl font-black text-yellow-300",children:(b==null?void 0:b.active_sessions)||0})]})]})]})]})]}),x.jsxs("div",{className:`grid gap-3 ${M.isDesktop?"grid-cols-4":"grid-cols-2"}`,children:[x.jsx(zf,{icon:x.jsx(Cs,{className:"w-5 h-5"}),label:"Financeiro",sublabel:"Ver receitas",color:"green",onClick:()=>n("financial")}),x.jsx(zf,{icon:x.jsx(pi,{className:"w-5 h-5"}),label:"Equipe",sublabel:"Gerenciar",color:"blue",onClick:()=>n("team")})]}),x.jsxs("button",{onClick:()=>n("analysis"),className:"w-full group relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 rounded-2xl"}),x.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/0 via-white/20 to-purple-600/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),x.jsxs("div",{className:"relative p-5 flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:x.jsx(hi,{className:"w-6 h-6 text-white"})}),x.jsxs("div",{className:"text-left",children:[x.jsx("p",{className:"text-white font-bold text-lg",children:"Anlise Inteligente"}),x.jsx("p",{className:"text-purple-100 text-xs font-medium",children:"Upload & Otimizao IA"})]})]}),x.jsx("div",{className:"text-white/70 group-hover:text-white group-hover:translate-x-1 transition-all",children:x.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),x.jsxs("div",{className:"card-premium p-5",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx("div",{className:"w-10 h-10 rounded-full gradient-primary flex items-center justify-center",children:x.jsx(ll,{className:`w-5 h-5 text-white ${H?"animate-spin":""}`})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Status da Sesso"}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Monitoramento em tempo real"})]})]}),b!=null&&b.active_session?x.jsxs("button",{onClick:()=>{const Q=localStorage.getItem("resume_tab")||"analysis";n(Q)},className:"w-full flex items-center gap-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 hover:bg-green-100 dark:hover:bg-green-900/40 transition cursor-pointer",children:[x.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse-soft"}),x.jsxs("div",{className:"flex-1 text-left",children:[x.jsx("p",{className:"font-semibold text-green-700 dark:text-green-400 text-sm",children:"Sesso Ativa"}),x.jsx("p",{className:"text-xs text-green-600 dark:text-green-500",children:b.session_name})]}),x.jsx("div",{className:"text-green-600 dark:text-green-400 text-lg",children:""})]}):x.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl",children:[x.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Nenhuma sesso ativa"})]})]})]}),V=()=>{var Q;return x.jsxs("div",{className:"space-y-5 animate-fade-in",children:[x.jsxs("div",{className:"relative overflow-hidden gradient-success rounded-3xl p-6 text-white shadow-glass",children:[x.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full blur-2xl"}),x.jsx("div",{className:"relative z-10",children:x.jsxs("div",{className:"flex justify-between items-start mb-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-white/80 mb-1",children:"Bem-vindo de volta "}),x.jsx("h2",{className:"text-2xl font-black",children:(Q=h.name)==null?void 0:Q.split(" ")[0]})]}),x.jsxs("div",{className:"flex flex-col items-end gap-2",children:[x.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:x.jsx(uo,{className:"w-6 h-6"})}),h.is_partner&&x.jsxs("span",{className:"badge bg-yellow-400/30 text-yellow-100 border-yellow-400/50 text-[10px] px-2 py-0.5",children:[x.jsx(lx,{className:"w-3 h-3"})," SCIO"]})]})]})})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsx(Uf,{icon:x.jsx(Cs,{className:"w-5 h-5"}),label:"Saldo Semana",value:`R$ ${D!=null&&D.balance?D.balance.toFixed(0):"..."}`,color:"green",onClick:()=>n("financial")}),x.jsx(Uf,{icon:x.jsx(Es,{className:"w-5 h-5"}),label:"Rota Atual",value:_!=null&&_.has_route?"Ativa":"Sem rota",color:"blue",isDisabled:!(_!=null&&_.has_route),onClick:()=>n("routes")})]}),(_==null?void 0:_.has_route)&&x.jsxs("div",{className:"card-premium overflow-hidden animate-slide-up",children:[x.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 px-5 py-3 border-b border-gray-100 dark:border-gray-700/50",children:x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-sm",children:"Rota em Andamento"}),x.jsxs("span",{className:"badge badge-info",children:[x.jsx(uo,{className:"w-3 h-3"}),_.summary.total_packages," volumes"]})]})}),x.jsxs("div",{className:"grid grid-cols-3 divide-x divide-gray-100 dark:divide-gray-700/50",children:[x.jsx(tu,{icon:x.jsx(no,{className:"w-4 h-4"}),value:_.summary.total_stops,label:"Paradas"}),x.jsx(tu,{icon:x.jsx(wo,{className:"w-4 h-4"}),value:`${_.summary.distance_km} km`,label:"Distncia"}),x.jsx(tu,{icon:x.jsx($c,{className:"w-4 h-4"}),value:`${_.summary.estimated_time_min}m`,label:"Tempo"})]}),x.jsx("div",{className:"p-4",children:x.jsxs("button",{onClick:()=>n("routes"),className:"btn-primary w-full flex items-center justify-center gap-2",children:[x.jsx(no,{className:"w-5 h-5"}),x.jsx("span",{children:"Abrir Navegao"})]})})]}),!(_!=null&&_.has_route)&&x.jsxs("div",{className:"card-premium p-8 text-center",children:[x.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:x.jsx(Es,{className:"w-8 h-8 text-gray-400"})}),x.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Nenhuma rota ativa"}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Aguardando designao de entregas"})]})]})},ne=()=>h.role==="loading"?x.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950",children:[x.jsx("div",{className:"mb-8 animate-fade-in",children:x.jsx("div",{className:"w-24 h-24 rounded-2xl shadow-2xl shadow-primary-500/30 overflow-hidden border-4 border-white dark:border-gray-800 mx-auto",children:x.jsx("img",{src:"/logoMiniApp.jpg",alt:"Bot Entregador",className:"w-full h-full object-cover"})})}),x.jsxs("div",{className:"text-center mb-12 animate-slide-up",children:[x.jsx("h1",{className:"text-4xl font-black text-gray-900 dark:text-white mb-2",children:"Bot Entregador"}),x.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Sistema de Rotas Inteligente"})]}),x.jsx("div",{className:"mb-12 animate-fade-in",children:x.jsxs("div",{className:"relative w-16 h-16",children:[x.jsx("div",{className:"absolute inset-0 border-4 border-primary-200 dark:border-primary-900 rounded-full"}),x.jsx("div",{className:"absolute inset-0 border-4 border-transparent border-t-primary-600 border-r-primary-500 rounded-full animate-spin"})]})}),x.jsxs("div",{className:"text-center mb-8 space-y-2",children:[x.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Preparando seu ambiente"}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Carregando dados e sincronizando rotas..."})]}),x.jsx("div",{className:"w-48 h-2 bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden shadow-inner",children:x.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 via-purple-500 to-primary-500 animate-shimmer",style:{backgroundSize:"200% 100%",animation:"shimmer 2s infinite"}})}),x.jsx("div",{className:"absolute bottom-8 text-center",children:x.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-600",children:"Verso 3.0  Sistema Hybrid"})})]}):e==="dashboard"?h.role==="admin"?oe():h.role==="deliverer"?V():x.jsxs("div",{className:"card-premium p-8 text-center",children:[x.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:x.jsx(pi,{className:"w-8 h-8 text-gray-400"})}),x.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Acesso Restrito"}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Voc no tem permisso para acessar"})]}):e==="analysis"?x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsx(qx,{})}):e==="separation"?x.jsx("div",{className:"h-full overflow-y-auto",children:x.jsx(R2,{})}):e==="routes"?h.role==="deliverer"&&(_!=null&&_.has_route)?x.jsxs("div",{className:"h-[calc(100vh-140px)] w-full rounded-2xl overflow-hidden shadow-glass border border-gray-200 dark:border-gray-700 relative",children:[x.jsx(Zx,{stops:_.stops}),x.jsxs("div",{className:"absolute top-3 left-3 right-3 glass-strong p-3 rounded-xl shadow-lg z-[1000] flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse-soft"}),x.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Modo Navegao"})]}),x.jsxs("span",{className:"badge badge-info text-[10px]",children:[_.stops.length," pontos"]})]})]}):x.jsxs("div",{className:"card-premium p-10 text-center",children:[x.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:x.jsx(Es,{className:"w-10 h-10 text-gray-400"})}),x.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Nenhuma rota disponvel"}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No h rotas para exibir no mapa"})]}):e==="financial"?x.jsx(Gx,{data:D,adminStats:b}):e==="team"?x.jsx(Qx,{}):e==="history"?x.jsx(P2,{}):x.jsxs("div",{className:"card-premium p-10 text-center",children:[x.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:x.jsx($c,{className:"w-8 h-8 text-gray-400"})}),x.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Em Desenvolvimento"}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Esta funcionalidade estar disponvel em breve "})]});return x.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 text-gray-900 dark:text-gray-100 flex flex-col font-sans",children:[x.jsxs("div",{className:M.isDesktop?"flex h-screen overflow-hidden":"flex flex-col h-screen",children:[M.isDesktop&&x.jsxs("aside",{className:"w-64 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 flex flex-col shadow-lg",children:[x.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-800",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"w-16 h-16 rounded-xl shadow-lg shadow-primary-500/30 overflow-hidden border-2 border-primary-500",children:x.jsx("img",{src:"/logoMiniApp.jpg",alt:"Bot Entregador",className:"w-full h-full object-cover"})}),x.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900 animate-pulse-soft"})]}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-xl font-black text-gray-900 dark:text-white",children:"Bot Entregador"}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sistema de Rotas IA"})]})]})}),x.jsx("nav",{className:"flex-1 overflow-y-auto py-6 px-4 space-y-2",children:[{id:"dashboard",icon:x.jsx(Cf,{size:20}),label:"Dashboard"},{id:"analysis",icon:x.jsx(hi,{size:20}),label:"Anlise IA"},{id:"separation",icon:x.jsx(no,{size:20}),label:"Separao"},{id:"map",icon:x.jsx(Es,{size:20}),label:"Mapa"},{id:"financial",icon:x.jsx(Cs,{size:20}),label:"Financeiro"},{id:"team",icon:x.jsx(pi,{size:20}),label:"Equipe"},{id:"history",icon:x.jsx(ua,{size:20}),label:"Histrico"}].map(Q=>x.jsxs("button",{onClick:()=>n(Q.id),className:`w-full px-4 py-3 rounded-lg transition-all flex items-center gap-3 font-medium text-sm group ${e===Q.id?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[x.jsx("div",{className:"flex-shrink-0",children:Q.icon}),x.jsx("span",{children:Q.label}),e===Q.id&&x.jsx("div",{className:"ml-auto w-1 h-6 bg-primary-600 rounded-full"})]},Q.id))}),x.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800 space-y-3",children:[x.jsx("button",{onClick:he,className:"w-full px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center gap-2 transition-colors",children:te?x.jsxs(x.Fragment,{children:[x.jsx(Jc,{size:16})," Claro"]}):x.jsxs(x.Fragment,{children:[x.jsx(qc,{size:16})," Escuro"]})}),x.jsxs("button",{onClick:Y,className:"w-full px-4 py-2 rounded-lg bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 hover:bg-primary-200 dark:hover:bg-primary-900/50 flex items-center justify-center gap-2 transition-colors font-medium",children:[x.jsx(ll,{size:16,className:H?"animate-spin":""})," Atualizar"]})]})]}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[M.isMobile&&x.jsxs("header",{className:"glass-strong sticky top-0 z-20 border-b border-gray-200/50 dark:border-gray-700/50 pt-safe",children:[x.jsxs("div",{className:"px-5 py-4 flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"w-12 h-12 rounded-xl shadow-lg shadow-primary-500/30 overflow-hidden flex-shrink-0 border-2 border-white dark:border-gray-700",children:x.jsx("img",{src:"/logoMiniApp.jpg",alt:"Bot Entregador",className:"w-full h-full object-cover"})}),x.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900 animate-pulse-soft"})]}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-lg font-black text-gray-900 dark:text-white leading-none",children:"Bot Entregador"}),x.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-medium",children:"Sistema de Rotas"})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:he,className:"relative w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-all active:scale-90 group",children:te?x.jsx(Jc,{size:18,className:"text-gray-500 dark:text-gray-400 group-hover:text-primary-600"}):x.jsx(qc,{size:18,className:"text-gray-500 dark:text-gray-400 group-hover:text-primary-600"})}),x.jsx("button",{onClick:Y,className:"relative w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-all active:scale-90 group",children:x.jsx(ll,{size:18,className:`${H?"animate-spin text-primary-600":"text-gray-500 dark:text-gray-400 group-hover:text-primary-600"} transition-colors`})})]})]}),x.jsx(Ff,{visible:xe>0,percentage:xe})]}),M.isTablet&&x.jsxs("header",{className:"glass-strong sticky top-0 z-20 border-b border-gray-200/50 dark:border-gray-700/50 pt-safe",children:[x.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"w-14 h-14 rounded-xl shadow-lg shadow-primary-500/30 overflow-hidden flex-shrink-0 border-2 border-white dark:border-gray-700",children:x.jsx("img",{src:"/logoMiniApp.jpg",alt:"Bot Entregador",className:"w-full h-full object-cover"})}),x.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900 animate-pulse-soft"})]}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-xl font-black text-gray-900 dark:text-white leading-none",children:"Bot Entregador"}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Sistema de Rotas"})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:he,className:"relative w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-all active:scale-90 group",children:te?x.jsx(Jc,{size:20,className:"text-gray-500 dark:text-gray-400 group-hover:text-primary-600"}):x.jsx(qc,{size:20,className:"text-gray-500 dark:text-gray-400 group-hover:text-primary-600"})}),x.jsx("button",{onClick:Y,className:"relative w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 flex items-center justify-center transition-all active:scale-90 group",children:x.jsx(ll,{size:20,className:`${H?"animate-spin text-primary-600":"text-gray-500 dark:text-gray-400 group-hover:text-primary-600"} transition-colors`})})]})]}),x.jsx(Ff,{visible:xe>0,percentage:xe})]}),x.jsx("main",{className:"flex-1 overflow-auto",children:x.jsx("div",{className:`mx-auto ${M.isDesktop?"px-8 py-8 max-w-7xl":M.isTablet?"px-6 py-6 max-w-4xl":"px-4 py-5 pb-24"}`,children:ne()})})]})]}),M.isMobile&&x.jsx("nav",{className:"fixed bottom-0 left-0 right-0 glass-strong border-t border-gray-200/50 dark:border-gray-700/50 pb-safe z-30 shadow-glass",children:x.jsx("div",{className:"max-w-lg mx-auto",children:x.jsxs("div",{className:"flex justify-around items-center h-16 px-2",children:[x.jsx(Ko,{icon:x.jsx(Cf,{size:22}),label:"Incio",isActive:e==="dashboard",onClick:()=>n("dashboard")}),x.jsx(Ko,{icon:x.jsx(hi,{size:22}),label:"Anlise",isActive:e==="analysis",onClick:()=>n("analysis")}),x.jsx(Ko,{icon:x.jsx(no,{size:22}),label:"Separao",isActive:e==="separation",onClick:()=>n("separation")}),x.jsx(Ko,{icon:x.jsx(Cs,{size:22}),label:"Financeiro",isActive:e==="financial",onClick:()=>n("financial")}),x.jsx(Ko,{icon:x.jsx(ua,{size:22}),label:"Histrico",isActive:e==="history",onClick:()=>n("history")})]})})})]})}function Ko({icon:e,label:n,isActive:s,onClick:c}){return x.jsxs("button",{onClick:c,className:`relative flex flex-col items-center justify-center w-full h-full transition-all duration-300 ${s?"text-primary-600 dark:text-primary-400":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"}`,children:[s&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"absolute -top-[1px] left-1/2 -translate-x-1/2 w-12 h-1 gradient-primary rounded-b-full shadow-lg shadow-primary-500/30"}),x.jsx("div",{className:"absolute inset-0 bg-primary-50/50 dark:bg-primary-900/10 rounded-2xl mx-2"})]}),x.jsx("div",{className:`relative z-10 transition-all duration-300 ${s?"scale-110 -translate-y-0.5":""}`,children:x.jsx("div",{className:`p-1.5 rounded-xl transition-all ${s?"bg-primary-100 dark:bg-primary-900/30":""}`,children:e})}),x.jsx("span",{className:`relative z-10 text-[10px] font-semibold mt-1 transition-all ${s?"font-bold":""}`,children:n})]})}function zf({icon:e,label:n,sublabel:s,color:c,onClick:h}){const g={green:"from-green-500 to-emerald-600 shadow-green-500/30",blue:"from-blue-500 to-indigo-600 shadow-blue-500/30",purple:"from-purple-500 to-indigo-600 shadow-purple-500/30"};return x.jsxs("button",{onClick:h,className:"group relative overflow-hidden",children:[x.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${g[c]} rounded-2xl shadow-lg transition-all group-hover:shadow-xl group-active:scale-95`}),x.jsxs("div",{className:"relative p-4 flex flex-col items-center text-center text-white",children:[x.jsx("div",{className:"w-10 h-10 mb-2 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:e}),x.jsx("p",{className:"font-bold text-sm",children:n}),x.jsx("p",{className:"text-[10px] text-white/70 font-medium",children:s})]})]})}function Uf({icon:e,label:n,value:s,color:c,isDisabled:h,onClick:g}){const _={green:"from-green-500 to-emerald-600 text-green-700 dark:text-green-400 bg-green-100 dark:bg-green-900/30",blue:"from-blue-500 to-indigo-600 text-blue-700 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30"};return x.jsxs("button",{onClick:g,disabled:h,className:`card-premium p-4 flex items-center gap-3 text-left transition-all active:scale-95 ${h?"opacity-50 cursor-not-allowed":""}`,children:[x.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${_[c].split("text-")[1]}`,children:e}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium mb-0.5",children:n}),x.jsx("p",{className:"font-bold text-lg text-gray-900 dark:text-white truncate",children:s})]})]})}function tu({icon:e,value:n,label:s}){return x.jsxs("div",{className:"py-4 text-center",children:[x.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-400 dark:text-gray-500 mb-2",children:[e,x.jsx("span",{className:"text-xs font-medium",children:s})]}),x.jsx("p",{className:"text-xl font-black text-gray-900 dark:text-white",children:n})]})}nu.createRoot(document.getElementById("root")).render(x.jsx(vl.StrictMode,{children:x.jsx(B2,{})}));
